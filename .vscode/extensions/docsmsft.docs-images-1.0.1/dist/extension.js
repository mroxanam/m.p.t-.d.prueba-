/*! For license information please see extension.js.LICENSE.txt */
(()=>{var __webpack_modules__={2878:(_,v,y)=>{"use strict";var b=y(4836);Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var x=b(y(8416)),T=b(y(784)),I=y(1567);var S=function decode(_){return function fromAGBR(_){return(0,I.scan)({bitmap:_},0,0,_.width,_.height,(function(v,y,b){var x=this.bitmap.data[b+0],T=this.bitmap.data[b+1],I=this.bitmap.data[b+2],S=this.bitmap.data[b+3];this.bitmap.data[b+0]=S,this.bitmap.data[b+1]=I,this.bitmap.data[b+2]=T,this.bitmap.data[b+3]=_.is_with_alpha?x:255})).bitmap}(T.default.decode(_))},M=function encode(_){return T.default.encode(function toAGBR(_){return(0,I.scan)(_,0,0,_.bitmap.width,_.bitmap.height,(function(_,v,y){var b=this.bitmap.data[y+0],x=this.bitmap.data[y+1],T=this.bitmap.data[y+2],I=this.bitmap.data[y+3];this.bitmap.data[y+0]=I,this.bitmap.data[y+1]=T,this.bitmap.data[y+2]=x,this.bitmap.data[y+3]=b})).bitmap}(_)).data};v.default=function _default(){var _,v;return{mime:(0,x.default)({},"image/bmp",["bmp"]),constants:{MIME_BMP:"image/bmp",MIME_X_MS_BMP:"image/x-ms-bmp"},decoders:(_={},(0,x.default)(_,"image/bmp",S),(0,x.default)(_,"image/x-ms-bmp",S),_),encoders:(v={},(0,x.default)(v,"image/bmp",M),(0,x.default)(v,"image/x-ms-bmp",M),v)}}},4096:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.srcOver=function srcOver(_,v){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;_.a*=y;var b=v.a+_.a-v.a*_.a,x=(_.r*_.a+v.r*v.a*(1-_.a))/b,T=(_.g*_.a+v.g*v.a*(1-_.a))/b,I=(_.b*_.a+v.b*v.a*(1-_.a))/b;return{r:x,g:T,b:I,a:b}},v.dstOver=function dstOver(_,v){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;_.a*=y;var b=v.a+_.a-v.a*_.a,x=(v.r*v.a+_.r*_.a*(1-v.a))/b,T=(v.g*v.a+_.g*_.a*(1-v.a))/b,I=(v.b*v.a+_.b*_.a*(1-v.a))/b;return{r:x,g:T,b:I,a:b}},v.multiply=function multiply(_,v){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;_.a*=y;var b=v.a+_.a-v.a*_.a,x=_.r*_.a,T=_.g*_.a,I=_.b*_.a,S=v.r*v.a,M=v.g*v.a,A=v.b*v.a,P=(x*S+x*(1-v.a)+S*(1-_.a))/b,O=(T*M+T*(1-v.a)+M*(1-_.a))/b,k=(I*A+I*(1-v.a)+A*(1-_.a))/b;return{r:P,g:O,b:k,a:b}},v.screen=function screen(_,v){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;_.a*=y;var b=v.a+_.a-v.a*_.a,x=_.r*_.a,T=_.g*_.a,I=_.b*_.a,S=v.r*v.a,M=v.g*v.a,A=v.b*v.a,P=(x*v.a+S*_.a-x*S+x*(1-v.a)+S*(1-_.a))/b,O=(T*v.a+M*_.a-T*M+T*(1-v.a)+M*(1-_.a))/b,k=(I*v.a+A*_.a-I*A+I*(1-v.a)+A*(1-_.a))/b;return{r:P,g:O,b:k,a:b}},v.overlay=function overlay(_,v){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;_.a*=y;var b=v.a+_.a-v.a*_.a,x=_.r*_.a,T=_.g*_.a,I=_.b*_.a,S=v.r*v.a,M=v.g*v.a,A=v.b*v.a,P=(2*S<=v.a?2*x*S+x*(1-v.a)+S*(1-_.a):x*(1+v.a)+S*(1+_.a)-2*S*x-v.a*_.a)/b,O=(2*M<=v.a?2*T*M+T*(1-v.a)+M*(1-_.a):T*(1+v.a)+M*(1+_.a)-2*M*T-v.a*_.a)/b,k=(2*A<=v.a?2*I*A+I*(1-v.a)+A*(1-_.a):I*(1+v.a)+A*(1+_.a)-2*A*I-v.a*_.a)/b;return{r:P,g:O,b:k,a:b}},v.darken=function darken(_,v){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;_.a*=y;var b=v.a+_.a-v.a*_.a,x=_.r*_.a,T=_.g*_.a,I=_.b*_.a,S=v.r*v.a,M=v.g*v.a,A=v.b*v.a,P=(Math.min(x*v.a,S*_.a)+x*(1-v.a)+S*(1-_.a))/b,O=(Math.min(T*v.a,M*_.a)+T*(1-v.a)+M*(1-_.a))/b,k=(Math.min(I*v.a,A*_.a)+I*(1-v.a)+A*(1-_.a))/b;return{r:P,g:O,b:k,a:b}},v.lighten=function lighten(_,v){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;_.a*=y;var b=v.a+_.a-v.a*_.a,x=_.r*_.a,T=_.g*_.a,I=_.b*_.a,S=v.r*v.a,M=v.g*v.a,A=v.b*v.a,P=(Math.max(x*v.a,S*_.a)+x*(1-v.a)+S*(1-_.a))/b,O=(Math.max(T*v.a,M*_.a)+T*(1-v.a)+M*(1-_.a))/b,k=(Math.max(I*v.a,A*_.a)+I*(1-v.a)+A*(1-_.a))/b;return{r:P,g:O,b:k,a:b}},v.hardLight=function hardLight(_,v){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;_.a*=y;var b=v.a+_.a-v.a*_.a,x=_.r*_.a,T=_.g*_.a,I=_.b*_.a,S=v.r*v.a,M=v.g*v.a,A=v.b*v.a,P=(2*x<=_.a?2*x*S+x*(1-v.a)+S*(1-_.a):x*(1+v.a)+S*(1+_.a)-2*S*x-v.a*_.a)/b,O=(2*T<=_.a?2*T*M+T*(1-v.a)+M*(1-_.a):T*(1+v.a)+M*(1+_.a)-2*M*T-v.a*_.a)/b,k=(2*I<=_.a?2*I*A+I*(1-v.a)+A*(1-_.a):I*(1+v.a)+A*(1+_.a)-2*A*I-v.a*_.a)/b;return{r:P,g:O,b:k,a:b}},v.difference=function difference(_,v){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;_.a*=y;var b=v.a+_.a-v.a*_.a,x=_.r*_.a,T=_.g*_.a,I=_.b*_.a,S=v.r*v.a,M=v.g*v.a,A=v.b*v.a,P=(x+S-2*Math.min(x*v.a,S*_.a))/b,O=(T+M-2*Math.min(T*v.a,M*_.a))/b,k=(I+A-2*Math.min(I*v.a,A*_.a))/b;return{r:P,g:O,b:k,a:b}},v.exclusion=function exclusion(_,v){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;_.a*=y;var b=v.a+_.a-v.a*_.a,x=_.r*_.a,T=_.g*_.a,I=_.b*_.a,S=v.r*v.a,M=v.g*v.a,A=v.b*v.a,P=(x*v.a+S*_.a-2*x*S+x*(1-v.a)+S*(1-_.a))/b,O=(T*v.a+M*_.a-2*T*M+T*(1-v.a)+M*(1-_.a))/b,k=(I*v.a+A*_.a-2*I*A+I*(1-v.a)+A*(1-_.a))/b;return{r:P,g:O,b:k,a:b}}},8859:(_,v,y)=>{"use strict";var b=y(5263);Object.defineProperty(v,"__esModule",{value:!0}),v.default=function composite(_,v,y){var b=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},S=arguments.length>4?arguments[4]:void 0;"function"==typeof b&&(S=b,b={});if(!(_ instanceof this.constructor))return x.throwError.call(this,"The source must be a Jimp image",S);if("number"!=typeof v||"number"!=typeof y)return x.throwError.call(this,"x and y must be numbers",S);var M=b,A=M.mode,P=M.opacitySource,O=M.opacityDest;A||(A=T.BLEND_SOURCE_OVER);("number"!=typeof P||P<0||P>1)&&(P=1);("number"!=typeof O||O<0||O>1)&&(O=1);var k=I[A];v=Math.round(v),y=Math.round(y);var R=this;1!==O&&R.opacity(O);_.scanQuiet(0,0,_.bitmap.width,_.bitmap.height,(function(_,b,x){var I=R.getPixelIndex(v+_,y+b,T.EDGE_CROP),S=k({r:this.bitmap.data[x+0]/255,g:this.bitmap.data[x+1]/255,b:this.bitmap.data[x+2]/255,a:this.bitmap.data[x+3]/255},{r:R.bitmap.data[I+0]/255,g:R.bitmap.data[I+1]/255,b:R.bitmap.data[I+2]/255,a:R.bitmap.data[I+3]/255},P);R.bitmap.data[I+0]=this.constructor.limit255(255*S.r),R.bitmap.data[I+1]=this.constructor.limit255(255*S.g),R.bitmap.data[I+2]=this.constructor.limit255(255*S.b),R.bitmap.data[I+3]=this.constructor.limit255(255*S.a)})),(0,x.isNodePattern)(S)&&S.call(this,null,this);return this};var x=y(1567),T=b(y(9215)),I=b(y(4096))},9215:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.EDGE_CROP=v.EDGE_WRAP=v.EDGE_EXTEND=v.BLEND_EXCLUSION=v.BLEND_DIFFERENCE=v.BLEND_HARDLIGHT=v.BLEND_LIGHTEN=v.BLEND_DARKEN=v.BLEND_OVERLAY=v.BLEND_SCREEN=v.BLEND_MULTIPLY=v.BLEND_DESTINATION_OVER=v.BLEND_SOURCE_OVER=v.VERTICAL_ALIGN_BOTTOM=v.VERTICAL_ALIGN_MIDDLE=v.VERTICAL_ALIGN_TOP=v.HORIZONTAL_ALIGN_RIGHT=v.HORIZONTAL_ALIGN_CENTER=v.HORIZONTAL_ALIGN_LEFT=v.AUTO=void 0;v.AUTO=-1;v.HORIZONTAL_ALIGN_LEFT=1;v.HORIZONTAL_ALIGN_CENTER=2;v.HORIZONTAL_ALIGN_RIGHT=4;v.VERTICAL_ALIGN_TOP=8;v.VERTICAL_ALIGN_MIDDLE=16;v.VERTICAL_ALIGN_BOTTOM=32;v.BLEND_SOURCE_OVER="srcOver";v.BLEND_DESTINATION_OVER="dstOver";v.BLEND_MULTIPLY="multiply";v.BLEND_SCREEN="screen";v.BLEND_OVERLAY="overlay";v.BLEND_DARKEN="darken";v.BLEND_LIGHTEN="lighten";v.BLEND_HARDLIGHT="hardLight";v.BLEND_DIFFERENCE="difference";v.BLEND_EXCLUSION="exclusion";v.EDGE_EXTEND=1;v.EDGE_WRAP=2;v.EDGE_CROP=3},5859:(_,v,y)=>{"use strict";var b=y(5263),x=y(4836);Object.defineProperty(v,"__esModule",{value:!0}),v.addConstants=addConstants,v.addJimpMethods=addJimpMethods,v.jimpEvMethod=jimpEvMethod,v.jimpEvChange=jimpEvChange,Object.defineProperty(v,"addType",{enumerable:!0,get:function get(){return ne.addType}}),v.default=void 0;for(var T=x(y(3515)),I=x(y(7424)),S=x(y(6690)),M=x(y(9728)),A=x(y(4993)),P=x(y(3808)),O=x(y(6115)),k=x(y(1655)),R=x(y(8416)),L=x(y(8698)),B=x(y(7147)),j=x(y(1017)),U=x(y(2361)),z=y(1567),G=x(y(964)),H=x(y(1890)),V=x(y(148)),$=x(y(8207)),K=x(y(3547)),ee=x(y(7967)),re=x(y(8859)),ie=x(y(4388)),ne=b(y(9658)),ae=y(5915),oe=b(y(9215)),se="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_",ce=[NaN,NaN],ue=2;ue<65;ue++){var pe=(0,G.default)(G.default.BIN,se.slice(0,ue))(new Array(65).join("1"));ce.push(pe.length)}function noop(){}function isArrayBuffer(_){return Object.prototype.toString.call(_).toLowerCase().indexOf("arraybuffer")>-1}function bufferFromArrayBuffer(_){for(var v=Buffer.alloc(_.byteLength),y=new Uint8Array(_),b=0;b<v.length;++b)v[b]=y[b];return v}function loadFromURL(_,v){(0,ee.default)(_,(function(y,b,x){if(y)return v(y);if("headers"in b&&"location"in b.headers)return _.url=b.headers.location,loadFromURL(_,v);if("object"===(0,L.default)(x)&&Buffer.isBuffer(x))return v(null,x);var T="Could not load Buffer from <"+_.url+"> (HTTP: "+b.statusCode+")";return new Error(T)}))}function loadBufferFromPath(_,v){B.default&&"function"==typeof B.default.readFile&&!_.match(/^(http|ftp)s?:\/\/./)?B.default.readFile(_,v):loadFromURL({url:_},v)}function isRawRGBAData(_){return _&&"object"===(0,L.default)(_)&&"number"==typeof _.width&&"number"==typeof _.height&&(Buffer.isBuffer(_.data)||_.data instanceof Uint8Array||"function"==typeof Uint8ClampedArray&&_.data instanceof Uint8ClampedArray)&&(_.data.length===_.width*_.height*4||_.data.length===_.width*_.height*3)}function makeRGBABufferFromRGB(_){if(_.length%3!=0)throw new Error("Buffer length is incorrect");for(var v=Buffer.allocUnsafe(_.length/3*4),y=0,b=0;b<_.length;b++)v[y]=_[b],(b+1)%3==0&&(v[++y]=255),y++;return v}var he,de={data:null,width:null,height:null},fe=function(_){function Jimp(){for(var _,v=arguments.length,y=new Array(v),b=0;b<v;b++)y[b]=arguments[b];(0,S.default)(this,Jimp),_=(0,A.default)(this,(0,P.default)(Jimp).call(this)),(0,R.default)((0,O.default)(_),"bitmap",de),(0,R.default)((0,O.default)(_),"_background",0),(0,R.default)((0,O.default)(_),"_originalMime",Jimp.MIME_PNG),(0,R.default)((0,O.default)(_),"_exif",null),(0,R.default)((0,O.default)(_),"_rgba",!0),(0,R.default)((0,O.default)(_),"writeAsync",(function(v){return(0,ie.default)(_.write,(0,O.default)(_),v)})),(0,R.default)((0,O.default)(_),"getBase64Async",(function(v){return(0,ie.default)(_.getBase64,(0,O.default)(_),v)})),(0,R.default)((0,O.default)(_),"getBuffer",ae.getBuffer),(0,R.default)((0,O.default)(_),"getBufferAsync",ae.getBufferAsync),(0,R.default)((0,O.default)(_),"getPixelColour",_.getPixelColor),(0,R.default)((0,O.default)(_),"setPixelColour",_.setPixelColor);var x=(0,O.default)(_),T=noop;function finish(){for(var _=arguments.length,v=new Array(_),y=0;y<_;y++)v[y]=arguments[y];var b=v[0],I=b||{};I.methodName="constructor",setTimeout((function(){var _;b&&T===noop?x.emitError("constructor",b):b||x.emitMulti("constructor","initialized"),(_=T).call.apply(_,[x].concat(v))}),1)}if(isArrayBuffer(y[0])&&(y[0]=bufferFromArrayBuffer(y[0])),"number"==typeof y[0]&&"number"==typeof y[1]||parseInt(y[0],10)&&parseInt(y[1],10)){var I=parseInt(y[0],10),M=parseInt(y[1],10);if(T=y[2],"number"==typeof y[2]&&(_._background=y[2],T=y[3]),"string"==typeof y[2]&&(_._background=Jimp.cssColorToHex(y[2]),T=y[3]),void 0===T&&(T=noop),"function"!=typeof T)return(0,A.default)(_,z.throwError.call((0,O.default)(_),"cb must be a function",finish));_.bitmap={data:Buffer.alloc(I*M*4),width:I,height:M};for(var k=0;k<_.bitmap.data.length;k+=4)_.bitmap.data.writeUInt32BE(_._background,k);finish(null,(0,O.default)(_))}else if("object"===(0,L.default)(y[0])&&y[0].url){if("function"!=typeof(T=y[1]||noop))return(0,A.default)(_,z.throwError.call((0,O.default)(_),"cb must be a function",finish));loadFromURL(y[0],(function(v,b){if(v)return z.throwError.call((0,O.default)(_),v,finish);_.parseBitmap(b,y[0].url,finish)}))}else if(y[0]instanceof Jimp){var B=y[0];if(void 0===(T=y[1])&&(T=noop),"function"!=typeof T)return(0,A.default)(_,z.throwError.call((0,O.default)(_),"cb must be a function",finish));_.bitmap={data:Buffer.from(B.bitmap.data),width:B.bitmap.width,height:B.bitmap.height},_._quality=B._quality,_._deflateLevel=B._deflateLevel,_._deflateStrategy=B._deflateStrategy,_._filterType=B._filterType,_._rgba=B._rgba,_._background=B._background,_._originalMime=B._originalMime,finish(null,(0,O.default)(_))}else if(isRawRGBAData(y[0])){var j=y[0];T=y[1]||noop;var U=j.width*j.height*4===j.data.length,G=U?Buffer.from(j.data):makeRGBABufferFromRGB(j.data);_.bitmap={data:G,width:j.width,height:j.height},finish(null,(0,O.default)(_))}else if("string"==typeof y[0]){var H=y[0];if(void 0===(T=y[1])&&(T=noop),"function"!=typeof T)return(0,A.default)(_,z.throwError.call((0,O.default)(_),"cb must be a function",finish));loadBufferFromPath(H,(function(v,y){if(v)return z.throwError.call((0,O.default)(_),v,finish);_.parseBitmap(y,H,finish)}))}else if("object"===(0,L.default)(y[0])&&Buffer.isBuffer(y[0])){var V=y[0];if("function"!=typeof(T=y[1]))return(0,A.default)(_,z.throwError.call((0,O.default)(_),"cb must be a function",finish));_.parseBitmap(V,null,finish)}else{"function"!=typeof(T=y[y.length-1])&&"function"!=typeof(T=y[y.length-2])&&(T=noop);var $=Jimp.__extraConstructors.find((function(_){return _.test.apply(_,y)}));if(!$)return(0,A.default)(_,z.throwError.call((0,O.default)(_),"No matching constructor overloading was found. Please see the docs for how to call the Jimp constructor.",finish));new Promise((function(v,b){var x;return(x=$.run).call.apply(x,[(0,O.default)(_),v,b].concat(y))})).then((function(){return finish(null,(0,O.default)(_))})).catch(finish)}return _}return(0,k.default)(Jimp,_),(0,M.default)(Jimp,[{key:"parseBitmap",value:function parseBitmap(_,v,y){ae.parseBitmap.call(this,_,null,y)}},{key:"rgba",value:function rgba(_,v){return"boolean"!=typeof _?z.throwError.call(this,"bool must be a boolean, true for RGBA or false for RGB",v):(this._rgba=_,(0,z.isNodePattern)(v)&&v.call(this,null,this),this)}},{key:"emitMulti",value:function emitMulti(_,v){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};y=Object.assign(y,{methodName:_,eventName:v}),this.emit("any",y),_&&this.emit(_,y),this.emit(v,y)}},{key:"emitError",value:function emitError(_,v){this.emitMulti(_,"error",v)}},{key:"getHeight",value:function getHeight(){return this.bitmap.height}},{key:"getWidth",value:function getWidth(){return this.bitmap.width}},{key:"inspect",value:function inspect(){return"<Jimp "+(this.bitmap===de?"pending...":this.bitmap.width+"x"+this.bitmap.height)+">"}},{key:"toString",value:function toString(){return"[object Jimp]"}},{key:"getMIME",value:function getMIME(){return this._originalMime||Jimp.MIME_PNG}},{key:"getExtension",value:function getExtension(){var _=this.getMIME();return ne.getExtension(_)}},{key:"write",value:function write(_,v){var y=this;if(!B.default||!B.default.createWriteStream)throw new Error("Cant access the filesystem. You can use the getBase64 method.");if("string"!=typeof _)return z.throwError.call(this,"path must be a string",v);if(void 0===v&&(v=noop),"function"!=typeof v)return z.throwError.call(this,"cb must be a function",v);var b=ne.getType(_)||this.getMIME(),x=j.default.parse(_);return x.dir&&H.default.sync(x.dir),this.getBuffer(b,(function(b,x){if(b)return z.throwError.call(y,b,v);var T=B.default.createWriteStream(_);T.on("open",(function(){T.write(x),T.end()})).on("error",(function(_){return z.throwError.call(y,_,v)})),T.on("finish",(function(){v.call(y,null,y)}))})),this}},{key:"getBase64",value:function getBase64(_,v){return _===Jimp.AUTO&&(_=this.getMIME()),"string"!=typeof _?z.throwError.call(this,"mime must be a string",v):"function"!=typeof v?z.throwError.call(this,"cb must be a function",v):(this.getBuffer(_,(function(y,b){if(y)return z.throwError.call(this,y,v);var x="data:"+_+";base64,"+b.toString("base64");v.call(this,null,x)})),this)}},{key:"hash",value:function hash(_,v){if("function"==typeof(_=_||64)&&(v=_,_=64),"number"!=typeof _)return z.throwError.call(this,"base must be a number",v);if(_<2||_>64)return z.throwError.call(this,"base must be a number between 2 and 64",v);var hash=this.pHash();for(hash=(0,G.default)(G.default.BIN,se.slice(0,_))(hash);hash.length<ce[_];)hash="0"+hash;return(0,z.isNodePattern)(v)&&v.call(this,null,hash),hash}},{key:"pHash",value:function pHash(){var pHash=new K.default;return pHash.getHash(this)}},{key:"distanceFromHash",value:function distanceFromHash(_){var v=new K.default,y=v.getHash(this);return v.distance(y,_)}},{key:"getPixelIndex",value:function getPixelIndex(_,v,y,b){var x,T;if("function"==typeof y&&void 0===b&&(b=y,y=null),y||(y=Jimp.EDGE_EXTEND),"number"!=typeof _||"number"!=typeof v)return z.throwError.call(this,"x and y must be numbers",b);x=_=Math.round(_),T=v=Math.round(v),y===Jimp.EDGE_EXTEND&&(_<0&&(x=0),_>=this.bitmap.width&&(x=this.bitmap.width-1),v<0&&(T=0),v>=this.bitmap.height&&(T=this.bitmap.height-1)),y===Jimp.EDGE_WRAP&&(_<0&&(x=this.bitmap.width+_),_>=this.bitmap.width&&(x=_%this.bitmap.width),v<0&&(x=this.bitmap.height+v),v>=this.bitmap.height&&(T=v%this.bitmap.height));var I=this.bitmap.width*T+x<<2;return(x<0||x>=this.bitmap.width)&&(I=-1),(T<0||T>=this.bitmap.height)&&(I=-1),(0,z.isNodePattern)(b)&&b.call(this,null,I),I}},{key:"getPixelColor",value:function getPixelColor(_,v,y){if("number"!=typeof _||"number"!=typeof v)return z.throwError.call(this,"x and y must be numbers",y);_=Math.round(_),v=Math.round(v);var b=this.getPixelIndex(_,v),x=this.bitmap.data.readUInt32BE(b);return(0,z.isNodePattern)(y)&&y.call(this,null,x),x}},{key:"setPixelColor",value:function setPixelColor(_,v,y,b){if("number"!=typeof _||"number"!=typeof v||"number"!=typeof y)return z.throwError.call(this,"hex, x and y must be numbers",b);v=Math.round(v),y=Math.round(y);var x=this.getPixelIndex(v,y);return this.bitmap.data.writeUInt32BE(_,x),(0,z.isNodePattern)(b)&&b.call(this,null,this),this}},{key:"hasAlpha",value:function hasAlpha(){for(var _=0;_<this.bitmap.height;_++)for(var v=0;v<this.bitmap.width;v++){var y=this.bitmap.width*_+v<<2;if(255!==this.bitmap.data[y+3])return!0}return!1}},{key:"scanIterator",value:function scanIterator(_,v,y,b){return"number"!=typeof _||"number"!=typeof v?z.throwError.call(this,"x and y must be numbers"):"number"!=typeof y||"number"!=typeof b?z.throwError.call(this,"w and h must be numbers"):(0,z.scanIterator)(this,_,v,y,b)}}]),Jimp}(U.default);function addConstants(_){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fe;Object.entries(_).forEach((function(_){var y=(0,I.default)(_,2),b=y[0],x=y[1];v[b]=x}))}function addJimpMethods(_){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fe;Object.entries(_).forEach((function(_){var y=(0,I.default)(_,2),b=y[0],x=y[1];v.prototype[b]=x}))}function jimpEvMethod(_,v,y){var b="before-"+v,x=v.replace(/e$/,"")+"ed";fe.prototype[_]=function(){for(var v,T=arguments.length,I=new Array(T),S=0;S<T;S++)I[S]=arguments[S];var M,A=I[y.length-1],P=this;"function"==typeof A?(v=function wrappedCb(){for(var v=arguments.length,y=new Array(v),b=0;b<v;b++)y[b]=arguments[b];var T=y[0],I=y[1];T?P.emitError(_,T):P.emitMulti(_,x,(0,R.default)({},_,I)),A.apply(this,y)},I[I.length-1]=v):v=!1,this.emitMulti(_,b);try{M=y.apply(this,I),v||this.emitMulti(_,x,(0,R.default)({},_,M))}catch(v){v.methodName=_,this.emitError(_,v)}return M},fe.prototype[_+"Quiet"]=y}function jimpEvChange(_,v){jimpEvMethod(_,"change",v)}(addConstants(oe),addJimpMethods({composite:re.default}),fe.__extraConstructors=[],fe.appendConstructorOption=function(_,v,y){fe.__extraConstructors.push({name:_,test:v,run:y})},fe.read=function(){for(var _=arguments.length,v=new Array(_),y=0;y<_;y++)v[y]=arguments[y];return new Promise((function(_,y){(0,T.default)(fe,v.concat([function(v,b){v?y(v):_(b)}]))}))},fe.create=fe.read,fe.rgbaToInt=function(_,v,y,b,x){if("number"!=typeof _||"number"!=typeof v||"number"!=typeof y||"number"!=typeof b)return z.throwError.call(this,"r, g, b and a must be numbers",x);if(_<0||_>255)return z.throwError.call(this,"r must be between 0 and 255",x);if((v<0||v>255)&&z.throwError.call(this,"g must be between 0 and 255",x),y<0||y>255)return z.throwError.call(this,"b must be between 0 and 255",x);if(b<0||b>255)return z.throwError.call(this,"a must be between 0 and 255",x);_=Math.round(_),y=Math.round(y),v=Math.round(v),b=Math.round(b);var T=_*Math.pow(256,3)+v*Math.pow(256,2)+y*Math.pow(256,1)+b*Math.pow(256,0);return(0,z.isNodePattern)(x)&&x.call(this,null,T),T},fe.intToRGBA=function(_,v){if("number"!=typeof _)return z.throwError.call(this,"i must be a number",v);var y={};return y.r=Math.floor(_/Math.pow(256,3)),y.g=Math.floor((_-y.r*Math.pow(256,3))/Math.pow(256,2)),y.b=Math.floor((_-y.r*Math.pow(256,3)-y.g*Math.pow(256,2))/Math.pow(256,1)),y.a=Math.floor((_-y.r*Math.pow(256,3)-y.g*Math.pow(256,2)-y.b*Math.pow(256,1))/Math.pow(256,0)),(0,z.isNodePattern)(v)&&v.call(this,null,y),y},fe.cssColorToHex=function(_){return"number"==typeof(_=_||0)?Number(_):parseInt((0,$.default)(_).toHex8(),16)},fe.limit255=function(_){return _=Math.max(_,0),_=Math.min(_,255)},fe.diff=function(_,v){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1;if(!(_ instanceof fe&&v instanceof fe))return z.throwError.call(this,"img1 and img2 must be an Jimp images");var b=_.bitmap,x=v.bitmap;if(b.width===x.width&&b.height===x.height||(b.width*b.height>x.width*x.height?_=_.cloneQuiet().resize(x.width,x.height):v=v.cloneQuiet().resize(b.width,b.height)),"number"!=typeof y||y<0||y>1)return z.throwError.call(this,"threshold must be a number between 0 and 1");var T=new fe(b.width,b.height,4294967295),I=(0,V.default)(b.data,x.data,T.bitmap.data,T.bitmap.width,T.bitmap.height,{threshold:y});return{percent:I/(T.bitmap.width*T.bitmap.height),image:T}},fe.distance=function(_,v){var y=new K.default,b=y.getHash(_),x=y.getHash(v);return y.distance(b,x)},fe.compareHashes=function(_,v){return(new K.default).distance(_,v)},fe.colorDiff=function(_,v){var y=function pow(_){return Math.pow(_,2)},b=Math.max;return 0===_.a||_.a||(_.a=255),0===v.a||v.a||(v.a=255),(b(y(_.r-v.r),y(_.r-v.r-_.a+v.a))+b(y(_.g-v.g),y(_.g-v.g-_.a+v.a))+b(y(_.b-v.b),y(_.b-v.b-_.a+v.a)))/195075},jimpEvMethod("clone","clone",(function(_){var v=new fe(this);return(0,z.isNodePattern)(_)&&_.call(v,null,v),v})),jimpEvChange("background",(function(_,v){return"number"!=typeof _?z.throwError.call(this,"hex must be a hexadecimal rgba value",v):(this._background=_,(0,z.isNodePattern)(v)&&v.call(this,null,this),this)})),jimpEvChange("scan",(function(_,v,y,b,x,T){if("number"!=typeof _||"number"!=typeof v)return z.throwError.call(this,"x and y must be numbers",T);if("number"!=typeof y||"number"!=typeof b)return z.throwError.call(this,"w and h must be numbers",T);if("function"!=typeof x)return z.throwError.call(this,"f must be a function",T);var I=(0,z.scan)(this,_,v,y,b,x);return(0,z.isNodePattern)(T)&&T.call(this,null,I),I})),"BROWSER"===process.env.ENVIRONMENT)&&("undefined"!=typeof window&&"object"===("undefined"==typeof window?"undefined":(0,L.default)(window))&&(he=window),"undefined"!=typeof self&&"object"===("undefined"==typeof self?"undefined":(0,L.default)(self))&&(he=self),he.Jimp=fe,he.Buffer=Buffer);var me=fe;v.default=me},3547:_=>{"use strict";function ImagePHash(_,y){this.size=this.size||_,this.smallerSize=this.smallerSize||y,function initCoefficients(_){for(var y=1;y<_;y++)v[y]=1;v[0]=1/Math.sqrt(2)}(this.size)}function intToRGBA(_){var v={};return v.r=Math.floor(_/Math.pow(256,3)),v.g=Math.floor((_-v.r*Math.pow(256,3))/Math.pow(256,2)),v.b=Math.floor((_-v.r*Math.pow(256,3)-v.g*Math.pow(256,2))/Math.pow(256,1)),v.a=Math.floor((_-v.r*Math.pow(256,3)-v.g*Math.pow(256,2)-v.b*Math.pow(256,1))/Math.pow(256,0)),v}ImagePHash.prototype.size=32,ImagePHash.prototype.smallerSize=8,ImagePHash.prototype.distance=function(_,v){for(var y=0,b=0;b<_.length;b++)_[b]!==v[b]&&y++;return y/_.length},ImagePHash.prototype.getHash=function(_){(_=_.clone().resize(this.size,this.size)).grayscale();for(var y=[],b=0;b<_.bitmap.width;b++){y[b]=[];for(var x=0;x<_.bitmap.height;x++)y[b][x]=intToRGBA(_.getPixelColor(b,x)).b}for(var T=function applyDCT(_,y){for(var b=y,x=[],T=0;T<b;T++){x[T]=[];for(var I=0;I<b;I++){for(var S=0,M=0;M<b;M++)for(var A=0;A<b;A++)S+=Math.cos((2*M+1)/(2*b)*T*Math.PI)*Math.cos((2*A+1)/(2*b)*I*Math.PI)*_[M][A];S*=v[T]*v[I]/4,x[T][I]=S}}return x}(y,this.size),I=0,S=0;S<this.smallerSize;S++)for(var M=0;M<this.smallerSize;M++)I+=T[S][M];for(var A=I/(this.smallerSize*this.smallerSize),P="",O=0;O<this.smallerSize;O++)for(var k=0;k<this.smallerSize;k++)P+=T[O][k]>A?"1":"0";return P};var v=[];_.exports=ImagePHash},7967:(_,v,y)=>{"use strict";var b=y(4836),x=b(y(8416)),T=b(y(434));function ownKeys(_,v){var y=Object.keys(_);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(_);v&&(b=b.filter((function(v){return Object.getOwnPropertyDescriptor(_,v).enumerable}))),y.push.apply(y,b)}return y}process.browser||"BROWSER"===process.env.ENVIRONMENT||void 0!==process.versions.electron&&"renderer"===process.type&&"function"==typeof XMLHttpRequest?_.exports=function(_,v){var y=new XMLHttpRequest;y.open("GET",_.url,!0),y.responseType="arraybuffer",y.addEventListener("load",(function(){if(y.status<400)try{var b=Buffer.from(this.response);v(null,y,b)}catch(y){return v(new Error("Response is not a buffer for url "+_.url+". Error: "+y.message))}else v(new Error("HTTP Status "+y.status+" for url "+_.url))})),y.addEventListener("error",(function(_){v(_)})),y.send()}:_.exports=function(_,v){var b=(0,T.default)({},_);y(193)(function _objectSpread(_){for(var v=1;v<arguments.length;v++){var y=null!=arguments[v]?arguments[v]:{};v%2?ownKeys(y,!0).forEach((function(v){(0,x.default)(_,v,y[v])})):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(y)):ownKeys(y).forEach((function(v){Object.defineProperty(_,v,Object.getOwnPropertyDescriptor(y,v))}))}return _}({compression:!0},b),(function(_,y){null===_?v(null,y,y.body):v(_)}))}},5915:(_,v,y)=>{"use strict";var b=y(5263),x=y(4836);Object.defineProperty(v,"__esModule",{value:!0}),v.parseBitmap=function parseBitmap(_,v,y){var b=function getMIMEFromBuffer(_,v){var y=(0,I.default)(_);if(y)return y.mime;if(v)return P.getType(v);return null}(_,v);if("string"!=typeof b)return y(new Error("Could not find MIME for Buffer <"+v+">"));this._originalMime=b.toLowerCase();try{var x=this.getMIME();if(!this.constructor.decoders[x])return M.throwError.call(this,"Unsupported MIME type: "+x,y);this.bitmap=this.constructor.decoders[x](_)}catch(_){return y.call(this,_,this)}try{this._exif=S.default.create(_).parse(),function exifRotate(_){if(getExifOrientation(_)<2)return;var v=function getExifOrientationTransformation(_){var v=_.getWidth(),y=_.getHeight();switch(getExifOrientation(_)){case 1:return null;case 2:return function(_,y){return[v-_-1,y]};case 3:return function(_,b){return[v-_-1,y-b-1]};case 4:return function(_,v){return[_,y-v-1]};case 5:return function(_,v){return[v,_]};case 6:return function(_,v){return[v,y-_-1]};case 7:return function(_,b){return[v-b-1,y-_-1]};case 8:return function(_,y){return[v-y-1,_]};default:return null}}(_),y=getExifOrientation(_)>4,b=y?_.bitmap.height:_.bitmap.width,x=y?_.bitmap.width:_.bitmap.height;!function transformBitmap(_,v,y,b){for(var x=_.bitmap.data,I=_.bitmap.width,S=Buffer.alloc(x.length),M=0;M<v;M++)for(var A=0;A<y;A++){var P=b(M,A),O=(0,T.default)(P,2),k=O[0],R=O[1],L=v*A+M<<2,B=I*R+k<<2,j=x.readUInt32BE(B);S.writeUInt32BE(j,L)}_.bitmap.data=S,_.bitmap.width=v,_.bitmap.height=y}(_,b,x,v)}(this)}catch(_){}return y.call(this,null,this),this},v.getBuffer=getBuffer,v.getBufferAsync=function getBufferAsync(_){return(0,O.default)(getBuffer,this,_)};var T=x(y(7424)),I=x(y(7938)),S=x(y(2594)),M=y(1567),A=b(y(9215)),P=b(y(9658)),O=x(y(4388));function getExifOrientation(_){return _._exif&&_._exif.tags&&_._exif.tags.Orientation||1}function getBuffer(_,v){if(_===A.AUTO&&(_=this.getMIME()),"string"!=typeof _)return M.throwError.call(this,"mime must be a string",v);if("function"!=typeof v)return M.throwError.call(this,"cb must be a function",v);if(_=_.toLowerCase(),this._rgba&&this.constructor.hasAlpha[_]?this.bitmap.data=Buffer.from(this.bitmap.data):this.bitmap.data=function compositeBitmapOverBackground(_,v){return new _(v.bitmap.width,v.bitmap.height,v._background).composite(v,0,0).bitmap}(this.constructor,this).data,this.constructor.encoders[_]){var y=this.constructor.encoders[_](this);v.call(this,null,y)}else v.call(this,"Unsupported MIME type: "+_);return this}},9658:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.getExtension=v.getType=v.addType=void 0;var y={};v.addType=function addType(_,v){y[_]=v};v.getType=function getType(_){var v=_.split("/").slice(-1);return function findType(_){return Object.entries(y).find((function(v){return v[1].includes(_)}))||[]}(v[v.length-1].split(".").pop())[0]};v.getExtension=function getExtension(_){return(y[_.toLowerCase()]||[])[0]}},4388:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var y=function promisify(_,v){for(var y=arguments.length,b=new Array(y>2?y-2:0),x=2;x<y;x++)b[x-2]=arguments[x];return new Promise((function(y,x){b.push((function(_,v){_&&x(_),y(v)})),_.bind(v).apply(void 0,b)}))};v.default=y},7938:_=>{"use strict";const toBytes=_=>[..._].map(_=>_.charCodeAt(0)),v=toBytes("META-INF/mozilla.rsa"),y=toBytes("[Content_Types].xml"),b=toBytes("_rels/.rels");_.exports=_=>{const x=_ instanceof Uint8Array?_:new Uint8Array(_);if(!(x&&x.length>1))return null;const check=(_,v)=>{v=Object.assign({offset:0},v);for(let y=0;y<_.length;y++)if(v.mask){if(_[y]!==(v.mask[y]&x[y+v.offset]))return!1}else if(_[y]!==x[y+v.offset])return!1;return!0},checkString=(_,v)=>check(toBytes(_),v);if(check([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(check([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(check([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(check([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((check([73,73,42,0])||check([77,77,0,42]))&&check([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(check([73,73,42,0])||check([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(check([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(check([80,75,3,4])){if(check([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(check(v,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(checkString("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(checkString("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(checkString("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};const findNextZipHeaderIndex=(_,v=0)=>_.findIndex((_,y,b)=>y>=v&&80===b[y]&&75===b[y+1]&&3===b[y+2]&&4===b[y+3]);let _=0,T=!1,I=null;do{const v=_+30;if(T||(T=check(y,{offset:v})||check(b,{offset:v})),I||(checkString("word/",{offset:v})?I={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:checkString("ppt/",{offset:v})?I={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:checkString("xl/",{offset:v})&&(I={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),T&&I)return I;_=findNextZipHeaderIndex(x,v)}while(_>=0);if(I)return I}if(check([80,75])&&(3===x[2]||5===x[2]||7===x[2])&&(4===x[3]||6===x[3]||8===x[3]))return{ext:"zip",mime:"application/zip"};if(check([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(check([82,97,114,33,26,7])&&(0===x[6]||1===x[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(check([51,103,112,53])||check([0,0,0])&&check([102,116,121,112],{offset:4})&&(check([109,112,52,49],{offset:8})||check([109,112,52,50],{offset:8})||check([105,115,111,109],{offset:8})||check([105,115,111,50],{offset:8})||check([109,109,112,52],{offset:8})||check([77,52,86],{offset:8})||check([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(check([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(check([26,69,223,163])){const _=x.subarray(4,4100),v=_.findIndex((_,v,y)=>66===y[v]&&130===y[v+1]);if(-1!==v){const y=v+3,findDocType=v=>[...v].every((v,b)=>_[y+b]===v.charCodeAt(0));if(findDocType("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(findDocType("webm"))return{ext:"webm",mime:"video/webm"}}}if(check([0,0,0,20,102,116,121,112,113,116,32,32])||check([102,114,101,101],{offset:4})||check([102,116,121,112,113,116,32,32],{offset:4})||check([109,100,97,116],{offset:4})||check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(check([82,73,70,70])){if(check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(check([48,38,178,117,142,102,207,17,166,217]))return{ext:"wmv",mime:"video/x-ms-wmv"};if(check([0,0,1,186])||check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(check([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(let _=0;_<2&&_<x.length-16;_++){if(check([73,68,51],{offset:_})||check([255,226],{offset:_,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(check([255,228],{offset:_,mask:[255,228]}))return{ext:"mp2",mime:"audio/mpeg"};if(check([255,248],{offset:_,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(check([255,240],{offset:_,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(check([102,116,121,112,77,52,65],{offset:4})||check([77,52,65,32]))return{ext:"m4a",mime:"audio/mp4"};if(check([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(check([79,103,103,83]))return check([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:check([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:check([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:check([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:check([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(check([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(check([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(check([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(check([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(check([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((67===x[0]||70===x[0])&&check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(check([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(check([119,79,70,70])&&(check([0,1,0,0],{offset:4})||check([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(check([119,79,70,50])&&(check([0,1,0,0],{offset:4})||check([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(check([76,80],{offset:34})&&(check([0,0,1],{offset:8})||check([1,0,2],{offset:8})||check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(check([37,33]))return{ext:"ps",mime:"application/postscript"};if(check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(check([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(check([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(check([77,83,67,70])||check([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(check([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(check([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(check([31,160])||check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(check([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(check([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(check([71],{offset:4})&&(check([71],{offset:192})||check([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(check([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(check([0,0,0,12,106,80,32,32,13,10,135,10])){if(check([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(check([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(check([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(check([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(check([70,79,82,77,0]))return{ext:"aif",mime:"audio/aiff"};if(checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(check([102,116,121,112],{offset:4})){if(check([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(check([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(check([104,101,105,99],{offset:8})||check([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(check([104,101,118,99],{offset:8})||check([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return check([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:null}},3006:(_,v,y)=>{"use strict";var b=y(5263),x=y(4836);Object.defineProperty(v,"__esModule",{value:!0}),v.default=function configure(_){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.default,y={hasAlpha:{},encoders:{},decoders:{},class:{},constants:{}};function addToConfig(_){Object.entries(_).forEach((function(_){var v=(0,S.default)(_,2),b=v[0],x=v[1];y[b]=_objectSpread({},y[b],{},x)}))}function addImageType(_){var v=_();Array.isArray(v.mime)?M.addType.apply(void 0,(0,T.default)(v.mime)):Object.entries(v.mime).forEach((function(_){return M.addType.apply(void 0,(0,T.default)(_))})),delete v.mime,addToConfig(v)}function addPlugin(_){var v=_(M.jimpEvChange)||{};v.class||v.constants?addToConfig(v):addToConfig({class:v})}_.types&&(_.types.forEach(addImageType),v.decoders=_objectSpread({},v.decoders,{},y.decoders),v.encoders=_objectSpread({},v.encoders,{},y.encoders),v.hasAlpha=_objectSpread({},v.hasAlpha,{},y.hasAlpha));_.plugins&&_.plugins.forEach(addPlugin);return(0,M.addJimpMethods)(y.class,v),(0,M.addConstants)(y.constants,v),M.default};var T=x(y(861)),I=x(y(8416)),S=x(y(7424)),M=b(y(5859));function ownKeys(_,v){var y=Object.keys(_);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(_);v&&(b=b.filter((function(v){return Object.getOwnPropertyDescriptor(_,v).enumerable}))),y.push.apply(y,b)}return y}function _objectSpread(_){for(var v=1;v<arguments.length;v++){var y=null!=arguments[v]?arguments[v]:{};v%2?ownKeys(y,!0).forEach((function(v){(0,I.default)(_,v,y[v])})):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(y)):ownKeys(y).forEach((function(v){Object.defineProperty(_,v,Object.getOwnPropertyDescriptor(y,v))}))}return _}},2744:(_,v,y)=>{"use strict";var b=y(4836);Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var x=b(y(8416)),T=b(y(1494)),I=y(1702);v.default=function _default(){return{mime:(0,x.default)({},"image/gif",["gif"]),constants:{MIME_GIF:"image/gif"},decoders:(0,x.default)({},"image/gif",(function(_){var v=new T.default.GifReader(_),y=Buffer.alloc(v.width*v.height*4);return v.decodeAndBlitFrameRGBA(0,y),{data:y,width:v.width,height:v.height}})),encoders:(0,x.default)({},"image/gif",(function(_){var v=new I.BitmapImage(_.bitmap);I.GifUtil.quantizeDekker(v,256);var y=new I.GifFrame(v);return(new I.GifCodec).encodeGif([y],{}).then((function(_){return _.buffer}))}))}}},3853:(_,v,y)=>{"use strict";var b=y(4836);Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var x=b(y(8416)),T=b(y(7870)),I=y(1567);v.default=function _default(){return{mime:(0,x.default)({},"image/jpeg",["jpeg","jpg","jpe"]),constants:{MIME_JPEG:"image/jpeg"},decoders:(0,x.default)({},"image/jpeg",T.default.decode),encoders:(0,x.default)({},"image/jpeg",(function(_){return T.default.encode(_.bitmap,_._quality).data})),class:{_quality:100,quality:function quality(_,v){return"number"!=typeof _?I.throwError.call(this,"n must be a number",v):_<0||_>100?I.throwError.call(this,"n must be a number 0 - 100",v):(this._quality=Math.round(_),(0,I.isNodePattern)(v)&&v.call(this,null,this),this)}}}}},2260:(_,v,y)=>{"use strict";var b=y(4836);Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var x=b(y(8698)),T=y(1567);v.default=function _default(){return{blit:function blit(_,v,y,b,I,S,M,A){if(!(_ instanceof this.constructor))return T.throwError.call(this,"The source must be a Jimp image",A);if("number"!=typeof v||"number"!=typeof y)return T.throwError.call(this,"x and y must be numbers",A);if("function"==typeof b)A=b,b=0,I=0,S=_.bitmap.width,M=_.bitmap.height;else{if((0,x.default)(b)!==(0,x.default)(I)||(0,x.default)(I)!==(0,x.default)(S)||(0,x.default)(S)!==(0,x.default)(M))return T.throwError.call(this,"srcx, srcy, srcw, srch must be numbers",A);b=b||0,I=I||0,S=S||_.bitmap.width,M=M||_.bitmap.height}v=Math.round(v),y=Math.round(y),b=Math.round(b),I=Math.round(I),S=Math.round(S),M=Math.round(M);var P=this.bitmap.width,O=this.bitmap.height,k=this;return _.scanQuiet(b,I,S,M,(function(_,x,T){var S=v+_-b,M=y+x-I;if(S>=0&&M>=0&&P-S>0&&O-M>0){var A=k.getPixelIndex(S,M),R={r:this.bitmap.data[T],g:this.bitmap.data[T+1],b:this.bitmap.data[T+2],a:this.bitmap.data[T+3]},L={r:k.bitmap.data[A],g:k.bitmap.data[A+1],b:k.bitmap.data[A+2],a:k.bitmap.data[A+3]};k.bitmap.data[A]=(R.a*(R.r-L.r)-L.r+255>>8)+L.r,k.bitmap.data[A+1]=(R.a*(R.g-L.g)-L.g+255>>8)+L.g,k.bitmap.data[A+2]=(R.a*(R.b-L.b)-L.b+255>>8)+L.b,k.bitmap.data[A+3]=this.constructor.limit255(L.a+R.a)}})),(0,T.isNodePattern)(A)&&A.call(this,null,this),this}}}},2430:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.shgTable=v.mulTable=void 0;v.mulTable=[1,57,41,21,203,34,97,73,227,91,149,62,105,45,39,137,241,107,3,173,39,71,65,238,219,101,187,87,81,151,141,133,249,117,221,209,197,187,177,169,5,153,73,139,133,127,243,233,223,107,103,99,191,23,177,171,165,159,77,149,9,139,135,131,253,245,119,231,224,109,211,103,25,195,189,23,45,175,171,83,81,79,155,151,147,9,141,137,67,131,129,251,123,30,235,115,113,221,217,53,13,51,50,49,193,189,185,91,179,175,43,169,83,163,5,79,155,19,75,147,145,143,35,69,17,67,33,65,255,251,247,243,239,59,29,229,113,111,219,27,213,105,207,51,201,199,49,193,191,47,93,183,181,179,11,87,43,85,167,165,163,161,159,157,155,77,19,75,37,73,145,143,141,35,138,137,135,67,33,131,129,255,63,250,247,61,121,239,237,117,29,229,227,225,111,55,109,216,213,211,209,207,205,203,201,199,197,195,193,48,190,47,93,185,183,181,179,178,176,175,173,171,85,21,167,165,41,163,161,5,79,157,78,154,153,19,75,149,74,147,73,144,143,71,141,140,139,137,17,135,134,133,66,131,65,129,1];v.shgTable=[0,9,10,10,14,12,14,14,16,15,16,15,16,15,15,17,18,17,12,18,16,17,17,19,19,18,19,18,18,19,19,19,20,19,20,20,20,20,20,20,15,20,19,20,20,20,21,21,21,20,20,20,21,18,21,21,21,21,20,21,17,21,21,21,22,22,21,22,22,21,22,21,19,22,22,19,20,22,22,21,21,21,22,22,22,18,22,22,21,22,22,23,22,20,23,22,22,23,23,21,19,21,21,21,23,23,23,22,23,23,21,23,22,23,18,22,23,20,22,23,23,23,21,22,20,22,21,22,24,24,24,24,24,22,21,24,23,23,24,21,24,23,24,22,24,24,22,24,24,22,23,24,24,24,20,23,22,23,24,24,24,24,24,24,24,23,21,23,22,23,24,24,24,22,24,24,24,23,22,24,24,25,23,25,25,23,24,25,25,24,22,25,25,25,24,23,24,25,25,25,25,25,25,25,25,25,25,25,25,23,25,23,24,25,25,25,25,25,25,25,25,25,24,22,25,25,23,25,25,20,24,25,24,25,25,22,24,25,24,25,24,25,25,24,25,25,25,25,22,25,25,25,24,25,24,25,18]},7139:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var b=y(1567),x=y(2430);v.default=function _default(){return{blur:function blur(_,v){if("number"!=typeof _)return b.throwError.call(this,"r must be a number",v);if(_<1)return b.throwError.call(this,"r must be greater than 0",v);for(var y,T,I,S,M,A,P,O,k,R,L,B,j,U,z=this.bitmap.width-1,G=this.bitmap.height-1,H=_+1,V=x.mulTable[_],$=x.shgTable[_],K=[],ee=[],re=[],ie=[],ne=[],ae=[],oe=2;oe-- >0;){for(B=0,j=0,A=0;A<this.bitmap.height;A++){for(y=this.bitmap.data[j]*H,T=this.bitmap.data[j+1]*H,I=this.bitmap.data[j+2]*H,S=this.bitmap.data[j+3]*H,P=1;P<=_;P++)O=j+((P>z?z:P)<<2),y+=this.bitmap.data[O++],T+=this.bitmap.data[O++],I+=this.bitmap.data[O++],S+=this.bitmap.data[O];for(M=0;M<this.bitmap.width;M++)K[B]=y,ee[B]=T,re[B]=I,ie[B]=S,0===A&&(ne[M]=((O=M+H)<z?O:z)<<2,ae[M]=(O=M-_)>0?O<<2:0),k=j+ne[M],R=j+ae[M],y+=this.bitmap.data[k++]-this.bitmap.data[R++],T+=this.bitmap.data[k++]-this.bitmap.data[R++],I+=this.bitmap.data[k++]-this.bitmap.data[R++],S+=this.bitmap.data[k]-this.bitmap.data[R],B++;j+=this.bitmap.width<<2}for(M=0;M<this.bitmap.width;M++){for(y=K[L=M]*H,T=ee[L]*H,I=re[L]*H,S=ie[L]*H,P=1;P<=_;P++)y+=K[L+=P>G?0:this.bitmap.width],T+=ee[L],I+=re[L],S+=ie[L];for(B=M<<2,A=0;A<this.bitmap.height;A++)U=S*V>>>$,this.bitmap.data[B+3]=U,U>255&&(this.bitmap.data[B+3]=255),U>0?(U=255/U,this.bitmap.data[B]=(y*V>>>$)*U,this.bitmap.data[B+1]=(T*V>>>$)*U,this.bitmap.data[B+2]=(I*V>>>$)*U):(this.bitmap.data[B+2]=0,this.bitmap.data[B+1]=0,this.bitmap.data[B]=0),0===M&&(ne[A]=((O=A+H)<G?O:G)*this.bitmap.width,ae[A]=(O=A-_)>0?O*this.bitmap.width:0),k=M+ne[A],R=M+ae[A],y+=K[k]-K[R],T+=ee[k]-ee[R],I+=re[k]-re[R],S+=ie[k]-ie[R],B+=this.bitmap.width<<2}}return(0,b.isNodePattern)(v)&&v.call(this,null,this),this}}}},4650:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var b=y(1567);v.default=function _default(){return{circle:function circle(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=arguments.length>1?arguments[1]:void 0;"function"==typeof _&&(v=_,_={});var y=_.radius||(this.bitmap.width>this.bitmap.height?this.bitmap.height:this.bitmap.width)/2,x={x:"number"==typeof _.x?_.x:this.bitmap.width/2,y:"number"==typeof _.y?_.y:this.bitmap.height/2};return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(_,v,b){var T=Math.sqrt(Math.pow(_-x.x,2)+Math.pow(v-x.y,2));y-T<=0?this.bitmap.data[b+3]=0:y-T<1&&(this.bitmap.data[b+3]=255*(y-T))})),(0,b.isNodePattern)(v)&&v.call(this,null,this),this}}}},809:(_,v,y)=>{"use strict";var b=y(4836);Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var x=b(y(861)),T=b(y(8207)),I=y(1567);function applyKernel(_,v,y,b){for(var x=[0,0,0],T=(v.length-1)/2,I=0;I<v.length;I+=1)for(var S=0;S<v[I].length;S+=1){var M=_.getPixelIndex(y+I-T,b+S-T);x[0]+=_.bitmap.data[M]*v[I][S],x[1]+=_.bitmap.data[M+1]*v[I][S],x[2]+=_.bitmap.data[M+2]*v[I][S]}return x}var S=function isDef(_){return null!=_};function greyscale(_){return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(_,v,y){var b=parseInt(.2126*this.bitmap.data[y]+.7152*this.bitmap.data[y+1]+.0722*this.bitmap.data[y+2],10);this.bitmap.data[y]=b,this.bitmap.data[y+1]=b,this.bitmap.data[y+2]=b})),(0,I.isNodePattern)(_)&&_.call(this,null,this),this}function mix(_,v){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;return{r:(v.r-_.r)*(y/100)+_.r,g:(v.g-_.g)*(y/100)+_.g,b:(v.b-_.b)*(y/100)+_.b}}function colorFn(_,v){var y=this;return _&&Array.isArray(_)?(_=_.map((function(_){return"xor"!==_.apply&&"mix"!==_.apply||(_.params[0]=(0,T.default)(_.params[0]).toRgb()),_})),this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(b,S,M){var A={r:y.bitmap.data[M],g:y.bitmap.data[M+1],b:y.bitmap.data[M+2]},P=function colorModifier(_,v){return y.constructor.limit255(A[_]+v)};_.forEach((function(_){if("mix"===_.apply)A=mix(A,_.params[0],_.params[1]);else if("tint"===_.apply)A=mix(A,{r:255,g:255,b:255},_.params[0]);else if("shade"===_.apply)A=mix(A,{r:0,g:0,b:0},_.params[0]);else if("xor"===_.apply)A={r:A.r^_.params[0].r,g:A.g^_.params[0].g,b:A.b^_.params[0].b};else if("red"===_.apply)A.r=P("r",_.params[0]);else if("green"===_.apply)A.g=P("g",_.params[0]);else if("blue"===_.apply)A.b=P("b",_.params[0]);else{var b;if("hue"===_.apply&&(_.apply="spin"),!(A=(0,T.default)(A))[_.apply])return I.throwError.call(y,"action "+_.apply+" not supported",v);A=(b=A)[_.apply].apply(b,(0,x.default)(_.params)).toRgb()}})),y.bitmap.data[M]=A.r,y.bitmap.data[M+1]=A.g,y.bitmap.data[M+2]=A.b})),(0,I.isNodePattern)(v)&&v.call(this,null,this),this):I.throwError.call(this,"actions must be an array",v)}v.default=function _default(){return{brightness:function brightness(_,v){return"number"!=typeof _?I.throwError.call(this,"val must be numbers",v):_<-1||_>1?I.throwError.call(this,"val must be a number between -1 and +1",v):(this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(v,y,b){_<0?(this.bitmap.data[b]=this.bitmap.data[b]*(1+_),this.bitmap.data[b+1]=this.bitmap.data[b+1]*(1+_),this.bitmap.data[b+2]=this.bitmap.data[b+2]*(1+_)):(this.bitmap.data[b]=this.bitmap.data[b]+(255-this.bitmap.data[b])*_,this.bitmap.data[b+1]=this.bitmap.data[b+1]+(255-this.bitmap.data[b+1])*_,this.bitmap.data[b+2]=this.bitmap.data[b+2]+(255-this.bitmap.data[b+2])*_)})),(0,I.isNodePattern)(v)&&v.call(this,null,this),this)},contrast:function contrast(_,v){if("number"!=typeof _)return I.throwError.call(this,"val must be numbers",v);if(_<-1||_>1)return I.throwError.call(this,"val must be a number between -1 and +1",v);var y=(_+1)/(1-_);function adjust(_){return(_=Math.floor(y*(_-127)+127))<0?0:_>255?255:_}return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(_,v,y){this.bitmap.data[y]=adjust(this.bitmap.data[y]),this.bitmap.data[y+1]=adjust(this.bitmap.data[y+1]),this.bitmap.data[y+2]=adjust(this.bitmap.data[y+2])})),(0,I.isNodePattern)(v)&&v.call(this,null,this),this},posterize:function posterize(_,v){return"number"!=typeof _?I.throwError.call(this,"n must be numbers",v):(_<2&&(_=2),this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(v,y,b){this.bitmap.data[b]=Math.floor(this.bitmap.data[b]/255*(_-1))/(_-1)*255,this.bitmap.data[b+1]=Math.floor(this.bitmap.data[b+1]/255*(_-1))/(_-1)*255,this.bitmap.data[b+2]=Math.floor(this.bitmap.data[b+2]/255*(_-1))/(_-1)*255})),(0,I.isNodePattern)(v)&&v.call(this,null,this),this)},greyscale:greyscale,grayscale:greyscale,opacity:function opacity(_,v){return"number"!=typeof _?I.throwError.call(this,"f must be a number",v):_<0||_>1?I.throwError.call(this,"f must be a number from 0 to 1",v):(this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(v,y,b){var x=this.bitmap.data[b+3]*_;this.bitmap.data[b+3]=x})),(0,I.isNodePattern)(v)&&v.call(this,null,this),this)},sepia:function sepia(_){return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(_,v,y){var b=this.bitmap.data[y],x=this.bitmap.data[y+1],T=this.bitmap.data[y+2];T=.272*(b=.393*b+.769*x+.189*T)+.534*(x=.349*b+.686*x+.168*T)+.131*T,this.bitmap.data[y]=b<255?b:255,this.bitmap.data[y+1]=x<255?x:255,this.bitmap.data[y+2]=T<255?T:255})),(0,I.isNodePattern)(_)&&_.call(this,null,this),this},fade:function fade(_,v){return"number"!=typeof _?I.throwError.call(this,"f must be a number",v):_<0||_>1?I.throwError.call(this,"f must be a number from 0 to 1",v):(this.opacity(1-_),(0,I.isNodePattern)(v)&&v.call(this,null,this),this)},convolution:function convolution(_,v,y){"function"==typeof v&&void 0===y&&(y=v,v=null),v||(v=this.constructor.EDGE_EXTEND);var b,x,T,S,M,A,P,O,k,R,L=Buffer.from(this.bitmap.data),B=_.length,j=_[0].length,U=Math.floor(B/2),z=Math.floor(j/2),G=-U,H=-z;return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(y,I,B){S=0,T=0,x=0;for(var j=G;j<=U;j++)for(var V=H;V<=z;V++)O=y+V,k=I+j,b=_[j+U][V+z],-1===(R=this.getPixelIndex(O,k,v))?(P=0,A=0,M=0):(M=this.bitmap.data[R+0],A=this.bitmap.data[R+1],P=this.bitmap.data[R+2]),x+=b*M,T+=b*A,S+=b*P;x<0&&(x=0),T<0&&(T=0),S<0&&(S=0),x>255&&(x=255),T>255&&(T=255),S>255&&(S=255),L[B+0]=x,L[B+1]=T,L[B+2]=S})),this.bitmap.data=L,(0,I.isNodePattern)(y)&&y.call(this,null,this),this},opaque:function opaque(_){return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(_,v,y){this.bitmap.data[y+3]=255})),(0,I.isNodePattern)(_)&&_.call(this,null,this),this},pixelate:function pixelate(_,v,y,b,x,T){if("function"==typeof v)T=v,x=null,b=null,y=null,v=null;else{if("number"!=typeof _)return I.throwError.call(this,"size must be a number",T);if(S(v)&&"number"!=typeof v)return I.throwError.call(this,"x must be a number",T);if(S(y)&&"number"!=typeof y)return I.throwError.call(this,"y must be a number",T);if(S(b)&&"number"!=typeof b)return I.throwError.call(this,"w must be a number",T);if(S(x)&&"number"!=typeof x)return I.throwError.call(this,"h must be a number",T)}var M=[[1/16,2/16,1/16],[2/16,.25,2/16],[1/16,2/16,1/16]];v=v||0,y=y||0,b=S(b)?b:this.bitmap.width-v,x=S(x)?x:this.bitmap.height-y;var A=this.cloneQuiet();return this.scanQuiet(v,y,b,x,(function(v,y,b){v=_*Math.floor(v/_),y=_*Math.floor(y/_);var x=applyKernel(A,M,v,y);this.bitmap.data[b]=x[0],this.bitmap.data[b+1]=x[1],this.bitmap.data[b+2]=x[2]})),(0,I.isNodePattern)(T)&&T.call(this,null,this),this},convolute:function convolute(_,v,y,b,x,T){if(!Array.isArray(_))return I.throwError.call(this,"the kernel must be an array",T);if("function"==typeof v)T=v,v=null,y=null,b=null,x=null;else{if(S(v)&&"number"!=typeof v)return I.throwError.call(this,"x must be a number",T);if(S(y)&&"number"!=typeof y)return I.throwError.call(this,"y must be a number",T);if(S(b)&&"number"!=typeof b)return I.throwError.call(this,"w must be a number",T);if(S(x)&&"number"!=typeof x)return I.throwError.call(this,"h must be a number",T)}var M=(_.length-1)/2;v=S(v)?v:M,y=S(y)?y:M,b=S(b)?b:this.bitmap.width-v,x=S(x)?x:this.bitmap.height-y;var A=this.cloneQuiet();return this.scanQuiet(v,y,b,x,(function(v,y,b){var x=applyKernel(A,_,v,y);this.bitmap.data[b]=this.constructor.limit255(x[0]),this.bitmap.data[b+1]=this.constructor.limit255(x[1]),this.bitmap.data[b+2]=this.constructor.limit255(x[2])})),(0,I.isNodePattern)(T)&&T.call(this,null,this),this},color:colorFn,colour:colorFn}}},7890:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var b=y(1567);v.default=function _default(){return{contain:function contain(_,v,y,x,T){if("number"!=typeof _||"number"!=typeof v)return b.throwError.call(this,"w and h must be numbers",T);"string"==typeof y&&("function"==typeof x&&void 0===T&&(T=x),x=y,y=null),"function"==typeof y&&(void 0===T&&(T=y),x=null,y=null),"function"==typeof x&&void 0===T&&(T=x,x=null);var I=7&(y=y||this.constructor.HORIZONTAL_ALIGN_CENTER|this.constructor.VERTICAL_ALIGN_MIDDLE),S=y>>3;if((0===I||I&I-1)&&(0===S||S&S-1))return b.throwError.call(this,"only use one flag per alignment direction",T);var M=I>>1,A=S>>1,P=_/v>this.bitmap.width/this.bitmap.height?v/this.bitmap.height:_/this.bitmap.width,O=this.cloneQuiet().scale(P,x);return this.resize(_,v,x),this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(_,v,y){this.bitmap.data.writeUInt32BE(this._background,y)})),this.blit(O,(this.bitmap.width-O.bitmap.width)/2*M,(this.bitmap.height-O.bitmap.height)/2*A),(0,b.isNodePattern)(T)&&T.call(this,null,this),this}}}},4587:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var b=y(1567);v.default=function _default(){return{cover:function cover(_,v,y,x,T){if("number"!=typeof _||"number"!=typeof v)return b.throwError.call(this,"w and h must be numbers",T);y&&"function"==typeof y&&void 0===T?(T=y,y=null,x=null):"function"==typeof x&&void 0===T&&(T=x,x=null);var I=7&(y=y||this.constructor.HORIZONTAL_ALIGN_CENTER|this.constructor.VERTICAL_ALIGN_MIDDLE),S=y>>3;if((0===I||I&I-1)&&(0===S||S&S-1))return b.throwError.call(this,"only use one flag per alignment direction",T);var M=I>>1,A=S>>1,P=_/v>this.bitmap.width/this.bitmap.height?_/this.bitmap.width:v/this.bitmap.height;return this.scale(P,x),this.crop((this.bitmap.width-_)/2*M,(this.bitmap.height-v)/2*A,_,v),(0,b.isNodePattern)(T)&&T.call(this,null,this),this}}}},6544:(_,v,y)=>{"use strict";var b=y(4836);Object.defineProperty(v,"__esModule",{value:!0}),v.default=function pluginCrop(_){return _("crop",(function(_,v,y,b,x){if("number"!=typeof _||"number"!=typeof v)return T.throwError.call(this,"x and y must be numbers",x);if("number"!=typeof y||"number"!=typeof b)return T.throwError.call(this,"w and h must be numbers",x);if(_=Math.round(_),v=Math.round(v),y=Math.round(y),b=Math.round(b),0===_&&y===this.bitmap.width){var I=y*v+_<<2,S=I+b*y<<2;this.bitmap.data=this.bitmap.data.slice(I,S)}else{var M=Buffer.allocUnsafe(y*b*4),A=0;this.scanQuiet(_,v,y,b,(function(_,v,y){var b=this.bitmap.data.readUInt32BE(y,!0);M.writeUInt32BE(b,A,!0),A+=4})),this.bitmap.data=M}return this.bitmap.width=y,this.bitmap.height=b,(0,T.isNodePattern)(x)&&x.call(this,null,this),this})),{class:{autocrop:function autocrop(){for(var _,v=this.bitmap.width,y=this.bitmap.height,b=1,I=0,S=2e-4,M=!0,A=!1,P=arguments.length,O=new Array(P),k=0;k<P;k++)O[k]=arguments[k];for(var R=0,L=O.length;R<L;R++)if("number"==typeof O[R]&&(S=O[R]),"boolean"==typeof O[R]&&(M=O[R]),"function"==typeof O[R]&&(_=O[R]),"object"===(0,x.default)(O[R])){var B=O[R];void 0!==B.tolerance&&(S=B.tolerance),void 0!==B.cropOnlyFrames&&(M=B.cropOnlyFrames),void 0!==B.cropSymmetric&&(A=B.cropSymmetric),void 0!==B.leaveBorder&&(I=B.leaveBorder)}var j=this.getPixelColor(0,0),U=this.constructor.intToRGBA(j),z=0,G=0,H=0,V=0;j=this.getPixelColor(0,0);e:for(var $=0;$<y-b;$++){for(var K=0;K<v;K++){var ee=this.getPixelColor(K,$),re=this.constructor.intToRGBA(ee);if(this.constructor.colorDiff(U,re)>S)break e}z++}j=this.getPixelColor(v,0);e:for(var ie=0;ie<v-b;ie++){for(var ne=0+z;ne<y;ne++){var ae=this.getPixelColor(ie,ne),oe=this.constructor.intToRGBA(ae);if(this.constructor.colorDiff(U,oe)>S)break e}G++}j=this.getPixelColor(0,y);e:for(var se=y-1;se>=z+b;se--){for(var ce=v-G-1;ce>=0;ce--){var ue=this.getPixelColor(ce,se),pe=this.constructor.intToRGBA(ue);if(this.constructor.colorDiff(U,pe)>S)break e}H++}j=this.getPixelColor(v,y);e:for(var he=v-1;he>=0+G+b;he--){for(var de=y-1;de>=0+z;de--){var fe=this.getPixelColor(he,de),me=this.constructor.intToRGBA(fe);if(this.constructor.colorDiff(U,me)>S)break e}V++}if(V-=I,G-=I,z-=I,H-=I,A){var ge=Math.min(G,V),_e=Math.min(z,H);V=ge,G=ge,z=_e,H=_e}var ve=v-((V=V>=0?V:0)+(G=G>=0?G:0)),ye=y-((H=H>=0?H:0)+(z=z>=0?z:0));return(M?0!==G&&0!==z&&0!==V&&0!==H:0!==G||0!==z||0!==V||0!==H)&&this.crop(G,z,ve,ye),(0,T.isNodePattern)(_)&&_.call(this,null,this),this}}}};var x=b(y(8698)),T=y(1567)},7679:(_,v,y)=>{"use strict";var b=y(4836);Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var x=b(y(8698)),T=y(1567);v.default=function _default(){return{displace:function displace(_,v,y){if("object"!==(0,x.default)(_)||_.constructor!==this.constructor)return T.throwError.call(this,"The source must be a Jimp image",y);if("number"!=typeof v)return T.throwError.call(this,"factor must be a number",y);var b=this.cloneQuiet();return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(y,x,T){var I=_.bitmap.data[T]/256*v;I=Math.round(I);var S=this.getPixelIndex(y+I,x);this.bitmap.data[S]=b.bitmap.data[T],this.bitmap.data[S+1]=b.bitmap.data[T+1],this.bitmap.data[S+2]=b.bitmap.data[T+2]})),(0,T.isNodePattern)(y)&&y.call(this,null,this),this}}}},5380:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var b=y(1567);function dither(_){var v=[1,9,3,11,13,5,15,7,4,12,2,10,16,8,14,6];return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(_,y,b){var x=v[((3&y)<<2)+_%4];this.bitmap.data[b]=Math.min(this.bitmap.data[b]+x,255),this.bitmap.data[b+1]=Math.min(this.bitmap.data[b+1]+x,255),this.bitmap.data[b+2]=Math.min(this.bitmap.data[b+2]+x,255)})),(0,b.isNodePattern)(_)&&_.call(this,null,this),this}v.default=function _default(){return{dither565:dither,dither16:dither}}},9462:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var b=y(1567);v.default=function _default(){return{fisheye:function fisheye(){var _=this,v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{r:2.5},y=arguments.length>1?arguments[1]:void 0;"function"==typeof v&&(y=v,v={r:2.5});var x=this.cloneQuiet(),T=x.bitmap,I=T.width,S=T.height;return x.scanQuiet(0,0,I,S,(function(y,b){var T=y/I,M=b/S,A=Math.sqrt(Math.pow(T-.5,2)+Math.pow(M-.5,2)),P=2*Math.pow(A,v.r),O=(T-.5)/A,k=(M-.5)/A,R=Math.round((P*O+.5)*I),L=Math.round((P*k+.5)*S),B=x.getPixelColor(R,L);_.setPixelColor(B,y,b)})),this.setPixelColor(x.getPixelColor(I/2,S/2),I/2,S/2),(0,b.isNodePattern)(y)&&y.call(this,null,this),this}}}},5980:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var b=y(1567);function flipFn(_,v,y){if("boolean"!=typeof _||"boolean"!=typeof v)return b.throwError.call(this,"horizontal and vertical must be Booleans",y);var x=Buffer.alloc(this.bitmap.data.length);return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(y,b,T){var I=_?this.bitmap.width-1-y:y,S=v?this.bitmap.height-1-b:b,M=this.bitmap.width*S+I<<2,A=this.bitmap.data.readUInt32BE(T);x.writeUInt32BE(A,M)})),this.bitmap.data=Buffer.from(x),(0,b.isNodePattern)(y)&&y.call(this,null,this),this}v.default=function _default(){return{flip:flipFn,mirror:flipFn}}},5092:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var b=y(1567);v.default=function _default(){return{gaussian:function gaussian(_,v){if("number"!=typeof _)return b.throwError.call(this,"r must be a number",v);if(_<1)return b.throwError.call(this,"r must be greater than 0",v);for(var y=Math.ceil(2.57*_),x=2*y+1,T=_*_*2,I=T*Math.PI,S=[],M=0;M<x;M++){S[M]=[];for(var A=0;A<x;A++){var P=Math.pow(A-y,2)+Math.pow(M-y,2);S[M][A]=Math.exp(-P/T)/I}}for(var O=0;O<this.bitmap.height;O++)for(var k=0;k<this.bitmap.width;k++)for(var R=0,L=0,B=0,j=0,U=0,z=0;z<x;z++){for(var G=0;G<x;G++){var H=Math.min(this.bitmap.width-1,Math.max(0,G+k-y)),V=Math.min(this.bitmap.height-1,Math.max(0,z+O-y)),$=S[z][G],K=V*this.bitmap.width+H<<2;R+=this.bitmap.data[K]*$,L+=this.bitmap.data[K+1]*$,B+=this.bitmap.data[K+2]*$,j+=this.bitmap.data[K+3]*$,U+=$}var ee=O*this.bitmap.width+k<<2;this.bitmap.data[ee]=Math.round(R/U),this.bitmap.data[ee+1]=Math.round(L/U),this.bitmap.data[ee+2]=Math.round(B/U),this.bitmap.data[ee+3]=Math.round(j/U)}return(0,b.isNodePattern)(v)&&v.call(this,null,this),this}}}},9085:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var b=y(1567);v.default=function _default(){return{invert:function invert(_){return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(_,v,y){this.bitmap.data[y]=255-this.bitmap.data[y],this.bitmap.data[y+1]=255-this.bitmap.data[y+1],this.bitmap.data[y+2]=255-this.bitmap.data[y+2]})),(0,b.isNodePattern)(_)&&_.call(this,null,this),this}}}},1218:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var b=y(1567);v.default=function _default(){return{mask:function mask(_){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,x=arguments.length>3?arguments[3]:void 0;if(!(_ instanceof this.constructor))return b.throwError.call(this,"The source must be a Jimp image",x);if("number"!=typeof v||"number"!=typeof y)return b.throwError.call(this,"x and y must be numbers",x);v=Math.round(v),y=Math.round(y);var T=this.bitmap.width,I=this.bitmap.height,S=this;return _.scanQuiet(0,0,_.bitmap.width,_.bitmap.height,(function(_,b,x){var M=v+_,A=y+b;if(M>=0&&A>=0&&M<T&&A<I){var P=S.getPixelIndex(M,A),O=this.bitmap.data,k=(O[x+0]+O[x+1]+O[x+2])/3;S.bitmap.data[P+3]*=k/255}})),(0,b.isNodePattern)(x)&&x.call(this,null,this),this}}}},2042:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var b=y(1567);function histogram(){var _={r:new Array(256).fill(0),g:new Array(256).fill(0),b:new Array(256).fill(0)};return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(v,y,b){_.r[this.bitmap.data[b+0]]++,_.g[this.bitmap.data[b+1]]++,_.b[this.bitmap.data[b+2]]++})),_}var x=function normalize(_,v,y){return 255*(_-v)/(y-v)},T=function getBounds(_){return[_.findIndex((function(_){return _>0})),255-_.slice().reverse().findIndex((function(_){return _>0}))]};v.default=function _default(){return{normalize:function normalize(_){var v=histogram.call(this),y={r:T(v.r),g:T(v.g),b:T(v.b)};return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(_,v,b){var T=this.bitmap.data[b+0],I=this.bitmap.data[b+1],S=this.bitmap.data[b+2];this.bitmap.data[b+0]=x(T,y.r[0],y.r[1]),this.bitmap.data[b+1]=x(I,y.g[0],y.g[1]),this.bitmap.data[b+2]=x(S,y.b[0],y.b[1])})),(0,b.isNodePattern)(_)&&_.call(this,null,this),this}}}},8869:(_,v,y)=>{"use strict";var b=y(4836);Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var x=b(y(8698)),T=b(y(861)),I=b(y(1017)),S=b(y(1120)),M=y(1567),A=y(6523);function drawCharacter(_,v,y,b,x){if(x.width>0&&x.height>0){var T=v.pages[x.page];_.blit(T,y+x.xoffset,b+x.yoffset,x.x,x.y,x.width,x.height)}return _}function printText(_,v,y,b,x){for(var T=0;T<b.length;T++){var I=void 0;I=_.chars[b[T]]?b[T]:/\s/.test(b[T])?"":"?";var S=_.chars[I]||{},M=_.kernings[I];drawCharacter(this,_,v,y,S||{}),v+=(M&&M[b[T+1]]?M[b[T+1]]:0)+(S.xadvance||x)}}var P=process.env.DIRNAME||"".concat(__dirname,"/../");v.default=function _default(){return{constants:{measureText:A.measureText,measureTextHeight:A.measureTextHeight,FONT_SANS_8_BLACK:I.default.join(P,"fonts/open-sans/open-sans-8-black/open-sans-8-black.fnt"),FONT_SANS_10_BLACK:I.default.join(P,"fonts/open-sans/open-sans-10-black/open-sans-10-black.fnt"),FONT_SANS_12_BLACK:I.default.join(P,"fonts/open-sans/open-sans-12-black/open-sans-12-black.fnt"),FONT_SANS_14_BLACK:I.default.join(P,"fonts/open-sans/open-sans-14-black/open-sans-14-black.fnt"),FONT_SANS_16_BLACK:I.default.join(P,"fonts/open-sans/open-sans-16-black/open-sans-16-black.fnt"),FONT_SANS_32_BLACK:I.default.join(P,"fonts/open-sans/open-sans-32-black/open-sans-32-black.fnt"),FONT_SANS_64_BLACK:I.default.join(P,"fonts/open-sans/open-sans-64-black/open-sans-64-black.fnt"),FONT_SANS_128_BLACK:I.default.join(P,"fonts/open-sans/open-sans-128-black/open-sans-128-black.fnt"),FONT_SANS_8_WHITE:I.default.join(P,"fonts/open-sans/open-sans-8-white/open-sans-8-white.fnt"),FONT_SANS_16_WHITE:I.default.join(P,"fonts/open-sans/open-sans-16-white/open-sans-16-white.fnt"),FONT_SANS_32_WHITE:I.default.join(P,"fonts/open-sans/open-sans-32-white/open-sans-32-white.fnt"),FONT_SANS_64_WHITE:I.default.join(P,"fonts/open-sans/open-sans-64-white/open-sans-64-white.fnt"),FONT_SANS_128_WHITE:I.default.join(P,"fonts/open-sans/open-sans-128-white/open-sans-128-white.fnt"),loadFont:function loadFont(_,v){var y=this;return"string"!=typeof _?M.throwError.call(this,"file must be a string",v):new Promise((function(b,x){v=v||function(_,v){_?x(_):b(v)},(0,S.default)(_,(function(b,x){var T={},S={};if(b)return M.throwError.call(y,b,v);for(var A=0;A<x.chars.length;A++)T[String.fromCharCode(x.chars[A].id)]=x.chars[A];for(var P=0;P<x.kernings.length;P++){var O=String.fromCharCode(x.kernings[P].first);S[O]=S[O]||{},S[O][String.fromCharCode(x.kernings[P].second)]=x.kernings[P].amount}(function loadPages(_,v,y){var b=y.map((function(y){return _.read(v+"/"+y)}));return Promise.all(b)})(y,I.default.dirname(_),x.pages).then((function(_){v(null,{chars:T,kernings:S,pages:_,common:x.common,info:x.info})}))}))}))}},class:{print:function print(_,v,y,b,I,S,P){var O,k,R=this;if("function"==typeof I&&void 0===P&&(P=I,I=1/0),void 0===I&&(I=1/0),"function"==typeof S&&void 0===P&&(P=S,S=1/0),void 0===S&&(S=1/0),"object"!==(0,x.default)(_))return M.throwError.call(this,"font must be a Jimp loadFont",P);if("number"!=typeof v||"number"!=typeof y||"number"!=typeof I)return M.throwError.call(this,"x, y and maxWidth must be numbers",P);if("number"!=typeof I)return M.throwError.call(this,"maxWidth must be a number",P);if("number"!=typeof S)return M.throwError.call(this,"maxHeight must be a number",P);"object"===(0,x.default)(b)&&null!==b.text&&void 0!==b.text?(O=b.alignmentX||this.constructor.HORIZONTAL_ALIGN_LEFT,k=b.alignmentY||this.constructor.VERTICAL_ALIGN_TOP,b=b.text):(O=this.constructor.HORIZONTAL_ALIGN_LEFT,k=this.constructor.VERTICAL_ALIGN_TOP,b=b.toString());S!==1/0&&k===this.constructor.VERTICAL_ALIGN_BOTTOM?y+=S-(0,A.measureTextHeight)(_,b,I):S!==1/0&&k===this.constructor.VERTICAL_ALIGN_MIDDLE&&(y+=S/2-(0,A.measureTextHeight)(_,b,I)/2);var L=Object.entries(_.chars)[0][1].xadvance,B=function splitLines(_,v,y){var b=v.split(" "),x=[],I=[],S=0;return b.forEach((function(v){var b=[].concat((0,T.default)(I),[v]).join(" "),M=(0,A.measureText)(_,b);M<=y?(M>S&&(S=M),I.push(v)):(x.push(I),I=[v])})),x.push(I),{lines:x,longestLine:S}}(_,b,I),j=B.lines,U=B.longestLine;return j.forEach((function(b){var x=b.join(" "),T=function xOffsetBasedOnAlignment(_,v,y,b,x){return x===_.HORIZONTAL_ALIGN_LEFT?0:x===_.HORIZONTAL_ALIGN_CENTER?(b-(0,A.measureText)(v,y))/2:b-(0,A.measureText)(v,y)}(R.constructor,_,x,I,O);printText.call(R,_,v+T,y,x,L),y+=_.common.lineHeight})),(0,M.isNodePattern)(P)&&P.call(this,null,this,{x:v+U,y:y}),this}}}}},6523:(_,v)=>{"use strict";function measureText(_,v){for(var y=0,b=0;b<v.length;b++)if(_.chars[v[b]]){var x=_.kernings[v[b]]&&_.kernings[v[b]][v[b+1]]?_.kernings[v[b]][v[b+1]]:0;y+=(_.chars[v[b]].xadvance||0)+x}return y}Object.defineProperty(v,"__esModule",{value:!0}),v.measureText=measureText,v.measureTextHeight=function measureTextHeight(_,v,y){for(var b=v.split(" "),x="",T=_.common.lineHeight,I=0;I<b.length;I++){var S=x+b[I]+" ";measureText(_,S)>y&&I>0?(T+=_.common.lineHeight,x=b[I]+" "):x=S}return T}},90:(_,v,y)=>{"use strict";var b=y(4836);Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var x=y(1567),T=b(y(9025)),I=b(y(8226));v.default=function _default(){return{constants:{RESIZE_NEAREST_NEIGHBOR:"nearestNeighbor",RESIZE_BILINEAR:"bilinearInterpolation",RESIZE_BICUBIC:"bicubicInterpolation",RESIZE_HERMITE:"hermiteInterpolation",RESIZE_BEZIER:"bezierInterpolation"},class:{resize:function resize(_,v,y,b){if("number"!=typeof _||"number"!=typeof v)return x.throwError.call(this,"w and h must be numbers",b);if("function"==typeof y&&void 0===b&&(b=y,y=null),_===this.constructor.AUTO&&v===this.constructor.AUTO)return x.throwError.call(this,"w and h cannot both be set to auto",b);if(_===this.constructor.AUTO&&(_=this.bitmap.width*(v/this.bitmap.height)),v===this.constructor.AUTO&&(v=this.bitmap.height*(_/this.bitmap.width)),_<0||v<0)return x.throwError.call(this,"w and h must be positive numbers",b);if(_=Math.round(_),v=Math.round(v),"function"==typeof I.default[y]){var S={data:Buffer.alloc(_*v*4),width:_,height:v};I.default[y](this.bitmap,S),this.bitmap=S}else{var M=this,resize=new T.default(this.bitmap.width,this.bitmap.height,_,v,!0,!0,(function(y){M.bitmap.data=Buffer.from(y),M.bitmap.width=_,M.bitmap.height=v}));resize.resize(this.bitmap.data)}return(0,x.isNodePattern)(b)&&b.call(this,null,this),this}}}}},9025:_=>{"use strict";function Resize(_,v,y,b,x,T,I){this.widthOriginal=Math.abs(Math.floor(_)||0),this.heightOriginal=Math.abs(Math.floor(v)||0),this.targetWidth=Math.abs(Math.floor(y)||0),this.targetHeight=Math.abs(Math.floor(b)||0),this.colorChannels=x?4:3,this.interpolationPass=Boolean(T),this.resizeCallback="function"==typeof I?I:function(){},this.targetWidthMultipliedByChannels=this.targetWidth*this.colorChannels,this.originalWidthMultipliedByChannels=this.widthOriginal*this.colorChannels,this.originalHeightMultipliedByChannels=this.heightOriginal*this.colorChannels,this.widthPassResultSize=this.targetWidthMultipliedByChannels*this.heightOriginal,this.finalResultSize=this.targetWidthMultipliedByChannels*this.targetHeight,this.initialize()}Resize.prototype.initialize=function(){if(!(this.widthOriginal>0&&this.heightOriginal>0&&this.targetWidth>0&&this.targetHeight>0))throw new Error("Invalid settings specified for the resizer.");this.configurePasses()},Resize.prototype.configurePasses=function(){this.widthOriginal===this.targetWidth?this.resizeWidth=this.bypassResizer:(this.ratioWeightWidthPass=this.widthOriginal/this.targetWidth,this.ratioWeightWidthPass<1&&this.interpolationPass?(this.initializeFirstPassBuffers(!0),this.resizeWidth=4===this.colorChannels?this.resizeWidthInterpolatedRGBA:this.resizeWidthInterpolatedRGB):(this.initializeFirstPassBuffers(!1),this.resizeWidth=4===this.colorChannels?this.resizeWidthRGBA:this.resizeWidthRGB)),this.heightOriginal===this.targetHeight?this.resizeHeight=this.bypassResizer:(this.ratioWeightHeightPass=this.heightOriginal/this.targetHeight,this.ratioWeightHeightPass<1&&this.interpolationPass?(this.initializeSecondPassBuffers(!0),this.resizeHeight=this.resizeHeightInterpolated):(this.initializeSecondPassBuffers(!1),this.resizeHeight=4===this.colorChannels?this.resizeHeightRGBA:this.resizeHeightRGB))},Resize.prototype._resizeWidthInterpolatedRGBChannels=function(_,v){var y,b,x=v?4:3,T=this.ratioWeightWidthPass,I=this.widthBuffer,S=0,M=0,A=0,P=0,O=0;for(y=0;S<1/3;y+=x,S+=T)for(M=y,A=0;M<this.widthPassResultSize;A+=this.originalWidthMultipliedByChannels,M+=this.targetWidthMultipliedByChannels)I[M]=_[A],I[M+1]=_[A+1],I[M+2]=_[A+2],v&&(I[M+3]=_[A+3]);for(S-=1/3,b=this.widthOriginal-1;S<b;y+=x,S+=T)for(P=1-(O=S%1),M=y,A=Math.floor(S)*x;M<this.widthPassResultSize;A+=this.originalWidthMultipliedByChannels,M+=this.targetWidthMultipliedByChannels)I[M+0]=_[A+0]*P+_[A+x+0]*O,I[M+1]=_[A+1]*P+_[A+x+1]*O,I[M+2]=_[A+2]*P+_[A+x+2]*O,v&&(I[M+3]=_[A+3]*P+_[A+x+3]*O);for(b=this.originalWidthMultipliedByChannels-x;y<this.targetWidthMultipliedByChannels;y+=x)for(M=y,A=b;M<this.widthPassResultSize;A+=this.originalWidthMultipliedByChannels,M+=this.targetWidthMultipliedByChannels)I[M]=_[A],I[M+1]=_[A+1],I[M+2]=_[A+2],v&&(I[M+3]=_[A+3]);return I},Resize.prototype._resizeWidthRGBChannels=function(_,v){var y=v?4:3,b=this.ratioWeightWidthPass,x=1/b,T=this.originalWidthMultipliedByChannels-y+1,I=this.targetWidthMultipliedByChannels-y+1,S=this.outputWidthWorkBench,M=this.widthBuffer,A=this.outputWidthWorkBenchOpaquePixelsCount,P=0,O=0,k=0,R=0,L=0,B=0,j=0,U=1,z=0,G=0,H=0,V=0;do{for(L=0;L<this.originalHeightMultipliedByChannels;)S[L++]=0,S[L++]=0,S[L++]=0,v&&(S[L++]=0,A[L/y-1]=0);P=b;do{for(O=1+k-R,U=Math.min(P,O),L=0,B=k;L<this.originalHeightMultipliedByChannels;B+=T)z=_[B],G=_[++B],H=_[++B],V=v?_[++B]:255,S[L++]+=(V?z:0)*U,S[L++]+=(V?G:0)*U,S[L++]+=(V?H:0)*U,v&&(S[L++]+=V*U,A[L/y-1]+=V?U:0);if(!(P>=O)){R+=P;break}R=k+=y,P-=O}while(P>0&&k<this.originalWidthMultipliedByChannels);for(L=0,B=j;L<this.originalHeightMultipliedByChannels;B+=I)P=v?A[L/y]:1,U=v?P?1/P:0:x,M[B]=S[L++]*U,M[++B]=S[L++]*U,M[++B]=S[L++]*U,v&&(M[++B]=S[L++]*x);j+=y}while(j<this.targetWidthMultipliedByChannels);return M},Resize.prototype._resizeHeightRGBChannels=function(_,v){var y=this.ratioWeightHeightPass,b=1/y,x=this.outputHeightWorkBench,T=this.heightBuffer,I=this.outputHeightWorkBenchOpaquePixelsCount,S=0,M=0,A=0,P=0,O=0,k=0,R=0,L=1,B=0,j=0,U=0,z=0;do{for(O=0;O<this.targetWidthMultipliedByChannels;)x[O++]=0,x[O++]=0,x[O++]=0,v&&(x[O++]=0,I[O/4-1]=0);S=y;do{for(M=1+A-P,L=Math.min(S,M),R=A,O=0;O<this.targetWidthMultipliedByChannels;)B=_[R++],j=_[R++],U=_[R++],z=v?_[R++]:255,x[O++]+=(z?B:0)*L,x[O++]+=(z?j:0)*L,x[O++]+=(z?U:0)*L,v&&(x[O++]+=z*L,I[O/4-1]+=z?L:0);if(!(S>=M)){P+=S;break}P=A=R,S-=M}while(S>0&&A<this.widthPassResultSize);for(O=0;O<this.targetWidthMultipliedByChannels;)S=v?I[O/4]:1,L=v?S?1/S:0:b,T[k++]=Math.round(x[O++]*L),T[k++]=Math.round(x[O++]*L),T[k++]=Math.round(x[O++]*L),v&&(T[k++]=Math.round(x[O++]*b))}while(k<this.finalResultSize);return T},Resize.prototype.resizeWidthInterpolatedRGB=function(_){return this._resizeWidthInterpolatedRGBChannels(_,!1)},Resize.prototype.resizeWidthInterpolatedRGBA=function(_){return this._resizeWidthInterpolatedRGBChannels(_,!0)},Resize.prototype.resizeWidthRGB=function(_){return this._resizeWidthRGBChannels(_,!1)},Resize.prototype.resizeWidthRGBA=function(_){return this._resizeWidthRGBChannels(_,!0)},Resize.prototype.resizeHeightInterpolated=function(_){for(var v,y=this.ratioWeightHeightPass,b=this.heightBuffer,x=0,T=0,I=0,S=0,M=0,A=0,P=0;x<1/3;x+=y)for(I=0;I<this.targetWidthMultipliedByChannels;)b[T++]=Math.round(_[I++]);for(x-=1/3,v=this.heightOriginal-1;x<v;x+=y)for(A=1-(P=x%1),M=(S=Math.floor(x)*this.targetWidthMultipliedByChannels)+this.targetWidthMultipliedByChannels,I=0;I<this.targetWidthMultipliedByChannels;++I)b[T++]=Math.round(_[S++]*A+_[M++]*P);for(;T<this.finalResultSize;)for(I=0,S=v*this.targetWidthMultipliedByChannels;I<this.targetWidthMultipliedByChannels;++I)b[T++]=Math.round(_[S++]);return b},Resize.prototype.resizeHeightRGB=function(_){return this._resizeHeightRGBChannels(_,!1)},Resize.prototype.resizeHeightRGBA=function(_){return this._resizeHeightRGBChannels(_,!0)},Resize.prototype.resize=function(_){this.resizeCallback(this.resizeHeight(this.resizeWidth(_)))},Resize.prototype.bypassResizer=function(_){return _},Resize.prototype.initializeFirstPassBuffers=function(_){this.widthBuffer=this.generateFloatBuffer(this.widthPassResultSize),_||(this.outputWidthWorkBench=this.generateFloatBuffer(this.originalHeightMultipliedByChannels),this.colorChannels>3&&(this.outputWidthWorkBenchOpaquePixelsCount=this.generateFloat64Buffer(this.heightOriginal)))},Resize.prototype.initializeSecondPassBuffers=function(_){this.heightBuffer=this.generateUint8Buffer(this.finalResultSize),_||(this.outputHeightWorkBench=this.generateFloatBuffer(this.targetWidthMultipliedByChannels),this.colorChannels>3&&(this.outputHeightWorkBenchOpaquePixelsCount=this.generateFloat64Buffer(this.targetWidth)))},Resize.prototype.generateFloatBuffer=function(_){try{return new Float32Array(_)}catch(_){return[]}},Resize.prototype.generateFloat64Buffer=function(_){try{return new Float64Array(_)}catch(_){return[]}},Resize.prototype.generateUint8Buffer=function(_){try{return new Uint8Array(_)}catch(_){return[]}},_.exports=Resize},8226:_=>{"use strict";_.exports={nearestNeighbor:function nearestNeighbor(_,v){for(var y=_.width,b=_.height,x=v.width,T=v.height,I=_.data,S=v.data,M=0;M<T;M++)for(var A=0;A<x;A++){var P=4*(M*x+A),O=4*(Math.floor(M*b/T)*y+Math.floor(A*y/x));S[P++]=I[O++],S[P++]=I[O++],S[P++]=I[O++],S[P++]=I[O++]}},bilinearInterpolation:function bilinearInterpolation(_,v){for(var y=_.width,b=_.height,x=v.width,T=v.height,I=_.data,S=v.data,M=function interpolate(_,v,y,b,x){return v===b?y:Math.round((_-v)*x+(b-_)*y)},A=function assign(_,v,b,x,T,A,P,O){var k=4*(P*y+x)+v,R=4*(P*y+T)+v,L=M(b,x,I[k],T,I[R]);if(O===P)S[_+v]=L;else{R=4*(O*y+T)+v;var B=M(b,x,I[k=4*(O*y+x)+v],T,I[R]);S[_+v]=M(A,P,L,O,B)}},P=0;P<T;P++)for(var O=0;O<x;O++){var k=4*(P*x+O),R=O*y/x,L=Math.floor(R),B=Math.min(Math.ceil(R),y-1),j=P*b/T,U=Math.floor(j),z=Math.min(Math.ceil(j),b-1);A(k,0,R,L,B,j,U,z),A(k,1,R,L,B,j,U,z),A(k,2,R,L,B,j,U,z),A(k,3,R,L,B,j,U,z)}},_interpolate2D:function _interpolate2D(_,v,y,b){for(var x=_.data,T=v.data,I=_.width,S=_.height,M=v.width,A=v.height,P=Math.max(1,Math.floor(I/M)),O=M*P,k=Math.max(1,Math.floor(S/A)),R=A*k,L=Buffer.alloc(O*S*4),B=0;B<S;B++)for(var j=0;j<O;j++)for(var U=j*(I-1)/O,z=Math.floor(U),G=U-z,H=4*(B*I+z),V=4*(B*O+j),$=0;$<4;$++){var K=H+$,ee=z>0?x[K-4]:2*x[K]-x[K+4],re=x[K],ie=x[K+4],ne=z<I-2?x[K+8]:2*x[K+4]-x[K];L[V+$]=b(ee,re,ie,ne,G)}for(var ae=Buffer.alloc(O*R*4),oe=0;oe<R;oe++)for(var se=0;se<O;se++)for(var ce=oe*(S-1)/R,ue=Math.floor(ce),pe=ce-ue,he=4*(ue*O+se),de=4*(oe*O+se),fe=0;fe<4;fe++){var me=he+fe,ge=ue>0?L[me-4*O]:2*L[me]-L[me+4*O],_e=L[me],ve=L[me+4*O],ye=ue<S-2?L[me+8*O]:2*L[me+4*O]-L[me];ae[de+fe]=b(ge,_e,ve,ye,pe)}var be=P*k;if(be>1)for(var Ee=0;Ee<A;Ee++)for(var xe=0;xe<M;xe++){for(var Te=0,Ie=0,Se=0,Ae=0,Pe=0,Oe=0;Oe<k;Oe++)for(var Ce=Ee*k+Oe,De=0;De<P;De++){var Ne=4*(Ce*O+(xe*P+De)),ke=ae[Ne+3];ke&&(Te+=ae[Ne],Ie+=ae[Ne+1],Se+=ae[Ne+2],Pe++),Ae+=ke}var Le=4*(Ee*M+xe);T[Le]=Pe?Math.round(Te/Pe):0,T[Le+1]=Pe?Math.round(Ie/Pe):0,T[Le+2]=Pe?Math.round(Se/Pe):0,T[Le+3]=Math.round(Ae/be)}else v.data=ae},bicubicInterpolation:function bicubicInterpolation(_,v,y){return this._interpolate2D(_,v,y,(function interpolateCubic(_,v,y,b,x){var T=b-y-_+v,I=_-v-T,S=y-_,M=v;return Math.max(0,Math.min(255,T*(x*x*x)+I*(x*x)+S*x+M))}))},hermiteInterpolation:function hermiteInterpolation(_,v,y){return this._interpolate2D(_,v,y,(function interpolateHermite(_,v,y,b,x){var T=v,I=.5*(y-_),S=_-2.5*v+2*y-.5*b,M=.5*(b-_)+1.5*(v-y);return Math.max(0,Math.min(255,Math.round(((M*x+S)*x+I)*x+T)))}))},bezierInterpolation:function bezierInterpolation(_,v,y){return this._interpolate2D(_,v,y,(function interpolateBezier(_,v,y,b,x){var T=1-x,I=v*T*T*T,S=3*(v+(y-_)/4)*T*T*x,M=3*(y-(b-v)/4)*T*x*x,A=y*x*x*x;return Math.max(0,Math.min(255,Math.round(I+S+M+A)))}))}}},9814:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var b=y(1567);function advancedRotate(_,v){var y=(_%=360)*Math.PI/180,b=Math.cos(y),x=Math.sin(y),T=this.bitmap.width,I=this.bitmap.height;if(!0===v||"string"==typeof v){(T=Math.ceil(Math.abs(this.bitmap.width*b)+Math.abs(this.bitmap.height*x))+1)%2!=0&&T++,(I=Math.ceil(Math.abs(this.bitmap.width*x)+Math.abs(this.bitmap.height*b))+1)%2!=0&&I++;var S=this.cloneQuiet();this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(_,v,y){this.bitmap.data.writeUInt32BE(this._background,y)}));var M=Math.max(T,I,this.bitmap.width,this.bitmap.height);this.resize(M,M,v),this.blit(S,this.bitmap.width/2-S.bitmap.width/2,this.bitmap.height/2-S.bitmap.height/2)}var A=this.bitmap.width,P=this.bitmap.height,O=Buffer.alloc(this.bitmap.data.length);function createTranslationFunction(_,v){return function(y,b){return{x:y+_,y:b+v}}}for(var k=createTranslationFunction(-A/2,-P/2),R=createTranslationFunction(A/2+.5,P/2+.5),L=1;L<=P;L++)for(var B=1;B<=A;B++){var j=k(B,L),U=R(b*j.x-x*j.y,b*j.y+x*j.x),z=A*(L-1)+B-1<<2;if(U.x>=0&&U.x<A&&U.y>=0&&U.y<P){var G=(A*(0|U.y)+U.x|0)<<2,H=this.bitmap.data.readUInt32BE(G);O.writeUInt32BE(H,z)}else O.writeUInt32BE(this._background,z)}if(this.bitmap.data=O,!0===v||"string"==typeof v){var V=A/2-T/2,$=P/2-I/2;this.crop(V,$,T,I)}}v.default=function _default(){return{rotate:function rotate(_,v,y){return null==v&&(v=!0),"function"==typeof v&&void 0===y&&(y=v,v=!0),"number"!=typeof _?b.throwError.call(this,"deg must be a number",y):"boolean"!=typeof v&&"string"!=typeof v?b.throwError.call(this,"mode must be a boolean or a string",y):(advancedRotate.call(this,_,v,y),(0,b.isNodePattern)(y)&&y.call(this,null,this),this)}}}},4246:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var b=y(1567);v.default=function _default(){return{scale:function scale(_,v,y){if("number"!=typeof _)return b.throwError.call(this,"f must be a number",y);if(_<0)return b.throwError.call(this,"f must be a positive number",y);"function"==typeof v&&void 0===y&&(y=v,v=null);var x=this.bitmap.width*_,T=this.bitmap.height*_;return this.resize(x,T,v),(0,b.isNodePattern)(y)&&y.call(this,null,this),this},scaleToFit:function scaleToFit(_,v,y,x){if("number"!=typeof _||"number"!=typeof v)return b.throwError.call(this,"w and h must be numbers",x);"function"==typeof y&&void 0===x&&(x=y,y=null);var T=_/v>this.bitmap.width/this.bitmap.height?v/this.bitmap.height:_/this.bitmap.width;return this.scale(T,y),(0,b.isNodePattern)(x)&&x.call(this,null,this),this}}}},2510:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var b=y(1567);v.default=function _default(){return{shadow:function shadow(){var _=this,v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},y=arguments.length>1?arguments[1]:void 0;"function"==typeof v&&(y=v,v={});var x=v,T=x.opacity,I=void 0===T?.7:T,S=x.size,M=void 0===S?1.1:S,A=x.x,P=void 0===A?-25:A,O=x.y,k=void 0===O?25:O,R=x.blur,L=void 0===R?5:R,B=this.clone(),shadow=this.clone();return shadow.scan(0,0,shadow.bitmap.width,shadow.bitmap.height,(function(v,y,b){shadow.bitmap.data[b]=0,shadow.bitmap.data[b+1]=0,shadow.bitmap.data[b+2]=0,shadow.bitmap.data[b+3]=shadow.constructor.limit255(shadow.bitmap.data[b+3]*I),_.bitmap.data[b]=0,_.bitmap.data[b+1]=0,_.bitmap.data[b+2]=0,_.bitmap.data[b+3]=0})),shadow.resize(shadow.bitmap.width*M,shadow.bitmap.height*M).blur(L),this.composite(shadow,P,k),this.composite(B,0,0),(0,b.isNodePattern)(y)&&y.call(this,null,this),this}}}},4538:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var b=y(1567);v.default=function _default(){return{threshold:function threshold(_,v){var y=this,x=_.max,T=_.replace,I=void 0===T?255:T,S=_.autoGreyscale,M=void 0===S||S;return"number"!=typeof x?b.throwError.call(this,"max must be a number",v):"number"!=typeof I?b.throwError.call(this,"replace must be a number",v):"boolean"!=typeof M?b.throwError.call(this,"autoGreyscale must be a boolean",v):(x=this.constructor.limit255(x),I=this.constructor.limit255(I),M&&this.greyscale(),this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(_,v,b){var T=y.bitmap.data[b]<x?y.bitmap.data[b]:I;y.bitmap.data[b]=T,y.bitmap.data[b+1]=T,y.bitmap.data[b+2]=T})),(0,b.isNodePattern)(v)&&v.call(this,null,this),this)}}}},6240:(_,v,y)=>{"use strict";var b=y(4836);Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var x=b(y(861)),T=y(7011),I=b(y(2260)),S=b(y(7139)),M=b(y(4650)),A=b(y(809)),P=b(y(7890)),O=b(y(4587)),k=b(y(6544)),R=b(y(7679)),L=b(y(5380)),B=b(y(9462)),j=b(y(5980)),U=b(y(5092)),z=b(y(9085)),G=b(y(1218)),H=b(y(2042)),V=b(y(8869)),$=b(y(90)),K=b(y(9814)),ee=b(y(4246)),re=b(y(2510)),ie=b(y(4538)),ne=[I.default,S.default,M.default,A.default,P.default,O.default,k.default,R.default,L.default,B.default,j.default,U.default,z.default,G.default,H.default,V.default,$.default,K.default,ee.default,re.default,ie.default];v.default=function _default(_){var v=ne.map((function(v){var y=v(_)||{};return y.class||y.constants||(y={class:y}),y}));return T.mergeDeep.apply(void 0,(0,x.default)(v))}},7447:(_,v,y)=>{"use strict";var b=y(4836);Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var x=b(y(8416)),T=y(5477),I=y(1567);v.default=function _default(){return{mime:(0,x.default)({},"image/png",["png"]),constants:{MIME_PNG:"image/png",PNG_FILTER_AUTO:-1,PNG_FILTER_NONE:0,PNG_FILTER_SUB:1,PNG_FILTER_UP:2,PNG_FILTER_AVERAGE:3,PNG_FILTER_PATH:4},hasAlpha:(0,x.default)({},"image/png",!0),decoders:(0,x.default)({},"image/png",T.PNG.sync.read),encoders:(0,x.default)({},"image/png",(function(_){var v=new T.PNG({width:_.bitmap.width,height:_.bitmap.height});return v.data=_.bitmap.data,T.PNG.sync.write(v,{width:_.bitmap.width,height:_.bitmap.height,deflateLevel:_._deflateLevel,deflateStrategy:_._deflateStrategy,filterType:_._filterType,colorType:"number"==typeof _._colorType?_._colorType:_._rgba?6:2,inputHasAlpha:_._rgba})})),class:{_deflateLevel:9,_deflateStrategy:3,_filterType:-1,_colorType:null,deflateLevel:function deflateLevel(_,v){return"number"!=typeof _?I.throwError.call(this,"l must be a number",v):_<0||_>9?I.throwError.call(this,"l must be a number 0 - 9",v):(this._deflateLevel=Math.round(_),(0,I.isNodePattern)(v)&&v.call(this,null,this),this)},deflateStrategy:function deflateStrategy(_,v){return"number"!=typeof _?I.throwError.call(this,"s must be a number",v):_<0||_>3?I.throwError.call(this,"s must be a number 0 - 3",v):(this._deflateStrategy=Math.round(_),(0,I.isNodePattern)(v)&&v.call(this,null,this),this)},filterType:function filterType(_,v){return"number"!=typeof _?I.throwError.call(this,"n must be a number",v):_<-1||_>4?I.throwError.call(this,"n must be -1 (auto) or a number 0 - 4",v):(this._filterType=Math.round(_),(0,I.isNodePattern)(v)&&v.call(this,null,this),this)},colorType:function colorType(_,v){return"number"!=typeof _?I.throwError.call(this,"s must be a number",v):0!==_&&2!==_&&4!==_&&6!==_?I.throwError.call(this,"s must be a number 0, 2, 4, 6.",v):(this._colorType=Math.round(_),(0,I.isNodePattern)(v)&&v.call(this,null,this),this)}}}}},1326:(_,v,y)=>{"use strict";var b=y(4836);Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var x=b(y(8416)),T=b(y(6173));v.default=function _default(){return{mime:(0,x.default)({},"image/tiff",["tiff","tif"]),constants:{MIME_TIFF:"image/tiff"},decoders:(0,x.default)({},"image/tiff",(function(_){var v=T.default.decode(_),y=v[0];T.default.decodeImages(_,v);var b=T.default.toRGBA8(y);return{data:Buffer.from(b),width:y.t256[0],height:y.t257[0]}})),encoders:(0,x.default)({},"image/tiff",(function(_){var v=T.default.encodeImage(_.bitmap.data,_.bitmap.width,_.bitmap.height);return Buffer.from(v)}))}}},3754:(_,v,y)=>{"use strict";var b=y(4836);Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var x=y(7011),T=b(y(3853)),I=b(y(7447)),S=b(y(2878)),M=b(y(1326)),A=b(y(2744));v.default=function _default(){return(0,x.mergeDeep)((0,T.default)(),(0,I.default)(),(0,S.default)(),(0,M.default)(),(0,A.default)())}},1567:(_,v,y)=>{"use strict";var b=y(4836);Object.defineProperty(v,"__esModule",{value:!0}),v.isNodePattern=function isNodePattern(_){if(void 0===_)return!1;if("function"!=typeof _)throw new TypeError("Callback must be a function");return!0},v.throwError=function throwError(_,v){"string"==typeof _&&(_=new Error(_));if("function"==typeof v)return v.call(this,_);throw _},v.scan=function scan(_,v,y,b,x,T){v=Math.round(v),y=Math.round(y),b=Math.round(b),x=Math.round(x);for(var I=y;I<y+x;I++)for(var S=v;S<v+b;S++){var M=_.bitmap.width*I+S<<2;T.call(_,S,I,M)}return _},v.scanIterator=scanIterator;var x=b(y(4687)),T=x.default.mark(scanIterator);function scanIterator(_,v,y,b,I){var S,M,A;return x.default.wrap((function scanIterator$(x){for(;;)switch(x.prev=x.next){case 0:v=Math.round(v),y=Math.round(y),b=Math.round(b),I=Math.round(I),S=y;case 5:if(!(S<y+I)){x.next=17;break}M=v;case 7:if(!(M<v+b)){x.next=14;break}return A=_.bitmap.width*S+M<<2,x.next=11,{x:M,y:S,idx:A,image:_};case 11:M++,x.next=7;break;case 14:S++,x.next=5;break;case 17:case"end":return x.stop()}}),T)}},964:(_,v,y)=>{var b=y(2661);function anyBase(_,v){var y=new b(_,v);return function(_){return y.convert(_)}}anyBase.BIN="01",anyBase.OCT="01234567",anyBase.DEC="0123456789",anyBase.HEX="0123456789abcdef",_.exports=anyBase},2661:_=>{"use strict";function Converter(_,v){if(!(_&&v&&_.length&&v.length))throw new Error("Bad alphabet");this.srcAlphabet=_,this.dstAlphabet=v}Converter.prototype.convert=function(_){var v,y,b,x={},T=this.srcAlphabet.length,I=this.dstAlphabet.length,S=_.length,M="string"==typeof _?"":[];if(!this.isValid(_))throw new Error('Number "'+_+'" contains of non-alphabetic digits ('+this.srcAlphabet+")");if(this.srcAlphabet===this.dstAlphabet)return _;for(v=0;v<S;v++)x[v]=this.srcAlphabet.indexOf(_[v]);do{for(y=0,b=0,v=0;v<S;v++)(y=y*T+x[v])>=I?(x[b++]=parseInt(y/I,10),y%=I):b>0&&(x[b++]=0);S=b,M=this.dstAlphabet.slice(y,y+1).concat(M)}while(0!==b);return M},Converter.prototype.isValid=function(_){for(var v=0;v<_.length;++v)if(-1===this.srcAlphabet.indexOf(_[v]))return!1;return!0},_.exports=Converter},784:(_,v,y)=>{var b=y(8232),x=y(6871);_.exports={encode:b,decode:x}},6871:_=>{function BmpDecoder(_,v){if(this.pos=0,this.buffer=_,this.is_with_alpha=!!v,this.bottom_up=!0,this.flag=this.buffer.toString("utf-8",0,this.pos+=2),"BM"!=this.flag)throw new Error("Invalid BMP File");this.parseHeader(),this.parseRGBA()}BmpDecoder.prototype.parseHeader=function(){if(this.fileSize=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.reserved=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.offset=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.headerSize=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.width=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.height=this.buffer.readInt32LE(this.pos),this.pos+=4,this.planes=this.buffer.readUInt16LE(this.pos),this.pos+=2,this.bitPP=this.buffer.readUInt16LE(this.pos),this.pos+=2,this.compress=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.rawSize=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.hr=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.vr=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.colors=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.importantColors=this.buffer.readUInt32LE(this.pos),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var _=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(_);for(var v=0;v<_;v++){var y=this.buffer.readUInt8(this.pos++),b=this.buffer.readUInt8(this.pos++),x=this.buffer.readUInt8(this.pos++),T=this.buffer.readUInt8(this.pos++);this.palette[v]={red:x,green:b,blue:y,quad:T}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},BmpDecoder.prototype.parseRGBA=function(){var _="bit"+this.bitPP,v=this.width*this.height*4;this.data=new Buffer(v),this[_]()},BmpDecoder.prototype.bit1=function(){var _=Math.ceil(this.width/8),v=_%4,y=this.height>=0?this.height-1:-this.height;for(y=this.height-1;y>=0;y--){for(var b=this.bottom_up?y:this.height-1-y,x=0;x<_;x++)for(var T=this.buffer.readUInt8(this.pos++),I=b*this.width*4+8*x*4,S=0;S<8&&8*x+S<this.width;S++){var M=this.palette[T>>7-S&1];this.data[I+4*S]=0,this.data[I+4*S+1]=M.blue,this.data[I+4*S+2]=M.green,this.data[I+4*S+3]=M.red}0!=v&&(this.pos+=4-v)}},BmpDecoder.prototype.bit4=function(){if(2==this.compress){this.data.fill(255);for(var _=0,v=this.bottom_up?this.height-1:0,y=!1;_<this.data.length;){var b=this.buffer.readUInt8(this.pos++),x=this.buffer.readUInt8(this.pos++);if(0==b){if(0==x){this.bottom_up?v--:v++,_=v*this.width*4,y=!1;continue}if(1==x)break;if(2==x){var T=this.buffer.readUInt8(this.pos++),I=this.buffer.readUInt8(this.pos++);this.bottom_up?v-=I:v+=I,_+=I*this.width*4+4*T}else{for(var S=this.buffer.readUInt8(this.pos++),M=0;M<x;M++)y?setPixelData.call(this,15&S):setPixelData.call(this,(240&S)>>4),1&M&&M+1<x&&(S=this.buffer.readUInt8(this.pos++)),y=!y;1==(x+1>>1&1)&&this.pos++}}else for(M=0;M<b;M++)y?setPixelData.call(this,15&x):setPixelData.call(this,(240&x)>>4),y=!y}function setPixelData(v){var y=this.palette[v];this.data[_]=0,this.data[_+1]=y.blue,this.data[_+2]=y.green,this.data[_+3]=y.red,_+=4}}else{var A=Math.ceil(this.width/2),P=A%4;for(I=this.height-1;I>=0;I--){var O=this.bottom_up?I:this.height-1-I;for(T=0;T<A;T++){x=this.buffer.readUInt8(this.pos++),_=O*this.width*4+2*T*4;var k=x>>4,R=15&x,L=this.palette[k];if(this.data[_]=0,this.data[_+1]=L.blue,this.data[_+2]=L.green,this.data[_+3]=L.red,2*T+1>=this.width)break;L=this.palette[R],this.data[_+4]=0,this.data[_+4+1]=L.blue,this.data[_+4+2]=L.green,this.data[_+4+3]=L.red}0!=P&&(this.pos+=4-P)}}},BmpDecoder.prototype.bit8=function(){if(1==this.compress){this.data.fill(255);for(var _=0,v=this.bottom_up?this.height-1:0;_<this.data.length;){var y=this.buffer.readUInt8(this.pos++),b=this.buffer.readUInt8(this.pos++);if(0==y){if(0==b){this.bottom_up?v--:v++,_=v*this.width*4;continue}if(1==b)break;if(2==b){var x=this.buffer.readUInt8(this.pos++),T=this.buffer.readUInt8(this.pos++);this.bottom_up?v-=T:v+=T,_+=T*this.width*4+4*x}else{for(var I=0;I<b;I++){var S=this.buffer.readUInt8(this.pos++);setPixelData.call(this,S)}!0&b&&this.pos++}}else for(I=0;I<y;I++)setPixelData.call(this,b)}function setPixelData(v){var y=this.palette[v];this.data[_]=0,this.data[_+1]=y.blue,this.data[_+2]=y.green,this.data[_+3]=y.red,_+=4}}else{var M=this.width%4;for(T=this.height-1;T>=0;T--){var A=this.bottom_up?T:this.height-1-T;for(x=0;x<this.width;x++){b=this.buffer.readUInt8(this.pos++),_=A*this.width*4+4*x;if(b<this.palette.length){var P=this.palette[b];this.data[_]=0,this.data[_+1]=P.blue,this.data[_+2]=P.green,this.data[_+3]=P.red}else this.data[_]=0,this.data[_+1]=255,this.data[_+2]=255,this.data[_+3]=255}0!=M&&(this.pos+=4-M)}}},BmpDecoder.prototype.bit15=function(){for(var _=this.width%3,v=parseInt("11111",2),y=this.height-1;y>=0;y--){for(var b=this.bottom_up?y:this.height-1-y,x=0;x<this.width;x++){var T=this.buffer.readUInt16LE(this.pos);this.pos+=2;var I=(T&v)/v*255|0,S=(T>>5&v)/v*255|0,M=(T>>10&v)/v*255|0,A=T>>15?255:0,P=b*this.width*4+4*x;this.data[P]=A,this.data[P+1]=I,this.data[P+2]=S,this.data[P+3]=M}this.pos+=_}},BmpDecoder.prototype.bit16=function(){var _=this.width%2*2;this.maskRed=31744,this.maskGreen=992,this.maskBlue=31,this.mask0=0,3==this.compress&&(this.maskRed=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.maskGreen=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.maskBlue=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.mask0=this.buffer.readUInt32LE(this.pos),this.pos+=4);for(var v=[0,0,0],y=0;y<16;y++)this.maskRed>>y&1&&v[0]++,this.maskGreen>>y&1&&v[1]++,this.maskBlue>>y&1&&v[2]++;v[1]+=v[0],v[2]+=v[1],v[0]=8-v[0],v[1]-=8,v[2]-=8;for(var b=this.height-1;b>=0;b--){for(var x=this.bottom_up?b:this.height-1-b,T=0;T<this.width;T++){var I=this.buffer.readUInt16LE(this.pos);this.pos+=2;var S=(I&this.maskBlue)<<v[0],M=(I&this.maskGreen)>>v[1],A=(I&this.maskRed)>>v[2],P=x*this.width*4+4*T;this.data[P]=0,this.data[P+1]=S,this.data[P+2]=M,this.data[P+3]=A}this.pos+=_}},BmpDecoder.prototype.bit24=function(){for(var _=this.height-1;_>=0;_--){for(var v=this.bottom_up?_:this.height-1-_,y=0;y<this.width;y++){var b=this.buffer.readUInt8(this.pos++),x=this.buffer.readUInt8(this.pos++),T=this.buffer.readUInt8(this.pos++),I=v*this.width*4+4*y;this.data[I]=0,this.data[I+1]=b,this.data[I+2]=x,this.data[I+3]=T}this.pos+=this.width%4}},BmpDecoder.prototype.bit32=function(){if(3==this.compress){this.maskRed=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.maskGreen=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.maskBlue=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.mask0=this.buffer.readUInt32LE(this.pos),this.pos+=4;for(var _=this.height-1;_>=0;_--)for(var v=this.bottom_up?_:this.height-1-_,y=0;y<this.width;y++){var b=this.buffer.readUInt8(this.pos++),x=this.buffer.readUInt8(this.pos++),T=this.buffer.readUInt8(this.pos++),I=this.buffer.readUInt8(this.pos++),S=v*this.width*4+4*y;this.data[S]=b,this.data[S+1]=x,this.data[S+2]=T,this.data[S+3]=I}}else for(_=this.height-1;_>=0;_--)for(v=this.bottom_up?_:this.height-1-_,y=0;y<this.width;y++){x=this.buffer.readUInt8(this.pos++),T=this.buffer.readUInt8(this.pos++),I=this.buffer.readUInt8(this.pos++),b=this.buffer.readUInt8(this.pos++),S=v*this.width*4+4*y;this.data[S]=b,this.data[S+1]=x,this.data[S+2]=T,this.data[S+3]=I}},BmpDecoder.prototype.getData=function(){return this.data},_.exports=function(_){return new BmpDecoder(_)}},8232:_=>{function BmpEncoder(_){this.buffer=_.data,this.width=_.width,this.height=_.height,this.extraBytes=this.width%4,this.rgbSize=this.height*(3*this.width+this.extraBytes),this.headerInfoSize=40,this.data=[],this.flag="BM",this.reserved=0,this.offset=54,this.fileSize=this.rgbSize+this.offset,this.planes=1,this.bitPP=24,this.compress=0,this.hr=0,this.vr=0,this.colors=0,this.importantColors=0}BmpEncoder.prototype.encode=function(){var _=new Buffer(this.offset+this.rgbSize);this.pos=0,_.write(this.flag,this.pos,2),this.pos+=2,_.writeUInt32LE(this.fileSize,this.pos),this.pos+=4,_.writeUInt32LE(this.reserved,this.pos),this.pos+=4,_.writeUInt32LE(this.offset,this.pos),this.pos+=4,_.writeUInt32LE(this.headerInfoSize,this.pos),this.pos+=4,_.writeUInt32LE(this.width,this.pos),this.pos+=4,_.writeInt32LE(-this.height,this.pos),this.pos+=4,_.writeUInt16LE(this.planes,this.pos),this.pos+=2,_.writeUInt16LE(this.bitPP,this.pos),this.pos+=2,_.writeUInt32LE(this.compress,this.pos),this.pos+=4,_.writeUInt32LE(this.rgbSize,this.pos),this.pos+=4,_.writeUInt32LE(this.hr,this.pos),this.pos+=4,_.writeUInt32LE(this.vr,this.pos),this.pos+=4,_.writeUInt32LE(this.colors,this.pos),this.pos+=4,_.writeUInt32LE(this.importantColors,this.pos),this.pos+=4;for(var v=0,y=3*this.width+this.extraBytes,b=0;b<this.height;b++){for(var x=0;x<this.width;x++){var T=this.pos+b*y+3*x;v++,_[T]=this.buffer[v++],_[T+1]=this.buffer[v++],_[T+2]=this.buffer[v++]}if(this.extraBytes>0){var I=this.pos+b*y+3*this.width;_.fill(0,I,I+this.extraBytes)}}return _},_.exports=function(_,v){return void 0===v&&(v=100),{data:new BmpEncoder(_).encode(),width:_.width,height:_.height}}},2369:(_,v,y)=>{var b=y(4300).Buffer;_.exports=function(_,v){if(b.isBuffer(_)&&b.isBuffer(v)){if("function"==typeof _.equals)return _.equals(v);if(_.length!==v.length)return!1;for(var y=0;y<_.length;y++)if(_[y]!==v[y])return!1;return!0}}},2594:(_,v,y)=>{var b=y(3518);_.exports={create:function(_,v){if(_ instanceof(v=v||function getGlobal(){return(0,eval)("this")}()).ArrayBuffer){var x=y(9565);return new b(new x(_,0,_.byteLength,!0,v))}var T=y(1618);return new b(new T(_,0,_.length,!0))}}},1618:_=>{function BufferStream(_,v,y,b){this.buffer=_,this.offset=v||0,y="number"==typeof y?y:_.length,this.endPosition=this.offset+y,this.setBigEndian(b)}BufferStream.prototype={setBigEndian:function(_){this.bigEndian=!!_},nextUInt8:function(){var _=this.buffer.readUInt8(this.offset);return this.offset+=1,_},nextInt8:function(){var _=this.buffer.readInt8(this.offset);return this.offset+=1,_},nextUInt16:function(){var _=this.bigEndian?this.buffer.readUInt16BE(this.offset):this.buffer.readUInt16LE(this.offset);return this.offset+=2,_},nextUInt32:function(){var _=this.bigEndian?this.buffer.readUInt32BE(this.offset):this.buffer.readUInt32LE(this.offset);return this.offset+=4,_},nextInt16:function(){var _=this.bigEndian?this.buffer.readInt16BE(this.offset):this.buffer.readInt16LE(this.offset);return this.offset+=2,_},nextInt32:function(){var _=this.bigEndian?this.buffer.readInt32BE(this.offset):this.buffer.readInt32LE(this.offset);return this.offset+=4,_},nextFloat:function(){var _=this.bigEndian?this.buffer.readFloatBE(this.offset):this.buffer.readFloatLE(this.offset);return this.offset+=4,_},nextDouble:function(){var _=this.bigEndian?this.buffer.readDoubleBE(this.offset):this.buffer.readDoubleLE(this.offset);return this.offset+=8,_},nextBuffer:function(_){var v=this.buffer.slice(this.offset,this.offset+_);return this.offset+=_,v},remainingLength:function(){return this.endPosition-this.offset},nextString:function(_){var v=this.buffer.toString("utf8",this.offset,this.offset+_);return this.offset+=_,v},mark:function(){var _=this;return{openWithOffset:function(v){return v=(v||0)+this.offset,new BufferStream(_.buffer,v,_.endPosition-v,_.bigEndian)},offset:this.offset}},offsetFrom:function(_){return this.offset-_.offset},skip:function(_){this.offset+=_},branch:function(_,v){return v="number"==typeof v?v:this.endPosition-(this.offset+_),new BufferStream(this.buffer,this.offset+_,v,this.bigEndian)}},_.exports=BufferStream},292:_=>{function parseNumber(_){return parseInt(_,10)}function parseDateTimeParts(_,v){_=_.map(parseNumber),v=v.map(parseNumber);var y=_[0],b=_[1]-1,x=_[2],T=v[0],I=v[1],S=v[2];return Date.UTC(y,b,x,T,I,S,0)/1e3}function parseDateWithTimezoneFormat(_){var v=_.substr(0,10).split("-"),y=_.substr(11,8).split(":"),b=_.substr(19,6).split(":").map(parseNumber),x=3600*b[0]+60*b[1],T=parseDateTimeParts(v,y);if("number"==typeof(T-=x)&&!isNaN(T))return T}function parseDateWithSpecFormat(_){var v=_.split(" "),y=parseDateTimeParts(v[0].split(":"),v[1].split(":"));if("number"==typeof y&&!isNaN(y))return y}_.exports={parseDateWithSpecFormat:parseDateWithSpecFormat,parseDateWithTimezoneFormat:parseDateWithTimezoneFormat,parseExifDate:function parseExifDate(_){var v=19===_.length&&":"===_.charAt(4);return 25===_.length&&"T"===_.charAt(10)?parseDateWithTimezoneFormat(_):v?parseDateWithSpecFormat(_):void 0}}},9565:_=>{function DOMBufferStream(_,v,y,b,x,T){this.global=x,v=v||0,y=y||_.byteLength-v,this.arrayBuffer=_.slice(v,v+y),this.view=new x.DataView(this.arrayBuffer,0,this.arrayBuffer.byteLength),this.setBigEndian(b),this.offset=0,this.parentOffset=(T||0)+v}DOMBufferStream.prototype={setBigEndian:function(_){this.littleEndian=!_},nextUInt8:function(){var _=this.view.getUint8(this.offset);return this.offset+=1,_},nextInt8:function(){var _=this.view.getInt8(this.offset);return this.offset+=1,_},nextUInt16:function(){var _=this.view.getUint16(this.offset,this.littleEndian);return this.offset+=2,_},nextUInt32:function(){var _=this.view.getUint32(this.offset,this.littleEndian);return this.offset+=4,_},nextInt16:function(){var _=this.view.getInt16(this.offset,this.littleEndian);return this.offset+=2,_},nextInt32:function(){var _=this.view.getInt32(this.offset,this.littleEndian);return this.offset+=4,_},nextFloat:function(){var _=this.view.getFloat32(this.offset,this.littleEndian);return this.offset+=4,_},nextDouble:function(){var _=this.view.getFloat64(this.offset,this.littleEndian);return this.offset+=8,_},nextBuffer:function(_){var v=this.arrayBuffer.slice(this.offset,this.offset+_);return this.offset+=_,v},remainingLength:function(){return this.arrayBuffer.byteLength-this.offset},nextString:function(_){var v=this.arrayBuffer.slice(this.offset,this.offset+_);return v=String.fromCharCode.apply(null,new this.global.Uint8Array(v)),this.offset+=_,v},mark:function(){var _=this;return{openWithOffset:function(v){return v=(v||0)+this.offset,new DOMBufferStream(_.arrayBuffer,v,_.arrayBuffer.byteLength-v,!_.littleEndian,_.global,_.parentOffset)},offset:this.offset,getParentOffset:function(){return _.parentOffset}}},offsetFrom:function(_){return this.parentOffset+this.offset-(_.offset+_.getParentOffset())},skip:function(_){this.offset+=_},branch:function(_,v){return v="number"==typeof v?v:this.arrayBuffer.byteLength-(this.offset+_),new DOMBufferStream(this.arrayBuffer,this.offset+_,v,!this.littleEndian,this.global,this.parentOffset)}},_.exports=DOMBufferStream},2108:_=>{_.exports={exif:{1:"InteropIndex",2:"InteropVersion",11:"ProcessingSoftware",254:"SubfileType",255:"OldSubfileType",256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Thresholding",264:"CellWidth",265:"CellLength",266:"FillOrder",269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",285:"PageName",286:"XPosition",287:"YPosition",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",292:"T4Options",293:"T6Options",296:"ResolutionUnit",297:"PageNumber",300:"ColorResponseUnit",301:"TransferFunction",305:"Software",306:"ModifyDate",315:"Artist",316:"HostComputer",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",320:"ColorMap",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFD",332:"InkSet",333:"InkNames",334:"NumberofInks",336:"DotRange",337:"TargetPrinter",338:"ExtraSamples",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",435:"T82Options",437:"JPEGTables",512:"JPEGProc",513:"ThumbnailOffset",514:"ThumbnailLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"ApplicationNotes",999:"USPTOMiscellaneous",4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight",18246:"Rating",18247:"XP_DIP_XML",18248:"StitchInfo",18249:"RatingPercent",32781:"ImageID",32931:"WangTag1",32932:"WangAnnotation",32933:"WangTag3",32934:"WangTag4",32995:"Matteing",32996:"DataType",32997:"ImageDepth",32998:"TileDepth",33405:"Model2",33421:"CFARepeatPatternDim",33422:"CFAPattern2",33423:"BatteryLevel",33424:"KodakIFD",33432:"Copyright",33434:"ExposureTime",33437:"FNumber",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"PixelScale",33589:"AdventScale",33590:"AdventRevision",33628:"UIC1Tag",33629:"UIC2Tag",33630:"UIC3Tag",33631:"UIC4Tag",33723:"IPTC-NAA",33918:"IntergraphPacketData",33919:"IntergraphFlagRegisters",33920:"IntergraphMatrix",33921:"INGRReserved",33922:"ModelTiePoint",34016:"Site",34017:"ColorSequence",34018:"IT8Header",34019:"RasterPadding",34020:"BitsPerRunLength",34021:"BitsPerExtendedRunLength",34022:"ColorTable",34023:"ImageColorIndicator",34024:"BackgroundColorIndicator",34025:"ImageColorValue",34026:"BackgroundColorValue",34027:"PixelIntensityRange",34028:"TransparencyIndicator",34029:"ColorCharacterization",34030:"HCUsage",34031:"TrapIndicator",34032:"CMYKEquivalent",34118:"SEMInfo",34152:"AFCP_IPTC",34232:"PixelMagicJBIGOptions",34264:"ModelTransform",34306:"WB_GRGBLevels",34310:"LeafData",34377:"PhotoshopSettings",34665:"ExifOffset",34675:"ICC_Profile",34687:"TIFF_FXExtensions",34688:"MultiProfiles",34689:"SharedData",34690:"T88Options",34732:"ImageLayer",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34850:"ExposureProgram",34852:"SpectralSensitivity",34853:"GPSInfo",34855:"ISO",34856:"Opto-ElectricConvFactor",34857:"Interlace",34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",34908:"FaxRecvParams",34909:"FaxSubAddress",34910:"FaxRecvTime",34954:"LeafSubIFD",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"CreateDate",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureCompensation",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37387:"FlashEnergy",37388:"SpatialFrequencyResponse",37389:"Noise",37390:"FocalPlaneXResolution",37391:"FocalPlaneYResolution",37392:"FocalPlaneResolutionUnit",37393:"ImageNumber",37394:"SecurityClassification",37395:"ImageHistory",37396:"SubjectArea",37397:"ExposureIndex",37398:"TIFF-EPStandardID",37399:"SensingMethod",37434:"CIP3DataFile",37435:"CIP3Sheet",37436:"CIP3Side",37439:"StoNits",37500:"MakerNote",37510:"UserComment",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37679:"MSDocumentText",37680:"MSPropertySetStorage",37681:"MSDocumentTextPosition",37724:"ImageSourceData",40091:"XPTitle",40092:"XPComment",40093:"XPAuthor",40094:"XPKeywords",40095:"XPSubject",40960:"FlashpixVersion",40961:"ColorSpace",40962:"ExifImageWidth",40963:"ExifImageHeight",40964:"RelatedSoundFile",40965:"InteropOffset",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41485:"Noise",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41489:"ImageNumber",41490:"SecurityClassification",41491:"ImageHistory",41492:"SubjectLocation",41493:"ExposureIndex",41494:"TIFF-EPStandardID",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFormat",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"OwnerName",42033:"SerialNumber",42034:"LensInfo",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42112:"GDALMetadata",42113:"GDALNoData",42240:"Gamma",44992:"ExpandSoftware",44993:"ExpandLens",44994:"ExpandFilm",44995:"ExpandFilterLens",44996:"ExpandScanner",44997:"ExpandFlashLamp",48129:"PixelFormat",48130:"Transformation",48131:"Uncompressed",48132:"ImageType",48256:"ImageWidth",48257:"ImageHeight",48258:"WidthResolution",48259:"HeightResolution",48320:"ImageOffset",48321:"ImageByteCount",48322:"AlphaOffset",48323:"AlphaByteCount",48324:"ImageDataDiscard",48325:"AlphaDataDiscard",50215:"OceScanjobDesc",50216:"OceApplicationSelector",50217:"OceIDNumber",50218:"OceImageLogic",50255:"Annotations",50341:"PrintIM",50560:"USPTOOriginalContentType",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50739:"ShadowScale",50740:"DNGPrivateData",50741:"MakerNoteSafety",50752:"RawImageSegmentation",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50781:"RawDataUniqueID",50784:"AliasLayerMetadata",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50829:"ActiveArea",50830:"MaskedAreas",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50935:"NoiseReductionApplied",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:"ProfileEmbedPolicy",50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:"PreviewColorSpace",50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50974:"SubTileBlockSize",50975:"RowInterleaveFactor",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51008:"OpcodeList1",51009:"OpcodeList2",51022:"OpcodeList3",51041:"NoiseProfile",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:"ProfileHueSatMapEncoding",51108:"ProfileLookTableEncoding",51109:"BaselineExposureOffset",51110:"DefaultBlackRender",51111:"NewRawImageDigest",51112:"RawToPreviewGain",51125:"DefaultUserCrop",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65024:"KDC_IFD",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"}}},7315:_=>{function readExifValue(_,v){switch(_){case 1:return v.nextUInt8();case 3:return v.nextUInt16();case 4:return v.nextUInt32();case 5:return[v.nextUInt32(),v.nextUInt32()];case 6:return v.nextInt8();case 8:return v.nextUInt16();case 9:return v.nextUInt32();case 10:return[v.nextInt32(),v.nextInt32()];case 11:return v.nextFloat();case 12:return v.nextDouble();default:throw new Error("Invalid format while decoding: "+_)}}function readExifTag(_,v){var y,b,x=v.nextUInt16(),T=v.nextUInt16(),I=function getBytesPerComponent(_){switch(_){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}}(T),S=v.nextUInt32(),M=I*S;if(M>4&&(v=_.openWithOffset(v.nextUInt32())),2===T){var A=(y=v.nextString(S)).indexOf("\0");-1!==A&&(y=y.substr(0,A))}else if(7===T)y=v.nextBuffer(S);else if(0!==T)for(y=[],b=0;b<S;++b)y.push(readExifValue(T,v));return M<4&&v.skip(4-M),[x,y,T]}function readIFDSection(_,v,y){var b,x,T=v.nextUInt16();for(x=0;x<T;++x)y((b=readExifTag(_,v))[0],b[1],b[2])}_.exports={IFD0:1,IFD1:2,GPSIFD:3,SubIFD:4,InteropIFD:5,parseTags:function(_,v){var y,b,x,T;try{y=function readHeader(_){if("Exif\0\0"!==_.nextString(6))throw new Error("Invalid EXIF header");var v=_.mark(),y=_.nextUInt16();if(18761===y)_.setBigEndian(!1);else{if(19789!==y)throw new Error("Invalid TIFF header");_.setBigEndian(!0)}if(42!==_.nextUInt16())throw new Error("Invalid TIFF data");return v}(_)}catch(_){return!1}var I=y.openWithOffset(_.nextUInt32()),S=this.IFD0;readIFDSection(y,I,(function(_,y,T){switch(_){case 34853:x=y[0];break;case 34665:b=y[0];break;default:v(S,_,y,T)}}));var M=I.nextUInt32();if(0!==M){var A=y.openWithOffset(M);readIFDSection(y,A,v.bind(null,this.IFD1))}if(x){var P=y.openWithOffset(x);readIFDSection(y,P,v.bind(null,this.GPSIFD))}if(b){var O=y.openWithOffset(b),k=this.InteropIFD;readIFDSection(y,O,(function(_,y,b){40965===_?T=y[0]:v(k,_,y,b)}))}if(T){var R=y.openWithOffset(T);readIFDSection(y,R,v.bind(null,this.InteropIFD))}return!0}}},329:_=>{_.exports={parseSections:function(_,v){var y,b;for(_.setBigEndian(!0);_.remainingLength()>0&&218!==b;){if(255!==_.nextUInt8())throw new Error("Invalid JPEG section offset");y=(b=_.nextUInt8())>=208&&b<=217||218===b?0:_.nextUInt16()-2,v(b,_.branch(0,y)),_.skip(y)}},getSizeFromSOFSection:function(_){return _.skip(1),{height:_.nextUInt16(),width:_.nextUInt16()}},getSectionName:function(_){var v,y;switch(_){case 216:v="SOI";break;case 196:v="DHT";break;case 219:v="DQT";break;case 221:v="DRI";break;case 218:v="SOS";break;case 254:v="COM";break;case 217:v="EOI";break;default:_>=224&&_<=239?(v="APP",y=_-224):_>=192&&_<=207&&196!==_&&200!==_&&204!==_?(v="SOF",y=_-192):_>=208&&_<=215&&(v="RST",y=_-208)}var b={name:v};return"number"==typeof y&&(b.index=y),b}}},3518:(_,v,y)=>{var b=y(329),x=y(7315),T=y(2410);function ExifResult(_,v,y,b,x,T,I){this.startMarker=_,this.tags=v,this.imageSize=y,this.thumbnailOffset=b,this.thumbnailLength=x,this.thumbnailType=T,this.app1Offset=I}function Parser(_){this.stream=_,this.flags={readBinaryTags:!1,resolveTagNames:!0,simplifyValues:!0,imageSize:!0,hidePointers:!0,returnTags:!0}}ExifResult.prototype={hasThumbnail:function(_){return!(!this.thumbnailOffset||!this.thumbnailLength)&&("string"!=typeof _||("image/jpeg"===_.toLowerCase().trim()?6===this.thumbnailType:"image/tiff"===_.toLowerCase().trim()&&1===this.thumbnailType))},getThumbnailOffset:function(){return this.app1Offset+6+this.thumbnailOffset},getThumbnailLength:function(){return this.thumbnailLength},getThumbnailBuffer:function(){return this._getThumbnailStream().nextBuffer(this.thumbnailLength)},_getThumbnailStream:function(){return this.startMarker.openWithOffset(this.getThumbnailOffset())},getImageSize:function(){return this.imageSize},getThumbnailSize:function(){var _,v=this._getThumbnailStream();return b.parseSections(v,(function(v,y){"SOF"===b.getSectionName(v).name&&(_=b.getSizeFromSOFSection(y))})),_}},Parser.prototype={enableBinaryFields:function(_){return this.flags.readBinaryTags=!!_,this},enablePointers:function(_){return this.flags.hidePointers=!_,this},enableTagNames:function(_){return this.flags.resolveTagNames=!!_,this},enableImageSize:function(_){return this.flags.imageSize=!!_,this},enableReturnTags:function(_){return this.flags.returnTags=!!_,this},enableSimpleValues:function(_){return this.flags.simplifyValues=!!_,this},parse:function(){var _,v,I,S,M,A,P,O,k,R=this.stream.mark(),L=R.openWithOffset(0),B=this.flags;return B.resolveTagNames&&(P=y(2108)),B.resolveTagNames?(_={},O=function(v){return _[v.name]},k=function(v,y){_[v.name]=y}):(_=[],O=function(v){var y;for(y=0;y<_.length;++y)if(_[y].type===v.type&&_[y].section===v.section)return _.value},k=function(v,y){var b;for(b=0;b<_.length;++b)if(_[b].type===v.type&&_[b].section===v.section)return void(_.value=y)}),b.parseSections(L,(function(y,O){var k=O.offsetFrom(R);225===y?x.parseTags(O,(function(v,y,b,A){if(B.readBinaryTags||7!==A){if(513===y){if(I=b[0],B.hidePointers)return}else if(514===y){if(S=b[0],B.hidePointers)return}else if(259===y&&(M=b[0],B.hidePointers))return;if(B.returnTags)if(B.simplifyValues&&(b=T.simplifyValue(b,A)),B.resolveTagNames){var O=(v===x.GPSIFD?P.gps:P.exif)[y];O||(O=P.exif[y]),_.hasOwnProperty(O)||(_[O]=b)}else _.push({section:v,type:y,value:b})}}))&&(A=k):B.imageSize&&"SOF"===b.getSectionName(y).name&&(v=b.getSizeFromSOFSection(O))})),B.simplifyValues&&(T.castDegreeValues(O,k),T.castDateValues(O,k)),new ExifResult(R,_,v,I,S,M,A)}},_.exports=Parser},2410:(_,v,y)=>{var b=y(7315),x=y(292),T=[{section:b.GPSIFD,type:2,name:"GPSLatitude",refType:1,refName:"GPSLatitudeRef",posVal:"N"},{section:b.GPSIFD,type:4,name:"GPSLongitude",refType:3,refName:"GPSLongitudeRef",posVal:"E"}],I=[{section:b.SubIFD,type:306,name:"ModifyDate"},{section:b.SubIFD,type:36867,name:"DateTimeOriginal"},{section:b.SubIFD,type:36868,name:"CreateDate"},{section:b.SubIFD,type:306,name:"ModifyDate"}];_.exports={castDegreeValues:function(_,v){T.forEach((function(y){var b=_(y);if(b){var x=_({section:y.section,type:y.refType,name:y.refName})===y.posVal?1:-1,T=(b[0]+b[1]/60+b[2]/3600)*x;v(y,T)}}))},castDateValues:function(_,v){I.forEach((function(y){var b=_(y);if(b){var T=x.parseExifDate(b);void 0!==T&&v(y,T)}}))},simplifyValue:function(_,v){return Array.isArray(_)&&1===(_=_.map((function(_){return 10===v||5===v?_[0]/_[1]:_}))).length&&(_=_[0]),_}}},1:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const Token=__webpack_require__(3416),strtok3=__webpack_require__(5849),{stringToBytes:stringToBytes,tarHeaderChecksumMatches:tarHeaderChecksumMatches,uint32SyncSafeToken:uint32SyncSafeToken,uint8ArrayUtf8ByteString:uint8ArrayUtf8ByteString}=__webpack_require__(6188),supported=__webpack_require__(9898),minimumBytes=4100;async function fromStream(_){const v=await strtok3.fromStream(_);try{return await fromTokenizer(v)}finally{await v.close()}}async function fromBuffer(_){if(!(_ instanceof Uint8Array||_ instanceof ArrayBuffer||Buffer.isBuffer(_)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof _}\``);const v=_ instanceof Buffer?_:Buffer.from(_);if(!(v&&v.length>1))return;return fromTokenizer(strtok3.fromBuffer(v))}function _check(_,v,y){y={offset:0,...y};for(const[b,x]of v.entries())if(y.mask){if(x!==(y.mask[b]&_[b+y.offset]))return!1}else if(x!==_[b+y.offset])return!1;return!0}async function _checkSequence(_,v,y){const b=Buffer.alloc(minimumBytes);return await v.ignore(y),await v.peekBuffer(b,{mayBeLess:!0}),b.includes(Buffer.from(_))}async function fromTokenizer(_){try{return _fromTokenizer(_)}catch(_){if(!(_ instanceof strtok3.EndOfStreamError))throw _}}async function _fromTokenizer(_){let v=Buffer.alloc(minimumBytes);const check=(_,y)=>_check(v,_,y),checkString=(_,v)=>check(stringToBytes(_),v);if(_.fileInfo.size||(_.fileInfo.size=Number.MAX_SAFE_INTEGER),await _.peekBuffer(v,{length:12,mayBeLess:!0}),check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(check([37,33]))return await _.peekBuffer(v,{length:24,mayBeLess:!0}),checkString("PS-Adobe-",{offset:2})&&checkString(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(check([31,160])||check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(check([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(checkString("ID3")){await _.ignore(6);const v=await _.readToken(uint32SyncSafeToken);return _.position+v>_.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await _.ignore(v),fromTokenizer(_))}if(checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((67===v[0]||70===v[0])&&check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(check([80,75,3,4])){try{for(;_.position+30<_.fileInfo.size;){await _.readBuffer(v,{length:30});const y={compressedSize:v.readUInt32LE(18),uncompressedSize:v.readUInt32LE(22),filenameLength:v.readUInt16LE(26),extraFieldLength:v.readUInt16LE(28)};if(y.filename=await _.readToken(new Token.StringType(y.filenameLength,"utf-8")),await _.ignore(y.extraFieldLength),"META-INF/mozilla.rsa"===y.filename)return{ext:"xpi",mime:"application/x-xpinstall"};if(y.filename.endsWith(".rels")||y.filename.endsWith(".xml")){switch(y.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}}if(y.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if("mimetype"===y.filename&&y.compressedSize===y.uncompressedSize){switch(await _.readToken(new Token.StringType(y.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"}}}if(0===y.compressedSize){let y=-1;for(;y<0&&_.position<_.fileInfo.size;)await _.peekBuffer(v,{mayBeLess:!0}),y=v.indexOf("504B0304",0,"hex"),await _.ignore(y>=0?y:v.length)}else await _.ignore(y.compressedSize)}}catch(_){if(!(_ instanceof strtok3.EndOfStreamError))throw _}return{ext:"zip",mime:"application/zip"}}if(checkString("OggS")){await _.ignore(28);const v=Buffer.alloc(8);return await _.readBuffer(v),_check(v,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(v,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(v,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(v,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(v,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(v,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(check([80,75])&&(3===v[2]||5===v[2]||7===v[2])&&(4===v[3]||6===v[3]||8===v[3]))return{ext:"zip",mime:"application/zip"};if(checkString("ftyp",{offset:4})&&0!=(96&v[8])){const _=uint8ArrayUtf8ByteString(v,8,12).replace("\0"," ").trim();switch(_){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return _.startsWith("3g")?_.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(checkString("wOFF")&&(check([0,1,0,0],{offset:4})||checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(checkString("wOF2")&&(check([0,1,0,0],{offset:4})||checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(check([212,195,178,161])||check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(checkString("%PDF")){return await(y="Adobe Illustrator",b=1350,_checkSequence(y,_,b))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}var y,b;if(check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(check([73,73,42,0]))return checkString("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:check([28,0,254,0],{offset:8})||check([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:check([8,0,0,0],{offset:4})&&(check([45,0,254,0],{offset:8})||check([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(v=Buffer.alloc(24),await _.peekBuffer(v),(check([16,251,134,1],{offset:4})||check([8,0,0,0],{offset:4}))&&check([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(check([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(check([26,69,223,163])){async function readField(){const v=await _.peekNumber(Token.UINT8);let y=128,b=0;for(;0==(v&y);)++b,y>>=1;const x=Buffer.alloc(b+1);return await _.readBuffer(x),x}async function readElement(){const _=await readField(),v=await readField();v[0]^=128>>v.length-1;const y=Math.min(6,v.length);return{id:_.readUIntBE(0,_.length),len:v.readUIntBE(v.length-y,y)}}const v=await readElement();switch(await async function readChildren(v,y){for(;y>0;){const v=await readElement();if(17026===v.id)return _.readToken(new Token.StringType(v.len,"utf-8"));await _.ignore(v.len),--y}}(0,v.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(check([82,73,70,70])){if(check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(checkString("MSCF")||checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(checkString("-lh0-",{offset:2})||checkString("-lh1-",{offset:2})||checkString("-lh2-",{offset:2})||checkString("-lh3-",{offset:2})||checkString("-lh4-",{offset:2})||checkString("-lh5-",{offset:2})||checkString("-lh6-",{offset:2})||checkString("-lh7-",{offset:2})||checkString("-lzs-",{offset:2})||checkString("-lz4-",{offset:2})||checkString("-lz5-",{offset:2})||checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(check([0,0,1,186])){if(check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(checkString("BEGIN:"))return{ext:"ics",mime:"text/calendar"};if(check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(check([82,97,114,33,26,7])&&(0===v[6]||1===v[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(checkString("!<arch>")){await _.ignore(8);return"debian-binary"===await _.readToken(new Token.StringType(13,"ascii"))?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"}}if(check([137,80,78,71,13,10,26,10])){async function readChunkHeader(){return{length:await _.readToken(Token.INT32_BE),type:await _.readToken(new Token.StringType(4,"binary"))}}await _.ignore(8);do{const v=await readChunkHeader();switch(v.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await _.ignore(v.length+4)}}while(_.position<_.fileInfo.size);return{ext:"png",mime:"image/png"}}if(check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(check([102,114,101,101],{offset:4})||check([109,100,97,116],{offset:4})||check([109,111,111,118],{offset:4})||check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(check([48,38,178,117,142,102,207,17,166,217])){async function readHeader(){const v=Buffer.alloc(16);return await _.readBuffer(v),{id:v,size:await _.readToken(Token.UINT64_LE)}}for(await _.ignore(30);_.position+24<_.fileInfo.size;){const v=await readHeader();let y=v.size-24;if(_check(v.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const v=Buffer.alloc(16);if(y-=await _.readBuffer(v),_check(v,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"wma",mime:"audio/x-ms-wma"};if(_check(v,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"wmv",mime:"video/x-ms-asf"};break}await _.ignore(y)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((check([126,16,4])||check([126,24,4]))&&check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(check([0,0,0,12,106,80,32,32,13,10,135,10])){await _.ignore(20);switch(await _.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}}if(check([0,0,1,186])||check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(await _.peekBuffer(v,{length:Math.min(256,_.fileInfo.size),mayBeLess:!0}),checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(check([48,48,48,48,48,48],{offset:148,mask:[248,248,248,248,248,248]})&&tarHeaderChecksumMatches(v))return{ext:"tar",mime:"application/x-tar"};if(check([208,207,17,224,161,177,26,225,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62]))return{ext:"msi",mime:"application/x-msi"};if(check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(check([71],{offset:4})&&(check([71],{offset:192})||check([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(check([76,80],{offset:34})&&(check([0,0,1],{offset:8})||check([1,0,2],{offset:8})||check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(await _.peekBuffer(v,{length:Math.min(512,_.fileInfo.size),mayBeLess:!0}),check([48,48,48,48,48,48],{offset:148,mask:[248,248,248,248,248,248]})&&tarHeaderChecksumMatches(v))return{ext:"tar",mime:"application/x-tar"};if(check([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};for(let _=0;_<2&&_<v.length-16;_++)if(v.length>=_+2&&check([255,224],{offset:_,mask:[255,224]})){if(check([16],{offset:_+1,mask:[22]}))return check([8],{offset:_+1,mask:[8]}),{ext:"aac",mime:"audio/aac"};if(check([2],{offset:_+1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(check([4],{offset:_+1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(check([6],{offset:_+1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}const stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{const _=new stream.PassThrough;let v;v=stream.pipeline?stream.pipeline(readableStream,_,()=>{}):readableStream.pipe(_);const y=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const v=await fromBuffer(y);_.fileType=v}catch(_){reject(_)}resolve(v)})}),fileType={fromStream:fromStream,fromTokenizer:fromTokenizer,fromBuffer:fromBuffer,stream:stream};Object.defineProperty(fileType,"extensions",{get:()=>new Set(supported.extensions)}),Object.defineProperty(fileType,"mimeTypes",{get:()=>new Set(supported.mimeTypes)}),module.exports=fileType},7769:(_,v,y)=>{"use strict";const b=y(6597),x=y(1);const T={fromFile:async function fromFile(_){const v=await b.fromFile(_);try{return await x.fromTokenizer(v)}finally{await v.close()}}};Object.assign(T,x),Object.defineProperty(T,"extensions",{get:()=>x.extensions}),Object.defineProperty(T,"mimeTypes",{get:()=>x.mimeTypes}),_.exports=T},9898:_=>{"use strict";_.exports={extensions:["jpg","png","apng","gif","webp","flif","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","msi","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","wmv","wma","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-wma","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-msi","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted"]}},6188:(_,v)=>{"use strict";v.stringToBytes=_=>[..._].map(_=>_.charCodeAt(0));const uint8ArrayUtf8ByteString=(_,v,y)=>String.fromCharCode(..._.slice(v,y));v.tarHeaderChecksumMatches=_=>{if(_.length<512)return!1;let v=256,y=0;for(let b=0;b<148;b++){const x=_[b];v+=x,y+=128&x}for(let b=156;b<512;b++){const x=_[b];v+=x,y+=128&x}const b=parseInt(uint8ArrayUtf8ByteString(_,148,154),8);return b===v||b===v-(y<<1)},v.uint8ArrayUtf8ByteString=uint8ArrayUtf8ByteString,v.uint32SyncSafeToken={get:(_,v)=>127&_[v+3]|_[v+2]<<7|_[v+1]<<14|_[v]<<21,len:4}},1915:_=>{"use strict";class BitmapImage{constructor(..._){if(0===_.length)throw new Error("constructor requires parameters");const v=_[0];if(null!==v&&"object"==typeof v)if(v instanceof BitmapImage){const _=v.bitmap;this.bitmap={width:_.width,height:_.height,data:new Buffer(_.width*_.height*4)},_.data.copy(this.bitmap.data)}else{if(!(v.width&&v.height&&v.data))throw new Error("unrecognized constructor parameters");this.bitmap=v}else{if("number"!=typeof v||"number"!=typeof _[1])throw new Error("unrecognized constructor parameters");{const y=v,b=_[1],x=_[2];this.bitmap={width:y,height:b},Buffer.isBuffer(x)?this.bitmap.data=x:(this.bitmap.data=new Buffer(y*b*4),"number"==typeof x&&this.fillRGBA(x))}}}blit(_,v,y,b,x,T,I){if(b+T>this.bitmap.width)throw new Error("copy exceeds width of source bitmap");if(v+T>_.bitmap.width)throw new Error("copy exceeds width of target bitmap");if(x+I>this.bitmap.height)throw new Error("copy exceeds height of source bitmap");if(y+I>_.bitmap.height)throw new Erro("copy exceeds height of target bitmap");const S=this.bitmap.data,M=_.bitmap.data,A=4*this.bitmap.width,P=4*_.bitmap.width,O=4*T;let k=x*A+4*b,R=y*P+4*v;for(;--I>=0;)S.copy(M,R,k,k+O),k+=A,R+=P;return this}fillRGBA(_){const v=this.bitmap.data,y=4*this.bitmap.height;let b=0;for(;b<y;)v.writeUInt32BE(_,b),b+=4;for(;b<v.length;)v.copy(v,b,0,y),b+=y;return this}getRGBA(_,v){const y=4*(v*this.bitmap.width+_);return this.bitmap.data.readUInt32BE(y)}getRGBASet(){const _=new Set,v=this.bitmap.data;for(let y=0;y<v.length;y+=4)_.add(v.readUInt32BE(y,!0));return _}greyscale(){const _=this.bitmap.data;return this.scan(0,0,this.bitmap.width,this.bitmap.height,(v,y,b)=>{const x=Math.round(.299*_[b]+.587*_[b+1]+.114*_[b+2]);_[b]=x,_[b+1]=x,_[b+2]=x}),this}reframe(_,v,y,b,x){const T=_<0?0:_,I=v<0?0:v,S=y+T>this.bitmap.width?this.bitmap.width-T:y,M=b+I>this.bitmap.height?this.bitmap.height-I:b,A=_<0?-_:0,P=v<0?-v:0;let O;if(void 0===x){if(T!==_||I!=v||S!==y||M!==b)throw new GifError("fillRGBA required for this reframing");O=new BitmapImage(y,b)}else O=new BitmapImage(y,b,x);return this.blit(O,A,P,T,I,S,M),this.bitmap=O.bitmap,this}scale(_){if(1===_)return;if(!Number.isInteger(_)||_<1)throw new Error("the scale must be an integer >= 1");const v=this.bitmap.width,y=this.bitmap.height,b=v*_*4,x=this.bitmap.data,T=new Buffer(y*b*_);let I,S=0,M=0;for(let A=0;A<y;++A){I=M;for(let y=0;y<v;++y){const v=x.readUInt32BE(S,!0);for(let y=0;y<_;++y)T.writeUInt32BE(v,M),M+=4;S+=4}for(let v=1;v<_;++v)T.copy(T,M,I,M),M+=b,I+=b}return this.bitmap={width:v*_,height:y*_,data:T},this}scanAllCoords(_){const v=this.bitmap.width,y=this.bitmap.data.length;let b=0,x=0;for(let T=0;T<y;T+=4)_(b,x,T),++b===v&&(b=0,++x)}scanAllIndexes(_){const v=this.bitmap.data.length;for(let y=0;y<v;y+=4)_(y)}}_.exports=BitmapImage},8932:(_,v)=>{"use strict";class Gif{constructor(_,v,y){this.width=y.width,this.height=y.height,this.loops=y.loops,this.usesTransparency=y.usesTransparency,this.colorScope=y.colorScope,this.frames=v,this.buffer=_}}Gif.GlobalColorsPreferred=0,Gif.GlobalColorsOnly=1,Gif.LocalColorsOnly=2;class GifError extends Error{constructor(_){super(_),_ instanceof Error&&(this.stack="Gif"+_.stack)}}v.Gif=Gif,v.GifError=GifError},2527:(_,v,y)=>{"use strict";const b=y(1494),{Gif:x,GifError:T}=y(8932);function GifUtil(){const _=y(8305);return GifUtil=function(){return _},_}const{GifFrame:I}=y(3573);function _colorLookupLinear(_,v){const y=_.indexOf(v);return-1===y?null:y}function _colorLookupBinary(_,v){for(var y,b=0,x=_.length-1;b<=x;)if(_[y=Math.floor((b+x)/2)]>v)x=y-1;else{if(!(_[y]<v))return y;b=y+1}return null}function _extendPaletteToPowerOf2(_){const v=_.colors;_.usesTransparency&&v.push(0);const y=v.length;let b=2;for(;y>b;)b<<=1;v.length=b,v.fill(0,y)}function _getFrameSizeEst(_,v){let y=_.bitmap.width*_.bitmap.height;return y=Math.ceil(y*v/8),y+=Math.ceil(y/255),100+y+768}function _getPixelBitWidth(_){let v=_.indexCount,y=0;for(--v;v;)++y,v>>=1;return y>0?y:1}function _writeFrame(_,v,y,b,x){if(y.interlaced)throw new T("writing interlaced GIFs is not supported");const I=function _getIndexedImage(_,v,y){const b=y.colors,x=b.length<=8?_colorLookupLinear:_colorLookupBinary,I=v.bitmap.data,S=new Buffer(I.length/4);let M=b.length,A=0,P=0;for(;A<I.length;){if(0!==I[A+3]){const _=I.readUInt32BE(A,!0)>>8&16777215;S[P]=x(b,_)}else S[P]=M;A+=4,++P}if(y.usesTransparency){if(256===M)throw new T(`Frame ${_} already has 256 colorsand so can't use transparency`)}else M=null;return{buffer:S,transparentIndex:M}}(v,y,b),S={delay:y.delayCentisecs,disposal:y.disposalMethod,transparent:I.transparentIndex};x&&(_extendPaletteToPowerOf2(b),S.palette=b.colors);try{let v,b=_.getOutputBuffer(),x=_.getOutputBufferPosition(),T=!0;for(;T;)if(v=_.addFrame(y.xOffset,y.yOffset,y.bitmap.width,y.bitmap.height,I.buffer,S),T=!1,v>=b.length-1){const v=new Buffer(1.5*b.length);b.copy(v),_.setOutputBuffer(v),_.setOutputBufferPosition(x),b=v,T=!0}return b}catch(_){throw new T(_)}}v.GifCodec=class GifCodec{constructor(_={}){this._transparentRGB=null,"number"==typeof _.transparentRGB&&0!==_.transparentRGB&&(this._transparentRGBA=256*_.transparentRGB),this._testInitialBufferSize=0}decodeGif(_){try{let v;try{v=new b.GifReader(_)}catch(_){throw new T(_)}const y=v.numFrames(),I=[],S={width:v.width,height:v.height,loops:v.loopCount(),usesTransparency:!1};for(let _=0;_<y;++_){const y=this._decodeFrame(v,_,S.usesTransparency);I.push(y.frame),y.usesTransparency&&(S.usesTransparency=!0)}return Promise.resolve(new x(_,I,S))}catch(_){return Promise.reject(_)}}encodeGif(_,v={}){try{if(null===_||0===_.length)throw new T("there are no frames");const y=GifUtil().getMaxDimensions(_);return(v=Object.assign({},v)).width=y.maxWidth,v.height=y.maxHeight,v.loops=v.loops||0,v.colorScope=v.colorScope||x.GlobalColorsPreferred,Promise.resolve(this._encodeGif(_,v))}catch(_){return Promise.reject(_)}}_decodeFrame(_,v,y){let b,x;try{if(b=_.frameInfo(v),x=new Buffer(_.width*_.height*4),_.decodeAndBlitFrameRGBA(v,x),b.width!==_.width||b.height!==_.height){if(b.y&&(x=x.slice(b.y*_.width*4)),_.width>b.width)for(let v=0;v<b.height;++v)x.copy(x,v*b.width*4,4*(b.x+v*_.width),4*(b.x+v*_.width)+4*b.width);x=x.slice(0,b.width*b.height*4)}}catch(_){throw new T(_)}let S=!1;if(null===this._transparentRGBA){if(!y)for(let _=3;_<x.length;_+=4)0===x[_]&&(S=!0,_=x.length)}else for(let _=3;_<x.length;_+=4)0===x[_]&&(x.writeUInt32BE(this._transparentRGBA,_-3),S=!0);return{frame:new I(b.width,b.height,x,{xOffset:b.x,yOffset:b.y,disposalMethod:b.disposal,interlaced:b.interlaced,delayCentisecs:b.delay}),usesTransparency:S}}_encodeGif(_,v){let y;if(v.colorScope===x.LocalColorsOnly)y=GifUtil().getColorInfo(_,0);else if(y=GifUtil().getColorInfo(_,256),!y.colors){if(v.colorScope===x.GlobalColorsOnly)throw new T("Too many color indexes for global color table");v.colorScope=x.LocalColorsOnly}v.usesTransparency=y.usesTransparency;const I=y.palettes;if(v.colorScope===x.LocalColorsOnly){return function _encodeLocal(_,v,y,I){const S={loop:v.loops};let M,A=new Buffer(y);try{M=new b.GifWriter(A,v.width,v.height,S)}catch(_){throw new T(_)}for(let v=0;v<_.length;++v)A=_writeFrame(M,v,_[v],I[v],!0);return new x(A.slice(0,M.end()),_,v)}(_,v,2e3,I)}return function _encodeGlobal(_,v,y,I){const S={colors:I.colors.slice(),usesTransparency:I.usesTransparency};_extendPaletteToPowerOf2(S);const M={palette:S.colors,loop:v.loops};let A,P=new Buffer(y);try{A=new b.GifWriter(P,v.width,v.height,M)}catch(_){throw new T(_)}for(let v=0;v<_.length;++v)P=_writeFrame(A,v,_[v],I,!1);return new x(P.slice(0,A.end()),_,v)}(_,v,2e3,y)}_getSizeEstimateGlobal(_,v){if(this._testInitialBufferSize>0)return this._testInitialBufferSize;let y=968;const b=_getPixelBitWidth(_);return v.forEach(_=>{y+=_getFrameSizeEst(_,b)}),y}_getSizeEstimateLocal(_,v){if(this._testInitialBufferSize>0)return this._testInitialBufferSize;let y=200;for(let b=0;b<v.length;++b){const x=_getPixelBitWidth(_[b]);y+=_getFrameSizeEst(v[b],x)}return y}}},3573:(_,v,y)=>{"use strict";const b=y(1915),{GifError:x}=y(8932);class GifFrame extends b{constructor(..._){if(super(..._),_[0]instanceof GifFrame){const v=_[0];this.xOffset=v.xOffset,this.yOffset=v.yOffset,this.disposalMethod=v.disposalMethod,this.delayCentisecs=v.delayCentisecs,this.interlaced=v.interlaced}else{const v=_[_.length-1];let y={};"object"!=typeof v||v instanceof b||(y=v),this.xOffset=y.xOffset||0,this.yOffset=y.yOffset||0,this.disposalMethod=void 0!==y.disposalMethod?y.disposalMethod:GifFrame.DisposeToBackgroundColor,this.delayCentisecs=y.delayCentisecs||8,this.interlaced=y.interlaced||!1}}getPalette(){const _=new Set,v=this.bitmap.data;let y=0,b=!1;for(;y<v.length;){if(0===v[y+3])b=!0;else{const b=v.readUInt32BE(y,!0)>>8&16777215;_.add(b)}y+=4}const x=new Array(_.size),T=_.values();for(y=0;y<x.length;++y)x[y]=T.next().value;x.sort((_,v)=>_-v);let I=x.length;return b&&++I,{colors:x,usesTransparency:b,indexCount:I}}}GifFrame.DisposeToAnything=0,GifFrame.DisposeNothing=1,GifFrame.DisposeToBackgroundColor=2,GifFrame.DisposeToPrevious=3,v.GifFrame=GifFrame},8305:(_,v,y)=>{"use strict";const b=y(7147),x=y(9160),T=y(1915),{GifFrame:I}=y(3573),{GifError:S}=y(8932),{GifCodec:M}=y(2527),A=[".jpg",".jpeg",".png",".bmp"],P=new M;function _quantize(_,v,y,b,T){const I=Array.isArray(_)?_:[_];if(T){if(["FloydSteinberg","FalseFloydSteinberg","Stucki","Atkinson","Jarvis","Burkes","Sierra","TwoSierra","SierraLite"].indexOf(T.ditherAlgorithm)<0)throw new Error(`Invalid ditherAlgorithm '${T.ditherAlgorithm}'`);void 0===T.serpentine&&(T.serpentine=!0),void 0===T.minimumColorDistanceToDither&&(T.minimumColorDistanceToDither=0),void 0===T.calculateErrorLikeGIMP&&(T.calculateErrorLikeGIMP=!1)}const S=new x.distance.Euclidean,M=new x.palette[v](S,y,b);let A;A=T?new x.image.ErrorDiffusionArray(S,x.image.ErrorDiffusionArrayKernel[T.ditherAlgorithm],T.serpentine,T.minimumColorDistanceToDither,T.calculateErrorLikeGIMP):new x.image.NearestColor(S);const P=[];I.forEach(_=>{const v=_.bitmap.data,y=new ArrayBuffer(v.length),b=new Uint32Array(y);for(let _=0,y=0;_<v.length;_+=4,++y)b[y]=v.readUInt32LE(_,!0);const T=x.utils.PointContainer.fromUint32Array(b,_.bitmap.width,_.bitmap.height);M.sample(T),P.push(T)});const O=M.quantizeSync();for(let _=0;_<I.length;++_){const v=I[_].bitmap.data,y=A.quantizeSync(P[_],O).toUint32Array();for(let _=0,b=0;_<v.length;_+=4,++b)v.writeUInt32LE(y[b],_)}}v.cloneFrames=function(_){let v=[];return _.forEach(_=>{v.push(new I(_))}),v},v.getColorInfo=function(_,v){let y=!1;const b=[];for(let v=0;v<_.length;++v){let x=_[v].getPalette();if(x.usesTransparency&&(y=!0),x.indexCount>256)throw new S(`Frame ${v} uses more than 256 color indexes`);b.push(x)}if(0===v)return{usesTransparency:y,palettes:b};const x=new Set;b.forEach(_=>{_.colors.forEach(_=>{x.add(_)})});let T=x.size;if(y&&++T,v&&T>v)return{usesTransparency:y,palettes:b};const I=new Array(x.size),M=x.values();for(let _=0;_<I.length;++_)I[_]=M.next().value;return I.sort((_,v)=>_-v),{colors:I,indexCount:T,usesTransparency:y,palettes:b}},v.copyAsJimp=function(_,y){return v.shareAsJimp(_,new T(y))},v.getMaxDimensions=function(_){let v=0,y=0;return _.forEach(_=>{const b=_.xOffset+_.bitmap.width;b>v&&(v=b);const x=_.yOffset+_.bitmap.height;x>y&&(y=x)}),{maxWidth:v,maxHeight:y}},v.quantizeDekker=function(_,v,y){_quantize(_,"NeuQuantFloat",v=v||256,0,y)},v.quantizeSorokin=function(_,v,y,b){let x;switch(v=v||256,y=y||"min-pop"){case"min-pop":x=2;break;case"top-pop":x=1;break;default:throw new Error(`Invalid quantizeSorokin histogram '${y}'`)}_quantize(_,"RGBQuant",v,x,b)},v.quantizeWu=function(_,v,y,b){if(v=v||256,(y=y||5)<1||y>8)throw new Error("Invalid quantization quality");_quantize(_,"WuQuant",v,y,b)},v.read=function(_,v){return v=v||P,Buffer.isBuffer(_)?v.decodeGif(_):function _readBinary(_){return new Promise((v,y)=>{b.readFile(_,(_,b)=>_?y(_):v(b))})}(_).then(_=>v.decodeGif(_))},v.shareAsJimp=function(_,v){const y=new _(v.bitmap.width,v.bitmap.height,0);return y.bitmap.data=v.bitmap.data,y},v.write=function(_,v,y,x){x=x||P;const T=_.match(/\.[a-zA-Z]+$/);if(null!==T&&A.includes(T[0].toLowerCase()))throw new Error(`GIF '${_}' has an unexpected suffix`);return x.encodeGif(v,y).then(v=>function _writeBinary(_,v){return new Promise((y,x)=>{b.writeFile(_,v,_=>_?x(_):y())})}(_,v.buffer).then(()=>v))}},1702:(_,v,y)=>{"use strict";const b=y(1915),{Gif:x,GifError:T}=y(8932),{GifCodec:I}=y(2527),{GifFrame:S}=y(3573),M=y(8305);_.exports={BitmapImage:b,Gif:x,GifCodec:I,GifFrame:S,GifUtil:M,GifError:T}},645:(_,v)=>{v.read=function(_,v,y,b,x){var T,I,S=8*x-b-1,M=(1<<S)-1,A=M>>1,P=-7,O=y?x-1:0,k=y?-1:1,R=_[v+O];for(O+=k,T=R&(1<<-P)-1,R>>=-P,P+=S;P>0;T=256*T+_[v+O],O+=k,P-=8);for(I=T&(1<<-P)-1,T>>=-P,P+=b;P>0;I=256*I+_[v+O],O+=k,P-=8);if(0===T)T=1-A;else{if(T===M)return I?NaN:1/0*(R?-1:1);I+=Math.pow(2,b),T-=A}return(R?-1:1)*I*Math.pow(2,T-b)},v.write=function(_,v,y,b,x,T){var I,S,M,A=8*T-x-1,P=(1<<A)-1,O=P>>1,k=23===x?Math.pow(2,-24)-Math.pow(2,-77):0,R=b?0:T-1,L=b?1:-1,B=v<0||0===v&&1/v<0?1:0;for(v=Math.abs(v),isNaN(v)||v===1/0?(S=isNaN(v)?1:0,I=P):(I=Math.floor(Math.log(v)/Math.LN2),v*(M=Math.pow(2,-I))<1&&(I--,M*=2),(v+=I+O>=1?k/M:k*Math.pow(2,1-O))*M>=2&&(I++,M/=2),I+O>=P?(S=0,I=P):I+O>=1?(S=(v*M-1)*Math.pow(2,x),I+=O):(S=v*Math.pow(2,O-1)*Math.pow(2,x),I=0));x>=8;_[y+R]=255&S,R+=L,S/=256,x-=8);for(I=I<<x|S,A+=x;A>0;_[y+R]=255&I,R+=L,I/=256,A-=8);_[y+R-L]|=128*B}},8849:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});const b=y(9126),x=Object.keys(b.typeHandlers),T={56:"psd",66:"bmp",68:"dds",71:"gif",73:"tiff",77:"tiff",82:"webp",105:"icns",137:"png",255:"jpg"};v.detector=function detector(_){const v=_[0];if(v in T){const y=T[v];if(b.typeHandlers[y].validate(_))return y}return x.find(v=>b.typeHandlers[v].validate(_))}},9248:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});const b=y(7147);if(!("promises"in b)){class FileHandle{constructor(_){this.fd=_}stat(){return new Promise((_,v)=>{b.fstat(this.fd,(y,b)=>{y?v(y):_(b)})})}read(_,v,y,x){return new Promise((T,I)=>{b.read(this.fd,_,v,y,x,_=>{_?I(_):T()})})}close(){return new Promise((_,v)=>{b.close(this.fd,y=>{y?v(y):_()})})}}Object.defineProperty(b,"promises",{value:{open:(_,v)=>new Promise((y,x)=>{b.open(_,v,(_,v)=>{_?x(_):y(new FileHandle(v))})})},writable:!1})}},7935:function(_,v,y){"use strict";var b=this&&this.__awaiter||function(_,v,y,b){return new(y||(y=Promise))((function(x,T){function fulfilled(_){try{step(b.next(_))}catch(_){T(_)}}function rejected(_){try{step(b.throw(_))}catch(_){T(_)}}function step(_){_.done?x(_.value):function adopt(_){return _ instanceof y?_:new y((function(v){v(_)}))}(_.value).then(fulfilled,rejected)}step((b=b.apply(_,v||[])).next())}))};Object.defineProperty(v,"__esModule",{value:!0});const x=y(7147),T=y(1017),I=y(9189),S=y(9126),M=y(8849);y(9248);const A=new I.default({concurrency:100,autostart:!0});function lookup(_,v){const y=M.detector(_);if(y&&y in S.typeHandlers){const b=S.typeHandlers[y].calculate(_,v);if(void 0!==b)return b.type=y,b}throw new TypeError("unsupported file type: "+y+" (file: "+v+")")}function imageSize(_,v){if(Buffer.isBuffer(_))return lookup(_);if("string"!=typeof _)throw new TypeError("invalid invocation");const y=T.resolve(_);if("function"!=typeof v){return lookup(function syncFileToBuffer(_){const v=x.openSync(_,"r"),y=x.fstatSync(v).size,b=Math.min(y,524288),T=Buffer.alloc(b);return x.readSync(v,T,0,b,0),x.closeSync(v),T}(y),y)}A.push(()=>function asyncFileToBuffer(_){return b(this,void 0,void 0,(function*(){const v=yield x.promises.open(_,"r"),{size:y}=yield v.stat();if(y<=0)throw new Error("Empty file");const b=Math.min(y,524288),T=Buffer.alloc(b);return yield v.read(T,0,b,0),yield v.close(),T}))}(y).then(_=>process.nextTick(v,null,lookup(_,y))).catch(v))}_.exports=v=imageSize,v.imageSize=imageSize,v.setConcurrency=_=>{A.concurrency=_},v.types=Object.keys(S.typeHandlers)},8557:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.readUInt=function readUInt(_,v,y,b){return y=y||0,_["readUInt"+v+(b?"BE":"LE")].call(_,y)}},9126:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});const b=y(3645),x=y(3552),T=y(1680),I=y(1542),S=y(7163),M=y(7800),A=y(6625),P=y(1558),O=y(2229),k=y(4663),R=y(6221),L=y(7851),B=y(2602),j=y(8531),U=y(9948),z=y(5236);v.typeHandlers={bmp:b.BMP,cur:x.CUR,dds:T.DDS,gif:I.GIF,icns:S.ICNS,ico:M.ICO,j2c:A.J2C,jp2:P.JP2,jpg:O.JPG,ktx:k.KTX,png:R.PNG,pnm:L.PNM,psd:B.PSD,svg:j.SVG,tiff:U.TIFF,webp:z.WEBP}},3645:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.BMP={validate:_=>"BM"===_.toString("ascii",0,2),calculate:_=>({height:Math.abs(_.readInt32LE(22)),width:_.readUInt32LE(18)})}},3552:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});const b=y(7800);v.CUR={validate:_=>0===_.readUInt16LE(0)&&2===_.readUInt16LE(2),calculate:_=>b.ICO.calculate(_)}},1680:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.DDS={validate:_=>542327876===_.readUInt32LE(0),calculate:_=>({height:_.readUInt32LE(12),width:_.readUInt32LE(16)})}},1542:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});const y=/^GIF8[79]a/;v.GIF={validate(_){const v=_.toString("ascii",0,6);return y.test(v)},calculate:_=>({height:_.readUInt16LE(8),width:_.readUInt16LE(6)})}},7163:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});const y={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function readImageHeader(_,v){const y=v+4;return[_.toString("ascii",v,y),_.readUInt32BE(y)]}function getImageSize(_){const v=y[_];return{width:v,height:v,type:_}}v.ICNS={validate:_=>"icns"===_.toString("ascii",0,4),calculate(_){const v=_.length,y=_.readUInt32BE(4);let b=8,x=readImageHeader(_,b),T=getImageSize(x[0]);if(b+=x[1],b===y)return T;const I={height:T.height,images:[T],width:T.width};for(;b<y&&b<v;)x=readImageHeader(_,b),T=getImageSize(x[0]),b+=x[1],I.images.push(T);return I}}},7800:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});function getSizeFromOffset(_,v){const y=_.readUInt8(v);return 0===y?256:y}function getImageSize(_,v){const y=6+16*v;return{height:getSizeFromOffset(_,y+1),width:getSizeFromOffset(_,y)}}v.ICO={validate:_=>0===_.readUInt16LE(0)&&1===_.readUInt16LE(2),calculate(_){const v=_.readUInt16LE(4),y=getImageSize(_,0);if(1===v)return y;const b=[y];for(let y=1;y<v;y+=1)b.push(getImageSize(_,y));return{height:y.height,images:b,width:y.width}}}},6625:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.J2C={validate:_=>"ff4fff51"===_.toString("hex",0,4),calculate:_=>({height:_.readUInt32BE(12),width:_.readUInt32BE(8)})}},1558:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});const y="66747970",b="6a703268",x="6a502020",T="72726571",parseIHDR=_=>({height:_.readUInt32BE(4),width:_.readUInt32BE(8)});v.JP2={validate(_){const v=_.toString("hex",4,8),b=_.readUInt32BE(0);if(v!==x||b<1)return!1;const T=b+4,I=_.readUInt32BE(b);return _.slice(T,T+I).toString("hex",0,4)===y},calculate(_){const v=_.readUInt32BE(0);let y=v+4+_.readUInt16BE(v+2);switch(_.toString("hex",y,y+4)){case T:return y=y+4+4+(_=>{const v=_.readUInt8(0);let y=1+2*v;y=y+2+_.readUInt16BE(y)*(2+v);return y+2+_.readUInt16BE(y)*(16+v)})(_.slice(y+4)),parseIHDR(_.slice(y+8,y+24));case b:return parseIHDR(_.slice(y+8,y+24));default:throw new TypeError("Unsupported header found: "+_.toString("ascii",y,y+4))}}}},2229:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});const b=y(8557);function isEXIF(_){return"45786966"===_.toString("hex",2,6)}function extractSize(_,v){return{height:_.readUInt16BE(v),width:_.readUInt16BE(v+2)}}function validateExifBlock(_,v){const y=_.slice(2,v),x=y.toString("hex",6,8),T="4d4d"===x;if(T||"4949"===x)return function extractOrientation(_,v){const y=b.readUInt(_,16,14,v);for(let x=0;x<y;x++){const y=16+12*x,T=y+12;if(y>_.length)return;const I=_.slice(y,T);if(274===b.readUInt(I,16,0,v)){if(3!==b.readUInt(I,16,2,v))return;if(1!==b.readUInt(I,32,4,v))return;return b.readUInt(I,16,8,v)}}}(y,T)}function validateBuffer(_,v){if(v>_.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(255!==_[v])throw new TypeError("Invalid JPG, marker table corrupted")}v.JPG={validate:_=>"ffd8"===_.toString("hex",0,2),calculate(_){let v,y;for(_=_.slice(4);_.length;){const b=_.readUInt16BE(0);if(isEXIF(_)&&(v=validateExifBlock(_,b)),validateBuffer(_,b),y=_[b+1],192===y||193===y||194===y){const y=extractSize(_,b+5);return v?{height:y.height,orientation:v,width:y.width}:y}_=_.slice(b+2)}throw new TypeError("Invalid JPG, no size found")}}},4663:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.KTX={validate:_=>"KTX 11"===_.toString("ascii",1,7),calculate:_=>({height:_.readUInt32LE(40),width:_.readUInt32LE(36)})}},6221:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.PNG={validate(_){if("PNG\r\n\n"===_.toString("ascii",1,8)){let v=_.toString("ascii",12,16);if("CgBI"===v&&(v=_.toString("ascii",28,32)),"IHDR"!==v)throw new TypeError("Invalid PNG");return!0}return!1},calculate:_=>"CgBI"===_.toString("ascii",12,16)?{height:_.readUInt32BE(36),width:_.readUInt32BE(32)}:{height:_.readUInt32BE(20),width:_.readUInt32BE(16)}}},7851:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});const y={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},b=Object.keys(y),x={default:_=>{let v=[];for(;_.length>0;){const y=_.shift();if("#"!==y[0]){v=y.split(" ");break}}if(2===v.length)return{height:parseInt(v[1],10),width:parseInt(v[0],10)};throw new TypeError("Invalid PNM")},pam:_=>{const v={};for(;_.length>0;){const y=_.shift();if(y.length>16||y.charCodeAt(0)>128)continue;const[b,x]=y.split(" ");if(b&&x&&(v[b.toLowerCase()]=parseInt(x,10)),v.height&&v.width)break}if(v.height&&v.width)return{height:v.height,width:v.width};throw new TypeError("Invalid PAM")}};v.PNM={validate(_){const v=_.toString("ascii",0,2);return b.includes(v)},calculate(_){const v=_.toString("ascii",0,2),b=y[v],T=_.toString("ascii",3).split(/[\r\n]+/);return(x[b]||x.default)(T)}}},2602:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.PSD={validate:_=>"8BPS"===_.toString("ascii",0,4),calculate:_=>({height:_.readUInt32BE(14),width:_.readUInt32BE(18)})}},8531:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});const y=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,b={height:/\sheight=(['"])([^%]+?)\1/,root:y,viewbox:/\sviewBox=(['"])(.+?)\1/,width:/\swidth=(['"])([^%]+?)\1/},x={cm:96/2.54,em:16,ex:8,m:96/2.54*100,mm:96/2.54/10,pc:96/72/12,pt:96/72};function parseLength(_){const v=/([0-9.]+)([a-z]*)/.exec(_);if(v)return Math.round(parseFloat(v[1])*(x[v[2]]||1))}function parseViewbox(_){const v=_.split(" ");return{height:parseLength(v[3]),width:parseLength(v[2])}}v.SVG={validate(_){const v=String(_);return y.test(v)},calculate(_){const v=_.toString("utf8").match(b.root);if(v){const _=function parseAttributes(_){const v=_.match(b.width),y=_.match(b.height),x=_.match(b.viewbox);return{height:y&&parseLength(y[2]),viewbox:x&&parseViewbox(x[2]),width:v&&parseLength(v[2])}}(v[0]);if(_.width&&_.height)return function calculateByDimensions(_){return{height:_.height,width:_.width}}(_);if(_.viewbox)return function calculateByViewbox(_,v){const y=v.width/v.height;return _.width?{height:Math.floor(_.width/y),width:_.width}:_.height?{height:_.height,width:Math.floor(_.height*y)}:{height:v.height,width:v.width}}(_,_.viewbox)}throw new TypeError("Invalid SVG")}}},9948:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});const b=y(7147),x=y(8557);function readValue(_,v){const y=x.readUInt(_,16,8,v);return(x.readUInt(_,16,10,v)<<16)+y}function nextTag(_){if(_.length>24)return _.slice(12)}const T=["49492a00","4d4d002a"];v.TIFF={validate:_=>T.includes(_.toString("hex",0,4)),calculate(_,v){if(!v)throw new TypeError("Tiff doesn't support buffer");const y="BE"===function determineEndianness(_){const v=_.toString("ascii",0,2);return"II"===v?"LE":"MM"===v?"BE":void 0}(_),T=function extractTags(_,v){const y={};let b=_;for(;b&&b.length;){const _=x.readUInt(b,16,0,v),T=x.readUInt(b,16,2,v),I=x.readUInt(b,32,4,v);if(0===_)break;1!==I||3!==T&&4!==T||(y[_]=readValue(b,v)),b=nextTag(b)}return y}(function readIFD(_,v,y){const T=x.readUInt(_,32,4,y);let I=1024;const S=b.statSync(v).size;T+I>S&&(I=S-T-10);const M=Buffer.alloc(I),A=b.openSync(v,"r");return b.readSync(A,M,0,I,T),M.slice(2)}(_,v,y),y),I=T[256],S=T[257];if(!I||!S)throw new TypeError("Invalid Tiff. Missing tags");return{height:S,width:I}}}},5236:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.WEBP={validate(_){const v="RIFF"===_.toString("ascii",0,4),y="WEBP"===_.toString("ascii",8,12),b="VP8"===_.toString("ascii",12,15);return v&&y&&b},calculate(_){const v=_.toString("ascii",12,16);if(_=_.slice(20,30),"VP8X"===v){const v=_[0],y=0==(1&v);if(0==(192&v)&&y)return function calculateExtended(_){return{height:1+_.readUIntLE(7,3),width:1+_.readUIntLE(4,3)}}(_);throw new TypeError("Invalid WebP")}if("VP8 "===v&&47!==_[0])return function calculateLossy(_){return{height:16383&_.readInt16LE(8),width:16383&_.readInt16LE(6)}}(_);const y=_.toString("hex",3,6);if("VP8L"===v&&"9d012a"!==y)return function calculateLossless(_){return{height:1+((15&_[4])<<10|_[3]<<2|(192&_[2])>>6),width:1+((63&_[2])<<8|_[1])}}(_);throw new TypeError("Invalid WebP")}}},4378:(_,v,y)=>{try{var b=y(3837);if("function"!=typeof b.inherits)throw"";_.exports=b.inherits}catch(v){_.exports=y(5717)}},5717:_=>{"function"==typeof Object.create?_.exports=function inherits(_,v){v&&(_.super_=v,_.prototype=Object.create(v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}))}:_.exports=function inherits(_,v){if(v){_.super_=v;var TempCtor=function(){};TempCtor.prototype=v.prototype,_.prototype=new TempCtor,_.prototype.constructor=_}}},5817:(_,v,y)=>{"use strict";var b=y(4836);Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var x=b(y(3006)),T=b(y(3754)),I=b(y(6240)),S=(0,x.default)({types:[T.default],plugins:[I.default]});v.default=S},7870:(_,v,y)=>{var b=y(587),x=y(914);_.exports={encode:b,decode:x}},914:_=>{var v=function jpegImage(){"use strict";var _=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function constructor(){}function buildHuffmanTable(_,v){for(var y,b,x=0,T=[],I=16;I>0&&!_[I-1];)I--;T.push({children:[],index:0});var S,M=T[0];for(y=0;y<I;y++){for(b=0;b<_[y];b++){for((M=T.pop()).children[M.index]=v[x];M.index>0;){if(0===T.length)throw new Error("Could not recreate Huffman Table");M=T.pop()}for(M.index++,T.push(M);T.length<=y;)T.push(S={children:[],index:0}),M.children[M.index]=S.children,M=S;x++}y+1<I&&(T.push(S={children:[],index:0}),M.children[M.index]=S.children,M=S)}return T[0].children}function decodeScan(v,y,b,x,T,I,S,M,A,P){b.precision,b.samplesPerLine,b.scanLines;var O=b.mcusPerLine,k=b.progressive,R=(b.maxH,b.maxV,y),L=0,B=0;function readBit(){if(B>0)return B--,L>>B&1;if(255==(L=v[y++])){var _=v[y++];if(_)throw new Error("unexpected marker: "+(L<<8|_).toString(16))}return B=7,L>>>7}function decodeHuffman(_){for(var v,y=_;null!==(v=readBit());){if("number"==typeof(y=y[v]))return y;if("object"!=typeof y)throw new Error("invalid huffman sequence")}return null}function receive(_){for(var v=0;_>0;){var y=readBit();if(null===y)return;v=v<<1|y,_--}return v}function receiveAndExtend(_){var v=receive(_);return v>=1<<_-1?v:v+(-1<<_)+1}var j=0;var U,z=0;function decodeMcu(_,v,y,b,x){var T=y%O,I=(y/O|0)*_.v+b,S=T*_.h+x;void 0===_.blocks[I]&&P.tolerantDecoding||v(_,_.blocks[I][S])}function decodeBlock(_,v,y){var b=y/_.blocksPerLine|0,x=y%_.blocksPerLine;void 0===_.blocks[b]&&P.tolerantDecoding||v(_,_.blocks[b][x])}var G,H,V,$,K,ee,re=x.length;ee=k?0===I?0===M?function decodeDCFirst(_,v){var y=decodeHuffman(_.huffmanTableDC),b=0===y?0:receiveAndExtend(y)<<A;v[0]=_.pred+=b}:function decodeDCSuccessive(_,v){v[0]|=readBit()<<A}:0===M?function decodeACFirst(v,y){if(j>0)j--;else for(var b=I,x=S;b<=x;){var T=decodeHuffman(v.huffmanTableAC),M=15&T,P=T>>4;if(0!==M){y[_[b+=P]]=receiveAndExtend(M)*(1<<A),b++}else{if(P<15){j=receive(P)+(1<<P)-1;break}b+=16}}}:function decodeACSuccessive(v,y){for(var b=I,x=S,T=0;b<=x;){var M=_[b],P=y[M]<0?-1:1;switch(z){case 0:var O=decodeHuffman(v.huffmanTableAC),k=15&O;T=O>>4;if(0===k)T<15?(j=receive(T)+(1<<T),z=4):(T=16,z=1);else{if(1!==k)throw new Error("invalid ACn encoding");U=receiveAndExtend(k),z=T?2:3}continue;case 1:case 2:y[M]?y[M]+=(readBit()<<A)*P:0===--T&&(z=2==z?3:0);break;case 3:y[M]?y[M]+=(readBit()<<A)*P:(y[M]=U<<A,z=0);break;case 4:y[M]&&(y[M]+=(readBit()<<A)*P)}b++}4===z&&0===--j&&(z=0)}:function decodeBaseline(v,y){var b=decodeHuffman(v.huffmanTableDC),x=0===b?0:receiveAndExtend(b);y[0]=v.pred+=x;for(var T=1;T<64;){var I=decodeHuffman(v.huffmanTableAC),S=15&I,M=I>>4;if(0!==S){y[_[T+=M]]=receiveAndExtend(S),T++}else{if(M<15)break;T+=16}}};var ie,ne,ae,oe,se=0;for(ne=1==re?x[0].blocksPerLine*x[0].blocksPerColumn:O*b.mcusPerColumn,T||(T=ne);se<ne;){for(H=0;H<re;H++)x[H].pred=0;if(j=0,1==re)for(G=x[0],K=0;K<T;K++)decodeBlock(G,ee,se),se++;else for(K=0;K<T;K++){for(H=0;H<re;H++)for(ae=(G=x[H]).h,oe=G.v,V=0;V<oe;V++)for($=0;$<ae;$++)decodeMcu(G,ee,se,V,$);if(++se===ne)break}if(se===ne)do{if(255===v[y]&&0!==v[y+1])break;y+=1}while(y<v.length-2);if(B=0,(ie=v[y]<<8|v[y+1])<65280)throw new Error("marker was not found");if(!(ie>=65488&&ie<=65495))break;y+=2}return y-R}function buildComponentData(_,v){var y,b,x=[],T=v.blocksPerLine,I=v.blocksPerColumn,S=T<<3,M=new Int32Array(64),A=new Uint8Array(64);function quantizeAndInverse(_,y,b){var x,T,I,S,M,A,P,O,k,R,L=v.quantizationTable,B=b;for(R=0;R<64;R++)B[R]=_[R]*L[R];for(R=0;R<8;++R){var j=8*R;0!=B[1+j]||0!=B[2+j]||0!=B[3+j]||0!=B[4+j]||0!=B[5+j]||0!=B[6+j]||0!=B[7+j]?(x=5793*B[0+j]+128>>8,T=5793*B[4+j]+128>>8,I=B[2+j],S=B[6+j],M=2896*(B[1+j]-B[7+j])+128>>8,O=2896*(B[1+j]+B[7+j])+128>>8,A=B[3+j]<<4,k=x-T+1>>1,x=x+T+1>>1,T=k,k=3784*I+1567*S+128>>8,I=1567*I-3784*S+128>>8,S=k,k=M-(P=B[5+j]<<4)+1>>1,M=M+P+1>>1,P=k,k=O+A+1>>1,A=O-A+1>>1,O=k,k=x-S+1>>1,x=x+S+1>>1,S=k,k=T-I+1>>1,T=T+I+1>>1,I=k,k=2276*M+3406*O+2048>>12,M=3406*M-2276*O+2048>>12,O=k,k=799*A+4017*P+2048>>12,A=4017*A-799*P+2048>>12,P=k,B[0+j]=x+O,B[7+j]=x-O,B[1+j]=T+P,B[6+j]=T-P,B[2+j]=I+A,B[5+j]=I-A,B[3+j]=S+M,B[4+j]=S-M):(k=5793*B[0+j]+512>>10,B[0+j]=k,B[1+j]=k,B[2+j]=k,B[3+j]=k,B[4+j]=k,B[5+j]=k,B[6+j]=k,B[7+j]=k)}for(R=0;R<8;++R){var U=R;0!=B[8+U]||0!=B[16+U]||0!=B[24+U]||0!=B[32+U]||0!=B[40+U]||0!=B[48+U]||0!=B[56+U]?(x=5793*B[0+U]+2048>>12,T=5793*B[32+U]+2048>>12,I=B[16+U],S=B[48+U],M=2896*(B[8+U]-B[56+U])+2048>>12,O=2896*(B[8+U]+B[56+U])+2048>>12,A=B[24+U],k=x-T+1>>1,x=x+T+1>>1,T=k,k=3784*I+1567*S+2048>>12,I=1567*I-3784*S+2048>>12,S=k,k=M-(P=B[40+U])+1>>1,M=M+P+1>>1,P=k,k=O+A+1>>1,A=O-A+1>>1,O=k,k=x-S+1>>1,x=x+S+1>>1,S=k,k=T-I+1>>1,T=T+I+1>>1,I=k,k=2276*M+3406*O+2048>>12,M=3406*M-2276*O+2048>>12,O=k,k=799*A+4017*P+2048>>12,A=4017*A-799*P+2048>>12,P=k,B[0+U]=x+O,B[56+U]=x-O,B[8+U]=T+P,B[48+U]=T-P,B[16+U]=I+A,B[40+U]=I-A,B[24+U]=S+M,B[32+U]=S-M):(k=5793*b[R+0]+8192>>14,B[0+U]=k,B[8+U]=k,B[16+U]=k,B[24+U]=k,B[32+U]=k,B[40+U]=k,B[48+U]=k,B[56+U]=k)}for(R=0;R<64;++R){var z=128+(B[R]+8>>4);y[R]=z<0?0:z>255?255:z}}requestMemoryAllocation(S*I*8);for(var P=0;P<I;P++){var O=P<<3;for(y=0;y<8;y++)x.push(new Uint8Array(S));for(var k=0;k<T;k++){quantizeAndInverse(v.blocks[P][k],A,M);var R=0,L=k<<3;for(b=0;b<8;b++){var B=x[O+b];for(y=0;y<8;y++)B[L+y]=A[R++]}}}return x}function clampTo8bit(_){return _<0?0:_>255?255:_}constructor.prototype={load:function load(_){var v=new XMLHttpRequest;v.open("GET",_,!0),v.responseType="arraybuffer",v.onload=function(){var _=new Uint8Array(v.response||v.mozResponseArrayBuffer);this.parse(_),this.onload&&this.onload()}.bind(this),v.send(null)},parse:function parse(v){var y=1e3*this.opts.maxResolutionInMP*1e3,b=0;v.length;function readUint16(){var _=v[b]<<8|v[b+1];return b+=2,_}function readDataBlock(){var _=readUint16(),y=v.subarray(b,b+_-2);return b+=y.length,y}function prepareComponents(_){var v,y,b=1,x=1;for(y in _.components)_.components.hasOwnProperty(y)&&(b<(v=_.components[y]).h&&(b=v.h),x<v.v&&(x=v.v));var T=Math.ceil(_.samplesPerLine/8/b),I=Math.ceil(_.scanLines/8/x);for(y in _.components)if(_.components.hasOwnProperty(y)){v=_.components[y];var S=Math.ceil(Math.ceil(_.samplesPerLine/8)*v.h/b),M=Math.ceil(Math.ceil(_.scanLines/8)*v.v/x),A=T*v.h,P=I*v.v,O=[];requestMemoryAllocation(256*(P*A));for(var k=0;k<P;k++){for(var R=[],L=0;L<A;L++)R.push(new Int32Array(64));O.push(R)}v.blocksPerLine=S,v.blocksPerColumn=M,v.blocks=O}_.maxH=b,_.maxV=x,_.mcusPerLine=T,_.mcusPerColumn=I}var x,T,I=null,S=null,M=[],A=[],P=[],O=[],k=readUint16(),R=-1;if(this.comments=[],65496!=k)throw new Error("SOI not found");for(k=readUint16();65497!=k;){switch(k){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var L=readDataBlock();if(65534===k){var B=String.fromCharCode.apply(null,L);this.comments.push(B)}65504===k&&74===L[0]&&70===L[1]&&73===L[2]&&70===L[3]&&0===L[4]&&(I={version:{major:L[5],minor:L[6]},densityUnits:L[7],xDensity:L[8]<<8|L[9],yDensity:L[10]<<8|L[11],thumbWidth:L[12],thumbHeight:L[13],thumbData:L.subarray(14,14+3*L[12]*L[13])}),65505===k&&69===L[0]&&120===L[1]&&105===L[2]&&102===L[3]&&0===L[4]&&(this.exifBuffer=L.subarray(5,L.length)),65518===k&&65===L[0]&&100===L[1]&&111===L[2]&&98===L[3]&&101===L[4]&&0===L[5]&&(S={version:L[6],flags0:L[7]<<8|L[8],flags1:L[9]<<8|L[10],transformCode:L[11]});break;case 65499:for(var j=readUint16()+b-2;b<j;){var U=v[b++];requestMemoryAllocation(256);var z=new Int32Array(64);if(U>>4==0)for(ve=0;ve<64;ve++){z[_[ve]]=v[b++]}else{if(U>>4!=1)throw new Error("DQT: invalid table spec");for(ve=0;ve<64;ve++){z[_[ve]]=readUint16()}}M[15&U]=z}break;case 65472:case 65473:case 65474:readUint16(),(x={}).extended=65473===k,x.progressive=65474===k,x.precision=v[b++],x.scanLines=readUint16(),x.samplesPerLine=readUint16(),x.components={},x.componentsOrder=[];var G=x.scanLines*x.samplesPerLine;if(G>y){var H=Math.ceil((G-y)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${H}MP`)}var V,$=v[b++];for(ge=0;ge<$;ge++){V=v[b];var K=v[b+1]>>4,ee=15&v[b+1],re=v[b+2];if(K<=0||ee<=0)throw new Error("Invalid sampling factor, expected values above 0");x.componentsOrder.push(V),x.components[V]={h:K,v:ee,quantizationIdx:re},b+=3}prepareComponents(x),A.push(x);break;case 65476:var ie=readUint16();for(ge=2;ge<ie;){var ne=v[b++],ae=new Uint8Array(16),oe=0;for(ve=0;ve<16;ve++,b++)oe+=ae[ve]=v[b];requestMemoryAllocation(16+oe);var se=new Uint8Array(oe);for(ve=0;ve<oe;ve++,b++)se[ve]=v[b];ge+=17+oe,(ne>>4==0?O:P)[15&ne]=buildHuffmanTable(ae,se)}break;case 65501:readUint16(),T=readUint16();break;case 65500:readUint16(),readUint16();break;case 65498:readUint16();var ce=v[b++],ue=[];for(ge=0;ge<ce;ge++){ye=x.components[v[b++]];var pe=v[b++];ye.huffmanTableDC=O[pe>>4],ye.huffmanTableAC=P[15&pe],ue.push(ye)}var he=v[b++],de=v[b++],fe=v[b++],me=decodeScan(v,b,x,ue,T,he,de,fe>>4,15&fe,this.opts);b+=me;break;case 65535:255!==v[b]&&b--;break;default:if(255==v[b-3]&&v[b-2]>=192&&v[b-2]<=254){b-=3;break}if(224===k||225==k){if(-1!==R)throw new Error(`first unknown JPEG marker at offset ${R.toString(16)}, second unknown JPEG marker ${k.toString(16)} at offset ${(b-1).toString(16)}`);R=b-1;const _=readUint16();if(255===v[b+_-2]){b+=_-2;break}}throw new Error("unknown JPEG marker "+k.toString(16))}k=readUint16()}if(1!=A.length)throw new Error("only single frame JPEGs supported");for(var ge=0;ge<A.length;ge++){var _e=A[ge].components;for(var ve in _e)_e[ve].quantizationTable=M[_e[ve].quantizationIdx],delete _e[ve].quantizationIdx}this.width=x.samplesPerLine,this.height=x.scanLines,this.jfif=I,this.adobe=S,this.components=[];for(ge=0;ge<x.componentsOrder.length;ge++){var ye=x.components[x.componentsOrder[ge]];this.components.push({lines:buildComponentData(0,ye),scaleX:ye.h/x.maxH,scaleY:ye.v/x.maxV})}},getData:function getData(_,v){var y,b,x,T,I,S,M,A,P,O,k,R,L,B,j,U,z,G,H,V,$,K=this.width/_,ee=this.height/v,re=0,ie=_*v*this.components.length;requestMemoryAllocation(ie);var ne=new Uint8Array(ie);switch(this.components.length){case 1:for(y=this.components[0],O=0;O<v;O++)for(I=y.lines[0|O*y.scaleY*ee],P=0;P<_;P++)k=I[0|P*y.scaleX*K],ne[re++]=k;break;case 2:for(y=this.components[0],b=this.components[1],O=0;O<v;O++)for(I=y.lines[0|O*y.scaleY*ee],S=b.lines[0|O*b.scaleY*ee],P=0;P<_;P++)k=I[0|P*y.scaleX*K],ne[re++]=k,k=S[0|P*b.scaleX*K],ne[re++]=k;break;case 3:for($=!0,this.adobe&&this.adobe.transformCode?$=!0:void 0!==this.opts.colorTransform&&($=!!this.opts.colorTransform),y=this.components[0],b=this.components[1],x=this.components[2],O=0;O<v;O++)for(I=y.lines[0|O*y.scaleY*ee],S=b.lines[0|O*b.scaleY*ee],M=x.lines[0|O*x.scaleY*ee],P=0;P<_;P++)$?(k=I[0|P*y.scaleX*K],R=S[0|P*b.scaleX*K],G=clampTo8bit(k+1.402*((L=M[0|P*x.scaleX*K])-128)),H=clampTo8bit(k-.3441363*(R-128)-.71413636*(L-128)),V=clampTo8bit(k+1.772*(R-128))):(G=I[0|P*y.scaleX*K],H=S[0|P*b.scaleX*K],V=M[0|P*x.scaleX*K]),ne[re++]=G,ne[re++]=H,ne[re++]=V;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for($=!1,this.adobe&&this.adobe.transformCode?$=!0:void 0!==this.opts.colorTransform&&($=!!this.opts.colorTransform),y=this.components[0],b=this.components[1],x=this.components[2],T=this.components[3],O=0;O<v;O++)for(I=y.lines[0|O*y.scaleY*ee],S=b.lines[0|O*b.scaleY*ee],M=x.lines[0|O*x.scaleY*ee],A=T.lines[0|O*T.scaleY*ee],P=0;P<_;P++)$?(k=I[0|P*y.scaleX*K],R=S[0|P*b.scaleX*K],L=M[0|P*x.scaleX*K],B=A[0|P*T.scaleX*K],j=255-clampTo8bit(k+1.402*(L-128)),U=255-clampTo8bit(k-.3441363*(R-128)-.71413636*(L-128)),z=255-clampTo8bit(k+1.772*(R-128))):(j=I[0|P*y.scaleX*K],U=S[0|P*b.scaleX*K],z=M[0|P*x.scaleX*K],B=A[0|P*T.scaleX*K]),ne[re++]=255-j,ne[re++]=255-U,ne[re++]=255-z,ne[re++]=255-B;break;default:throw new Error("Unsupported color mode")}return ne},copyToImageData:function copyToImageData(_,v){var y,b,x,T,I,S,M,A,P,O=_.width,k=_.height,R=_.data,L=this.getData(O,k),B=0,j=0;switch(this.components.length){case 1:for(b=0;b<k;b++)for(y=0;y<O;y++)x=L[B++],R[j++]=x,R[j++]=x,R[j++]=x,v&&(R[j++]=255);break;case 3:for(b=0;b<k;b++)for(y=0;y<O;y++)M=L[B++],A=L[B++],P=L[B++],R[j++]=M,R[j++]=A,R[j++]=P,v&&(R[j++]=255);break;case 4:for(b=0;b<k;b++)for(y=0;y<O;y++)I=L[B++],S=L[B++],x=L[B++],M=255-clampTo8bit(I*(1-(T=L[B++])/255)+T),A=255-clampTo8bit(S*(1-T/255)+T),P=255-clampTo8bit(x*(1-T/255)+T),R[j++]=M,R[j++]=A,R[j++]=P,v&&(R[j++]=255);break;default:throw new Error("Unsupported color mode")}}};var v=0,y=0;function requestMemoryAllocation(_=0){var b=v+_;if(b>y){var x=Math.ceil((b-y)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${x}MB`)}v=b}return constructor.resetMaxMemoryUsage=function(_){v=0,y=_},constructor.getBytesAllocated=function(){return v},constructor.requestMemoryAllocation=requestMemoryAllocation,constructor}();_.exports=function decode(_,y={}){var b={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512,...y},x=new Uint8Array(_),T=new v;T.opts=b,v.resetMaxMemoryUsage(1024*b.maxMemoryUsageInMB*1024),T.parse(x);var I=b.formatAsRGBA?4:3,S=T.width*T.height*I;try{v.requestMemoryAllocation(S);var M={width:T.width,height:T.height,exifBuffer:T.exifBuffer,data:b.useTArray?new Uint8Array(S):Buffer.alloc(S)};T.comments.length>0&&(M.comments=T.comments)}catch(_){if(_ instanceof RangeError)throw new Error("Could not allocate enough memory for the image. Required: "+S);if(_ instanceof ReferenceError&&"Buffer is not defined"===_.message)throw new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true");throw _}return T.copyToImageData(M,b.formatAsRGBA),M}},587:_=>{function JPEGEncoder(_){Math.round;var v,y,b,x,T,I=Math.floor,S=new Array(64),M=new Array(64),A=new Array(64),P=new Array(64),O=new Array(65535),k=new Array(65535),R=new Array(64),L=new Array(64),B=[],j=0,U=7,z=new Array(64),G=new Array(64),H=new Array(64),V=new Array(256),$=new Array(2048),K=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ee=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],re=[0,1,2,3,4,5,6,7,8,9,10,11],ie=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ne=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],ae=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],oe=[0,1,2,3,4,5,6,7,8,9,10,11],se=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ce=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function computeHuffmanTbl(_,v){for(var y=0,b=0,x=new Array,T=1;T<=16;T++){for(var I=1;I<=_[T];I++)x[v[b]]=[],x[v[b]][0]=y,x[v[b]][1]=T,b++,y++;y*=2}return x}function writeBits(_){for(var v=_[0],y=_[1]-1;y>=0;)v&1<<y&&(j|=1<<U),y--,--U<0&&(255==j?(writeByte(255),writeByte(0)):writeByte(j),U=7,j=0)}function writeByte(_){B.push(_)}function writeWord(_){writeByte(_>>8&255),writeByte(255&_)}function processDU(_,v,y,b,x){for(var T,I=x[0],S=x[240],M=function fDCTQuant(_,v){var y,b,x,T,I,S,M,A,P,O,k=0;for(P=0;P<8;++P){y=_[k],b=_[k+1],x=_[k+2],T=_[k+3],I=_[k+4],S=_[k+5],M=_[k+6];var L=y+(A=_[k+7]),B=y-A,j=b+M,U=b-M,z=x+S,G=x-S,H=T+I,V=T-I,$=L+H,K=L-H,ee=j+z,re=j-z;_[k]=$+ee,_[k+4]=$-ee;var ie=.707106781*(re+K);_[k+2]=K+ie,_[k+6]=K-ie;var ne=.382683433*(($=V+G)-(re=U+B)),ae=.5411961*$+ne,oe=1.306562965*re+ne,se=.707106781*(ee=G+U),ce=B+se,ue=B-se;_[k+5]=ue+ae,_[k+3]=ue-ae,_[k+1]=ce+oe,_[k+7]=ce-oe,k+=8}for(k=0,P=0;P<8;++P){y=_[k],b=_[k+8],x=_[k+16],T=_[k+24],I=_[k+32],S=_[k+40],M=_[k+48];var pe=y+(A=_[k+56]),he=y-A,de=b+M,fe=b-M,me=x+S,ge=x-S,_e=T+I,ve=T-I,ye=pe+_e,be=pe-_e,Ee=de+me,xe=de-me;_[k]=ye+Ee,_[k+32]=ye-Ee;var Te=.707106781*(xe+be);_[k+16]=be+Te,_[k+48]=be-Te;var Ie=.382683433*((ye=ve+ge)-(xe=fe+he)),Se=.5411961*ye+Ie,Ae=1.306562965*xe+Ie,Pe=.707106781*(Ee=ge+fe),Oe=he+Pe,Ce=he-Pe;_[k+40]=Ce+Se,_[k+24]=Ce-Se,_[k+8]=Oe+Ae,_[k+56]=Oe-Ae,k++}for(P=0;P<64;++P)O=_[P]*v[P],R[P]=O>0?O+.5|0:O-.5|0;return R}(_,v),A=0;A<64;++A)L[K[A]]=M[A];var P=L[0]-y;y=L[0],0==P?writeBits(b[0]):(writeBits(b[k[T=32767+P]]),writeBits(O[T]));for(var B=63;B>0&&0==L[B];B--);if(0==B)return writeBits(I),y;for(var j,U=1;U<=B;){for(var z=U;0==L[U]&&U<=B;++U);var G=U-z;if(G>=16){j=G>>4;for(var H=1;H<=j;++H)writeBits(S);G&=15}T=32767+L[U],writeBits(x[(G<<4)+k[T]]),writeBits(O[T]),U++}return 63!=B&&writeBits(I),y}function setQuality(_){if(_<=0&&(_=1),_>100&&(_=100),T!=_){(function initQuantTables(_){for(var v=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],y=0;y<64;y++){var b=I((v[y]*_+50)/100);b<1?b=1:b>255&&(b=255),S[K[y]]=b}for(var x=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],T=0;T<64;T++){var O=I((x[T]*_+50)/100);O<1?O=1:O>255&&(O=255),M[K[T]]=O}for(var k=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],R=0,L=0;L<8;L++)for(var B=0;B<8;B++)A[R]=1/(S[K[R]]*k[L]*k[B]*8),P[R]=1/(M[K[R]]*k[L]*k[B]*8),R++})(_<50?Math.floor(5e3/_):Math.floor(200-2*_)),T=_}}this.encode=function(_,T){(new Date).getTime();T&&setQuality(T),B=new Array,j=0,U=7,writeWord(65496),function writeAPP0(){writeWord(65504),writeWord(16),writeByte(74),writeByte(70),writeByte(73),writeByte(70),writeByte(0),writeByte(1),writeByte(1),writeByte(0),writeWord(1),writeWord(1),writeByte(0),writeByte(0)}(),function writeCOM(_){void 0!==_&&_.constructor===Array&&_.forEach(_=>{if("string"==typeof _){writeWord(65534);var v,y=_.length;for(writeWord(y+2),v=0;v<y;v++)writeByte(_.charCodeAt(v))}})}(_.comments),function writeAPP1(_){if(_){writeWord(65505),69===_[0]&&120===_[1]&&105===_[2]&&102===_[3]?writeWord(_.length+2):(writeWord(_.length+5+2),writeByte(69),writeByte(120),writeByte(105),writeByte(102),writeByte(0));for(var v=0;v<_.length;v++)writeByte(_[v])}}(_.exifBuffer),function writeDQT(){writeWord(65499),writeWord(132),writeByte(0);for(var _=0;_<64;_++)writeByte(S[_]);writeByte(1);for(var v=0;v<64;v++)writeByte(M[v])}(),function writeSOF0(_,v){writeWord(65472),writeWord(17),writeByte(8),writeWord(v),writeWord(_),writeByte(3),writeByte(1),writeByte(17),writeByte(0),writeByte(2),writeByte(17),writeByte(1),writeByte(3),writeByte(17),writeByte(1)}(_.width,_.height),function writeDHT(){writeWord(65476),writeWord(418),writeByte(0);for(var _=0;_<16;_++)writeByte(ee[_+1]);for(var v=0;v<=11;v++)writeByte(re[v]);writeByte(16);for(var y=0;y<16;y++)writeByte(ie[y+1]);for(var b=0;b<=161;b++)writeByte(ne[b]);writeByte(1);for(var x=0;x<16;x++)writeByte(ae[x+1]);for(var T=0;T<=11;T++)writeByte(oe[T]);writeByte(17);for(var I=0;I<16;I++)writeByte(se[I+1]);for(var S=0;S<=161;S++)writeByte(ce[S])}(),function writeSOS(){writeWord(65498),writeWord(12),writeByte(3),writeByte(1),writeByte(0),writeByte(2),writeByte(17),writeByte(3),writeByte(17),writeByte(0),writeByte(63),writeByte(0)}();var I=0,O=0,k=0;j=0,U=7,this.encode.displayName="_encode_";for(var R,L,V,K,ue,pe,he,de,fe,me=_.data,ge=_.width,_e=_.height,ve=4*ge,ye=0;ye<_e;){for(R=0;R<ve;){for(pe=ue=ve*ye+R,he=-1,de=0,fe=0;fe<64;fe++)pe=ue+(de=fe>>3)*ve+(he=4*(7&fe)),ye+de>=_e&&(pe-=ve*(ye+1+de-_e)),R+he>=ve&&(pe-=R+he-ve+4),L=me[pe++],V=me[pe++],K=me[pe++],z[fe]=($[L]+$[V+256>>0]+$[K+512>>0]>>16)-128,G[fe]=($[L+768>>0]+$[V+1024>>0]+$[K+1280>>0]>>16)-128,H[fe]=($[L+1280>>0]+$[V+1536>>0]+$[K+1792>>0]>>16)-128;I=processDU(z,A,I,v,b),O=processDU(G,P,O,y,x),k=processDU(H,P,k,y,x),R+=32}ye+=8}if(U>=0){var be=[];be[1]=U+1,be[0]=(1<<U+1)-1,writeBits(be)}return writeWord(65497),Buffer.from(B)},function init(){(new Date).getTime();_||(_=50),function initCharLookupTable(){for(var _=String.fromCharCode,v=0;v<256;v++)V[v]=_(v)}(),function initHuffmanTbl(){v=computeHuffmanTbl(ee,re),y=computeHuffmanTbl(ae,oe),b=computeHuffmanTbl(ie,ne),x=computeHuffmanTbl(se,ce)}(),function initCategoryNumber(){for(var _=1,v=2,y=1;y<=15;y++){for(var b=_;b<v;b++)k[32767+b]=y,O[32767+b]=[],O[32767+b][1]=y,O[32767+b][0]=b;for(var x=-(v-1);x<=-_;x++)k[32767+x]=y,O[32767+x]=[],O[32767+x][1]=y,O[32767+x][0]=v-1+x;_<<=1,v<<=1}}(),function initRGBYUVTable(){for(var _=0;_<256;_++)$[_]=19595*_,$[_+256>>0]=38470*_,$[_+512>>0]=7471*_+32768,$[_+768>>0]=-11059*_,$[_+1024>>0]=-21709*_,$[_+1280>>0]=32768*_+8421375,$[_+1536>>0]=-27439*_,$[_+1792>>0]=-5329*_}(),setQuality(_),(new Date).getTime()}()}_.exports=function encode(_,v){void 0===v&&(v=50);return{data:new JPEGEncoder(v).encode(_,v),width:_.width,height:_.height}}},1120:(_,v,y)=>{var b=y(7147),x=y(7310),T=(y(1017),y(193)),I=y(3340),S=y(4109),M=y(3827),A=y(5518),noop=function(){},P=y(5781);_.exports=function loadFont(_,v){v="function"==typeof v?v:noop,"string"==typeof _?_={uri:_,url:_}:_||(_={});var y=_.uri||_.url;function handleData(_,b){if(_)return v(_);!function parseFont(_,v,y){var b,x;P(v)?("string"==typeof v&&(v=Buffer.from(v,"binary")),x=!0):v=v.toString().trim();try{b=x?M(v):/json/.test(A.lookup(_))||"{"===v.charAt(0)?JSON.parse(v):/xml/.test(A.lookup(_))||"<"===v.charAt(0)?S(v):I(v)}catch(_){y(_),y=noop}y(null,b)}(y,b.body||b,v)}x.parse(y).host?T(_,handleData):b.readFile(y,_,handleData)}},5781:(_,v,y)=>{var b=y(2369),x=Buffer.from([66,77,70,3]);_.exports=function(_){return"string"==typeof _?"BMF"===_.substring(0,3):_.length>4&&b(_.slice(0,4),x)}},5518:(_,v,y)=>{y(1017);var b=y(7147);function Mime(){this.types=Object.create(null),this.extensions=Object.create(null)}Mime.prototype.define=function(_){for(var v in _){for(var y=_[v],b=0;b<y.length;b++)process.env.DEBUG_MIME&&this.types[y[b]]&&console.warn((this._loading||"define()").replace(/.*\//,""),'changes "'+y[b]+'" extension type from '+this.types[y[b]]+" to "+v),this.types[y[b]]=v;this.extensions[v]||(this.extensions[v]=y[0])}},Mime.prototype.load=function(_){this._loading=_;var v={};b.readFileSync(_,"ascii").split(/[\r\n]+/).forEach((function(_){var y=_.replace(/\s*#.*|^\s*|\s*$/g,"").split(/\s+/);v[y.shift()]=y})),this.define(v),this._loading=null},Mime.prototype.lookup=function(_,v){var y=_.replace(/^.*[\.\/\\]/,"").toLowerCase();return this.types[y]||v||this.default_type},Mime.prototype.extension=function(_){var v=_.match(/^\s*([^;\s]*)(?:;|\s|$)/)[1].toLowerCase();return this.extensions[v]};var x=new Mime;x.define(y(5799)),x.default_type=x.lookup("bin"),x.Mime=Mime,x.charsets={lookup:function(_,v){return/^text\/|^application\/(javascript|json)/.test(_)?"UTF-8":v}},_.exports=x},1890:(_,v,y)=>{var b=y(1017),x=y(7147),T=parseInt("0777",8);function mkdirP(_,v,y,I){"function"==typeof v?(y=v,v={}):v&&"object"==typeof v||(v={mode:v});var S=v.mode,M=v.fs||x;void 0===S&&(S=T),I||(I=null);var A=y||function(){};_=b.resolve(_),M.mkdir(_,S,(function(y){if(!y)return A(null,I=I||_);switch(y.code){case"ENOENT":if(b.dirname(_)===_)return A(y);mkdirP(b.dirname(_),v,(function(y,b){y?A(y,b):mkdirP(_,v,A,b)}));break;default:M.stat(_,(function(_,v){_||!v.isDirectory()?A(y,I):A(null,I)}))}}))}_.exports=mkdirP.mkdirp=mkdirP.mkdirP=mkdirP,mkdirP.sync=function sync(_,v,y){v&&"object"==typeof v||(v={mode:v});var I=v.mode,S=v.fs||x;void 0===I&&(I=T),y||(y=null),_=b.resolve(_);try{S.mkdirSync(_,I),y=y||_}catch(x){switch(x.code){case"ENOENT":y=sync(b.dirname(_),v,y),sync(_,v,y);break;default:var M;try{M=S.statSync(_)}catch(_){throw x}if(!M.isDirectory())throw x}}return y}},1494:(_,v)=>{"use strict";function GifReaderLZWOutputIndexStream(_,v,y,b){for(var x=_[v++],T=1<<x,I=T+1,S=I+1,M=x+1,A=(1<<M)-1,P=0,O=0,k=0,R=_[v++],L=new Int32Array(4096),B=null;;){for(;P<16&&0!==R;)O|=_[v++]<<P,P+=8,1===R?R=_[v++]:--R;if(P<M)break;var j=O&A;if(O>>=M,P-=M,j!==T){if(j===I)break;for(var U=j<S?j:B,z=0,G=U;G>T;)G=L[G]>>8,++z;var H=G;if(k+z+(U!==j?1:0)>b)return void console.log("Warning, gif stream longer than expected.");y[k++]=H;var V=k+=z;for(U!==j&&(y[k++]=H),G=U;z--;)G=L[G],y[--V]=255&G,G>>=8;null!==B&&S<4096&&(L[S++]=B<<8|H,S>=A+1&&M<12&&(++M,A=A<<1|1)),B=j}else S=I+1,A=(1<<(M=x+1))-1,B=null}return k!==b&&console.log("Warning, gif stream shorter than expected."),y}try{v.GifWriter=function GifWriter(_,v,y,b){var x=0,T=void 0===(b=void 0===b?{}:b).loop?null:b.loop,I=void 0===b.palette?null:b.palette;if(v<=0||y<=0||v>65535||y>65535)throw new Error("Width/Height invalid.");function check_palette_and_num_colors(_){var v=_.length;if(v<2||v>256||v&v-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return v}_[x++]=71,_[x++]=73,_[x++]=70,_[x++]=56,_[x++]=57,_[x++]=97;var S=0,M=0;if(null!==I){for(var A=check_palette_and_num_colors(I);A>>=1;)++S;if(A=1<<S,--S,void 0!==b.background){if((M=b.background)>=A)throw new Error("Background index out of range.");if(0===M)throw new Error("Background index explicitly passed as 0.")}}if(_[x++]=255&v,_[x++]=v>>8&255,_[x++]=255&y,_[x++]=y>>8&255,_[x++]=(null!==I?128:0)|S,_[x++]=M,_[x++]=0,null!==I)for(var P=0,O=I.length;P<O;++P){var k=I[P];_[x++]=k>>16&255,_[x++]=k>>8&255,_[x++]=255&k}if(null!==T){if(T<0||T>65535)throw new Error("Loop count invalid.");_[x++]=33,_[x++]=255,_[x++]=11,_[x++]=78,_[x++]=69,_[x++]=84,_[x++]=83,_[x++]=67,_[x++]=65,_[x++]=80,_[x++]=69,_[x++]=50,_[x++]=46,_[x++]=48,_[x++]=3,_[x++]=1,_[x++]=255&T,_[x++]=T>>8&255,_[x++]=0}var R=!1;this.addFrame=function(v,y,b,T,S,M){if(!0===R&&(--x,R=!1),M=void 0===M?{}:M,v<0||y<0||v>65535||y>65535)throw new Error("x/y invalid.");if(b<=0||T<=0||b>65535||T>65535)throw new Error("Width/Height invalid.");if(S.length<b*T)throw new Error("Not enough pixels for the frame size.");var A=!0,P=M.palette;if(null==P&&(A=!1,P=I),null==P)throw new Error("Must supply either a local or global palette.");for(var O=check_palette_and_num_colors(P),k=0;O>>=1;)++k;O=1<<k;var L=void 0===M.delay?0:M.delay,B=void 0===M.disposal?0:M.disposal;if(B<0||B>3)throw new Error("Disposal out of range.");var j=!1,U=0;if(void 0!==M.transparent&&null!==M.transparent&&(j=!0,(U=M.transparent)<0||U>=O))throw new Error("Transparent color index.");if((0!==B||j||0!==L)&&(_[x++]=33,_[x++]=249,_[x++]=4,_[x++]=B<<2|(!0===j?1:0),_[x++]=255&L,_[x++]=L>>8&255,_[x++]=U,_[x++]=0),_[x++]=44,_[x++]=255&v,_[x++]=v>>8&255,_[x++]=255&y,_[x++]=y>>8&255,_[x++]=255&b,_[x++]=b>>8&255,_[x++]=255&T,_[x++]=T>>8&255,_[x++]=!0===A?128|k-1:0,!0===A)for(var z=0,G=P.length;z<G;++z){var H=P[z];_[x++]=H>>16&255,_[x++]=H>>8&255,_[x++]=255&H}return x=function GifWriterOutputLZWCodeStream(_,v,y,b){_[v++]=y;var x=v++,T=1<<y,I=T-1,S=T+1,M=S+1,A=y+1,P=0,O=0;function emit_bytes_to_buffer(y){for(;P>=y;)_[v++]=255&O,O>>=8,P-=8,v===x+256&&(_[x]=255,x=v++)}function emit_code(_){O|=_<<P,P+=A,emit_bytes_to_buffer(8)}var k=b[0]&I,R={};emit_code(T);for(var L=1,B=b.length;L<B;++L){var j=b[L]&I,U=k<<8|j,z=R[U];if(void 0===z){for(O|=k<<P,P+=A;P>=8;)_[v++]=255&O,O>>=8,P-=8,v===x+256&&(_[x]=255,x=v++);4096===M?(emit_code(T),M=S+1,A=y+1,R={}):(M>=1<<A&&++A,R[U]=M++),k=j}else k=z}emit_code(k),emit_code(S),emit_bytes_to_buffer(1),x+1===v?_[x]=0:(_[x]=v-x-1,_[v++]=0);return v}(_,x,k<2?2:k,S)},this.end=function(){return!1===R&&(_[x++]=59,R=!0),x},this.getOutputBuffer=function(){return _},this.setOutputBuffer=function(v){_=v},this.getOutputBufferPosition=function(){return x},this.setOutputBufferPosition=function(_){x=_}},v.GifReader=function GifReader(_){var v=0;if(71!==_[v++]||73!==_[v++]||70!==_[v++]||56!==_[v++]||56!=(_[v++]+1&253)||97!==_[v++])throw new Error("Invalid GIF 87a/89a header.");var y=_[v++]|_[v++]<<8,b=_[v++]|_[v++]<<8,x=_[v++],T=x>>7,I=1<<(7&x)+1;_[v++],_[v++];var S=null,M=null;T&&(S=v,M=I,v+=3*I);var A=!0,P=[],O=0,k=null,R=0,L=null;for(this.width=y,this.height=b;A&&v<_.length;)switch(_[v++]){case 33:switch(_[v++]){case 255:if(11!==_[v]||78==_[v+1]&&69==_[v+2]&&84==_[v+3]&&83==_[v+4]&&67==_[v+5]&&65==_[v+6]&&80==_[v+7]&&69==_[v+8]&&50==_[v+9]&&46==_[v+10]&&48==_[v+11]&&3==_[v+12]&&1==_[v+13]&&0==_[v+16])v+=14,L=_[v++]|_[v++]<<8,v++;else for(v+=12;;){if(!((ne=_[v++])>=0))throw Error("Invalid block size");if(0===ne)break;v+=ne}break;case 249:if(4!==_[v++]||0!==_[v+4])throw new Error("Invalid graphics extension block.");var B=_[v++];O=_[v++]|_[v++]<<8,k=_[v++],0==(1&B)&&(k=null),R=B>>2&7,v++;break;case 254:for(;;){if(!((ne=_[v++])>=0))throw Error("Invalid block size");if(0===ne)break;v+=ne}break;default:throw new Error("Unknown graphic control label: 0x"+_[v-1].toString(16))}break;case 44:var j=_[v++]|_[v++]<<8,U=_[v++]|_[v++]<<8,z=_[v++]|_[v++]<<8,G=_[v++]|_[v++]<<8,H=_[v++],V=H>>6&1,$=1<<(7&H)+1,K=S,ee=M,re=!1;if(H>>7){re=!0;K=v,ee=$,v+=3*$}var ie=v;for(v++;;){var ne;if(!((ne=_[v++])>=0))throw Error("Invalid block size");if(0===ne)break;v+=ne}P.push({x:j,y:U,width:z,height:G,has_local_palette:re,palette_offset:K,palette_size:ee,data_offset:ie,data_length:v-ie,transparent_index:k,interlaced:!!V,delay:O,disposal:R});break;case 59:A=!1;break;default:throw new Error("Unknown gif block: 0x"+_[v-1].toString(16))}this.numFrames=function(){return P.length},this.loopCount=function(){return L},this.frameInfo=function(_){if(_<0||_>=P.length)throw new Error("Frame index out of range.");return P[_]},this.decodeAndBlitFrameBGRA=function(v,b){var x=this.frameInfo(v),T=x.width*x.height,I=new Uint8Array(T);GifReaderLZWOutputIndexStream(_,x.data_offset,I,T);var S=x.palette_offset,M=x.transparent_index;null===M&&(M=256);var A=x.width,P=y-A,O=A,k=4*(x.y*y+x.x),R=4*((x.y+x.height)*y+x.x),L=k,B=4*P;!0===x.interlaced&&(B+=4*y*7);for(var j=8,U=0,z=I.length;U<z;++U){var G=I[U];if(0===O&&(O=A,(L+=B)>=R&&(B=4*P+4*y*(j-1),L=k+(A+P)*(j<<1),j>>=1)),G===M)L+=4;else{var H=_[S+3*G],V=_[S+3*G+1],$=_[S+3*G+2];b[L++]=$,b[L++]=V,b[L++]=H,b[L++]=255}--O}},this.decodeAndBlitFrameRGBA=function(v,b){var x=this.frameInfo(v),T=x.width*x.height,I=new Uint8Array(T);GifReaderLZWOutputIndexStream(_,x.data_offset,I,T);var S=x.palette_offset,M=x.transparent_index;null===M&&(M=256);var A=x.width,P=y-A,O=A,k=4*(x.y*y+x.x),R=4*((x.y+x.height)*y+x.x),L=k,B=4*P;!0===x.interlaced&&(B+=4*y*7);for(var j=8,U=0,z=I.length;U<z;++U){var G=I[U];if(0===O&&(O=A,(L+=B)>=R&&(B=4*P+4*y*(j-1),L=k+(A+P)*(j<<1),j>>=1)),G===M)L+=4;else{var H=_[S+3*G],V=_[S+3*G+1],$=_[S+3*G+2];b[L++]=H,b[L++]=V,b[L++]=$,b[L++]=255}--O}}}}catch(_){}},9591:(_,v,y)=>{"use strict";var b={};(0,y(4236).assign)(b,y(4555),y(8843),y(1619)),_.exports=b},4555:(_,v,y)=>{"use strict";var b=y(405),x=y(4236),T=y(9373),I=y(8898),S=y(2292),M=Object.prototype.toString;function Deflate(_){if(!(this instanceof Deflate))return new Deflate(_);this.options=x.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},_||{});var v=this.options;v.raw&&v.windowBits>0?v.windowBits=-v.windowBits:v.gzip&&v.windowBits>0&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new S,this.strm.avail_out=0;var y=b.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(0!==y)throw new Error(I[y]);if(v.header&&b.deflateSetHeader(this.strm,v.header),v.dictionary){var A;if(A="string"==typeof v.dictionary?T.string2buf(v.dictionary):"[object ArrayBuffer]"===M.call(v.dictionary)?new Uint8Array(v.dictionary):v.dictionary,0!==(y=b.deflateSetDictionary(this.strm,A)))throw new Error(I[y]);this._dict_set=!0}}function deflate(_,v){var y=new Deflate(v);if(y.push(_,!0),y.err)throw y.msg||I[y.err];return y.result}Deflate.prototype.push=function(_,v){var y,I,S=this.strm,A=this.options.chunkSize;if(this.ended)return!1;I=v===~~v?v:!0===v?4:0,"string"==typeof _?S.input=T.string2buf(_):"[object ArrayBuffer]"===M.call(_)?S.input=new Uint8Array(_):S.input=_,S.next_in=0,S.avail_in=S.input.length;do{if(0===S.avail_out&&(S.output=new x.Buf8(A),S.next_out=0,S.avail_out=A),1!==(y=b.deflate(S,I))&&0!==y)return this.onEnd(y),this.ended=!0,!1;0!==S.avail_out&&(0!==S.avail_in||4!==I&&2!==I)||("string"===this.options.to?this.onData(T.buf2binstring(x.shrinkBuf(S.output,S.next_out))):this.onData(x.shrinkBuf(S.output,S.next_out)))}while((S.avail_in>0||0===S.avail_out)&&1!==y);return 4===I?(y=b.deflateEnd(this.strm),this.onEnd(y),this.ended=!0,0===y):2!==I||(this.onEnd(0),S.avail_out=0,!0)},Deflate.prototype.onData=function(_){this.chunks.push(_)},Deflate.prototype.onEnd=function(_){0===_&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=x.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},v.Deflate=Deflate,v.deflate=deflate,v.deflateRaw=function deflateRaw(_,v){return(v=v||{}).raw=!0,deflate(_,v)},v.gzip=function gzip(_,v){return(v=v||{}).gzip=!0,deflate(_,v)}},8843:(_,v,y)=>{"use strict";var b=y(7948),x=y(4236),T=y(9373),I=y(1619),S=y(8898),M=y(2292),A=y(2401),P=Object.prototype.toString;function Inflate(_){if(!(this instanceof Inflate))return new Inflate(_);this.options=x.assign({chunkSize:16384,windowBits:0,to:""},_||{});var v=this.options;v.raw&&v.windowBits>=0&&v.windowBits<16&&(v.windowBits=-v.windowBits,0===v.windowBits&&(v.windowBits=-15)),!(v.windowBits>=0&&v.windowBits<16)||_&&_.windowBits||(v.windowBits+=32),v.windowBits>15&&v.windowBits<48&&0==(15&v.windowBits)&&(v.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new M,this.strm.avail_out=0;var y=b.inflateInit2(this.strm,v.windowBits);if(y!==I.Z_OK)throw new Error(S[y]);if(this.header=new A,b.inflateGetHeader(this.strm,this.header),v.dictionary&&("string"==typeof v.dictionary?v.dictionary=T.string2buf(v.dictionary):"[object ArrayBuffer]"===P.call(v.dictionary)&&(v.dictionary=new Uint8Array(v.dictionary)),v.raw&&(y=b.inflateSetDictionary(this.strm,v.dictionary))!==I.Z_OK))throw new Error(S[y])}function inflate(_,v){var y=new Inflate(v);if(y.push(_,!0),y.err)throw y.msg||S[y.err];return y.result}Inflate.prototype.push=function(_,v){var y,S,M,A,O,k=this.strm,R=this.options.chunkSize,L=this.options.dictionary,B=!1;if(this.ended)return!1;S=v===~~v?v:!0===v?I.Z_FINISH:I.Z_NO_FLUSH,"string"==typeof _?k.input=T.binstring2buf(_):"[object ArrayBuffer]"===P.call(_)?k.input=new Uint8Array(_):k.input=_,k.next_in=0,k.avail_in=k.input.length;do{if(0===k.avail_out&&(k.output=new x.Buf8(R),k.next_out=0,k.avail_out=R),(y=b.inflate(k,I.Z_NO_FLUSH))===I.Z_NEED_DICT&&L&&(y=b.inflateSetDictionary(this.strm,L)),y===I.Z_BUF_ERROR&&!0===B&&(y=I.Z_OK,B=!1),y!==I.Z_STREAM_END&&y!==I.Z_OK)return this.onEnd(y),this.ended=!0,!1;k.next_out&&(0!==k.avail_out&&y!==I.Z_STREAM_END&&(0!==k.avail_in||S!==I.Z_FINISH&&S!==I.Z_SYNC_FLUSH)||("string"===this.options.to?(M=T.utf8border(k.output,k.next_out),A=k.next_out-M,O=T.buf2string(k.output,M),k.next_out=A,k.avail_out=R-A,A&&x.arraySet(k.output,k.output,M,A,0),this.onData(O)):this.onData(x.shrinkBuf(k.output,k.next_out)))),0===k.avail_in&&0===k.avail_out&&(B=!0)}while((k.avail_in>0||0===k.avail_out)&&y!==I.Z_STREAM_END);return y===I.Z_STREAM_END&&(S=I.Z_FINISH),S===I.Z_FINISH?(y=b.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===I.Z_OK):S!==I.Z_SYNC_FLUSH||(this.onEnd(I.Z_OK),k.avail_out=0,!0)},Inflate.prototype.onData=function(_){this.chunks.push(_)},Inflate.prototype.onEnd=function(_){_===I.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=x.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},v.Inflate=Inflate,v.inflate=inflate,v.inflateRaw=function inflateRaw(_,v){return(v=v||{}).raw=!0,inflate(_,v)},v.ungzip=inflate},4236:(_,v)=>{"use strict";var y="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function _has(_,v){return Object.prototype.hasOwnProperty.call(_,v)}v.assign=function(_){for(var v=Array.prototype.slice.call(arguments,1);v.length;){var y=v.shift();if(y){if("object"!=typeof y)throw new TypeError(y+"must be non-object");for(var b in y)_has(y,b)&&(_[b]=y[b])}}return _},v.shrinkBuf=function(_,v){return _.length===v?_:_.subarray?_.subarray(0,v):(_.length=v,_)};var b={arraySet:function(_,v,y,b,x){if(v.subarray&&_.subarray)_.set(v.subarray(y,y+b),x);else for(var T=0;T<b;T++)_[x+T]=v[y+T]},flattenChunks:function(_){var v,y,b,x,T,I;for(b=0,v=0,y=_.length;v<y;v++)b+=_[v].length;for(I=new Uint8Array(b),x=0,v=0,y=_.length;v<y;v++)T=_[v],I.set(T,x),x+=T.length;return I}},x={arraySet:function(_,v,y,b,x){for(var T=0;T<b;T++)_[x+T]=v[y+T]},flattenChunks:function(_){return[].concat.apply([],_)}};v.setTyped=function(_){_?(v.Buf8=Uint8Array,v.Buf16=Uint16Array,v.Buf32=Int32Array,v.assign(v,b)):(v.Buf8=Array,v.Buf16=Array,v.Buf32=Array,v.assign(v,x))},v.setTyped(y)},9373:(_,v,y)=>{"use strict";var b=y(4236),x=!0,T=!0;try{String.fromCharCode.apply(null,[0])}catch(_){x=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(_){T=!1}for(var I=new b.Buf8(256),S=0;S<256;S++)I[S]=S>=252?6:S>=248?5:S>=240?4:S>=224?3:S>=192?2:1;function buf2binstring(_,v){if(v<65534&&(_.subarray&&T||!_.subarray&&x))return String.fromCharCode.apply(null,b.shrinkBuf(_,v));for(var y="",I=0;I<v;I++)y+=String.fromCharCode(_[I]);return y}I[254]=I[254]=1,v.string2buf=function(_){var v,y,x,T,I,S=_.length,M=0;for(T=0;T<S;T++)55296==(64512&(y=_.charCodeAt(T)))&&T+1<S&&56320==(64512&(x=_.charCodeAt(T+1)))&&(y=65536+(y-55296<<10)+(x-56320),T++),M+=y<128?1:y<2048?2:y<65536?3:4;for(v=new b.Buf8(M),I=0,T=0;I<M;T++)55296==(64512&(y=_.charCodeAt(T)))&&T+1<S&&56320==(64512&(x=_.charCodeAt(T+1)))&&(y=65536+(y-55296<<10)+(x-56320),T++),y<128?v[I++]=y:y<2048?(v[I++]=192|y>>>6,v[I++]=128|63&y):y<65536?(v[I++]=224|y>>>12,v[I++]=128|y>>>6&63,v[I++]=128|63&y):(v[I++]=240|y>>>18,v[I++]=128|y>>>12&63,v[I++]=128|y>>>6&63,v[I++]=128|63&y);return v},v.buf2binstring=function(_){return buf2binstring(_,_.length)},v.binstring2buf=function(_){for(var v=new b.Buf8(_.length),y=0,x=v.length;y<x;y++)v[y]=_.charCodeAt(y);return v},v.buf2string=function(_,v){var y,b,x,T,S=v||_.length,M=new Array(2*S);for(b=0,y=0;y<S;)if((x=_[y++])<128)M[b++]=x;else if((T=I[x])>4)M[b++]=65533,y+=T-1;else{for(x&=2===T?31:3===T?15:7;T>1&&y<S;)x=x<<6|63&_[y++],T--;T>1?M[b++]=65533:x<65536?M[b++]=x:(x-=65536,M[b++]=55296|x>>10&1023,M[b++]=56320|1023&x)}return buf2binstring(M,b)},v.utf8border=function(_,v){var y;for((v=v||_.length)>_.length&&(v=_.length),y=v-1;y>=0&&128==(192&_[y]);)y--;return y<0||0===y?v:y+I[_[y]]>v?y:v}},6069:_=>{"use strict";_.exports=function adler32(_,v,y,b){for(var x=65535&_|0,T=_>>>16&65535|0,I=0;0!==y;){y-=I=y>2e3?2e3:y;do{T=T+(x=x+v[b++]|0)|0}while(--I);x%=65521,T%=65521}return x|T<<16|0}},1619:_=>{"use strict";_.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},2869:_=>{"use strict";var v=function makeTable(){for(var _,v=[],y=0;y<256;y++){_=y;for(var b=0;b<8;b++)_=1&_?3988292384^_>>>1:_>>>1;v[y]=_}return v}();_.exports=function crc32(_,y,b,x){var T=v,I=x+b;_^=-1;for(var S=x;S<I;S++)_=_>>>8^T[255&(_^y[S])];return-1^_}},405:(_,v,y)=>{"use strict";var b,x=y(4236),T=y(342),I=y(6069),S=y(2869),M=y(8898);function err(_,v){return _.msg=M[v],v}function rank(_){return(_<<1)-(_>4?9:0)}function zero(_){for(var v=_.length;--v>=0;)_[v]=0}function flush_pending(_){var v=_.state,y=v.pending;y>_.avail_out&&(y=_.avail_out),0!==y&&(x.arraySet(_.output,v.pending_buf,v.pending_out,y,_.next_out),_.next_out+=y,v.pending_out+=y,_.total_out+=y,_.avail_out-=y,v.pending-=y,0===v.pending&&(v.pending_out=0))}function flush_block_only(_,v){T._tr_flush_block(_,_.block_start>=0?_.block_start:-1,_.strstart-_.block_start,v),_.block_start=_.strstart,flush_pending(_.strm)}function put_byte(_,v){_.pending_buf[_.pending++]=v}function putShortMSB(_,v){_.pending_buf[_.pending++]=v>>>8&255,_.pending_buf[_.pending++]=255&v}function longest_match(_,v){var y,b,x=_.max_chain_length,T=_.strstart,I=_.prev_length,S=_.nice_match,M=_.strstart>_.w_size-262?_.strstart-(_.w_size-262):0,A=_.window,P=_.w_mask,O=_.prev,k=_.strstart+258,R=A[T+I-1],L=A[T+I];_.prev_length>=_.good_match&&(x>>=2),S>_.lookahead&&(S=_.lookahead);do{if(A[(y=v)+I]===L&&A[y+I-1]===R&&A[y]===A[T]&&A[++y]===A[T+1]){T+=2,y++;do{}while(A[++T]===A[++y]&&A[++T]===A[++y]&&A[++T]===A[++y]&&A[++T]===A[++y]&&A[++T]===A[++y]&&A[++T]===A[++y]&&A[++T]===A[++y]&&A[++T]===A[++y]&&T<k);if(b=258-(k-T),T=k-258,b>I){if(_.match_start=v,I=b,b>=S)break;R=A[T+I-1],L=A[T+I]}}}while((v=O[v&P])>M&&0!=--x);return I<=_.lookahead?I:_.lookahead}function fill_window(_){var v,y,b,T,M,A,P,O,k,R,L=_.w_size;do{if(T=_.window_size-_.lookahead-_.strstart,_.strstart>=L+(L-262)){x.arraySet(_.window,_.window,L,L,0),_.match_start-=L,_.strstart-=L,_.block_start-=L,v=y=_.hash_size;do{b=_.head[--v],_.head[v]=b>=L?b-L:0}while(--y);v=y=L;do{b=_.prev[--v],_.prev[v]=b>=L?b-L:0}while(--y);T+=L}if(0===_.strm.avail_in)break;if(A=_.strm,P=_.window,O=_.strstart+_.lookahead,k=T,R=void 0,(R=A.avail_in)>k&&(R=k),y=0===R?0:(A.avail_in-=R,x.arraySet(P,A.input,A.next_in,R,O),1===A.state.wrap?A.adler=I(A.adler,P,R,O):2===A.state.wrap&&(A.adler=S(A.adler,P,R,O)),A.next_in+=R,A.total_in+=R,R),_.lookahead+=y,_.lookahead+_.insert>=3)for(M=_.strstart-_.insert,_.ins_h=_.window[M],_.ins_h=(_.ins_h<<_.hash_shift^_.window[M+1])&_.hash_mask;_.insert&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[M+3-1])&_.hash_mask,_.prev[M&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=M,M++,_.insert--,!(_.lookahead+_.insert<3)););}while(_.lookahead<262&&0!==_.strm.avail_in)}function deflate_fast(_,v){for(var y,b;;){if(_.lookahead<262){if(fill_window(_),_.lookahead<262&&0===v)return 1;if(0===_.lookahead)break}if(y=0,_.lookahead>=3&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+3-1])&_.hash_mask,y=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),0!==y&&_.strstart-y<=_.w_size-262&&(_.match_length=longest_match(_,y)),_.match_length>=3)if(b=T._tr_tally(_,_.strstart-_.match_start,_.match_length-3),_.lookahead-=_.match_length,_.match_length<=_.max_lazy_match&&_.lookahead>=3){_.match_length--;do{_.strstart++,_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+3-1])&_.hash_mask,y=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart}while(0!=--_.match_length);_.strstart++}else _.strstart+=_.match_length,_.match_length=0,_.ins_h=_.window[_.strstart],_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+1])&_.hash_mask;else b=T._tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++;if(b&&(flush_block_only(_,!1),0===_.strm.avail_out))return 1}return _.insert=_.strstart<2?_.strstart:2,4===v?(flush_block_only(_,!0),0===_.strm.avail_out?3:4):_.last_lit&&(flush_block_only(_,!1),0===_.strm.avail_out)?1:2}function deflate_slow(_,v){for(var y,b,x;;){if(_.lookahead<262){if(fill_window(_),_.lookahead<262&&0===v)return 1;if(0===_.lookahead)break}if(y=0,_.lookahead>=3&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+3-1])&_.hash_mask,y=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),_.prev_length=_.match_length,_.prev_match=_.match_start,_.match_length=2,0!==y&&_.prev_length<_.max_lazy_match&&_.strstart-y<=_.w_size-262&&(_.match_length=longest_match(_,y),_.match_length<=5&&(1===_.strategy||3===_.match_length&&_.strstart-_.match_start>4096)&&(_.match_length=2)),_.prev_length>=3&&_.match_length<=_.prev_length){x=_.strstart+_.lookahead-3,b=T._tr_tally(_,_.strstart-1-_.prev_match,_.prev_length-3),_.lookahead-=_.prev_length-1,_.prev_length-=2;do{++_.strstart<=x&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+3-1])&_.hash_mask,y=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart)}while(0!=--_.prev_length);if(_.match_available=0,_.match_length=2,_.strstart++,b&&(flush_block_only(_,!1),0===_.strm.avail_out))return 1}else if(_.match_available){if((b=T._tr_tally(_,0,_.window[_.strstart-1]))&&flush_block_only(_,!1),_.strstart++,_.lookahead--,0===_.strm.avail_out)return 1}else _.match_available=1,_.strstart++,_.lookahead--}return _.match_available&&(b=T._tr_tally(_,0,_.window[_.strstart-1]),_.match_available=0),_.insert=_.strstart<2?_.strstart:2,4===v?(flush_block_only(_,!0),0===_.strm.avail_out?3:4):_.last_lit&&(flush_block_only(_,!1),0===_.strm.avail_out)?1:2}function Config(_,v,y,b,x){this.good_length=_,this.max_lazy=v,this.nice_length=y,this.max_chain=b,this.func=x}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new x.Buf16(1146),this.dyn_dtree=new x.Buf16(122),this.bl_tree=new x.Buf16(78),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new x.Buf16(16),this.heap=new x.Buf16(573),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new x.Buf16(573),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(_){var v;return _&&_.state?(_.total_in=_.total_out=0,_.data_type=2,(v=_.state).pending=0,v.pending_out=0,v.wrap<0&&(v.wrap=-v.wrap),v.status=v.wrap?42:113,_.adler=2===v.wrap?0:1,v.last_flush=0,T._tr_init(v),0):err(_,-2)}function deflateReset(_){var v=deflateResetKeep(_);return 0===v&&function lm_init(_){_.window_size=2*_.w_size,zero(_.head),_.max_lazy_match=b[_.level].max_lazy,_.good_match=b[_.level].good_length,_.nice_match=b[_.level].nice_length,_.max_chain_length=b[_.level].max_chain,_.strstart=0,_.block_start=0,_.lookahead=0,_.insert=0,_.match_length=_.prev_length=2,_.match_available=0,_.ins_h=0}(_.state),v}function deflateInit2(_,v,y,b,T,I){if(!_)return-2;var S=1;if(-1===v&&(v=6),b<0?(S=0,b=-b):b>15&&(S=2,b-=16),T<1||T>9||8!==y||b<8||b>15||v<0||v>9||I<0||I>4)return err(_,-2);8===b&&(b=9);var M=new DeflateState;return _.state=M,M.strm=_,M.wrap=S,M.gzhead=null,M.w_bits=b,M.w_size=1<<M.w_bits,M.w_mask=M.w_size-1,M.hash_bits=T+7,M.hash_size=1<<M.hash_bits,M.hash_mask=M.hash_size-1,M.hash_shift=~~((M.hash_bits+3-1)/3),M.window=new x.Buf8(2*M.w_size),M.head=new x.Buf16(M.hash_size),M.prev=new x.Buf16(M.w_size),M.lit_bufsize=1<<T+6,M.pending_buf_size=4*M.lit_bufsize,M.pending_buf=new x.Buf8(M.pending_buf_size),M.d_buf=1*M.lit_bufsize,M.l_buf=3*M.lit_bufsize,M.level=v,M.strategy=I,M.method=y,deflateReset(_)}b=[new Config(0,0,0,0,(function deflate_stored(_,v){var y=65535;for(y>_.pending_buf_size-5&&(y=_.pending_buf_size-5);;){if(_.lookahead<=1){if(fill_window(_),0===_.lookahead&&0===v)return 1;if(0===_.lookahead)break}_.strstart+=_.lookahead,_.lookahead=0;var b=_.block_start+y;if((0===_.strstart||_.strstart>=b)&&(_.lookahead=_.strstart-b,_.strstart=b,flush_block_only(_,!1),0===_.strm.avail_out))return 1;if(_.strstart-_.block_start>=_.w_size-262&&(flush_block_only(_,!1),0===_.strm.avail_out))return 1}return _.insert=0,4===v?(flush_block_only(_,!0),0===_.strm.avail_out?3:4):(_.strstart>_.block_start&&(flush_block_only(_,!1),_.strm.avail_out),1)})),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],v.deflateInit=function deflateInit(_,v){return deflateInit2(_,v,8,15,8,0)},v.deflateInit2=deflateInit2,v.deflateReset=deflateReset,v.deflateResetKeep=deflateResetKeep,v.deflateSetHeader=function deflateSetHeader(_,v){return _&&_.state?2!==_.state.wrap?-2:(_.state.gzhead=v,0):-2},v.deflate=function deflate(_,v){var y,x,I,M;if(!_||!_.state||v>5||v<0)return _?err(_,-2):-2;if(x=_.state,!_.output||!_.input&&0!==_.avail_in||666===x.status&&4!==v)return err(_,0===_.avail_out?-5:-2);if(x.strm=_,y=x.last_flush,x.last_flush=v,42===x.status)if(2===x.wrap)_.adler=0,put_byte(x,31),put_byte(x,139),put_byte(x,8),x.gzhead?(put_byte(x,(x.gzhead.text?1:0)+(x.gzhead.hcrc?2:0)+(x.gzhead.extra?4:0)+(x.gzhead.name?8:0)+(x.gzhead.comment?16:0)),put_byte(x,255&x.gzhead.time),put_byte(x,x.gzhead.time>>8&255),put_byte(x,x.gzhead.time>>16&255),put_byte(x,x.gzhead.time>>24&255),put_byte(x,9===x.level?2:x.strategy>=2||x.level<2?4:0),put_byte(x,255&x.gzhead.os),x.gzhead.extra&&x.gzhead.extra.length&&(put_byte(x,255&x.gzhead.extra.length),put_byte(x,x.gzhead.extra.length>>8&255)),x.gzhead.hcrc&&(_.adler=S(_.adler,x.pending_buf,x.pending,0)),x.gzindex=0,x.status=69):(put_byte(x,0),put_byte(x,0),put_byte(x,0),put_byte(x,0),put_byte(x,0),put_byte(x,9===x.level?2:x.strategy>=2||x.level<2?4:0),put_byte(x,3),x.status=113);else{var A=8+(x.w_bits-8<<4)<<8;A|=(x.strategy>=2||x.level<2?0:x.level<6?1:6===x.level?2:3)<<6,0!==x.strstart&&(A|=32),A+=31-A%31,x.status=113,putShortMSB(x,A),0!==x.strstart&&(putShortMSB(x,_.adler>>>16),putShortMSB(x,65535&_.adler)),_.adler=1}if(69===x.status)if(x.gzhead.extra){for(I=x.pending;x.gzindex<(65535&x.gzhead.extra.length)&&(x.pending!==x.pending_buf_size||(x.gzhead.hcrc&&x.pending>I&&(_.adler=S(_.adler,x.pending_buf,x.pending-I,I)),flush_pending(_),I=x.pending,x.pending!==x.pending_buf_size));)put_byte(x,255&x.gzhead.extra[x.gzindex]),x.gzindex++;x.gzhead.hcrc&&x.pending>I&&(_.adler=S(_.adler,x.pending_buf,x.pending-I,I)),x.gzindex===x.gzhead.extra.length&&(x.gzindex=0,x.status=73)}else x.status=73;if(73===x.status)if(x.gzhead.name){I=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>I&&(_.adler=S(_.adler,x.pending_buf,x.pending-I,I)),flush_pending(_),I=x.pending,x.pending===x.pending_buf_size)){M=1;break}M=x.gzindex<x.gzhead.name.length?255&x.gzhead.name.charCodeAt(x.gzindex++):0,put_byte(x,M)}while(0!==M);x.gzhead.hcrc&&x.pending>I&&(_.adler=S(_.adler,x.pending_buf,x.pending-I,I)),0===M&&(x.gzindex=0,x.status=91)}else x.status=91;if(91===x.status)if(x.gzhead.comment){I=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>I&&(_.adler=S(_.adler,x.pending_buf,x.pending-I,I)),flush_pending(_),I=x.pending,x.pending===x.pending_buf_size)){M=1;break}M=x.gzindex<x.gzhead.comment.length?255&x.gzhead.comment.charCodeAt(x.gzindex++):0,put_byte(x,M)}while(0!==M);x.gzhead.hcrc&&x.pending>I&&(_.adler=S(_.adler,x.pending_buf,x.pending-I,I)),0===M&&(x.status=103)}else x.status=103;if(103===x.status&&(x.gzhead.hcrc?(x.pending+2>x.pending_buf_size&&flush_pending(_),x.pending+2<=x.pending_buf_size&&(put_byte(x,255&_.adler),put_byte(x,_.adler>>8&255),_.adler=0,x.status=113)):x.status=113),0!==x.pending){if(flush_pending(_),0===_.avail_out)return x.last_flush=-1,0}else if(0===_.avail_in&&rank(v)<=rank(y)&&4!==v)return err(_,-5);if(666===x.status&&0!==_.avail_in)return err(_,-5);if(0!==_.avail_in||0!==x.lookahead||0!==v&&666!==x.status){var P=2===x.strategy?function deflate_huff(_,v){for(var y;;){if(0===_.lookahead&&(fill_window(_),0===_.lookahead)){if(0===v)return 1;break}if(_.match_length=0,y=T._tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++,y&&(flush_block_only(_,!1),0===_.strm.avail_out))return 1}return _.insert=0,4===v?(flush_block_only(_,!0),0===_.strm.avail_out?3:4):_.last_lit&&(flush_block_only(_,!1),0===_.strm.avail_out)?1:2}(x,v):3===x.strategy?function deflate_rle(_,v){for(var y,b,x,I,S=_.window;;){if(_.lookahead<=258){if(fill_window(_),_.lookahead<=258&&0===v)return 1;if(0===_.lookahead)break}if(_.match_length=0,_.lookahead>=3&&_.strstart>0&&(b=S[x=_.strstart-1])===S[++x]&&b===S[++x]&&b===S[++x]){I=_.strstart+258;do{}while(b===S[++x]&&b===S[++x]&&b===S[++x]&&b===S[++x]&&b===S[++x]&&b===S[++x]&&b===S[++x]&&b===S[++x]&&x<I);_.match_length=258-(I-x),_.match_length>_.lookahead&&(_.match_length=_.lookahead)}if(_.match_length>=3?(y=T._tr_tally(_,1,_.match_length-3),_.lookahead-=_.match_length,_.strstart+=_.match_length,_.match_length=0):(y=T._tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++),y&&(flush_block_only(_,!1),0===_.strm.avail_out))return 1}return _.insert=0,4===v?(flush_block_only(_,!0),0===_.strm.avail_out?3:4):_.last_lit&&(flush_block_only(_,!1),0===_.strm.avail_out)?1:2}(x,v):b[x.level].func(x,v);if(3!==P&&4!==P||(x.status=666),1===P||3===P)return 0===_.avail_out&&(x.last_flush=-1),0;if(2===P&&(1===v?T._tr_align(x):5!==v&&(T._tr_stored_block(x,0,0,!1),3===v&&(zero(x.head),0===x.lookahead&&(x.strstart=0,x.block_start=0,x.insert=0))),flush_pending(_),0===_.avail_out))return x.last_flush=-1,0}return 4!==v?0:x.wrap<=0?1:(2===x.wrap?(put_byte(x,255&_.adler),put_byte(x,_.adler>>8&255),put_byte(x,_.adler>>16&255),put_byte(x,_.adler>>24&255),put_byte(x,255&_.total_in),put_byte(x,_.total_in>>8&255),put_byte(x,_.total_in>>16&255),put_byte(x,_.total_in>>24&255)):(putShortMSB(x,_.adler>>>16),putShortMSB(x,65535&_.adler)),flush_pending(_),x.wrap>0&&(x.wrap=-x.wrap),0!==x.pending?0:1)},v.deflateEnd=function deflateEnd(_){var v;return _&&_.state?42!==(v=_.state.status)&&69!==v&&73!==v&&91!==v&&103!==v&&113!==v&&666!==v?err(_,-2):(_.state=null,113===v?err(_,-3):0):-2},v.deflateSetDictionary=function deflateSetDictionary(_,v){var y,b,T,S,M,A,P,O,k=v.length;if(!_||!_.state)return-2;if(2===(S=(y=_.state).wrap)||1===S&&42!==y.status||y.lookahead)return-2;for(1===S&&(_.adler=I(_.adler,v,k,0)),y.wrap=0,k>=y.w_size&&(0===S&&(zero(y.head),y.strstart=0,y.block_start=0,y.insert=0),O=new x.Buf8(y.w_size),x.arraySet(O,v,k-y.w_size,y.w_size,0),v=O,k=y.w_size),M=_.avail_in,A=_.next_in,P=_.input,_.avail_in=k,_.next_in=0,_.input=v,fill_window(y);y.lookahead>=3;){b=y.strstart,T=y.lookahead-2;do{y.ins_h=(y.ins_h<<y.hash_shift^y.window[b+3-1])&y.hash_mask,y.prev[b&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=b,b++}while(--T);y.strstart=b,y.lookahead=2,fill_window(y)}return y.strstart+=y.lookahead,y.block_start=y.strstart,y.insert=y.lookahead,y.lookahead=0,y.match_length=y.prev_length=2,y.match_available=0,_.next_in=A,_.input=P,_.avail_in=M,y.wrap=S,0},v.deflateInfo="pako deflate (from Nodeca project)"},2401:_=>{"use strict";_.exports=function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},4264:_=>{"use strict";_.exports=function inflate_fast(_,v){var y,b,x,T,I,S,M,A,P,O,k,R,L,B,j,U,z,G,H,V,$,K,ee,re,ie;y=_.state,b=_.next_in,re=_.input,x=b+(_.avail_in-5),T=_.next_out,ie=_.output,I=T-(v-_.avail_out),S=T+(_.avail_out-257),M=y.dmax,A=y.wsize,P=y.whave,O=y.wnext,k=y.window,R=y.hold,L=y.bits,B=y.lencode,j=y.distcode,U=(1<<y.lenbits)-1,z=(1<<y.distbits)-1;e:do{L<15&&(R+=re[b++]<<L,L+=8,R+=re[b++]<<L,L+=8),G=B[R&U];t:for(;;){if(R>>>=H=G>>>24,L-=H,0===(H=G>>>16&255))ie[T++]=65535&G;else{if(!(16&H)){if(0==(64&H)){G=B[(65535&G)+(R&(1<<H)-1)];continue t}if(32&H){y.mode=12;break e}_.msg="invalid literal/length code",y.mode=30;break e}V=65535&G,(H&=15)&&(L<H&&(R+=re[b++]<<L,L+=8),V+=R&(1<<H)-1,R>>>=H,L-=H),L<15&&(R+=re[b++]<<L,L+=8,R+=re[b++]<<L,L+=8),G=j[R&z];r:for(;;){if(R>>>=H=G>>>24,L-=H,!(16&(H=G>>>16&255))){if(0==(64&H)){G=j[(65535&G)+(R&(1<<H)-1)];continue r}_.msg="invalid distance code",y.mode=30;break e}if($=65535&G,L<(H&=15)&&(R+=re[b++]<<L,(L+=8)<H&&(R+=re[b++]<<L,L+=8)),($+=R&(1<<H)-1)>M){_.msg="invalid distance too far back",y.mode=30;break e}if(R>>>=H,L-=H,$>(H=T-I)){if((H=$-H)>P&&y.sane){_.msg="invalid distance too far back",y.mode=30;break e}if(K=0,ee=k,0===O){if(K+=A-H,H<V){V-=H;do{ie[T++]=k[K++]}while(--H);K=T-$,ee=ie}}else if(O<H){if(K+=A+O-H,(H-=O)<V){V-=H;do{ie[T++]=k[K++]}while(--H);if(K=0,O<V){V-=H=O;do{ie[T++]=k[K++]}while(--H);K=T-$,ee=ie}}}else if(K+=O-H,H<V){V-=H;do{ie[T++]=k[K++]}while(--H);K=T-$,ee=ie}for(;V>2;)ie[T++]=ee[K++],ie[T++]=ee[K++],ie[T++]=ee[K++],V-=3;V&&(ie[T++]=ee[K++],V>1&&(ie[T++]=ee[K++]))}else{K=T-$;do{ie[T++]=ie[K++],ie[T++]=ie[K++],ie[T++]=ie[K++],V-=3}while(V>2);V&&(ie[T++]=ie[K++],V>1&&(ie[T++]=ie[K++]))}break}}break}}while(b<x&&T<S);b-=V=L>>3,R&=(1<<(L-=V<<3))-1,_.next_in=b,_.next_out=T,_.avail_in=b<x?x-b+5:5-(b-x),_.avail_out=T<S?S-T+257:257-(T-S),y.hold=R,y.bits=L}},7948:(_,v,y)=>{"use strict";var b=y(4236),x=y(6069),T=y(2869),I=y(4264),S=y(9241);function zswap32(_){return(_>>>24&255)+(_>>>8&65280)+((65280&_)<<8)+((255&_)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new b.Buf16(320),this.work=new b.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(_){var v;return _&&_.state?(v=_.state,_.total_in=_.total_out=v.total=0,_.msg="",v.wrap&&(_.adler=1&v.wrap),v.mode=1,v.last=0,v.havedict=0,v.dmax=32768,v.head=null,v.hold=0,v.bits=0,v.lencode=v.lendyn=new b.Buf32(852),v.distcode=v.distdyn=new b.Buf32(592),v.sane=1,v.back=-1,0):-2}function inflateReset(_){var v;return _&&_.state?((v=_.state).wsize=0,v.whave=0,v.wnext=0,inflateResetKeep(_)):-2}function inflateReset2(_,v){var y,b;return _&&_.state?(b=_.state,v<0?(y=0,v=-v):(y=1+(v>>4),v<48&&(v&=15)),v&&(v<8||v>15)?-2:(null!==b.window&&b.wbits!==v&&(b.window=null),b.wrap=y,b.wbits=v,inflateReset(_))):-2}function inflateInit2(_,v){var y,b;return _?(b=new InflateState,_.state=b,b.window=null,0!==(y=inflateReset2(_,v))&&(_.state=null),y):-2}var M,A,P=!0;function fixedtables(_){if(P){var v;for(M=new b.Buf32(512),A=new b.Buf32(32),v=0;v<144;)_.lens[v++]=8;for(;v<256;)_.lens[v++]=9;for(;v<280;)_.lens[v++]=7;for(;v<288;)_.lens[v++]=8;for(S(1,_.lens,0,288,M,0,_.work,{bits:9}),v=0;v<32;)_.lens[v++]=5;S(2,_.lens,0,32,A,0,_.work,{bits:5}),P=!1}_.lencode=M,_.lenbits=9,_.distcode=A,_.distbits=5}function updatewindow(_,v,y,x){var T,I=_.state;return null===I.window&&(I.wsize=1<<I.wbits,I.wnext=0,I.whave=0,I.window=new b.Buf8(I.wsize)),x>=I.wsize?(b.arraySet(I.window,v,y-I.wsize,I.wsize,0),I.wnext=0,I.whave=I.wsize):((T=I.wsize-I.wnext)>x&&(T=x),b.arraySet(I.window,v,y-x,T,I.wnext),(x-=T)?(b.arraySet(I.window,v,y-x,x,0),I.wnext=x,I.whave=I.wsize):(I.wnext+=T,I.wnext===I.wsize&&(I.wnext=0),I.whave<I.wsize&&(I.whave+=T))),0}v.inflateReset=inflateReset,v.inflateReset2=inflateReset2,v.inflateResetKeep=inflateResetKeep,v.inflateInit=function inflateInit(_){return inflateInit2(_,15)},v.inflateInit2=inflateInit2,v.inflate=function inflate(_,v){var y,M,A,P,O,k,R,L,B,j,U,z,G,H,V,$,K,ee,re,ie,ne,ae,oe,se,ce=0,ue=new b.Buf8(4),pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!_||!_.state||!_.output||!_.input&&0!==_.avail_in)return-2;12===(y=_.state).mode&&(y.mode=13),O=_.next_out,A=_.output,R=_.avail_out,P=_.next_in,M=_.input,k=_.avail_in,L=y.hold,B=y.bits,j=k,U=R,ae=0;e:for(;;)switch(y.mode){case 1:if(0===y.wrap){y.mode=13;break}for(;B<16;){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}if(2&y.wrap&&35615===L){y.check=0,ue[0]=255&L,ue[1]=L>>>8&255,y.check=T(y.check,ue,2,0),L=0,B=0,y.mode=2;break}if(y.flags=0,y.head&&(y.head.done=!1),!(1&y.wrap)||(((255&L)<<8)+(L>>8))%31){_.msg="incorrect header check",y.mode=30;break}if(8!=(15&L)){_.msg="unknown compression method",y.mode=30;break}if(B-=4,ne=8+(15&(L>>>=4)),0===y.wbits)y.wbits=ne;else if(ne>y.wbits){_.msg="invalid window size",y.mode=30;break}y.dmax=1<<ne,_.adler=y.check=1,y.mode=512&L?10:12,L=0,B=0;break;case 2:for(;B<16;){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}if(y.flags=L,8!=(255&y.flags)){_.msg="unknown compression method",y.mode=30;break}if(57344&y.flags){_.msg="unknown header flags set",y.mode=30;break}y.head&&(y.head.text=L>>8&1),512&y.flags&&(ue[0]=255&L,ue[1]=L>>>8&255,y.check=T(y.check,ue,2,0)),L=0,B=0,y.mode=3;case 3:for(;B<32;){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}y.head&&(y.head.time=L),512&y.flags&&(ue[0]=255&L,ue[1]=L>>>8&255,ue[2]=L>>>16&255,ue[3]=L>>>24&255,y.check=T(y.check,ue,4,0)),L=0,B=0,y.mode=4;case 4:for(;B<16;){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}y.head&&(y.head.xflags=255&L,y.head.os=L>>8),512&y.flags&&(ue[0]=255&L,ue[1]=L>>>8&255,y.check=T(y.check,ue,2,0)),L=0,B=0,y.mode=5;case 5:if(1024&y.flags){for(;B<16;){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}y.length=L,y.head&&(y.head.extra_len=L),512&y.flags&&(ue[0]=255&L,ue[1]=L>>>8&255,y.check=T(y.check,ue,2,0)),L=0,B=0}else y.head&&(y.head.extra=null);y.mode=6;case 6:if(1024&y.flags&&((z=y.length)>k&&(z=k),z&&(y.head&&(ne=y.head.extra_len-y.length,y.head.extra||(y.head.extra=new Array(y.head.extra_len)),b.arraySet(y.head.extra,M,P,z,ne)),512&y.flags&&(y.check=T(y.check,M,z,P)),k-=z,P+=z,y.length-=z),y.length))break e;y.length=0,y.mode=7;case 7:if(2048&y.flags){if(0===k)break e;z=0;do{ne=M[P+z++],y.head&&ne&&y.length<65536&&(y.head.name+=String.fromCharCode(ne))}while(ne&&z<k);if(512&y.flags&&(y.check=T(y.check,M,z,P)),k-=z,P+=z,ne)break e}else y.head&&(y.head.name=null);y.length=0,y.mode=8;case 8:if(4096&y.flags){if(0===k)break e;z=0;do{ne=M[P+z++],y.head&&ne&&y.length<65536&&(y.head.comment+=String.fromCharCode(ne))}while(ne&&z<k);if(512&y.flags&&(y.check=T(y.check,M,z,P)),k-=z,P+=z,ne)break e}else y.head&&(y.head.comment=null);y.mode=9;case 9:if(512&y.flags){for(;B<16;){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}if(L!==(65535&y.check)){_.msg="header crc mismatch",y.mode=30;break}L=0,B=0}y.head&&(y.head.hcrc=y.flags>>9&1,y.head.done=!0),_.adler=y.check=0,y.mode=12;break;case 10:for(;B<32;){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}_.adler=y.check=zswap32(L),L=0,B=0,y.mode=11;case 11:if(0===y.havedict)return _.next_out=O,_.avail_out=R,_.next_in=P,_.avail_in=k,y.hold=L,y.bits=B,2;_.adler=y.check=1,y.mode=12;case 12:if(5===v||6===v)break e;case 13:if(y.last){L>>>=7&B,B-=7&B,y.mode=27;break}for(;B<3;){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}switch(y.last=1&L,B-=1,3&(L>>>=1)){case 0:y.mode=14;break;case 1:if(fixedtables(y),y.mode=20,6===v){L>>>=2,B-=2;break e}break;case 2:y.mode=17;break;case 3:_.msg="invalid block type",y.mode=30}L>>>=2,B-=2;break;case 14:for(L>>>=7&B,B-=7&B;B<32;){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}if((65535&L)!=(L>>>16^65535)){_.msg="invalid stored block lengths",y.mode=30;break}if(y.length=65535&L,L=0,B=0,y.mode=15,6===v)break e;case 15:y.mode=16;case 16:if(z=y.length){if(z>k&&(z=k),z>R&&(z=R),0===z)break e;b.arraySet(A,M,P,z,O),k-=z,P+=z,R-=z,O+=z,y.length-=z;break}y.mode=12;break;case 17:for(;B<14;){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}if(y.nlen=257+(31&L),L>>>=5,B-=5,y.ndist=1+(31&L),L>>>=5,B-=5,y.ncode=4+(15&L),L>>>=4,B-=4,y.nlen>286||y.ndist>30){_.msg="too many length or distance symbols",y.mode=30;break}y.have=0,y.mode=18;case 18:for(;y.have<y.ncode;){for(;B<3;){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}y.lens[pe[y.have++]]=7&L,L>>>=3,B-=3}for(;y.have<19;)y.lens[pe[y.have++]]=0;if(y.lencode=y.lendyn,y.lenbits=7,oe={bits:y.lenbits},ae=S(0,y.lens,0,19,y.lencode,0,y.work,oe),y.lenbits=oe.bits,ae){_.msg="invalid code lengths set",y.mode=30;break}y.have=0,y.mode=19;case 19:for(;y.have<y.nlen+y.ndist;){for(;$=(ce=y.lencode[L&(1<<y.lenbits)-1])>>>16&255,K=65535&ce,!((V=ce>>>24)<=B);){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}if(K<16)L>>>=V,B-=V,y.lens[y.have++]=K;else{if(16===K){for(se=V+2;B<se;){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}if(L>>>=V,B-=V,0===y.have){_.msg="invalid bit length repeat",y.mode=30;break}ne=y.lens[y.have-1],z=3+(3&L),L>>>=2,B-=2}else if(17===K){for(se=V+3;B<se;){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}B-=V,ne=0,z=3+(7&(L>>>=V)),L>>>=3,B-=3}else{for(se=V+7;B<se;){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}B-=V,ne=0,z=11+(127&(L>>>=V)),L>>>=7,B-=7}if(y.have+z>y.nlen+y.ndist){_.msg="invalid bit length repeat",y.mode=30;break}for(;z--;)y.lens[y.have++]=ne}}if(30===y.mode)break;if(0===y.lens[256]){_.msg="invalid code -- missing end-of-block",y.mode=30;break}if(y.lenbits=9,oe={bits:y.lenbits},ae=S(1,y.lens,0,y.nlen,y.lencode,0,y.work,oe),y.lenbits=oe.bits,ae){_.msg="invalid literal/lengths set",y.mode=30;break}if(y.distbits=6,y.distcode=y.distdyn,oe={bits:y.distbits},ae=S(2,y.lens,y.nlen,y.ndist,y.distcode,0,y.work,oe),y.distbits=oe.bits,ae){_.msg="invalid distances set",y.mode=30;break}if(y.mode=20,6===v)break e;case 20:y.mode=21;case 21:if(k>=6&&R>=258){_.next_out=O,_.avail_out=R,_.next_in=P,_.avail_in=k,y.hold=L,y.bits=B,I(_,U),O=_.next_out,A=_.output,R=_.avail_out,P=_.next_in,M=_.input,k=_.avail_in,L=y.hold,B=y.bits,12===y.mode&&(y.back=-1);break}for(y.back=0;$=(ce=y.lencode[L&(1<<y.lenbits)-1])>>>16&255,K=65535&ce,!((V=ce>>>24)<=B);){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}if($&&0==(240&$)){for(ee=V,re=$,ie=K;$=(ce=y.lencode[ie+((L&(1<<ee+re)-1)>>ee)])>>>16&255,K=65535&ce,!(ee+(V=ce>>>24)<=B);){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}L>>>=ee,B-=ee,y.back+=ee}if(L>>>=V,B-=V,y.back+=V,y.length=K,0===$){y.mode=26;break}if(32&$){y.back=-1,y.mode=12;break}if(64&$){_.msg="invalid literal/length code",y.mode=30;break}y.extra=15&$,y.mode=22;case 22:if(y.extra){for(se=y.extra;B<se;){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}y.length+=L&(1<<y.extra)-1,L>>>=y.extra,B-=y.extra,y.back+=y.extra}y.was=y.length,y.mode=23;case 23:for(;$=(ce=y.distcode[L&(1<<y.distbits)-1])>>>16&255,K=65535&ce,!((V=ce>>>24)<=B);){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}if(0==(240&$)){for(ee=V,re=$,ie=K;$=(ce=y.distcode[ie+((L&(1<<ee+re)-1)>>ee)])>>>16&255,K=65535&ce,!(ee+(V=ce>>>24)<=B);){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}L>>>=ee,B-=ee,y.back+=ee}if(L>>>=V,B-=V,y.back+=V,64&$){_.msg="invalid distance code",y.mode=30;break}y.offset=K,y.extra=15&$,y.mode=24;case 24:if(y.extra){for(se=y.extra;B<se;){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}y.offset+=L&(1<<y.extra)-1,L>>>=y.extra,B-=y.extra,y.back+=y.extra}if(y.offset>y.dmax){_.msg="invalid distance too far back",y.mode=30;break}y.mode=25;case 25:if(0===R)break e;if(z=U-R,y.offset>z){if((z=y.offset-z)>y.whave&&y.sane){_.msg="invalid distance too far back",y.mode=30;break}z>y.wnext?(z-=y.wnext,G=y.wsize-z):G=y.wnext-z,z>y.length&&(z=y.length),H=y.window}else H=A,G=O-y.offset,z=y.length;z>R&&(z=R),R-=z,y.length-=z;do{A[O++]=H[G++]}while(--z);0===y.length&&(y.mode=21);break;case 26:if(0===R)break e;A[O++]=y.length,R--,y.mode=21;break;case 27:if(y.wrap){for(;B<32;){if(0===k)break e;k--,L|=M[P++]<<B,B+=8}if(U-=R,_.total_out+=U,y.total+=U,U&&(_.adler=y.check=y.flags?T(y.check,A,U,O-U):x(y.check,A,U,O-U)),U=R,(y.flags?L:zswap32(L))!==y.check){_.msg="incorrect data check",y.mode=30;break}L=0,B=0}y.mode=28;case 28:if(y.wrap&&y.flags){for(;B<32;){if(0===k)break e;k--,L+=M[P++]<<B,B+=8}if(L!==(4294967295&y.total)){_.msg="incorrect length check",y.mode=30;break}L=0,B=0}y.mode=29;case 29:ae=1;break e;case 30:ae=-3;break e;case 31:return-4;case 32:default:return-2}return _.next_out=O,_.avail_out=R,_.next_in=P,_.avail_in=k,y.hold=L,y.bits=B,(y.wsize||U!==_.avail_out&&y.mode<30&&(y.mode<27||4!==v))&&updatewindow(_,_.output,_.next_out,U-_.avail_out)?(y.mode=31,-4):(j-=_.avail_in,U-=_.avail_out,_.total_in+=j,_.total_out+=U,y.total+=U,y.wrap&&U&&(_.adler=y.check=y.flags?T(y.check,A,U,_.next_out-U):x(y.check,A,U,_.next_out-U)),_.data_type=y.bits+(y.last?64:0)+(12===y.mode?128:0)+(20===y.mode||15===y.mode?256:0),(0===j&&0===U||4===v)&&0===ae&&(ae=-5),ae)},v.inflateEnd=function inflateEnd(_){if(!_||!_.state)return-2;var v=_.state;return v.window&&(v.window=null),_.state=null,0},v.inflateGetHeader=function inflateGetHeader(_,v){var y;return _&&_.state?0==(2&(y=_.state).wrap)?-2:(y.head=v,v.done=!1,0):-2},v.inflateSetDictionary=function inflateSetDictionary(_,v){var y,b=v.length;return _&&_.state?0!==(y=_.state).wrap&&11!==y.mode?-2:11===y.mode&&x(1,v,b,0)!==y.check?-3:updatewindow(_,v,b,b)?(y.mode=31,-4):(y.havedict=1,0):-2},v.inflateInfo="pako inflate (from Nodeca project)"},9241:(_,v,y)=>{"use strict";var b=y(4236),x=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],T=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],I=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],S=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];_.exports=function inflate_table(_,v,y,M,A,P,O,k){var R,L,B,j,U,z,G,H,V,$=k.bits,K=0,ee=0,re=0,ie=0,ne=0,ae=0,oe=0,se=0,ce=0,ue=0,pe=null,he=0,de=new b.Buf16(16),fe=new b.Buf16(16),me=null,ge=0;for(K=0;K<=15;K++)de[K]=0;for(ee=0;ee<M;ee++)de[v[y+ee]]++;for(ne=$,ie=15;ie>=1&&0===de[ie];ie--);if(ne>ie&&(ne=ie),0===ie)return A[P++]=20971520,A[P++]=20971520,k.bits=1,0;for(re=1;re<ie&&0===de[re];re++);for(ne<re&&(ne=re),se=1,K=1;K<=15;K++)if(se<<=1,(se-=de[K])<0)return-1;if(se>0&&(0===_||1!==ie))return-1;for(fe[1]=0,K=1;K<15;K++)fe[K+1]=fe[K]+de[K];for(ee=0;ee<M;ee++)0!==v[y+ee]&&(O[fe[v[y+ee]]++]=ee);if(0===_?(pe=me=O,z=19):1===_?(pe=x,he-=257,me=T,ge-=257,z=256):(pe=I,me=S,z=-1),ue=0,ee=0,K=re,U=P,ae=ne,oe=0,B=-1,j=(ce=1<<ne)-1,1===_&&ce>852||2===_&&ce>592)return 1;for(;;){G=K-oe,O[ee]<z?(H=0,V=O[ee]):O[ee]>z?(H=me[ge+O[ee]],V=pe[he+O[ee]]):(H=96,V=0),R=1<<K-oe,re=L=1<<ae;do{A[U+(ue>>oe)+(L-=R)]=G<<24|H<<16|V|0}while(0!==L);for(R=1<<K-1;ue&R;)R>>=1;if(0!==R?(ue&=R-1,ue+=R):ue=0,ee++,0==--de[K]){if(K===ie)break;K=v[y+O[ee]]}if(K>ne&&(ue&j)!==B){for(0===oe&&(oe=ne),U+=re,se=1<<(ae=K-oe);ae+oe<ie&&!((se-=de[ae+oe])<=0);)ae++,se<<=1;if(ce+=1<<ae,1===_&&ce>852||2===_&&ce>592)return 1;A[B=ue&j]=ne<<24|ae<<16|U-P|0}}return 0!==ue&&(A[U+ue]=K-oe<<24|64<<16|0),k.bits=ne,0}},8898:_=>{"use strict";_.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},342:(_,v,y)=>{"use strict";var b=y(4236);function zero(_){for(var v=_.length;--v>=0;)_[v]=0}var x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=new Array(576);zero(M);var A=new Array(60);zero(A);var P=new Array(512);zero(P);var O=new Array(256);zero(O);var k=new Array(29);zero(k);var R,L,B,j=new Array(30);function StaticTreeDesc(_,v,y,b,x){this.static_tree=_,this.extra_bits=v,this.extra_base=y,this.elems=b,this.max_length=x,this.has_stree=_&&_.length}function TreeDesc(_,v){this.dyn_tree=_,this.max_code=0,this.stat_desc=v}function d_code(_){return _<256?P[_]:P[256+(_>>>7)]}function put_short(_,v){_.pending_buf[_.pending++]=255&v,_.pending_buf[_.pending++]=v>>>8&255}function send_bits(_,v,y){_.bi_valid>16-y?(_.bi_buf|=v<<_.bi_valid&65535,put_short(_,_.bi_buf),_.bi_buf=v>>16-_.bi_valid,_.bi_valid+=y-16):(_.bi_buf|=v<<_.bi_valid&65535,_.bi_valid+=y)}function send_code(_,v,y){send_bits(_,y[2*v],y[2*v+1])}function bi_reverse(_,v){var y=0;do{y|=1&_,_>>>=1,y<<=1}while(--v>0);return y>>>1}function gen_codes(_,v,y){var b,x,T=new Array(16),I=0;for(b=1;b<=15;b++)T[b]=I=I+y[b-1]<<1;for(x=0;x<=v;x++){var S=_[2*x+1];0!==S&&(_[2*x]=bi_reverse(T[S]++,S))}}function init_block(_){var v;for(v=0;v<286;v++)_.dyn_ltree[2*v]=0;for(v=0;v<30;v++)_.dyn_dtree[2*v]=0;for(v=0;v<19;v++)_.bl_tree[2*v]=0;_.dyn_ltree[512]=1,_.opt_len=_.static_len=0,_.last_lit=_.matches=0}function bi_windup(_){_.bi_valid>8?put_short(_,_.bi_buf):_.bi_valid>0&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0}function smaller(_,v,y,b){var x=2*v,T=2*y;return _[x]<_[T]||_[x]===_[T]&&b[v]<=b[y]}function pqdownheap(_,v,y){for(var b=_.heap[y],x=y<<1;x<=_.heap_len&&(x<_.heap_len&&smaller(v,_.heap[x+1],_.heap[x],_.depth)&&x++,!smaller(v,b,_.heap[x],_.depth));)_.heap[y]=_.heap[x],y=x,x<<=1;_.heap[y]=b}function compress_block(_,v,y){var b,I,S,M,A=0;if(0!==_.last_lit)do{b=_.pending_buf[_.d_buf+2*A]<<8|_.pending_buf[_.d_buf+2*A+1],I=_.pending_buf[_.l_buf+A],A++,0===b?send_code(_,I,v):(send_code(_,(S=O[I])+256+1,v),0!==(M=x[S])&&send_bits(_,I-=k[S],M),send_code(_,S=d_code(--b),y),0!==(M=T[S])&&send_bits(_,b-=j[S],M))}while(A<_.last_lit);send_code(_,256,v)}function build_tree(_,v){var y,b,x,T=v.dyn_tree,I=v.stat_desc.static_tree,S=v.stat_desc.has_stree,M=v.stat_desc.elems,A=-1;for(_.heap_len=0,_.heap_max=573,y=0;y<M;y++)0!==T[2*y]?(_.heap[++_.heap_len]=A=y,_.depth[y]=0):T[2*y+1]=0;for(;_.heap_len<2;)T[2*(x=_.heap[++_.heap_len]=A<2?++A:0)]=1,_.depth[x]=0,_.opt_len--,S&&(_.static_len-=I[2*x+1]);for(v.max_code=A,y=_.heap_len>>1;y>=1;y--)pqdownheap(_,T,y);x=M;do{y=_.heap[1],_.heap[1]=_.heap[_.heap_len--],pqdownheap(_,T,1),b=_.heap[1],_.heap[--_.heap_max]=y,_.heap[--_.heap_max]=b,T[2*x]=T[2*y]+T[2*b],_.depth[x]=(_.depth[y]>=_.depth[b]?_.depth[y]:_.depth[b])+1,T[2*y+1]=T[2*b+1]=x,_.heap[1]=x++,pqdownheap(_,T,1)}while(_.heap_len>=2);_.heap[--_.heap_max]=_.heap[1],function gen_bitlen(_,v){var y,b,x,T,I,S,M=v.dyn_tree,A=v.max_code,P=v.stat_desc.static_tree,O=v.stat_desc.has_stree,k=v.stat_desc.extra_bits,R=v.stat_desc.extra_base,L=v.stat_desc.max_length,B=0;for(T=0;T<=15;T++)_.bl_count[T]=0;for(M[2*_.heap[_.heap_max]+1]=0,y=_.heap_max+1;y<573;y++)(T=M[2*M[2*(b=_.heap[y])+1]+1]+1)>L&&(T=L,B++),M[2*b+1]=T,b>A||(_.bl_count[T]++,I=0,b>=R&&(I=k[b-R]),S=M[2*b],_.opt_len+=S*(T+I),O&&(_.static_len+=S*(P[2*b+1]+I)));if(0!==B){do{for(T=L-1;0===_.bl_count[T];)T--;_.bl_count[T]--,_.bl_count[T+1]+=2,_.bl_count[L]--,B-=2}while(B>0);for(T=L;0!==T;T--)for(b=_.bl_count[T];0!==b;)(x=_.heap[--y])>A||(M[2*x+1]!==T&&(_.opt_len+=(T-M[2*x+1])*M[2*x],M[2*x+1]=T),b--)}}(_,v),gen_codes(T,A,_.bl_count)}function scan_tree(_,v,y){var b,x,T=-1,I=v[1],S=0,M=7,A=4;for(0===I&&(M=138,A=3),v[2*(y+1)+1]=65535,b=0;b<=y;b++)x=I,I=v[2*(b+1)+1],++S<M&&x===I||(S<A?_.bl_tree[2*x]+=S:0!==x?(x!==T&&_.bl_tree[2*x]++,_.bl_tree[32]++):S<=10?_.bl_tree[34]++:_.bl_tree[36]++,S=0,T=x,0===I?(M=138,A=3):x===I?(M=6,A=3):(M=7,A=4))}function send_tree(_,v,y){var b,x,T=-1,I=v[1],S=0,M=7,A=4;for(0===I&&(M=138,A=3),b=0;b<=y;b++)if(x=I,I=v[2*(b+1)+1],!(++S<M&&x===I)){if(S<A)do{send_code(_,x,_.bl_tree)}while(0!=--S);else 0!==x?(x!==T&&(send_code(_,x,_.bl_tree),S--),send_code(_,16,_.bl_tree),send_bits(_,S-3,2)):S<=10?(send_code(_,17,_.bl_tree),send_bits(_,S-3,3)):(send_code(_,18,_.bl_tree),send_bits(_,S-11,7));S=0,T=x,0===I?(M=138,A=3):x===I?(M=6,A=3):(M=7,A=4)}}zero(j);var U=!1;function _tr_stored_block(_,v,y,x){send_bits(_,0+(x?1:0),3),function copy_block(_,v,y,x){bi_windup(_),x&&(put_short(_,y),put_short(_,~y)),b.arraySet(_.pending_buf,_.window,v,y,_.pending),_.pending+=y}(_,v,y,!0)}v._tr_init=function _tr_init(_){U||(!function tr_static_init(){var _,v,y,b,S,U=new Array(16);for(y=0,b=0;b<28;b++)for(k[b]=y,_=0;_<1<<x[b];_++)O[y++]=b;for(O[y-1]=b,S=0,b=0;b<16;b++)for(j[b]=S,_=0;_<1<<T[b];_++)P[S++]=b;for(S>>=7;b<30;b++)for(j[b]=S<<7,_=0;_<1<<T[b]-7;_++)P[256+S++]=b;for(v=0;v<=15;v++)U[v]=0;for(_=0;_<=143;)M[2*_+1]=8,_++,U[8]++;for(;_<=255;)M[2*_+1]=9,_++,U[9]++;for(;_<=279;)M[2*_+1]=7,_++,U[7]++;for(;_<=287;)M[2*_+1]=8,_++,U[8]++;for(gen_codes(M,287,U),_=0;_<30;_++)A[2*_+1]=5,A[2*_]=bi_reverse(_,5);R=new StaticTreeDesc(M,x,257,286,15),L=new StaticTreeDesc(A,T,0,30,15),B=new StaticTreeDesc(new Array(0),I,0,19,7)}(),U=!0),_.l_desc=new TreeDesc(_.dyn_ltree,R),_.d_desc=new TreeDesc(_.dyn_dtree,L),_.bl_desc=new TreeDesc(_.bl_tree,B),_.bi_buf=0,_.bi_valid=0,init_block(_)},v._tr_stored_block=_tr_stored_block,v._tr_flush_block=function _tr_flush_block(_,v,y,b){var x,T,I=0;_.level>0?(2===_.strm.data_type&&(_.strm.data_type=function detect_data_type(_){var v,y=4093624447;for(v=0;v<=31;v++,y>>>=1)if(1&y&&0!==_.dyn_ltree[2*v])return 0;if(0!==_.dyn_ltree[18]||0!==_.dyn_ltree[20]||0!==_.dyn_ltree[26])return 1;for(v=32;v<256;v++)if(0!==_.dyn_ltree[2*v])return 1;return 0}(_)),build_tree(_,_.l_desc),build_tree(_,_.d_desc),I=function build_bl_tree(_){var v;for(scan_tree(_,_.dyn_ltree,_.l_desc.max_code),scan_tree(_,_.dyn_dtree,_.d_desc.max_code),build_tree(_,_.bl_desc),v=18;v>=3&&0===_.bl_tree[2*S[v]+1];v--);return _.opt_len+=3*(v+1)+5+5+4,v}(_),x=_.opt_len+3+7>>>3,(T=_.static_len+3+7>>>3)<=x&&(x=T)):x=T=y+5,y+4<=x&&-1!==v?_tr_stored_block(_,v,y,b):4===_.strategy||T===x?(send_bits(_,2+(b?1:0),3),compress_block(_,M,A)):(send_bits(_,4+(b?1:0),3),function send_all_trees(_,v,y,b){var x;for(send_bits(_,v-257,5),send_bits(_,y-1,5),send_bits(_,b-4,4),x=0;x<b;x++)send_bits(_,_.bl_tree[2*S[x]+1],3);send_tree(_,_.dyn_ltree,v-1),send_tree(_,_.dyn_dtree,y-1)}(_,_.l_desc.max_code+1,_.d_desc.max_code+1,I+1),compress_block(_,_.dyn_ltree,_.dyn_dtree)),init_block(_),b&&bi_windup(_)},v._tr_tally=function _tr_tally(_,v,y){return _.pending_buf[_.d_buf+2*_.last_lit]=v>>>8&255,_.pending_buf[_.d_buf+2*_.last_lit+1]=255&v,_.pending_buf[_.l_buf+_.last_lit]=255&y,_.last_lit++,0===v?_.dyn_ltree[2*y]++:(_.matches++,v--,_.dyn_ltree[2*(O[y]+256+1)]++,_.dyn_dtree[2*d_code(v)]++),_.last_lit===_.lit_bufsize-1},v._tr_align=function _tr_align(_){send_bits(_,2,3),send_code(_,256,M),function bi_flush(_){16===_.bi_valid?(put_short(_,_.bi_buf),_.bi_buf=0,_.bi_valid=0):_.bi_valid>=8&&(_.pending_buf[_.pending++]=255&_.bi_buf,_.bi_buf>>=8,_.bi_valid-=8)}(_)}},2292:_=>{"use strict";_.exports=function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},3340:_=>{function splitLine(_,v){if(!(_=_.replace(/\t+/g," ").trim()))return null;var y=_.indexOf(" ");if(-1===y)throw new Error("no named row at line "+v);var b=_.substring(0,y);_=(_=(_=(_=_.substring(y+1)).replace(/letter=[\'\"]\S+[\'\"]/gi,"")).split("=")).map((function(_){return _.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)}));for(var x=[],T=0;T<_.length;T++){var I=_[T];0===T?x.push({key:I[0],data:""}):T===_.length-1?x[x.length-1].data=parseData(I[0]):(x[x.length-1].data=parseData(I[0]),x.push({key:I[1],data:""}))}var S={key:b,data:{}};return x.forEach((function(_){S.data[_.key]=_.data})),S}function parseData(_){return _&&0!==_.length?0===_.indexOf('"')||0===_.indexOf("'")?_.substring(1,_.length-1):-1!==_.indexOf(",")?function parseIntList(_){return _.split(",").map((function(_){return parseInt(_,10)}))}(_):parseInt(_,10):""}_.exports=function parseBMFontAscii(_){if(!_)throw new Error("no data provided");var v={pages:[],chars:[],kernings:[]},y=(_=_.toString().trim()).split(/\r\n?|\n/g);if(0===y.length)throw new Error("no data in BMFont file");for(var b=0;b<y.length;b++){var x=splitLine(y[b],b);if(x)if("page"===x.key){if("number"!=typeof x.data.id)throw new Error("malformed file at line "+b+" -- needs page id=N");if("string"!=typeof x.data.file)throw new Error("malformed file at line "+b+' -- needs page file="path"');v.pages[x.data.id]=x.data.file}else"chars"===x.key||"kernings"===x.key||("char"===x.key?v.chars.push(x.data):"kerning"===x.key?v.kernings.push(x.data):v[x.key]=x.data)}return v}},3827:_=>{var v=[66,77,70];function readBlock(_,v,y){if(y>v.length-1)return 0;var b=v.readUInt8(y++),x=v.readInt32LE(y);switch(y+=4,b){case 1:_.info=function readInfo(_,v){var y={};y.size=_.readInt16LE(v);var b=_.readUInt8(v+2);y.smooth=b>>7&1,y.unicode=b>>6&1,y.italic=b>>5&1,y.bold=b>>4&1,b>>3&1&&(y.fixedHeight=1);return y.charset=_.readUInt8(v+3)||"",y.stretchH=_.readUInt16LE(v+4),y.aa=_.readUInt8(v+6),y.padding=[_.readInt8(v+7),_.readInt8(v+8),_.readInt8(v+9),_.readInt8(v+10)],y.spacing=[_.readInt8(v+11),_.readInt8(v+12)],y.outline=_.readUInt8(v+13),y.face=function readStringNT(_,v){return readNameNT(_,v).toString("utf8")}(_,v+14),y}(v,y);break;case 2:_.common=function readCommon(_,v){var y={};y.lineHeight=_.readUInt16LE(v),y.base=_.readUInt16LE(v+2),y.scaleW=_.readUInt16LE(v+4),y.scaleH=_.readUInt16LE(v+6),y.pages=_.readUInt16LE(v+8);_.readUInt8(v+10);return y.packed=0,y.alphaChnl=_.readUInt8(v+11),y.redChnl=_.readUInt8(v+12),y.greenChnl=_.readUInt8(v+13),y.blueChnl=_.readUInt8(v+14),y}(v,y);break;case 3:_.pages=function readPages(_,v,y){for(var b=[],x=readNameNT(_,v),T=x.length+1,I=y/T,S=0;S<I;S++)b[S]=_.slice(v,v+x.length).toString("utf8"),v+=T;return b}(v,y,x);break;case 4:_.chars=function readChars(_,v,y){for(var b=[],x=y/20,T=0;T<x;T++){var I={},S=20*T;I.id=_.readUInt32LE(v+0+S),I.x=_.readUInt16LE(v+4+S),I.y=_.readUInt16LE(v+6+S),I.width=_.readUInt16LE(v+8+S),I.height=_.readUInt16LE(v+10+S),I.xoffset=_.readInt16LE(v+12+S),I.yoffset=_.readInt16LE(v+14+S),I.xadvance=_.readInt16LE(v+16+S),I.page=_.readUInt8(v+18+S),I.chnl=_.readUInt8(v+19+S),b[T]=I}return b}(v,y,x);break;case 5:_.kernings=function readKernings(_,v,y){for(var b=[],x=y/10,T=0;T<x;T++){var I={},S=10*T;I.first=_.readUInt32LE(v+0+S),I.second=_.readUInt32LE(v+4+S),I.amount=_.readInt16LE(v+8+S),b[T]=I}return b}(v,y,x)}return 5+x}function readNameNT(_,v){for(var y=v;y<_.length&&0!==_[y];y++);return _.slice(v,y)}_.exports=function readBMFontBinary(_){if(_.length<6)throw new Error("invalid buffer length for BMFont");if(!v.every((function(v,y){return _.readUInt8(y)===v})))throw new Error("BMFont missing BMF byte header");var y=3;if(_.readUInt8(y++)>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var b={kernings:[],chars:[]},x=0;x<5;x++)y+=readBlock(b,_,y);return b}},4109:(_,v,y)=>{var b=y(5055),x=y(2195);_.exports=function parseBMFontXML(_){_=_.toString().trim();var v={pages:[],chars:[],kernings:[]};return b.parseString(_,(function(_,y){if(_)throw _;if(!y.font)throw"XML bitmap font doesn't have <font> root";y=y.font,v.common=x(y.common[0].$),v.info=x(y.info[0].$);for(var b=0;b<y.pages.length;b++){var T=y.pages[b].page[0].$;if(void 0===T.id)throw new Error("malformed file -- needs page id=N");if("string"!=typeof T.file)throw new Error('malformed file -- needs page file="path"');v.pages[parseInt(T.id,10)]=T.file}if(y.chars){var I=y.chars[0].char||[];for(b=0;b<I.length;b++)v.chars.push(x(I[b].$))}if(y.kernings){var S=y.kernings[0].kerning||[];for(b=0;b<S.length;b++)v.kernings.push(x(S[b].$))}})),v}},2195:_=>{_.exports=function parseAttributes(_){for(var v in"chasrset"in _&&(_.charset=_.chasrset,delete _.chasrset),_)"face"!==v&&"charset"!==v&&(_[v]="padding"===v||"spacing"===v?_[v].split(",").map((function(_){return parseInt(_,10)})):parseInt(_[v],10));return _}},8985:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.Deferred=void 0;v.Deferred=class Deferred{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((_,v)=>{this.reject=v,this.resolve=_})}}},7279:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.EndOfStreamError=v.defaultMessages=void 0,v.defaultMessages="End-Of-Stream";class EndOfStreamError extends Error{constructor(){super(v.defaultMessages)}}v.EndOfStreamError=EndOfStreamError},6654:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.StreamReader=v.EndOfStreamError=void 0;const b=y(7279),x=y(8985);var T=y(7279);Object.defineProperty(v,"EndOfStreamError",{enumerable:!0,get:function(){return T.EndOfStreamError}});v.StreamReader=class StreamReader{constructor(_){if(this.s=_,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!_.read||!_.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new b.EndOfStreamError)),this.s.once("error",_=>this.reject(_)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(_,v,y){const b=await this.read(_,v,y);return this.peekQueue.push(_.subarray(v,v+b)),b}async read(_,v,y){if(0===y)return 0;if(0===this.peekQueue.length&&this.endOfStream)throw new b.EndOfStreamError;let x=y,T=0;for(;this.peekQueue.length>0&&x>0;){const y=this.peekQueue.pop();if(!y)throw new Error("peekData should be defined");const b=Math.min(y.length,x);_.set(y.subarray(0,b),v+T),T+=b,x-=b,b<y.length&&this.peekQueue.push(y.subarray(b))}for(;x>0&&!this.endOfStream;){const y=Math.min(x,1048576),b=await this.readFromStream(_,v+T,y);if(T+=b,b<y)break;x-=b}return T}async readFromStream(_,v,y){const b=this.s.read(y);if(b)return _.set(b,v),b.length;{const b={buffer:_,offset:v,length:y,deferred:new x.Deferred};return this.deferred=b.deferred,this.s.once("readable",()=>{this.readDeferred(b)}),b.deferred.promise}}readDeferred(_){const v=this.s.read(_.length);v?(_.buffer.set(v,_.offset),_.deferred.resolve(v.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(_)})}reject(_){this.endOfStream=!0,this.deferred&&(this.deferred.reject(_),this.deferred=null)}}},5167:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.StreamReader=v.EndOfStreamError=void 0;var b=y(7279);Object.defineProperty(v,"EndOfStreamError",{enumerable:!0,get:function(){return b.EndOfStreamError}});var x=y(6654);Object.defineProperty(v,"StreamReader",{enumerable:!0,get:function(){return x.StreamReader}})},193:(_,v,y)=>{"use strict";var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},x=y(3685),T=y(5687),I=y(7310),S=y(3477),M=y(9796),A=y(3837),P=function phin(_,v){if("string"!=typeof _&&!_.hasOwnProperty("url"))throw new Error("Missing url option from options for request method.");var y="object"===(void 0===_?"undefined":b(_))?I.parse(_.url):I.parse(_),A={hostname:y.hostname,port:y.port||("http:"===y.protocol.toLowerCase()?80:443),path:y.path,method:"GET",headers:{},auth:y.auth||null,parse:"none",stream:!1};if("object"===(void 0===_?"undefined":b(_))&&(A=Object.assign(A,_)),A.port=Number(A.port),A.hasOwnProperty("timeout")&&delete A.timeout,!0===A.compressed&&(A.headers["accept-encoding"]="gzip, deflate"),_.hasOwnProperty("form")){if("object"!==b(_.form))throw new Error("phin 'form' option must be of type Object if present.");var P=S.stringify(_.form);A.headers["Content-Type"]="application/x-www-form-urlencoded",A.headers["Content-Length"]=Buffer.byteLength(P),_.data=P}var O=void 0,k=function resHandler(_){var y=_;!0===A.compressed&&("gzip"===_.headers["content-encoding"]?y=_.pipe(M.createGunzip()):"deflate"===_.headers["content-encoding"]&&(y=_.pipe(M.createInflate()))),!0===A.stream?(_.stream=y,v&&v(null,_)):(_.body=new Buffer([]),y.on("data",(function(v){_.body=Buffer.concat([_.body,v])})),y.on("end",(function(){if(v){if("json"===A.parse)try{_.body=JSON.parse(_.body.toString())}catch(y){return void v("Invalid JSON received.",_)}v(null,_)}})))};switch(y.protocol.toLowerCase()){case"http:":O=x.request(A,k);break;case"https:":O=T.request(A,k);break;default:return void(v&&v(new Error("Invalid / unknown URL protocol. Expected HTTP or HTTPS."),null))}if("number"==typeof _.timeout&&O.setTimeout(_.timeout,(function(){O.abort(),v&&v(new Error("Timeout has been reached."),null),v=null})),O.on("error",(function(_){v&&v(_,null)})),_.hasOwnProperty("data")){var R=_.data;if(!(_.data instanceof Buffer)&&"object"===b(_.data))if("application/x-www-form-urlencoded"===(A.headers["content-type"]||A.headers["Content-Type"]))R=S.stringify(_.data);else try{R=JSON.stringify(_.data)}catch(_){v&&v(new Error("Couldn't stringify object. (Likely due to a circular reference.)"),null)}O.write(R)}O.end()};P.promisified=function(_,v){return new Promise((function(v,y){P(_,(function(_,b){_?y(_):v(b)}))}))},A.promisify&&(P[A.promisify.custom]=P.promisified),_.exports=P},148:_=>{"use strict";function antialiased(_,v,y,b,x,T){for(var I,S,M,A,P=Math.max(v-1,0),O=Math.max(y-1,0),k=Math.min(v+1,b-1),R=Math.min(y+1,x-1),L=4*(y*b+v),B=0,j=0,U=0,z=0,G=0,H=P;H<=k;H++)for(var V=O;V<=R;V++)if(H!==v||V!==y){var $=colorDelta(_,_,L,4*(V*b+H),!0);if(0===$?B++:$<0?U++:$>0&&j++,B>2)return!1;T&&($<z&&(z=$,I=H,S=V),$>G&&(G=$,M=H,A=V))}return!T||0!==U&&0!==j&&(!antialiased(_,I,S,b,x)&&!antialiased(T,I,S,b,x)||!antialiased(_,M,A,b,x)&&!antialiased(T,M,A,b,x))}function colorDelta(_,v,y,b,x){var T=_[y+3]/255,I=v[b+3]/255,S=blend(_[y+0],T),M=blend(_[y+1],T),A=blend(_[y+2],T),P=blend(v[b+0],I),O=blend(v[b+1],I),k=blend(v[b+2],I),R=rgb2y(S,M,A)-rgb2y(P,O,k);if(x)return R;var L=rgb2i(S,M,A)-rgb2i(P,O,k),B=rgb2q(S,M,A)-rgb2q(P,O,k);return.5053*R*R+.299*L*L+.1957*B*B}function rgb2y(_,v,y){return.29889531*_+.58662247*v+.11448223*y}function rgb2i(_,v,y){return.59597799*_-.2741761*v-.32180189*y}function rgb2q(_,v,y){return.21147017*_-.52261711*v+.31114694*y}function blend(_,v){return 255+(_-255)*v}function drawPixel(_,v,y,b,x){_[v+0]=y,_[v+1]=b,_[v+2]=x,_[v+3]=255}_.exports=function pixelmatch(_,v,y,b,x,T){T||(T={});for(var I=void 0===T.threshold?.1:T.threshold,S=35215*I*I,M=0,A=0;A<x;A++)for(var P=0;P<b;P++){var O=4*(A*b+P);if(colorDelta(_,v,O,O)>S)T.includeAA||!antialiased(_,P,A,b,x,v)&&!antialiased(v,P,A,b,x,_)?(y&&drawPixel(y,O,255,0,0),M++):y&&drawPixel(y,O,255,255,0);else if(y){var k=blend((B=void 0,j=void 0,U=void 0,z=void 0,B=(R=_)[(L=O)+3]/255,j=blend(R[L+0],B),U=blend(R[L+1],B),z=blend(R[L+2],B),rgb2y(j,U,z)),.1);drawPixel(y,O,k,k,k)}}var R,L,B,j,U,z;return M}},9983:(_,v,y)=>{"use strict";var b=y(7084),x=[function(){},function(_,v,y,b){if(b===v.length)throw new Error("Ran out of data");var x=v[b];_[y]=x,_[y+1]=x,_[y+2]=x,_[y+3]=255},function(_,v,y,b){if(b+1>=v.length)throw new Error("Ran out of data");var x=v[b];_[y]=x,_[y+1]=x,_[y+2]=x,_[y+3]=v[b+1]},function(_,v,y,b){if(b+2>=v.length)throw new Error("Ran out of data");_[y]=v[b],_[y+1]=v[b+1],_[y+2]=v[b+2],_[y+3]=255},function(_,v,y,b){if(b+3>=v.length)throw new Error("Ran out of data");_[y]=v[b],_[y+1]=v[b+1],_[y+2]=v[b+2],_[y+3]=v[b+3]}],T=[function(){},function(_,v,y,b){var x=v[0];_[y]=x,_[y+1]=x,_[y+2]=x,_[y+3]=b},function(_,v,y){var b=v[0];_[y]=b,_[y+1]=b,_[y+2]=b,_[y+3]=v[1]},function(_,v,y,b){_[y]=v[0],_[y+1]=v[1],_[y+2]=v[2],_[y+3]=b},function(_,v,y){_[y]=v[0],_[y+1]=v[1],_[y+2]=v[2],_[y+3]=v[3]}];function mapImage8Bit(_,v,y,b,T,I){for(var S=_.width,M=_.height,A=_.index,P=0;P<M;P++)for(var O=0;O<S;O++){var k=y(O,P,A);x[b](v,T,k,I),I+=b}return I}function mapImageCustomBit(_,v,y,b,x,I){for(var S=_.width,M=_.height,A=_.index,P=0;P<M;P++){for(var O=0;O<S;O++){var k=x.get(b),R=y(O,P,A);T[b](v,k,R,I)}x.resetAfterLine()}}v.dataToBitMap=function(_,v){var y,x=v.width,T=v.height,I=v.depth,S=v.bpp,M=v.interlace;if(8!==I)var A=function bitRetriever(_,v){var y=[],b=0;function split(){if(b===_.length)throw new Error("Ran out of data");var x,T,I,S,M,A,P,O,k=_[b];switch(b++,v){default:throw new Error("unrecognised depth");case 16:P=_[b],b++,y.push((k<<8)+P);break;case 4:P=15&k,O=k>>4,y.push(O,P);break;case 2:M=3&k,A=k>>2&3,P=k>>4&3,O=k>>6&3,y.push(O,P,A,M);break;case 1:x=1&k,T=k>>1&1,I=k>>2&1,S=k>>3&1,M=k>>4&1,A=k>>5&1,P=k>>6&1,O=k>>7&1,y.push(O,P,A,M,S,I,T,x)}}return{get:function(_){for(;y.length<_;)split();var v=y.slice(0,_);return y=y.slice(_),v},resetAfterLine:function(){y.length=0},end:function(){if(b!==_.length)throw new Error("extra data found")}}}(_,I);y=I<=8?new Buffer(x*T*4):new Uint16Array(x*T*4);var P,O,k=Math.pow(2,I)-1,R=0;if(M)P=b.getImagePasses(x,T),O=b.getInterlaceIterator(x,T);else{var L=0;O=function(){var _=L;return L+=4,_},P=[{width:x,height:T}]}for(var B=0;B<P.length;B++)8===I?R=mapImage8Bit(P[B],y,O,S,_,R):mapImageCustomBit(P[B],y,O,S,A,k);if(8===I){if(R!==_.length)throw new Error("extra data found")}else A.end();return y}},9027:(_,v,y)=>{"use strict";var b=y(3482);_.exports=function(_,v,y,x){var T,I=-1!==[b.COLORTYPE_COLOR_ALPHA,b.COLORTYPE_ALPHA].indexOf(x.colorType);if(x.colorType===x.inputColorType){var S=(T=new ArrayBuffer(2),new DataView(T).setInt16(0,256,!0),256!==new Int16Array(T)[0]);if(8===x.bitDepth||16===x.bitDepth&&S)return _}var M=16!==x.bitDepth?_:new Uint16Array(_.buffer),A=255,P=b.COLORTYPE_TO_BPP_MAP[x.inputColorType];4!==P||x.inputHasAlpha||(P=3);var O=b.COLORTYPE_TO_BPP_MAP[x.colorType];16===x.bitDepth&&(A=65535,O*=2);var k=new Buffer(v*y*O),R=0,L=0,B=x.bgColor||{};function getRGBA(){var _,v,y,T=A;switch(x.inputColorType){case b.COLORTYPE_COLOR_ALPHA:T=M[R+3],_=M[R],v=M[R+1],y=M[R+2];break;case b.COLORTYPE_COLOR:_=M[R],v=M[R+1],y=M[R+2];break;case b.COLORTYPE_ALPHA:T=M[R+1],v=_=M[R],y=_;break;case b.COLORTYPE_GRAYSCALE:v=_=M[R],y=_;break;default:throw new Error("input color type:"+x.inputColorType+" is not supported at present")}return x.inputHasAlpha&&(I||(T/=A,_=Math.min(Math.max(Math.round((1-T)*B.red+T*_),0),A),v=Math.min(Math.max(Math.round((1-T)*B.green+T*v),0),A),y=Math.min(Math.max(Math.round((1-T)*B.blue+T*y),0),A))),{red:_,green:v,blue:y,alpha:T}}void 0===B.red&&(B.red=A),void 0===B.green&&(B.green=A),void 0===B.blue&&(B.blue=A);for(var j=0;j<y;j++)for(var U=0;U<v;U++){var z=getRGBA();switch(x.colorType){case b.COLORTYPE_COLOR_ALPHA:case b.COLORTYPE_COLOR:8===x.bitDepth?(k[L]=z.red,k[L+1]=z.green,k[L+2]=z.blue,I&&(k[L+3]=z.alpha)):(k.writeUInt16BE(z.red,L),k.writeUInt16BE(z.green,L+2),k.writeUInt16BE(z.blue,L+4),I&&k.writeUInt16BE(z.alpha,L+6));break;case b.COLORTYPE_ALPHA:case b.COLORTYPE_GRAYSCALE:var G=(z.red+z.green+z.blue)/3;8===x.bitDepth?(k[L]=G,I&&(k[L+1]=z.alpha)):(k.writeUInt16BE(G,L),I&&k.writeUInt16BE(z.alpha,L+2));break;default:throw new Error("unrecognised color Type "+x.colorType)}R+=P,L+=O}return k}},8442:(_,v,y)=>{"use strict";var b=y(3837),x=y(2781),T=_.exports=function(){x.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};b.inherits(T,x),T.prototype.read=function(_,v){this._reads.push({length:Math.abs(_),allowLess:_<0,func:v}),process.nextTick(function(){this._process(),this._paused&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))},T.prototype.write=function(_,v){return this.writable?(y=Buffer.isBuffer(_)?_:new Buffer(_,v||this._encoding),this._buffers.push(y),this._buffered+=y.length,this._process(),this._reads&&0===this._reads.length&&(this._paused=!0),this.writable&&!this._paused):(this.emit("error",new Error("Stream not writable")),!1);var y},T.prototype.end=function(_,v){_&&this.write(_,v),this.writable=!1,this._buffers&&(0===this._buffers.length?this._end():(this._buffers.push(null),this._process()))},T.prototype.destroySoon=T.prototype.end,T.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("Unexpected end of input")),this.destroy()},T.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))},T.prototype._processReadAllowingLess=function(_){this._reads.shift();var v=this._buffers[0];v.length>_.length?(this._buffered-=_.length,this._buffers[0]=v.slice(_.length),_.func.call(this,v.slice(0,_.length))):(this._buffered-=v.length,this._buffers.shift(),_.func.call(this,v))},T.prototype._processRead=function(_){this._reads.shift();for(var v=0,y=0,b=new Buffer(_.length);v<_.length;){var x=this._buffers[y++],T=Math.min(x.length,_.length-v);x.copy(b,v,0,T),v+=T,T!==x.length&&(this._buffers[--y]=x.slice(T))}y>0&&this._buffers.splice(0,y),this._buffered-=_.length,_.func.call(this,b)},T.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){var _=this._reads[0];if(_.allowLess)this._processReadAllowingLess(_);else{if(!(this._buffered>=_.length))break;this._processRead(_)}}this._buffers&&!this.writable&&this._end()}catch(_){this.emit("error",_)}}},3482:_=>{"use strict";_.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}},3500:_=>{"use strict";var v=[];!function(){for(var _=0;_<256;_++){for(var y=_,b=0;b<8;b++)1&y?y=3988292384^y>>>1:y>>>=1;v[_]=y}}();var y=_.exports=function(){this._crc=-1};y.prototype.write=function(_){for(var y=0;y<_.length;y++)this._crc=v[255&(this._crc^_[y])]^this._crc>>>8;return!0},y.prototype.crc32=function(){return-1^this._crc},y.crc32=function(_){for(var y=-1,b=0;b<_.length;b++)y=v[255&(y^_[b])]^y>>>8;return-1^y}},8876:(_,v,y)=>{"use strict";var b=y(6744);var x={0:function filterNone(_,v,y,b,x){for(var T=0;T<y;T++)b[x+T]=_[v+T]},1:function filterSub(_,v,y,b,x,T){for(var I=0;I<y;I++){var S=I>=T?_[v+I-T]:0,M=_[v+I]-S;b[x+I]=M}},2:function filterUp(_,v,y,b,x){for(var T=0;T<y;T++){var I=v>0?_[v+T-y]:0,S=_[v+T]-I;b[x+T]=S}},3:function filterAvg(_,v,y,b,x,T){for(var I=0;I<y;I++){var S=I>=T?_[v+I-T]:0,M=v>0?_[v+I-y]:0,A=_[v+I]-(S+M>>1);b[x+I]=A}},4:function filterPaeth(_,v,y,x,T,I){for(var S=0;S<y;S++){var M=S>=I?_[v+S-I]:0,A=v>0?_[v+S-y]:0,P=v>0&&S>=I?_[v+S-(y+I)]:0,O=_[v+S]-b(M,A,P);x[T+S]=O}}},T={0:function filterSumNone(_,v,y){for(var b=0,x=v+y,T=v;T<x;T++)b+=Math.abs(_[T]);return b},1:function filterSumSub(_,v,y,b){for(var x=0,T=0;T<y;T++){var I=T>=b?_[v+T-b]:0,S=_[v+T]-I;x+=Math.abs(S)}return x},2:function filterSumUp(_,v,y){for(var b=0,x=v+y,T=v;T<x;T++){var I=v>0?_[T-y]:0,S=_[T]-I;b+=Math.abs(S)}return b},3:function filterSumAvg(_,v,y,b){for(var x=0,T=0;T<y;T++){var I=T>=b?_[v+T-b]:0,S=v>0?_[v+T-y]:0,M=_[v+T]-(I+S>>1);x+=Math.abs(M)}return x},4:function filterSumPaeth(_,v,y,x){for(var T=0,I=0;I<y;I++){var S=I>=x?_[v+I-x]:0,M=v>0?_[v+I-y]:0,A=v>0&&I>=x?_[v+I-(y+x)]:0,P=_[v+I]-b(S,M,A);T+=Math.abs(P)}return T}};_.exports=function(_,v,y,b,I){var S;if("filterType"in b&&-1!==b.filterType){if("number"!=typeof b.filterType)throw new Error("unrecognised filter types");S=[b.filterType]}else S=[0,1,2,3,4];16===b.bitDepth&&(I*=2);for(var M=v*I,A=0,P=0,O=new Buffer((M+1)*y),k=S[0],R=0;R<y;R++){if(S.length>1)for(var L=1/0,B=0;B<S.length;B++){var j=T[S[B]](_,P,M,I);j<L&&(k=S[B],L=j)}O[A]=k,A++,x[k](_,P,M,O,A,I),A+=M,P+=M}return O}},4603:(_,v,y)=>{"use strict";var b=y(3837),x=y(8442),T=y(2769),I=_.exports=function(_){x.call(this);var v=[],y=this;this._filter=new T(_,{read:this.read.bind(this),write:function(_){v.push(_)},complete:function(){y.emit("complete",Buffer.concat(v))}}),this._filter.start()};b.inherits(I,x)},8692:(_,v,y)=>{"use strict";var b=y(33),x=y(2769);v.process=function(_,v){var y=[],T=new b(_);return new x(v,{read:T.read.bind(T),write:function(_){y.push(_)},complete:function(){}}).start(),T.process(),Buffer.concat(y)}},2769:(_,v,y)=>{"use strict";var b=y(7084),x=y(6744);function getByteWidth(_,v,y){var b=_*v;return 8!==y&&(b=Math.ceil(b/(8/y))),b}var T=_.exports=function(_,v){var y=_.width,x=_.height,T=_.interlace,I=_.bpp,S=_.depth;if(this.read=v.read,this.write=v.write,this.complete=v.complete,this._imageIndex=0,this._images=[],T)for(var M=b.getImagePasses(y,x),A=0;A<M.length;A++)this._images.push({byteWidth:getByteWidth(M[A].width,I,S),height:M[A].height,lineIndex:0});else this._images.push({byteWidth:getByteWidth(y,I,S),height:x,lineIndex:0});this._xComparison=8===S?I:16===S?2*I:1};T.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))},T.prototype._unFilterType1=function(_,v,y){for(var b=this._xComparison,x=b-1,T=0;T<y;T++){var I=_[1+T],S=T>x?v[T-b]:0;v[T]=I+S}},T.prototype._unFilterType2=function(_,v,y){for(var b=this._lastLine,x=0;x<y;x++){var T=_[1+x],I=b?b[x]:0;v[x]=T+I}},T.prototype._unFilterType3=function(_,v,y){for(var b=this._xComparison,x=b-1,T=this._lastLine,I=0;I<y;I++){var S=_[1+I],M=T?T[I]:0,A=I>x?v[I-b]:0,P=Math.floor((A+M)/2);v[I]=S+P}},T.prototype._unFilterType4=function(_,v,y){for(var b=this._xComparison,T=b-1,I=this._lastLine,S=0;S<y;S++){var M=_[1+S],A=I?I[S]:0,P=S>T?v[S-b]:0,O=S>T&&I?I[S-b]:0,k=x(P,A,O);v[S]=M+k}},T.prototype._reverseFilterLine=function(_){var v,y=_[0],b=this._images[this._imageIndex],x=b.byteWidth;if(0===y)v=_.slice(1,x+1);else switch(v=new Buffer(x),y){case 1:this._unFilterType1(_,v,x);break;case 2:this._unFilterType2(_,v,x);break;case 3:this._unFilterType3(_,v,x);break;case 4:this._unFilterType4(_,v,x);break;default:throw new Error("Unrecognised filter type - "+y)}this.write(v),b.lineIndex++,b.lineIndex>=b.height?(this._lastLine=null,this._imageIndex++,b=this._images[this._imageIndex]):this._lastLine=v,b?this.read(b.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}},8417:_=>{"use strict";_.exports=function(_,v){var y=v.depth,b=v.width,x=v.height,T=v.colorType,I=v.transColor,S=v.palette,M=_;return 3===T?function dePalette(_,v,y,b,x){for(var T=0,I=0;I<b;I++)for(var S=0;S<y;S++){var M=x[_[T]];if(!M)throw new Error("index "+_[T]+" not in palette");for(var A=0;A<4;A++)v[T+A]=M[A];T+=4}}(_,M,b,x,S):(I&&function replaceTransparentColor(_,v,y,b,x){for(var T=0,I=0;I<b;I++)for(var S=0;S<y;S++){var M=!1;if(1===x.length?x[0]===_[T]&&(M=!0):x[0]===_[T]&&x[1]===_[T+1]&&x[2]===_[T+2]&&(M=!0),M)for(var A=0;A<4;A++)v[T+A]=0;T+=4}}(_,M,b,x,I),8!==y&&(16===y&&(M=new Buffer(b*x*4)),function scaleDepth(_,v,y,b,x){for(var T=Math.pow(2,x)-1,I=0,S=0;S<b;S++)for(var M=0;M<y;M++){for(var A=0;A<4;A++)v[I+A]=Math.floor(255*_[I+A]/T+.5);I+=4}}(_,M,b,x,y))),M}},7084:(_,v)=>{"use strict";var y=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];v.getImagePasses=function(_,v){for(var b=[],x=_%8,T=v%8,I=(_-x)/8,S=(v-T)/8,M=0;M<y.length;M++){for(var A=y[M],P=I*A.x.length,O=S*A.y.length,k=0;k<A.x.length&&A.x[k]<x;k++)P++;for(k=0;k<A.y.length&&A.y[k]<T;k++)O++;P>0&&O>0&&b.push({width:P,height:O,index:M})}return b},v.getInterlaceIterator=function(_){return function(v,b,x){var T=v%y[x].x.length,I=(v-T)/y[x].x.length*8+y[x].x[T],S=b%y[x].y.length;return 4*I+((b-S)/y[x].y.length*8+y[x].y[S])*_*4}}},6838:(_,v,y)=>{"use strict";var b=y(3837),x=y(2781),T=y(3482),I=y(9432),S=_.exports=function(_){x.call(this);var v=_||{};this._packer=new I(v),this._deflate=this._packer.createDeflate(),this.readable=!0};b.inherits(S,x),S.prototype.pack=function(_,v,y,b){this.emit("data",new Buffer(T.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(v,y)),b&&this.emit("data",this._packer.packGAMA(b));var x=this._packer.filterData(_,v,y);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(_){this.emit("data",this._packer.packIDAT(_))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(x)}},8360:(_,v,y)=>{"use strict";var b=!0,x=y(9796);x.deflateSync||(b=!1);var T=y(3482),I=y(9432);_.exports=function(_,v){if(!b)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");var y=new I(v||{}),S=[];S.push(new Buffer(T.PNG_SIGNATURE)),S.push(y.packIHDR(_.width,_.height)),_.gamma&&S.push(y.packGAMA(_.gamma));var M=y.filterData(_.data,_.width,_.height),A=x.deflateSync(M,y.getDeflateOptions());if(M=null,!A||!A.length)throw new Error("bad png - invalid compressed data response");return S.push(y.packIDAT(A)),S.push(y.packIEND()),Buffer.concat(S)}},9432:(_,v,y)=>{"use strict";var b=y(3482),x=y(3500),T=y(9027),I=y(8876),S=y(9796),M=_.exports=function(_){if(this._options=_,_.deflateChunkSize=_.deflateChunkSize||32768,_.deflateLevel=null!=_.deflateLevel?_.deflateLevel:9,_.deflateStrategy=null!=_.deflateStrategy?_.deflateStrategy:3,_.inputHasAlpha=null==_.inputHasAlpha||_.inputHasAlpha,_.deflateFactory=_.deflateFactory||S.createDeflate,_.bitDepth=_.bitDepth||8,_.colorType="number"==typeof _.colorType?_.colorType:b.COLORTYPE_COLOR_ALPHA,_.inputColorType="number"==typeof _.inputColorType?_.inputColorType:b.COLORTYPE_COLOR_ALPHA,-1===[b.COLORTYPE_GRAYSCALE,b.COLORTYPE_COLOR,b.COLORTYPE_COLOR_ALPHA,b.COLORTYPE_ALPHA].indexOf(_.colorType))throw new Error("option color type:"+_.colorType+" is not supported at present");if(-1===[b.COLORTYPE_GRAYSCALE,b.COLORTYPE_COLOR,b.COLORTYPE_COLOR_ALPHA,b.COLORTYPE_ALPHA].indexOf(_.inputColorType))throw new Error("option input color type:"+_.inputColorType+" is not supported at present");if(8!==_.bitDepth&&16!==_.bitDepth)throw new Error("option bit depth:"+_.bitDepth+" is not supported at present")};M.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},M.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())},M.prototype.filterData=function(_,v,y){var x=T(_,v,y,this._options),S=b.COLORTYPE_TO_BPP_MAP[this._options.colorType];return I(x,v,y,this._options,S)},M.prototype._packChunk=function(_,v){var y=v?v.length:0,b=new Buffer(y+12);return b.writeUInt32BE(y,0),b.writeUInt32BE(_,4),v&&v.copy(b,8),b.writeInt32BE(x.crc32(b.slice(4,b.length-4)),b.length-4),b},M.prototype.packGAMA=function(_){var v=new Buffer(4);return v.writeUInt32BE(Math.floor(_*b.GAMMA_DIVISION),0),this._packChunk(b.TYPE_gAMA,v)},M.prototype.packIHDR=function(_,v){var y=new Buffer(13);return y.writeUInt32BE(_,0),y.writeUInt32BE(v,4),y[8]=this._options.bitDepth,y[9]=this._options.colorType,y[10]=0,y[11]=0,y[12]=0,this._packChunk(b.TYPE_IHDR,y)},M.prototype.packIDAT=function(_){return this._packChunk(b.TYPE_IDAT,_)},M.prototype.packIEND=function(){return this._packChunk(b.TYPE_IEND,null)}},6744:_=>{"use strict";_.exports=function paethPredictor(_,v,y){var b=_+v-y,x=Math.abs(b-_),T=Math.abs(b-v),I=Math.abs(b-y);return x<=T&&x<=I?_:T<=I?v:y}},7900:(_,v,y)=>{"use strict";var b=y(3837),x=y(9796),T=y(8442),I=y(4603),S=y(8550),M=y(9983),A=y(8417),P=_.exports=function(_){T.call(this),this._parser=new S(_,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=_,this.writable=!0,this._parser.start()};b.inherits(P,T),P.prototype._handleError=function(_){this.emit("error",_),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",(function(){}))),this.errord=!0},P.prototype._inflateData=function(_){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=x.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{var v=(1+(this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3))*this._bitmapInfo.height,y=Math.max(v,x.Z_MIN_CHUNK);this._inflate=x.createInflate({chunkSize:y});var b=v,T=this.emit.bind(this,"error");this._inflate.on("error",(function(_){b&&T(_)})),this._filter.on("complete",this._complete.bind(this));var I=this._filter.write.bind(this._filter);this._inflate.on("data",(function(_){b&&(_.length>b&&(_=_.slice(0,b)),b-=_.length,I(_))})),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(_)},P.prototype._handleMetaData=function(_){this._metaData=_,this._bitmapInfo=Object.create(_),this._filter=new I(this._bitmapInfo)},P.prototype._handleTransColor=function(_){this._bitmapInfo.transColor=_},P.prototype._handlePalette=function(_){this._bitmapInfo.palette=_},P.prototype._simpleTransparency=function(){this._metaData.alpha=!0},P.prototype._headersFinished=function(){this.emit("metadata",this._metaData)},P.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"),this.destroySoon())},P.prototype._complete=function(_){if(!this.errord){try{var v=M.dataToBitMap(_,this._bitmapInfo),y=A(v,this._bitmapInfo);v=null}catch(_){return void this._handleError(_)}this.emit("parsed",y)}}},2416:(_,v,y)=>{"use strict";var b=!0,x=y(9796),T=y(9653);x.deflateSync||(b=!1);var I=y(33),S=y(8692),M=y(8550),A=y(9983),P=y(8417);_.exports=function(_,v){if(!b)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");var y,O,k;var R=[];var L=new I(_);if(new M(v,{read:L.read.bind(L),error:function handleError(_){y=_},metadata:function handleMetaData(_){O=_},gamma:function handleGamma(_){k=_},palette:function handlePalette(_){O.palette=_},transColor:function handleTransColor(_){O.transColor=_},inflateData:function handleInflateData(_){R.push(_)},simpleTransparency:function handleSimpleTransparency(){O.alpha=!0}}).start(),L.process(),y)throw y;var B,j=Buffer.concat(R);if(R.length=0,O.interlace)B=x.inflateSync(j);else{var U=(1+(O.width*O.bpp*O.depth+7>>3))*O.height;B=T(j,{chunkSize:U,maxLength:U})}if(j=null,!B||!B.length)throw new Error("bad png - invalid inflate data response");var z=S.process(B,O);j=null;var G=A.dataToBitMap(z,O);z=null;var H=P(G,O);return O.data=H,O.gamma=k||0,O}},8550:(_,v,y)=>{"use strict";var b=y(3482),x=y(3500),T=_.exports=function(_,v){this._options=_,_.checkCRC=!1!==_.checkCRC,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[b.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[b.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[b.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[b.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[b.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[b.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=v.read,this.error=v.error,this.metadata=v.metadata,this.gamma=v.gamma,this.transColor=v.transColor,this.palette=v.palette,this.parsed=v.parsed,this.inflateData=v.inflateData,this.finished=v.finished,this.simpleTransparency=v.simpleTransparency,this.headersFinished=v.headersFinished||function(){}};T.prototype.start=function(){this.read(b.PNG_SIGNATURE.length,this._parseSignature.bind(this))},T.prototype._parseSignature=function(_){for(var v=b.PNG_SIGNATURE,y=0;y<v.length;y++)if(_[y]!==v[y])return void this.error(new Error("Invalid file signature"));this.read(8,this._parseChunkBegin.bind(this))},T.prototype._parseChunkBegin=function(_){for(var v=_.readUInt32BE(0),y=_.readUInt32BE(4),T="",I=4;I<8;I++)T+=String.fromCharCode(_[I]);var S=Boolean(32&_[4]);if(this._hasIHDR||y===b.TYPE_IHDR){if(this._crc=new x,this._crc.write(new Buffer(T)),this._chunks[y])return this._chunks[y](v);S?this.read(v+4,this._skipChunk.bind(this)):this.error(new Error("Unsupported critical chunk type "+T))}else this.error(new Error("Expected IHDR on beggining"))},T.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))},T.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))},T.prototype._parseChunkEnd=function(_){var v=_.readInt32BE(0),y=this._crc.crc32();this._options.checkCRC&&y!==v?this.error(new Error("Crc error - "+v+" - "+y)):this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))},T.prototype._handleIHDR=function(_){this.read(_,this._parseIHDR.bind(this))},T.prototype._parseIHDR=function(_){this._crc.write(_);var v=_.readUInt32BE(0),y=_.readUInt32BE(4),x=_[8],T=_[9],I=_[10],S=_[11],M=_[12];if(8===x||4===x||2===x||1===x||16===x)if(T in b.COLORTYPE_TO_BPP_MAP)if(0===I)if(0===S)if(0===M||1===M){this._colorType=T;var A=b.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:v,height:y,depth:x,interlace:Boolean(M),palette:Boolean(T&b.COLORTYPE_PALETTE),color:Boolean(T&b.COLORTYPE_COLOR),alpha:Boolean(T&b.COLORTYPE_ALPHA),bpp:A,colorType:T}),this._handleChunkEnd()}else this.error(new Error("Unsupported interlace method"));else this.error(new Error("Unsupported filter method"));else this.error(new Error("Unsupported compression method"));else this.error(new Error("Unsupported color type"));else this.error(new Error("Unsupported bit depth "+x))},T.prototype._handlePLTE=function(_){this.read(_,this._parsePLTE.bind(this))},T.prototype._parsePLTE=function(_){this._crc.write(_);for(var v=Math.floor(_.length/3),y=0;y<v;y++)this._palette.push([_[3*y],_[3*y+1],_[3*y+2],255]);this.palette(this._palette),this._handleChunkEnd()},T.prototype._handleTRNS=function(_){this.simpleTransparency(),this.read(_,this._parseTRNS.bind(this))},T.prototype._parseTRNS=function(_){if(this._crc.write(_),this._colorType===b.COLORTYPE_PALETTE_COLOR){if(0===this._palette.length)return void this.error(new Error("Transparency chunk must be after palette"));if(_.length>this._palette.length)return void this.error(new Error("More transparent colors than palette size"));for(var v=0;v<_.length;v++)this._palette[v][3]=_[v];this.palette(this._palette)}this._colorType===b.COLORTYPE_GRAYSCALE&&this.transColor([_.readUInt16BE(0)]),this._colorType===b.COLORTYPE_COLOR&&this.transColor([_.readUInt16BE(0),_.readUInt16BE(2),_.readUInt16BE(4)]),this._handleChunkEnd()},T.prototype._handleGAMA=function(_){this.read(_,this._parseGAMA.bind(this))},T.prototype._parseGAMA=function(_){this._crc.write(_),this.gamma(_.readUInt32BE(0)/b.GAMMA_DIVISION),this._handleChunkEnd()},T.prototype._handleIDAT=function(_){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-_,this._parseIDAT.bind(this,_))},T.prototype._parseIDAT=function(_,v){if(this._crc.write(v),this._colorType===b.COLORTYPE_PALETTE_COLOR&&0===this._palette.length)throw new Error("Expected palette not found");this.inflateData(v);var y=_-v.length;y>0?this._handleIDAT(y):this._handleChunkEnd()},T.prototype._handleIEND=function(_){this.read(_,this._parseIEND.bind(this))},T.prototype._parseIEND=function(_){this._crc.write(_),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}},6117:(_,v,y)=>{"use strict";var b=y(2416),x=y(8360);v.read=function(_,v){return b(_,v||{})},v.write=function(_,v){return x(_,v)}},5477:(_,v,y)=>{"use strict";var b=y(3837),x=y(2781),T=y(7900),I=y(6838),S=y(6117),M=v.PNG=function(_){x.call(this),_=_||{},this.width=0|_.width,this.height=0|_.height,this.data=this.width>0&&this.height>0?new Buffer(4*this.width*this.height):null,_.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new T(_),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(_){this.data=_,this.emit("parsed",_)}.bind(this)),this._packer=new I(_),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};b.inherits(M,x),M.sync=S,M.prototype.pack=function(){return this.data&&this.data.length?(process.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this):(this.emit("error","No data provided"),this)},M.prototype.parse=function(_,v){var y,b;v&&(y=function(_){this.removeListener("error",b),this.data=_,v(null,this)}.bind(this),b=function(_){this.removeListener("parsed",y),v(_,null)}.bind(this),this.once("parsed",y),this.once("error",b));return this.end(_),this},M.prototype.write=function(_){return this._parser.write(_),!0},M.prototype.end=function(_){this._parser.end(_)},M.prototype._metadata=function(_){this.width=_.width,this.height=_.height,this.emit("metadata",_)},M.prototype._gamma=function(_){this.gamma=_},M.prototype._handleClose=function(){this._parser.writable||this._packer.readable||this.emit("close")},M.bitblt=function(_,v,y,b,x,T,I,S){if(b|=0,x|=0,T|=0,I|=0,S|=0,(y|=0)>_.width||b>_.height||y+x>_.width||b+T>_.height)throw new Error("bitblt reading outside image");if(I>v.width||S>v.height||I+x>v.width||S+T>v.height)throw new Error("bitblt writing outside image");for(var M=0;M<T;M++)_.data.copy(v.data,(S+M)*v.width+I<<2,(b+M)*_.width+y<<2,(b+M)*_.width+y+x<<2)},M.prototype.bitblt=function(_,v,y,b,x,T,I){return M.bitblt(this,_,v,y,b,x,T,I),this},M.adjustGamma=function(_){if(_.gamma){for(var v=0;v<_.height;v++)for(var y=0;y<_.width;y++)for(var b=_.width*v+y<<2,x=0;x<3;x++){var T=_.data[b+x]/255;T=Math.pow(T,1/2.2/_.gamma),_.data[b+x]=Math.round(255*T)}_.gamma=0}},M.prototype.adjustGamma=function(){M.adjustGamma(this)}},9653:(_,v,y)=>{"use strict";var b=y(9491).ok,x=y(9796),T=y(3837),I=y(4300).kMaxLength;function Inflate(_){if(!(this instanceof Inflate))return new Inflate(_);_&&_.chunkSize<x.Z_MIN_CHUNK&&(_.chunkSize=x.Z_MIN_CHUNK),x.Inflate.call(this,_),this._offset=void 0===this._offset?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,_&&null!=_.maxLength&&(this._maxLength=_.maxLength)}function _close(_,v){v&&process.nextTick(v),_._handle&&(_._handle.close(),_._handle=null)}function inflateSync(_,v){return function zlibBufferSync(_,v){if("string"==typeof v&&(v=Buffer.from(v)),!(v instanceof Buffer))throw new TypeError("Not a string or buffer");var y=_._finishFlushFlag;return null==y&&(y=x.Z_FINISH),_._processChunk(v,y)}(new Inflate(v),_)}Inflate.prototype._processChunk=function(_,v,y){if("function"==typeof y)return x.Inflate._processChunk.call(this,_,v,y);var T,S=this,M=_&&_.length,A=this._chunkSize-this._offset,P=this._maxLength,O=0,k=[],R=0;function handleChunk(_,v){if(!S._hadError){var y=A-v;if(b(y>=0,"have should not go down"),y>0){var x=S._buffer.slice(S._offset,S._offset+y);if(S._offset+=y,x.length>P&&(x=x.slice(0,P)),k.push(x),R+=x.length,0===(P-=x.length))return!1}return(0===v||S._offset>=S._chunkSize)&&(A=S._chunkSize,S._offset=0,S._buffer=Buffer.allocUnsafe(S._chunkSize)),0===v&&(O+=M-_,M=_,!0)}}this.on("error",(function(_){T=_})),b(this._handle,"zlib binding closed");do{var L=this._handle.writeSync(v,_,O,M,this._buffer,this._offset,A);L=L||this._writeState}while(!this._hadError&&handleChunk(L[0],L[1]));if(this._hadError)throw T;if(R>=I)throw _close(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+I.toString(16)+" bytes");var B=Buffer.concat(k,R);return _close(this),B},T.inherits(Inflate,x.Inflate),_.exports=v=inflateSync,v.Inflate=Inflate,v.createInflate=function createInflate(_){return new Inflate(_)},v.inflateSync=inflateSync},33:_=>{"use strict";var v=_.exports=function(_){this._buffer=_,this._reads=[]};v.prototype.read=function(_,v){this._reads.push({length:Math.abs(_),allowLess:_<0,func:v})},v.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){var _=this._reads[0];if(!this._buffer.length||!(this._buffer.length>=_.length||_.allowLess))break;this._reads.shift();var v=this._buffer;this._buffer=v.slice(_.length),_.func.call(this,v.slice(0,_.length))}return this._reads.length>0?new Error("There are some read requests waitng on finished stream"):this._buffer.length>0?new Error("unrecognised content at end of stream"):void 0}},9189:(_,v,y)=>{var b=y(4378),x=y(2361).EventEmitter;function Queue(_){if(!(this instanceof Queue))return new Queue(_);x.call(this),_=_||{},this.concurrency=_.concurrency||1/0,this.timeout=_.timeout||0,this.autostart=_.autostart||!1,this.results=_.results||null,this.pending=0,this.session=0,this.running=!1,this.jobs=[],this.timers={}}_.exports=Queue,_.exports.default=Queue,b(Queue,x);["pop","shift","indexOf","lastIndexOf"].forEach((function(_){Queue.prototype[_]=function(){return Array.prototype[_].apply(this.jobs,arguments)}})),Queue.prototype.slice=function(_,v){return this.jobs=this.jobs.slice(_,v),this},Queue.prototype.reverse=function(){return this.jobs.reverse(),this};function clearTimers(){for(var _ in this.timers){var v=this.timers[_];delete this.timers[_],clearTimeout(v)}}function callOnErrorOrEnd(_){var v=this;function onerror(_){v.end(_)}this.on("error",onerror),this.on("end",(function onend(y){v.removeListener("error",onerror),v.removeListener("end",onend),_(y,this.results)}))}function done(_){this.session++,this.running=!1,this.emit("end",_)}["push","unshift","splice"].forEach((function(_){Queue.prototype[_]=function(){var v=Array.prototype[_].apply(this.jobs,arguments);return this.autostart&&this.start(),v}})),Object.defineProperty(Queue.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),Queue.prototype.start=function(_){if(_&&callOnErrorOrEnd.call(this,_),this.running=!0,!(this.pending>=this.concurrency))if(0!==this.jobs.length){var v=this,y=this.jobs.shift(),b=!0,x=this.session,T=null,I=!1,S=null,M=y.timeout||this.timeout;M&&(T=setTimeout((function(){I=!0,v.listeners("timeout").length>0?v.emit("timeout",next,y):next()}),M),this.timers[T]=T),this.results&&(S=this.results.length,this.results[S]=null),this.pending++,v.emit("start",y);var A=y(next);A&&A.then&&"function"==typeof A.then&&A.then((function(_){return next(null,_)})).catch((function(_){return next(_||!0)})),this.running&&this.jobs.length>0&&this.start()}else 0===this.pending&&done.call(this);function next(_,M){b&&v.session===x&&(b=!1,v.pending--,null!==T&&(delete v.timers[T],clearTimeout(T)),_?v.emit("error",_,y):!1===I&&(null!==S&&(v.results[S]=Array.prototype.slice.call(arguments,1)),v.emit("success",M,y)),v.session===x&&(0===v.pending&&0===v.jobs.length?done.call(v):v.running&&v.start()))}},Queue.prototype.stop=function(){this.running=!1},Queue.prototype.end=function(_){clearTimers.call(this),this.jobs.length=0,this.pending=0,done.call(this,_)}},6099:(_,v,y)=>{!function(_){_.parser=function(_,v){return new SAXParser(_,v)},_.SAXParser=SAXParser,_.SAXStream=SAXStream,_.createStream=function createStream(_,v){return new SAXStream(_,v)},_.MAX_BUFFER_LENGTH=65536;var v,b=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function SAXParser(v,y){if(!(this instanceof SAXParser))return new SAXParser(v,y);!function clearBuffers(_){for(var v=0,y=b.length;v<y;v++)_[b[v]]=""}(this),this.q=this.c="",this.bufferCheckPosition=_.MAX_BUFFER_LENGTH,this.opt=y||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!v,this.noscript=!(!v&&!this.opt.noscript),this.state=L.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(_.XML_ENTITIES):Object.create(_.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(I)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),emit(this,"onready")}_.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(_){function F(){}return F.prototype=_,new F}),Object.keys||(Object.keys=function(_){var v=[];for(var y in _)_.hasOwnProperty(y)&&v.push(y);return v}),SAXParser.prototype={end:function(){end(this)},write:function write(v){if(this.error)throw this.error;if(this.closed)return error(this,"Cannot write after close. Assign an onready handler.");if(null===v)return end(this);"object"==typeof v&&(v=v.toString());var y=0,x="";for(;x=charAt(v,y++),this.c=x,x;)switch(this.trackPosition&&(this.position++,"\n"===x?(this.line++,this.column=0):this.column++),this.state){case L.BEGIN:if(this.state=L.BEGIN_WHITESPACE,"\ufeff"===x)continue;beginWhiteSpace(this,x);continue;case L.BEGIN_WHITESPACE:beginWhiteSpace(this,x);continue;case L.TEXT:if(this.sawRoot&&!this.closedRoot){for(var T=y-1;x&&"<"!==x&&"&"!==x;)(x=charAt(v,y++))&&this.trackPosition&&(this.position++,"\n"===x?(this.line++,this.column=0):this.column++);this.textNode+=v.substring(T,y-1)}"<"!==x||this.sawRoot&&this.closedRoot&&!this.strict?(isWhitespace(x)||this.sawRoot&&!this.closedRoot||strictFail(this,"Text data outside of root node."),"&"===x?this.state=L.TEXT_ENTITY:this.textNode+=x):(this.state=L.OPEN_WAKA,this.startTagPosition=this.position);continue;case L.SCRIPT:"<"===x?this.state=L.SCRIPT_ENDING:this.script+=x;continue;case L.SCRIPT_ENDING:"/"===x?this.state=L.CLOSE_TAG:(this.script+="<"+x,this.state=L.SCRIPT);continue;case L.OPEN_WAKA:if("!"===x)this.state=L.SGML_DECL,this.sgmlDecl="";else if(isWhitespace(x));else if(isMatch(S,x))this.state=L.OPEN_TAG,this.tagName=x;else if("/"===x)this.state=L.CLOSE_TAG,this.tagName="";else if("?"===x)this.state=L.PROC_INST,this.procInstName=this.procInstBody="";else{if(strictFail(this,"Unencoded <"),this.startTagPosition+1<this.position){var I=this.position-this.startTagPosition;x=new Array(I).join(" ")+x}this.textNode+="<"+x,this.state=L.TEXT}continue;case L.SGML_DECL:"[CDATA["===(this.sgmlDecl+x).toUpperCase()?(emitNode(this,"onopencdata"),this.state=L.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+x==="--"?(this.state=L.COMMENT,this.comment="",this.sgmlDecl=""):"DOCTYPE"===(this.sgmlDecl+x).toUpperCase()?(this.state=L.DOCTYPE,(this.doctype||this.sawRoot)&&strictFail(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===x?(emitNode(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=L.TEXT):isQuote(x)?(this.state=L.SGML_DECL_QUOTED,this.sgmlDecl+=x):this.sgmlDecl+=x;continue;case L.SGML_DECL_QUOTED:x===this.q&&(this.state=L.SGML_DECL,this.q=""),this.sgmlDecl+=x;continue;case L.DOCTYPE:">"===x?(this.state=L.TEXT,emitNode(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=x,"["===x?this.state=L.DOCTYPE_DTD:isQuote(x)&&(this.state=L.DOCTYPE_QUOTED,this.q=x));continue;case L.DOCTYPE_QUOTED:this.doctype+=x,x===this.q&&(this.q="",this.state=L.DOCTYPE);continue;case L.DOCTYPE_DTD:this.doctype+=x,"]"===x?this.state=L.DOCTYPE:isQuote(x)&&(this.state=L.DOCTYPE_DTD_QUOTED,this.q=x);continue;case L.DOCTYPE_DTD_QUOTED:this.doctype+=x,x===this.q&&(this.state=L.DOCTYPE_DTD,this.q="");continue;case L.COMMENT:"-"===x?this.state=L.COMMENT_ENDING:this.comment+=x;continue;case L.COMMENT_ENDING:"-"===x?(this.state=L.COMMENT_ENDED,this.comment=textopts(this.opt,this.comment),this.comment&&emitNode(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+x,this.state=L.COMMENT);continue;case L.COMMENT_ENDED:">"!==x?(strictFail(this,"Malformed comment"),this.comment+="--"+x,this.state=L.COMMENT):this.state=L.TEXT;continue;case L.CDATA:"]"===x?this.state=L.CDATA_ENDING:this.cdata+=x;continue;case L.CDATA_ENDING:"]"===x?this.state=L.CDATA_ENDING_2:(this.cdata+="]"+x,this.state=L.CDATA);continue;case L.CDATA_ENDING_2:">"===x?(this.cdata&&emitNode(this,"oncdata",this.cdata),emitNode(this,"onclosecdata"),this.cdata="",this.state=L.TEXT):"]"===x?this.cdata+="]":(this.cdata+="]]"+x,this.state=L.CDATA);continue;case L.PROC_INST:"?"===x?this.state=L.PROC_INST_ENDING:isWhitespace(x)?this.state=L.PROC_INST_BODY:this.procInstName+=x;continue;case L.PROC_INST_BODY:if(!this.procInstBody&&isWhitespace(x))continue;"?"===x?this.state=L.PROC_INST_ENDING:this.procInstBody+=x;continue;case L.PROC_INST_ENDING:">"===x?(emitNode(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=L.TEXT):(this.procInstBody+="?"+x,this.state=L.PROC_INST_BODY);continue;case L.OPEN_TAG:isMatch(M,x)?this.tagName+=x:(newTag(this),">"===x?openTag(this):"/"===x?this.state=L.OPEN_TAG_SLASH:(isWhitespace(x)||strictFail(this,"Invalid character in tag name"),this.state=L.ATTRIB));continue;case L.OPEN_TAG_SLASH:">"===x?(openTag(this,!0),closeTag(this)):(strictFail(this,"Forward-slash in opening tag not followed by >"),this.state=L.ATTRIB);continue;case L.ATTRIB:if(isWhitespace(x))continue;">"===x?openTag(this):"/"===x?this.state=L.OPEN_TAG_SLASH:isMatch(S,x)?(this.attribName=x,this.attribValue="",this.state=L.ATTRIB_NAME):strictFail(this,"Invalid attribute name");continue;case L.ATTRIB_NAME:"="===x?this.state=L.ATTRIB_VALUE:">"===x?(strictFail(this,"Attribute without value"),this.attribValue=this.attribName,attrib(this),openTag(this)):isWhitespace(x)?this.state=L.ATTRIB_NAME_SAW_WHITE:isMatch(M,x)?this.attribName+=x:strictFail(this,"Invalid attribute name");continue;case L.ATTRIB_NAME_SAW_WHITE:if("="===x)this.state=L.ATTRIB_VALUE;else{if(isWhitespace(x))continue;strictFail(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",emitNode(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===x?openTag(this):isMatch(S,x)?(this.attribName=x,this.state=L.ATTRIB_NAME):(strictFail(this,"Invalid attribute name"),this.state=L.ATTRIB)}continue;case L.ATTRIB_VALUE:if(isWhitespace(x))continue;isQuote(x)?(this.q=x,this.state=L.ATTRIB_VALUE_QUOTED):(strictFail(this,"Unquoted attribute value"),this.state=L.ATTRIB_VALUE_UNQUOTED,this.attribValue=x);continue;case L.ATTRIB_VALUE_QUOTED:if(x!==this.q){"&"===x?this.state=L.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=x;continue}attrib(this),this.q="",this.state=L.ATTRIB_VALUE_CLOSED;continue;case L.ATTRIB_VALUE_CLOSED:isWhitespace(x)?this.state=L.ATTRIB:">"===x?openTag(this):"/"===x?this.state=L.OPEN_TAG_SLASH:isMatch(S,x)?(strictFail(this,"No whitespace between attributes"),this.attribName=x,this.attribValue="",this.state=L.ATTRIB_NAME):strictFail(this,"Invalid attribute name");continue;case L.ATTRIB_VALUE_UNQUOTED:if(!isAttribEnd(x)){"&"===x?this.state=L.ATTRIB_VALUE_ENTITY_U:this.attribValue+=x;continue}attrib(this),">"===x?openTag(this):this.state=L.ATTRIB;continue;case L.CLOSE_TAG:if(this.tagName)">"===x?closeTag(this):isMatch(M,x)?this.tagName+=x:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=L.SCRIPT):(isWhitespace(x)||strictFail(this,"Invalid tagname in closing tag"),this.state=L.CLOSE_TAG_SAW_WHITE);else{if(isWhitespace(x))continue;notMatch(S,x)?this.script?(this.script+="</"+x,this.state=L.SCRIPT):strictFail(this,"Invalid tagname in closing tag."):this.tagName=x}continue;case L.CLOSE_TAG_SAW_WHITE:if(isWhitespace(x))continue;">"===x?closeTag(this):strictFail(this,"Invalid characters in closing tag");continue;case L.TEXT_ENTITY:case L.ATTRIB_VALUE_ENTITY_Q:case L.ATTRIB_VALUE_ENTITY_U:var O,k;switch(this.state){case L.TEXT_ENTITY:O=L.TEXT,k="textNode";break;case L.ATTRIB_VALUE_ENTITY_Q:O=L.ATTRIB_VALUE_QUOTED,k="attribValue";break;case L.ATTRIB_VALUE_ENTITY_U:O=L.ATTRIB_VALUE_UNQUOTED,k="attribValue"}";"===x?(this[k]+=parseEntity(this),this.entity="",this.state=O):isMatch(this.entity.length?P:A,x)?this.entity+=x:(strictFail(this,"Invalid character in entity name"),this[k]+="&"+this.entity+x,this.entity="",this.state=O);continue;default:throw new Error(this,"Unknown state: "+this.state)}this.position>=this.bufferCheckPosition&&function checkBufferLength(v){for(var y=Math.max(_.MAX_BUFFER_LENGTH,10),x=0,T=0,I=b.length;T<I;T++){var S=v[b[T]].length;if(S>y)switch(b[T]){case"textNode":closeText(v);break;case"cdata":emitNode(v,"oncdata",v.cdata),v.cdata="";break;case"script":emitNode(v,"onscript",v.script),v.script="";break;default:error(v,"Max buffer length exceeded: "+b[T])}x=Math.max(x,S)}var M=_.MAX_BUFFER_LENGTH-x;v.bufferCheckPosition=M+v.position}(this);return this},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function flushBuffers(_){closeText(_),""!==_.cdata&&(emitNode(_,"oncdata",_.cdata),_.cdata=""),""!==_.script&&(emitNode(_,"onscript",_.script),_.script="")}(this)}};try{v=y(2781).Stream}catch(_){v=function(){}}var x=_.EVENTS.filter((function(_){return"error"!==_&&"end"!==_}));function SAXStream(_,y){if(!(this instanceof SAXStream))return new SAXStream(_,y);v.apply(this),this._parser=new SAXParser(_,y),this.writable=!0,this.readable=!0;var b=this;this._parser.onend=function(){b.emit("end")},this._parser.onerror=function(_){b.emit("error",_),b._parser.error=null},this._decoder=null,x.forEach((function(_){Object.defineProperty(b,"on"+_,{get:function(){return b._parser["on"+_]},set:function(v){if(!v)return b.removeAllListeners(_),b._parser["on"+_]=v,v;b.on(_,v)},enumerable:!0,configurable:!1})}))}SAXStream.prototype=Object.create(v.prototype,{constructor:{value:SAXStream}}),SAXStream.prototype.write=function(_){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(_)){if(!this._decoder){var v=y(1576).StringDecoder;this._decoder=new v("utf8")}_=this._decoder.write(_)}return this._parser.write(_.toString()),this.emit("data",_),!0},SAXStream.prototype.end=function(_){return _&&_.length&&this.write(_),this._parser.end(),!0},SAXStream.prototype.on=function(_,y){var b=this;return b._parser["on"+_]||-1===x.indexOf(_)||(b._parser["on"+_]=function(){var v=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);v.splice(0,0,_),b.emit.apply(b,v)}),v.prototype.on.call(b,_,y)};var T="http://www.w3.org/XML/1998/namespace",I={xml:T,xmlns:"http://www.w3.org/2000/xmlns/"},S=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,M=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,A=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,P=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function isWhitespace(_){return" "===_||"\n"===_||"\r"===_||"\t"===_}function isQuote(_){return'"'===_||"'"===_}function isAttribEnd(_){return">"===_||isWhitespace(_)}function isMatch(_,v){return _.test(v)}function notMatch(_,v){return!isMatch(_,v)}var O,k,R,L=0;for(var B in _.STATE={BEGIN:L++,BEGIN_WHITESPACE:L++,TEXT:L++,TEXT_ENTITY:L++,OPEN_WAKA:L++,SGML_DECL:L++,SGML_DECL_QUOTED:L++,DOCTYPE:L++,DOCTYPE_QUOTED:L++,DOCTYPE_DTD:L++,DOCTYPE_DTD_QUOTED:L++,COMMENT_STARTING:L++,COMMENT:L++,COMMENT_ENDING:L++,COMMENT_ENDED:L++,CDATA:L++,CDATA_ENDING:L++,CDATA_ENDING_2:L++,PROC_INST:L++,PROC_INST_BODY:L++,PROC_INST_ENDING:L++,OPEN_TAG:L++,OPEN_TAG_SLASH:L++,ATTRIB:L++,ATTRIB_NAME:L++,ATTRIB_NAME_SAW_WHITE:L++,ATTRIB_VALUE:L++,ATTRIB_VALUE_QUOTED:L++,ATTRIB_VALUE_CLOSED:L++,ATTRIB_VALUE_UNQUOTED:L++,ATTRIB_VALUE_ENTITY_Q:L++,ATTRIB_VALUE_ENTITY_U:L++,CLOSE_TAG:L++,CLOSE_TAG_SAW_WHITE:L++,SCRIPT:L++,SCRIPT_ENDING:L++},_.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},_.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(_.ENTITIES).forEach((function(v){var y=_.ENTITIES[v],b="number"==typeof y?String.fromCharCode(y):y;_.ENTITIES[v]=b})),_.STATE)_.STATE[_.STATE[B]]=B;function emit(_,v,y){_[v]&&_[v](y)}function emitNode(_,v,y){_.textNode&&closeText(_),emit(_,v,y)}function closeText(_){_.textNode=textopts(_.opt,_.textNode),_.textNode&&emit(_,"ontext",_.textNode),_.textNode=""}function textopts(_,v){return _.trim&&(v=v.trim()),_.normalize&&(v=v.replace(/\s+/g," ")),v}function error(_,v){return closeText(_),_.trackPosition&&(v+="\nLine: "+_.line+"\nColumn: "+_.column+"\nChar: "+_.c),v=new Error(v),_.error=v,emit(_,"onerror",v),_}function end(_){return _.sawRoot&&!_.closedRoot&&strictFail(_,"Unclosed root tag"),_.state!==L.BEGIN&&_.state!==L.BEGIN_WHITESPACE&&_.state!==L.TEXT&&error(_,"Unexpected end"),closeText(_),_.c="",_.closed=!0,emit(_,"onend"),SAXParser.call(_,_.strict,_.opt),_}function strictFail(_,v){if("object"!=typeof _||!(_ instanceof SAXParser))throw new Error("bad call to strictFail");_.strict&&error(_,v)}function newTag(_){_.strict||(_.tagName=_.tagName[_.looseCase]());var v=_.tags[_.tags.length-1]||_,y=_.tag={name:_.tagName,attributes:{}};_.opt.xmlns&&(y.ns=v.ns),_.attribList.length=0,emitNode(_,"onopentagstart",y)}function qname(_,v){var y=_.indexOf(":")<0?["",_]:_.split(":"),b=y[0],x=y[1];return v&&"xmlns"===_&&(b="xmlns",x=""),{prefix:b,local:x}}function attrib(_){if(_.strict||(_.attribName=_.attribName[_.looseCase]()),-1!==_.attribList.indexOf(_.attribName)||_.tag.attributes.hasOwnProperty(_.attribName))_.attribName=_.attribValue="";else{if(_.opt.xmlns){var v=qname(_.attribName,!0),y=v.prefix,b=v.local;if("xmlns"===y)if("xml"===b&&_.attribValue!==T)strictFail(_,"xml: prefix must be bound to "+T+"\nActual: "+_.attribValue);else if("xmlns"===b&&"http://www.w3.org/2000/xmlns/"!==_.attribValue)strictFail(_,"xmlns: prefix must be bound to http://www.w3.org/2000/xmlns/\nActual: "+_.attribValue);else{var x=_.tag,I=_.tags[_.tags.length-1]||_;x.ns===I.ns&&(x.ns=Object.create(I.ns)),x.ns[b]=_.attribValue}_.attribList.push([_.attribName,_.attribValue])}else _.tag.attributes[_.attribName]=_.attribValue,emitNode(_,"onattribute",{name:_.attribName,value:_.attribValue});_.attribName=_.attribValue=""}}function openTag(_,v){if(_.opt.xmlns){var y=_.tag,b=qname(_.tagName);y.prefix=b.prefix,y.local=b.local,y.uri=y.ns[b.prefix]||"",y.prefix&&!y.uri&&(strictFail(_,"Unbound namespace prefix: "+JSON.stringify(_.tagName)),y.uri=b.prefix);var x=_.tags[_.tags.length-1]||_;y.ns&&x.ns!==y.ns&&Object.keys(y.ns).forEach((function(v){emitNode(_,"onopennamespace",{prefix:v,uri:y.ns[v]})}));for(var T=0,I=_.attribList.length;T<I;T++){var S=_.attribList[T],M=S[0],A=S[1],P=qname(M,!0),O=P.prefix,k=P.local,R=""===O?"":y.ns[O]||"",B={name:M,value:A,prefix:O,local:k,uri:R};O&&"xmlns"!==O&&!R&&(strictFail(_,"Unbound namespace prefix: "+JSON.stringify(O)),B.uri=O),_.tag.attributes[M]=B,emitNode(_,"onattribute",B)}_.attribList.length=0}_.tag.isSelfClosing=!!v,_.sawRoot=!0,_.tags.push(_.tag),emitNode(_,"onopentag",_.tag),v||(_.noscript||"script"!==_.tagName.toLowerCase()?_.state=L.TEXT:_.state=L.SCRIPT,_.tag=null,_.tagName=""),_.attribName=_.attribValue="",_.attribList.length=0}function closeTag(_){if(!_.tagName)return strictFail(_,"Weird empty close tag."),_.textNode+="</>",void(_.state=L.TEXT);if(_.script){if("script"!==_.tagName)return _.script+="</"+_.tagName+">",_.tagName="",void(_.state=L.SCRIPT);emitNode(_,"onscript",_.script),_.script=""}var v=_.tags.length,y=_.tagName;_.strict||(y=y[_.looseCase]());for(var b=y;v--;){if(_.tags[v].name===b)break;strictFail(_,"Unexpected close tag")}if(v<0)return strictFail(_,"Unmatched closing tag: "+_.tagName),_.textNode+="</"+_.tagName+">",void(_.state=L.TEXT);_.tagName=y;for(var x=_.tags.length;x-- >v;){var T=_.tag=_.tags.pop();_.tagName=_.tag.name,emitNode(_,"onclosetag",_.tagName);var I={};for(var S in T.ns)I[S]=T.ns[S];var M=_.tags[_.tags.length-1]||_;_.opt.xmlns&&T.ns!==M.ns&&Object.keys(T.ns).forEach((function(v){var y=T.ns[v];emitNode(_,"onclosenamespace",{prefix:v,uri:y})}))}0===v&&(_.closedRoot=!0),_.tagName=_.attribValue=_.attribName="",_.attribList.length=0,_.state=L.TEXT}function parseEntity(_){var v,y=_.entity,b=y.toLowerCase(),x="";return _.ENTITIES[y]?_.ENTITIES[y]:_.ENTITIES[b]?_.ENTITIES[b]:("#"===(y=b).charAt(0)&&("x"===y.charAt(1)?(y=y.slice(2),x=(v=parseInt(y,16)).toString(16)):(y=y.slice(1),x=(v=parseInt(y,10)).toString(10))),y=y.replace(/^0+/,""),isNaN(v)||x.toLowerCase()!==y?(strictFail(_,"Invalid character entity"),"&"+_.entity+";"):String.fromCodePoint(v))}function beginWhiteSpace(_,v){"<"===v?(_.state=L.OPEN_WAKA,_.startTagPosition=_.position):isWhitespace(v)||(strictFail(_,"Non-whitespace before first tag."),_.textNode=v,_.state=L.TEXT)}function charAt(_,v){var y="";return v<_.length&&(y=_.charAt(v)),y}L=_.STATE,String.fromCodePoint||(O=String.fromCharCode,k=Math.floor,R=function(){var _,v,y=16384,b=[],x=-1,T=arguments.length;if(!T)return"";for(var I="";++x<T;){var S=Number(arguments[x]);if(!isFinite(S)||S<0||S>1114111||k(S)!==S)throw RangeError("Invalid code point: "+S);S<=65535?b.push(S):(_=55296+((S-=65536)>>10),v=S%1024+56320,b.push(_,v)),(x+1===T||b.length>y)&&(I+=O.apply(null,b),b.length=0)}return I},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:R,configurable:!0,writable:!0}):String.fromCodePoint=R)}(v)},842:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.AbstractTokenizer=void 0;const b=y(5167);v.AbstractTokenizer=class AbstractTokenizer{constructor(_){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=_||{}}async readToken(_,v=this.position){const y=Buffer.alloc(_.len);if(await this.readBuffer(y,{position:v})<_.len)throw new b.EndOfStreamError;return _.get(y,0)}async peekToken(_,v=this.position){const y=Buffer.alloc(_.len);if(await this.peekBuffer(y,{position:v})<_.len)throw new b.EndOfStreamError;return _.get(y,0)}async readNumber(_){if(await this.readBuffer(this.numBuffer,{length:_.len})<_.len)throw new b.EndOfStreamError;return _.get(this.numBuffer,0)}async peekNumber(_){if(await this.peekBuffer(this.numBuffer,{length:_.len})<_.len)throw new b.EndOfStreamError;return _.get(this.numBuffer,0)}async ignore(_){if(void 0!==this.fileInfo.size){const v=this.fileInfo.size-this.position;if(_>v)return this.position+=v,v}return this.position+=_,_}async close(){}normalizeOptions(_,v){if(v&&void 0!==v.position&&v.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return v?{mayBeLess:!0===v.mayBeLess,offset:v.offset?v.offset:0,length:v.length?v.length:_.length-(v.offset?v.offset:0),position:v.position?v.position:this.position}:{mayBeLess:!1,offset:0,length:_.length,position:this.position}}}},778:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.BufferTokenizer=void 0;const b=y(5167),x=y(842);class BufferTokenizer extends x.AbstractTokenizer{constructor(_,v){super(v),this.uint8Array=_,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:_.length}async readBuffer(_,v){if(v&&v.position){if(v.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=v.position}const y=await this.peekBuffer(_,v);return this.position+=y,y}async peekBuffer(_,v){const y=this.normalizeOptions(_,v),x=Math.min(this.uint8Array.length-y.position,y.length);if(!y.mayBeLess&&x<y.length)throw new b.EndOfStreamError;return _.set(this.uint8Array.subarray(y.position,y.position+x),y.offset),x}async close(){}}v.BufferTokenizer=BufferTokenizer},7859:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.fromFile=v.FileTokenizer=void 0;const b=y(842),x=y(5167),T=y(7209);class FileTokenizer extends b.AbstractTokenizer{constructor(_,v){super(v),this.fd=_}async readBuffer(_,v){const y=this.normalizeOptions(_,v);this.position=y.position;const b=await T.read(this.fd,_,y.offset,y.length,y.position);if(this.position+=b.bytesRead,b.bytesRead<y.length&&(!v||!v.mayBeLess))throw new x.EndOfStreamError;return b.bytesRead}async peekBuffer(_,v){const y=this.normalizeOptions(_,v),b=await T.read(this.fd,_,y.offset,y.length,y.position);if(!y.mayBeLess&&b.bytesRead<y.length)throw new x.EndOfStreamError;return b.bytesRead}async close(){return T.close(this.fd)}}v.FileTokenizer=FileTokenizer,v.fromFile=async function fromFile(_){const v=await T.stat(_);if(!v.isFile)throw new Error("File not a file: "+_);const y=await T.open(_,"r");return new FileTokenizer(y,{path:_,size:v.size})}},7209:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.readFile=v.writeFileSync=v.writeFile=v.read=v.open=v.close=v.stat=v.createReadStream=v.pathExists=void 0;const b=y(7147);v.pathExists=b.existsSync,v.createReadStream=b.createReadStream,v.stat=async function stat(_){return new Promise((v,y)=>{b.stat(_,(_,b)=>{_?y(_):v(b)})})},v.close=async function close(_){return new Promise((v,y)=>{b.close(_,_=>{_?y(_):v()})})},v.open=async function open(_,v){return new Promise((y,x)=>{b.open(_,v,(_,v)=>{_?x(_):y(v)})})},v.read=async function read(_,v,y,x,T){return new Promise((I,S)=>{b.read(_,v,y,x,T,(_,v,y)=>{_?S(_):I({bytesRead:v,buffer:y})})})},v.writeFile=async function writeFile(_,v){return new Promise((y,x)=>{b.writeFile(_,v,_=>{_?x(_):y()})})},v.writeFileSync=function writeFileSync(_,v){b.writeFileSync(_,v)},v.readFile=async function readFile(_){return new Promise((v,y)=>{b.readFile(_,(_,b)=>{_?y(_):v(b)})})}},599:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.ReadStreamTokenizer=void 0;const b=y(842),x=y(5167);class ReadStreamTokenizer extends b.AbstractTokenizer{constructor(_,v){super(v),this.streamReader=new x.StreamReader(_)}async getFileInfo(){return this.fileInfo}async readBuffer(_,v){const y=this.normalizeOptions(_,v),b=y.position-this.position;if(b>0)return await this.ignore(b),this.readBuffer(_,v);if(b<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(0===y.length)return 0;const T=await this.streamReader.read(_,y.offset,y.length);if(this.position+=T,(!v||!v.mayBeLess)&&T<y.length)throw new x.EndOfStreamError;return T}async peekBuffer(_,v){const y=this.normalizeOptions(_,v);let b=0;if(y.position){const v=y.position-this.position;if(v>0){const x=new Uint8Array(y.length+v);return b=await this.peekBuffer(x,{mayBeLess:y.mayBeLess}),_.set(x.subarray(v),y.offset),b-v}if(v<0)throw new Error("Cannot peek from a negative offset in a stream")}if(y.length>0){try{b=await this.streamReader.peek(_,y.offset,y.length)}catch(_){if(v&&v.mayBeLess&&_ instanceof x.EndOfStreamError)return 0;throw _}if(!y.mayBeLess&&b<y.length)throw new x.EndOfStreamError}return b}async ignore(_){const v=Math.min(256e3,_),y=new Uint8Array(v);let b=0;for(;b<_;){const x=_-b,T=await this.readBuffer(y,{length:Math.min(v,x)});if(T<0)return T;b+=T}return b}}v.ReadStreamTokenizer=ReadStreamTokenizer},5849:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.fromBuffer=v.fromStream=v.EndOfStreamError=void 0;const b=y(599),x=y(778);var T=y(5167);Object.defineProperty(v,"EndOfStreamError",{enumerable:!0,get:function(){return T.EndOfStreamError}}),v.fromStream=function fromStream(_,v){return v=v||{},new b.ReadStreamTokenizer(_,v)},v.fromBuffer=function fromBuffer(_,v){return new x.BufferTokenizer(_,v)}},6597:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.fromStream=v.fromBuffer=v.EndOfStreamError=v.fromFile=void 0;const b=y(7209),x=y(5849);var T=y(7859);Object.defineProperty(v,"fromFile",{enumerable:!0,get:function(){return T.fromFile}});var I=y(5849);Object.defineProperty(v,"EndOfStreamError",{enumerable:!0,get:function(){return I.EndOfStreamError}}),Object.defineProperty(v,"fromBuffer",{enumerable:!0,get:function(){return I.fromBuffer}}),v.fromStream=async function fromStream(_,v){if(v=v||{},_.path){const y=await b.stat(_.path);v.path=_.path,v.size=y.size}return x.fromStream(_,v)}},7011:(_,v)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.clone=clone,v.addLast=addLast,v.addFirst=addFirst,v.removeLast=removeLast,v.removeFirst=removeFirst,v.insert=insert,v.removeAt=removeAt,v.replaceAt=replaceAt,v.getIn=getIn,v.set=set,v.setIn=setIn,v.update=update,v.updateIn=updateIn,v.merge=merge,v.mergeDeep=mergeDeep,v.mergeIn=mergeIn,v.omit=omit,v.addDefaults=addDefaults,v.default=void 0;function throwStr(_){throw new Error(_)}function getKeysAndSymbols(_){const v=Object.keys(_);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(_)):v}const y={}.hasOwnProperty;function clone(_){if(Array.isArray(_))return _.slice();const v=_,y=getKeysAndSymbols(v),b={};for(let _=0;_<y.length;_++){const x=y[_];b[x]=v[x]}return b}function isObject(_){return null!=_&&"object"==typeof _}function addLast(_,v){return Array.isArray(v)?_.concat(v):_.concat([v])}function addFirst(_,v){return Array.isArray(v)?v.concat(_):[v].concat(_)}function removeLast(_){return _.length?_.slice(0,_.length-1):_}function removeFirst(_){return _.length?_.slice(1):_}function insert(_,v,y){return _.slice(0,v).concat(Array.isArray(y)?y:[y]).concat(_.slice(v))}function removeAt(_,v){return v>=_.length||v<0?_:_.slice(0,v).concat(_.slice(v+1))}function replaceAt(_,v,y){if(_[v]===y)return _;const b=_.length,x=Array(b);for(let v=0;v<b;v++)x[v]=_[v];return x[v]=y,x}function getIn(_,v){if(Array.isArray(v)||throwStr("INVALID_ARGS"),null==_)return;let y=_;for(let _=0;_<v.length;_++){const b=v[_];if(y=null!=y?y[b]:void 0,void 0===y)return y}return y}function set(_,v,y){let b=_;if(null==b&&(b="number"==typeof v?[]:{}),b[v]===y)return b;const x=clone(b);return x[v]=y,x}function setIn(_,v,y){return v.length?function doSetIn(_,v,y,b){let x;const T=v[b];if(b===v.length-1)x=y;else{const I=isObject(_)&&isObject(_[T])?_[T]:"number"==typeof v[b+1]?[]:{};x=doSetIn(I,v,y,b+1)}return set(_,T,x)}(_,v,y,0):y}function update(_,v,y){return set(_,v,y(null==_?void 0:_[v]))}function updateIn(_,v,y){return setIn(_,v,y(getIn(_,v)))}function merge(_,v,y,b,x,T,...I){return I.length?doMerge.call(null,!1,!1,_,v,y,b,x,T,...I):doMerge(!1,!1,_,v,y,b,x,T)}function mergeDeep(_,v,y,b,x,T,...I){return I.length?doMerge.call(null,!1,!0,_,v,y,b,x,T,...I):doMerge(!1,!0,_,v,y,b,x,T)}function mergeIn(_,v,y,b,x,T,I,...S){let M,A=getIn(_,v);return null==A&&(A={}),M=S.length?doMerge.call(null,!1,!1,A,y,b,x,T,I,...S):doMerge(!1,!1,A,y,b,x,T,I),setIn(_,v,M)}function omit(_,v){const b=Array.isArray(v)?v:[v];let x=!1;for(let v=0;v<b.length;v++)if(y.call(_,b[v])){x=!0;break}if(!x)return _;const T={},I=getKeysAndSymbols(_);for(let v=0;v<I.length;v++){const y=I[v];b.indexOf(y)>=0||(T[y]=_[y])}return T}function addDefaults(_,v,y,b,x,T,...I){return I.length?doMerge.call(null,!0,!1,_,v,y,b,x,T,...I):doMerge(!0,!1,_,v,y,b,x,T)}function doMerge(_,v,y,...b){let x=y;null==x&&throwStr("INVALID_ARGS");let T=!1;for(let y=0;y<b.length;y++){const I=b[y];if(null==I)continue;const S=getKeysAndSymbols(I);if(S.length)for(let y=0;y<=S.length;y++){const b=S[y];if(_&&void 0!==x[b])continue;let M=I[b];v&&isObject(x[b])&&isObject(M)&&(M=doMerge(_,v,x[b],M)),void 0!==M&&M!==x[b]&&(T||(T=!0,x=clone(x)),x[b]=M)}}return x}var b={clone:clone,addLast:addLast,addFirst:addFirst,removeLast:removeLast,removeFirst:removeFirst,insert:insert,removeAt:removeAt,replaceAt:replaceAt,getIn:getIn,set:set,setIn:setIn,update:update,updateIn:updateIn,merge:merge,mergeDeep:mergeDeep,mergeIn:mergeIn,omit:omit,addDefaults:addDefaults};v.default=b},3416:(_,v,y)=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.writeIntBE=v.readIntBE=v.writeUIntBE=v.readUIntBE=v.writeIntLE=v.AnsiStringType=v.StringType=v.BufferType=v.IgnoreType=v.Float80_LE=v.Float80_BE=v.Float64_LE=v.Float64_BE=v.Float32_LE=v.Float32_BE=v.Float16_LE=v.Float16_BE=v.INT64_BE=v.UINT64_BE=v.INT64_LE=v.UINT64_LE=v.INT32_LE=v.INT32_BE=v.INT24_BE=v.INT24_LE=v.INT16_LE=v.INT16_BE=v.INT8=v.UINT32_BE=v.UINT32_LE=v.UINT24_BE=v.UINT24_LE=v.UINT16_BE=v.UINT16_LE=v.UINT8=void 0;const b=y(645);v.UINT8={len:1,get:(_,v)=>_.readUInt8(v),put:(_,v,y)=>_.writeUInt8(y,v)},v.UINT16_LE={len:2,get:(_,v)=>_.readUInt16LE(v),put:(_,v,y)=>_.writeUInt16LE(y,v)},v.UINT16_BE={len:2,get:(_,v)=>_.readUInt16BE(v),put:(_,v,y)=>_.writeUInt16BE(y,v)},v.UINT24_LE={len:3,get:(_,v)=>_.readUIntLE(v,3),put:(_,v,y)=>_.writeUIntLE(y,v,3)},v.UINT24_BE={len:3,get:(_,v)=>_.readUIntBE(v,3),put:(_,v,y)=>_.writeUIntBE(y,v,3)},v.UINT32_LE={len:4,get:(_,v)=>_.readUInt32LE(v),put:(_,v,y)=>_.writeUInt32LE(y,v)},v.UINT32_BE={len:4,get:(_,v)=>_.readUInt32BE(v),put:(_,v,y)=>_.writeUInt32BE(y,v)},v.INT8={len:1,get:(_,v)=>_.readInt8(v),put:(_,v,y)=>_.writeInt8(y,v)},v.INT16_BE={len:2,get:(_,v)=>_.readInt16BE(v),put:(_,v,y)=>_.writeInt16BE(y,v)},v.INT16_LE={len:2,get:(_,v)=>_.readInt16LE(v),put:(_,v,y)=>_.writeInt16LE(y,v)},v.INT24_LE={len:3,get:(_,v)=>_.readIntLE(v,3),put:(_,v,y)=>_.writeIntLE(y,v,3)},v.INT24_BE={len:3,get:(_,v)=>_.readIntBE(v,3),put:(_,v,y)=>_.writeIntBE(y,v,3)},v.INT32_BE={len:4,get:(_,v)=>_.readInt32BE(v),put:(_,v,y)=>_.writeInt32BE(y,v)},v.INT32_LE={len:4,get:(_,v)=>_.readInt32LE(v),put:(_,v,y)=>_.writeInt32LE(y,v)},v.UINT64_LE={len:8,get(_,v){return function readUIntLE(_,v,y){y>>>=0;let b=_[v>>>=0],x=1,T=0;for(;++T<y&&(x*=256);)b+=_[v+T]*x;return b}(_,v,this.len)},put(_,v,y){return function writeUIntLE(_,v,y,b){v=+v,b>>>=0;let x=1,T=0;_[y>>>=0]=255&v;for(;++T<b&&(x*=256);)_[y+T]=v/x&255;return y+b}(_,y,v,this.len)}},v.INT64_LE={len:8,get(_,v){return function readIntLE(_,v,y){y>>>=0;let b=_[v>>>=0],x=1,T=0;for(;++T<y&&(x*=256);)b+=_[v+T]*x;x*=128,b>=x&&(b-=Math.pow(2,8*y));return b}(_,v,this.len)},put(_,v,y){return writeIntLE(_,y,v,this.len)}},v.UINT64_BE={len:8,get(_,v){return readUIntBE(_,v,this.len)},put(_,v,y){return writeUIntBE(_,y,v,this.len)}},v.INT64_BE={len:8,get(_,v){return readIntBE(_,v,this.len)},put(_,v,y){return writeIntBE(_,y,v,this.len)}},v.Float16_BE={len:2,get(_,v){return b.read(_,v,!1,10,this.len)},put(_,v,y){return b.write(_,y,v,!1,10,this.len),v+this.len}},v.Float16_LE={len:2,get(_,v){return b.read(_,v,!0,10,this.len)},put(_,v,y){return b.write(_,y,v,!0,10,this.len),v+this.len}},v.Float32_BE={len:4,get:(_,v)=>_.readFloatBE(v),put:(_,v,y)=>_.writeFloatBE(y,v)},v.Float32_LE={len:4,get:(_,v)=>_.readFloatLE(v),put:(_,v,y)=>_.writeFloatLE(y,v)},v.Float64_BE={len:8,get:(_,v)=>_.readDoubleBE(v),put:(_,v,y)=>_.writeDoubleBE(y,v)},v.Float64_LE={len:8,get:(_,v)=>_.readDoubleLE(v),put:(_,v,y)=>_.writeDoubleLE(y,v)},v.Float80_BE={len:10,get(_,v){return b.read(_,v,!1,63,this.len)},put(_,v,y){return b.write(_,y,v,!1,63,this.len),v+this.len}},v.Float80_LE={len:10,get(_,v){return b.read(_,v,!0,63,this.len)},put(_,v,y){return b.write(_,y,v,!0,63,this.len),v+this.len}};v.IgnoreType=class IgnoreType{constructor(_){this.len=_}get(_,v){}};v.BufferType=class BufferType{constructor(_){this.len=_}get(_,v){return _.slice(v,v+this.len)}};v.StringType=class StringType{constructor(_,v){this.len=_,this.encoding=v}get(_,v){return _.toString(this.encoding,v,v+this.len)}};class AnsiStringType{constructor(_){this.len=_}static decode(_,v,y){let b="";for(let x=v;x<y;++x)b+=AnsiStringType.codePointToString(AnsiStringType.singleByteDecoder(_[x]));return b}static inRange(_,v,y){return v<=_&&_<=y}static codePointToString(_){return _<=65535?String.fromCharCode(_):(_-=65536,String.fromCharCode(55296+(_>>10),56320+(1023&_)))}static singleByteDecoder(_){if(AnsiStringType.inRange(_,0,127))return _;const v=AnsiStringType.windows1252[_-128];if(null===v)throw Error("invaliding encoding");return v}get(_,v=0){return AnsiStringType.decode(_,v,v+this.len)}}function writeIntLE(_,v,y,b){v=+v;let x=0,T=1,I=0;for(_[y>>>=0]=255&v;++x<b&&(T*=256);)v<0&&0===I&&0!==_[y+x-1]&&(I=1),_[y+x]=(v/T>>0)-I&255;return y+b}function readUIntBE(_,v,y){y>>>=0;let b=_[(v>>>=0)+--y],x=1;for(;y>0&&(x*=256);)b+=_[v+--y]*x;return b}function writeUIntBE(_,v,y,b){v=+v;let x=(b>>>=0)-1,T=1;for(_[(y>>>=0)+x]=255&v;--x>=0&&(T*=256);)_[y+x]=v/T&255;return y+b}function readIntBE(_,v,y){let b=y>>>=0,x=1,T=_[(v>>>=0)+--b];for(;b>0&&(x*=256);)T+=_[v+--b]*x;return x*=128,T>=x&&(T-=Math.pow(2,8*y)),T}function writeIntBE(_,v,y,b){v=+v;let x=b-1,T=1,I=0;for(_[(y>>>=0)+x]=255&v;--x>=0&&(T*=256);)v<0&&0===I&&0!==_[y+x+1]&&(I=1),_[y+x]=(v/T>>0)-I&255;return y+b}v.AnsiStringType=AnsiStringType,AnsiStringType.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255],v.writeIntLE=writeIntLE,v.readUIntBE=readUIntBE,v.writeUIntBE=writeUIntBE,v.readIntBE=readIntBE,v.writeIntBE=writeIntBE},5304:function(_,v,y){"use strict";var b=this&&this.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),x=this&&this.__setModuleDefault||(Object.create?function(_,v){Object.defineProperty(_,"default",{enumerable:!0,value:v})}:function(_,v){_.default=v}),T=this&&this.__importStar||function(_){if(_&&_.__esModule)return _;var v={};if(null!=_)for(var y in _)"default"!==y&&Object.hasOwnProperty.call(_,y)&&b(v,_,y);return x(v,_),v},I=this&&this.__awaiter||function(_,v,y,b){return new(y||(y=Promise))((function(x,T){function fulfilled(_){try{step(b.next(_))}catch(_){T(_)}}function rejected(_){try{step(b.throw(_))}catch(_){T(_)}}function step(_){_.done?x(_.value):function adopt(_){return _ instanceof y?_:new y((function(v){v(_)}))}(_.value).then(fulfilled,rejected)}step((b=b.apply(_,v||[])).next())}))},S=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(v,"__esModule",{value:!0}),v.ImageCompressor=void 0;const M=y(9005),A=T(y(7147)),P=T(y(1017)),O=T(y(7935)),k=S(y(7769)),R=S(y(5817)),L=S(y(6656)),B=S(y(4459)),j=S(y(6132)),U=S(y(4735)),z=S(y(8139)),G=S(y(4709));var H;!function(_){_[_.Idle=0]="Idle",_[_.Initializing=1]="Initializing",_[_.AttemptingResize=2]="AttemptingResize",_[_.AttemptingCompression=3]="AttemptingCompression",_[_.Done=4]="Done"}(H||(H={}));v.ImageCompressor=class ImageCompressor{constructor(_,v){this.output=_,this.progress=v,this.currentStatus=H.Idle,this.isBatching=!1,this.fileExtensionExpression=/(?:\.([^.]+))?$/,this.imageExtensions=[".png",".jpg",".jpeg",".gif",".svg",".webp"],this.output.show()}compressImagesInFolder(_,v=0,y=0){return I(this,void 0,void 0,(function*(){this.isBatching=!0;const b=_.map(_=>this.compressImage(_,v,y));return yield Promise.all(b)}))}compressImage(_,v=0,y=0){return I(this,void 0,void 0,(function*(){if(this.updateStatus(H.Initializing,`Attempting to compress "${_}".`),this.filePathHasValidExtension(_)){const b=M.getFileSize(_),x=yield this.tryApplyImageDimensions(_,v,y),T=yield this.tryApplyImageCompression(_),I=M.getFileSize(_),S=M.calculatePercentReduction(b,I);return{wasCompressed:!!T,wasResized:!!x,file:M.getFileName(_),originalSize:b,before:M.toHumanReadableString(b),compressedSize:I,after:M.toHumanReadableString(I),reduction:S}}return this.updateStatus(H.Done,`Invalid image for compression "${_}".`),{file:M.getFileName(_),wasCompressed:!1,wasResized:!1}}))}filePathHasValidExtension(_){if(_){const v=this.getFileExtension(_);return v&&this.imageExtensions.some(_=>_===v.toLowerCase())}return!1}getFileExtension(_){if(!_)return null;const v=this.fileExtensionExpression.exec(_);return v?v[0]:null}tryApplyImageDimensions(_,v=0,y=0){return I(this,void 0,void 0,(function*(){return yield this.tryAction(()=>I(this,void 0,void 0,(function*(){var b,x,T,I;if(v||y){let S=O.imageSize(_);const M=v>0?v:null!==(b=S.width)&&void 0!==b?b:0,A=y>0?y:null!==(x=S.height)&&void 0!==x?x:0;if(S&&(null!==(T=S.width)&&void 0!==T?T:0)>M||(null!==(I=S.height)&&void 0!==I?I:0)>A){this.updateStatus(H.AttemptingResize,`Attempting to resize large image: ${S.width}x${S.height}.`);const b=yield this.timeoutAfterDelay(()=>R.default.read(_),void 0);if(b){const x=R.default.AUTO;return yield b.resize(v||x,y||x).writeAsync(_),S=O.imageSize(_),this.updateStatus(H.AttemptingResize,`Successfully resized image to: ${S.width}x${S.height}.`),!0}return this.updateStatus(H.AttemptingResize,"Timeout occurred, unable to resize image."),!1}}return!1})),Promise.resolve(!1))}))}timeoutAfterDelay(_,v,y=5e3){return I(this,void 0,void 0,(function*(){return yield this.tryAction(()=>I(this,void 0,void 0,(function*(){const b=[_(),new Promise(_=>setTimeout(()=>_(v),y))];return yield Promise.race(b)})),void 0)}))}tryApplyImageCompression(_){return I(this,void 0,void 0,(function*(){return yield this.timeoutAfterDelay(()=>I(this,void 0,void 0,(function*(){const v=[],y=this.getFileExtension(_),b=yield k.default.fromFile(_);if(b&&y&&b.ext!==y.substr(1))return this.writeMessage(`The "${_}" file has an incorrect file extension. It is actually a mime type of ${b.mime}!`),!1;switch((y||"").toLowerCase()){case".png":this.writeMessage(`Using .png compression plugin for: "${_}"`),v.push(j.default({optimizationLevel:7}));break;case".jpg":case".jpeg":this.writeMessage(`Using .jpg & .jpeg compression plugin for: "${_}"`),v.push(B.default({arithmetic:!1}));break;case".gif":this.writeMessage(`Using .gif compression plugin for: "${_}"`),v.push(U.default({optimizationLevel:3}));break;case".svg":this.writeMessage(`Using .svg compression plugin for: "${_}"`),v.push(z.default());break;case".webp":this.writeMessage(`Using .webp compression plugin for: "${_}"`),v.push(G.default({lossless:!0,metadata:"all"}))}if(!v||!v.length)return this.writeMessage(`Unable to resolve plugin for: "${_}"`),!1;const x={destination:"temp/images",glob:!1,plugins:v};let T=!1;const I=yield L.default([_],x);if(I&&I.length){const v=I[0];if(v){const y=P.resolve(v.destinationPath);A.copyFileSync(y,v.sourcePath),A.unlinkSync(y),T=!0,this.updateStatus(H.Done,`Successfully compressed ${this.toFileUri(_)}.`)}}else this.updateStatus(H.Done,`Unable to compress "${this.toFileUri(_)}".`);return T})),!1)}))}updateStatus(_,v){this.tryAction(()=>{if(this.isBatching){if(_>this.currentStatus){this.currentStatus=_;const v=this.statusToMessage(_);this.writeMessage(v)}}else this.writeMessage(v)},void 0)}writeMessage(_){this.tryAction(()=>{this.output.appendLine(_),this.progress.report({message:_})},void 0)}statusToMessage(_){switch(_){case H.Initializing:return"Initializing image compression";case H.AttemptingResize:return"Attempting image resize";case H.AttemptingCompression:return"Attempting image compression";case H.Done:return"Image compression complete";default:return"Idle..."}}toFileUri(_){return this.tryAction(()=>{let v=P.resolve(_).replace(/\\/g,"/");return"/"!==v[0]&&(v="/"+v),encodeURI("file://"+v)},_)}tryAction(_,v){try{return _()}catch(_){_ instanceof Error?this.output.appendLine(_.message):console.error(_)}return v}}},112:function(_,v,y){"use strict";var b=this&&this.__awaiter||function(_,v,y,b){return new(y||(y=Promise))((function(x,T){function fulfilled(_){try{step(b.next(_))}catch(_){T(_)}}function rejected(_){try{step(b.throw(_))}catch(_){T(_)}}function step(_){_.done?x(_.value):function adopt(_){return _ instanceof y?_:new y((function(v){v(_)}))}(_.value).then(fulfilled,rejected)}step((b=b.apply(_,v||[])).next())}))};Object.defineProperty(v,"__esModule",{value:!0}),v.deactivate=v.activate=void 0;const x=y(9496),T=y(5304),I=y(9005),S=y(4668),M=x.window.createOutputChannel("Learn: Image compression");v.activate=function activate(_){return b(this,void 0,void 0,(function*(){const v=x.workspace.getConfiguration("learnImages"),y=v.get("maxWidth"),A=v.get("maxHeight");try{[x.commands.registerCommand("learn.compressImage",_=>b(this,void 0,void 0,(function*(){x.window.withProgress({location:x.ProgressLocation.Window},v=>b(this,void 0,void 0,(function*(){const b=new T.ImageCompressor(M,v),x=yield b.compressImage(_.fsPath,y,A),S=I.resultToString(x);M.appendLine(S),v.report({message:S})})))}))),x.commands.registerCommand("learn.compressImagesInFolder",_=>b(this,void 0,void 0,(function*(){x.window.withProgress({location:x.ProgressLocation.Window},v=>b(this,void 0,void 0,(function*(){const b=new T.ImageCompressor(M,v),S=yield x.workspace.findFiles(new x.RelativePattern(_.path,"**/*.{png,jpg,jpeg,gif,svg,webp}")),P=yield b.compressImagesInFolder(S.map(_=>_.fsPath),y,A),O=I.resultsToString(P);M.appendLine(O),v.report({message:O})})))})))].forEach(v=>_.subscriptions.push(v))}catch(_){const v="learn-images failed to activate. Error registering commands with vscode extension context: "+_;M.appendLine(v),S.sendTelemetryData("activate",v)}}))},v.deactivate=function deactivate(){M&&(M.hide(),M.clear(),M.dispose())}},4668:function(_,v,y){"use strict";var b=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(v,"__esModule",{value:!0}),v.sendTelemetryData=v.getRepoName=v.getPackageInfo=v.Reporter=v.reporter=void 0;const x=y(7147),T=y(9496),I=b(y(8361));class Reporter extends T.Disposable{constructor(_){super(()=>v.reporter.dispose());const y=getPackageInfo(_);v.reporter=y&&new I.default(y.name,y.version,y.aiKey)}}function getPackageInfo(_){const v=function readJson(_){const v=x.readFileSync(_,"utf8");return JSON.parse(v)}(_.asAbsolutePath("./package.json"));return{name:v.name,version:v.version,aiKey:v.aiKey}}function getRepoName(_){const v=T.workspace.getWorkspaceFolder(_);if(v){return v.name}}v.Reporter=Reporter,v.getPackageInfo=getPackageInfo,v.getRepoName=getRepoName,v.sendTelemetryData=function sendTelemetryData(_,y){const b=T.window.activeTextEditor;if(b){const x=getRepoName(b.document.uri),T=x?{command_option:y,repo_name:x}:{command_option:y,repo_name:""};v.reporter.sendTelemetryEvent(_,T)}}},9005:function(_,v,y){"use strict";var b=this&&this.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),x=this&&this.__setModuleDefault||(Object.create?function(_,v){Object.defineProperty(_,"default",{enumerable:!0,value:v})}:function(_,v){_.default=v}),T=this&&this.__importStar||function(_){if(_&&_.__esModule)return _;var v={};if(null!=_)for(var y in _)"default"!==y&&Object.hasOwnProperty.call(_,y)&&b(v,_,y);return x(v,_),v};Object.defineProperty(v,"__esModule",{value:!0}),v.resultsToString=v.resultToString=v.calculatePercentReduction=v.toHumanReadableString=v.getFileSize=v.getFileName=void 0;const I=T(y(7147));function toHumanReadableString(_,v=!0){const y=v?1e3:1024;if(Math.abs(_)<y)return _+" B";const b=v?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let x=-1;do{_/=y,++x}while(Math.abs(_)>=y&&x<b.length-1);return`${_.toFixed(1)} ${b[x]}`}function calculatePercentReduction(_,v){return((_-v)/_*100).toFixed(2)+"%"}function resultToString(_){return _.wasCompressed?_.wasResized?`Compressed (and resized) "${_.file}" from ${_.before} to ${_.after}, reduced by ${_.reduction}.`:`Compressed "${_.file}" from ${_.before} to ${_.after}, reduced by ${_.reduction}.`:`Unable to compress "${_.file}".`}function sum(_,v){return _.reduce((_,y)=>_+v(y),0)}v.getFileName=function getFileName(_){return _?_.replace(/^.*[\\\/]/,""):""},v.getFileSize=function getFileSize(_){return I.statSync(_).size},v.toHumanReadableString=toHumanReadableString,v.calculatePercentReduction=calculatePercentReduction,v.resultToString=resultToString,v.resultsToString=function resultsToString(_){const v=sum(_,_=>!0===_.wasResized?1:0),y=sum(_,_=>_.originalSize?_.originalSize:0),b=sum(_,_=>_.compressedSize?_.compressedSize:0),x=_.length,T=calculatePercentReduction(y,b),I=v?` (and resized ${v})`:"";return`${_.map(_=>""+resultToString(_)).join("\n")}\nCompressed ${x} images${I} in total, from ${toHumanReadableString(y)} to ${toHumanReadableString(b)}, reduced by ${T}`}},6173:(_,v,y)=>{!function(){var v={};function log(){"undefined"==typeof process&&console.log.apply(console,arguments)}_.exports=v,function(_,v){var y,b,x;y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},b=function(){function g(_){this.message="JPEG error: "+_}return g.prototype=Error(),g.prototype.name="JpegError",g.constructor=g}(),x=function(){function g(_,v){this.message=_,this.g=v}return g.prototype=Error(),g.prototype.name="DNLMarkerError",g.constructor=g}(),function(){function g(){this.M=null,this.B=-1}function W(_,v){for(var y,b,x=0,T=[],I=16;0<I&&!_[I-1];)I--;T.push({children:[],index:0});var S,M=T[0];for(y=0;y<I;y++){for(b=0;b<_[y];b++){for((M=T.pop()).children[M.index]=v[x];0<M.index;)M=T.pop();for(M.index++,T.push(M);T.length<=y;)T.push(S={children:[],index:0}),M.children[M.index]=S.children,M=S;x++}y+1<I&&(T.push(S={children:[],index:0}),M.children[M.index]=S.children,M=S)}return T[0].children}function X(_,T,I,S,M,A,P,O,k){function n(){if(0<ee)return ee--,K>>ee&1;if(255===(K=_[T++])){var v=_[T++];if(v){if(220===v&&H){T+=2;var y=_[T++]<<8|_[T++];if(0<y&&y!==I.g)throw new x("Found DNL marker (0xFFDC) while parsing scan data",y)}throw new b("unexpected marker "+(K<<8|v).toString(16))}}return ee=7,K>>>7}function q(_){for(;;){if("number"==typeof(_=_[n()]))return _;if("object"!==(void 0===_?"undefined":y(_)))throw new b("invalid huffman sequence")}}function h(_){for(var v=0;0<_;)v=v<<1|n(),_--;return v}function c(_){if(1===_)return 1===n()?1:-1;var v=h(_);return v>=1<<_-1?v:v+(-1<<_)+1}function C(_,y){var b=q(_.D);for(b=0===b?0:c(b),_.a[y]=_.m+=b,b=1;64>b;){var x=q(_.o),T=15&x;if(x>>=4,0===T){if(15>x)break;b+=16}else b+=x,_.a[y+v[b]]=c(T),b++}}function w(_,v){var y=q(_.D);y=0===y?0:c(y)<<k,_.a[v]=_.m+=y}function p(_,v){_.a[v]|=n()<<k}function m(_,y){if(0<re)re--;else for(var b=A;b<=P;){var x=q(_.o),T=15&x;if(x>>=4,0===T){if(15>x){re=h(x)+(1<<x)-1;break}b+=16}else b+=x,_.a[y+v[b]]=c(T)*(1<<k),b++}}function t(_,y){for(var x,T=A,I=0;T<=P;){x=y+v[T];var S=0>_.a[x]?-1:1;switch(ie){case 0:if(x=15&(I=q(_.o)),I>>=4,0===x)15>I?(re=h(I)+(1<<I),ie=4):(I=16,ie=1);else{if(1!==x)throw new b("invalid ACn encoding");R=c(x),ie=I?2:3}continue;case 1:case 2:_.a[x]?_.a[x]+=S*(n()<<k):0==--I&&(ie=2===ie?3:0);break;case 3:_.a[x]?_.a[x]+=S*(n()<<k):(_.a[x]=R<<k,ie=0);break;case 4:_.a[x]&&(_.a[x]+=S*(n()<<k))}T++}4===ie&&0==--re&&(ie=0)}for(var R,L,B,j,U,z,G,H=9<arguments.length&&void 0!==arguments[9]&&arguments[9],V=I.P,$=T,K=0,ee=0,re=0,ie=0,ne=S.length,ae=I.S?0===A?0===O?w:p:0===O?m:t:C,oe=0,se=1===ne?S[0].c*S[0].l:V*I.O;oe<se;){var ce=M?Math.min(se-oe,M):se;for(L=0;L<ne;L++)S[L].m=0;if(re=0,1===ne){var ue=S[0];for(U=0;U<ce;U++)ae(ue,64*((ue.c+1)*(oe/ue.c|0)+oe%ue.c)),oe++}else for(U=0;U<ce;U++){for(L=0;L<ne;L++)for(z=(ue=S[L]).h,G=ue.j,B=0;B<G;B++)for(j=0;j<z;j++)ae(ue,64*((ue.c+1)*((oe/V|0)*ue.j+B)+(oe%V*ue.h+j)));oe++}if(ee=0,(ue=N(_,T))&&ue.f&&((0,_util.warn)("decodeScan - unexpected MCU data, current marker is: "+ue.f),T=ue.offset),!(ue=ue&&ue.F)||65280>=ue)throw new b("marker was not found");if(!(65488<=ue&&65495>=ue))break;T+=2}return(ue=N(_,T))&&ue.f&&((0,_util.warn)("decodeScan - unexpected Scan data, current marker is: "+ue.f),T=ue.offset),T-$}function Y(_,v){for(var y=v.c,x=v.l,T=new Int16Array(64),I=0;I<x;I++)for(var S=0;S<y;S++){var M=64*((v.c+1)*I+S),A=T,P=v.G,O=v.a;if(!P)throw new b("missing required Quantization Table.");for(var k=0;64>k;k+=8){var R=O[M+k],L=O[M+k+1],B=O[M+k+2],j=O[M+k+3],U=O[M+k+4],z=O[M+k+5],G=O[M+k+6],H=O[M+k+7];if(R*=P[k],0==(L|B|j|U|z|G|H))R=5793*R+512>>10,A[k]=R,A[k+1]=R,A[k+2]=R,A[k+3]=R,A[k+4]=R,A[k+5]=R,A[k+6]=R,A[k+7]=R;else{L*=P[k+1],B*=P[k+2],j*=P[k+3],U*=P[k+4],z*=P[k+5];var V=5793*R+128>>8,$=5793*U+128>>8,K=B,ee=G*=P[k+6];$=(V=V+$+1>>1)-$,R=3784*K+1567*ee+128>>8,K=1567*K-3784*ee+128>>8,z=(U=(U=2896*(L-(H*=P[k+7]))+128>>8)+(z<<=4)+1>>1)-z,j=(H=(H=2896*(L+H)+128>>8)+(j<<=4)+1>>1)-j,ee=(V=V+(ee=R)+1>>1)-ee,K=($=$+K+1>>1)-K,R=2276*U+3406*H+2048>>12,U=3406*U-2276*H+2048>>12,H=R,R=799*j+4017*z+2048>>12,j=4017*j-799*z+2048>>12,z=R,A[k]=V+H,A[k+7]=V-H,A[k+1]=$+z,A[k+6]=$-z,A[k+2]=K+j,A[k+5]=K-j,A[k+3]=ee+U,A[k+4]=ee-U}}for(P=0;8>P;++P)R=A[P],0==((L=A[P+8])|(B=A[P+16])|(j=A[P+24])|(U=A[P+32])|(z=A[P+40])|(G=A[P+48])|(H=A[P+56]))?(R=-2040>(R=5793*R+8192>>14)?0:2024<=R?255:R+2056>>4,O[M+P]=R,O[M+P+8]=R,O[M+P+16]=R,O[M+P+24]=R,O[M+P+32]=R,O[M+P+40]=R,O[M+P+48]=R,O[M+P+56]=R):(V=5793*R+2048>>12,$=5793*U+2048>>12,R=3784*(K=B)+1567*(ee=G)+2048>>12,K=1567*K-3784*ee+2048>>12,ee=R,z=(U=(U=2896*(L-H)+2048>>12)+z+1>>1)-z,j=(H=(H=2896*(L+H)+2048>>12)+j+1>>1)-j,R=2276*U+3406*H+2048>>12,U=3406*U-2276*H+2048>>12,H=R,R=799*j+4017*z+2048>>12,j=4017*j-799*z+2048>>12,L=($=($=(V=4112+(V+$+1>>1))-$)+K+1>>1)+(z=R),G=$-z,z=(K=$-K)-j,R=16>(R=(V=V+ee+1>>1)+H)?0:4080<=R?255:R>>4,L=16>L?0:4080<=L?255:L>>4,B=16>(B=K+j)?0:4080<=B?255:B>>4,j=16>(j=(ee=V-ee)+U)?0:4080<=j?255:j>>4,U=16>(U=ee-U)?0:4080<=U?255:U>>4,z=16>z?0:4080<=z?255:z>>4,G=16>G?0:4080<=G?255:G>>4,H=16>(H=V-H)?0:4080<=H?255:H>>4,O[M+P]=R,O[M+P+8]=L,O[M+P+16]=B,O[M+P+24]=j,O[M+P+32]=U,O[M+P+40]=z,O[M+P+48]=G,O[M+P+56]=H)}return v.a}function N(_,v){var y=2<arguments.length&&void 0!==arguments[2]?arguments[2]:v,b=_.length-1;if(y=y<v?y:v,v>=b)return null;var x=_[v]<<8|_[v+1];if(65472<=x&&65534>=x)return{f:null,F:x,offset:v};for(var T=_[y]<<8|_[y+1];!(65472<=T&&65534>=T);){if(++y>=b)return null;T=_[y]<<8|_[y+1]}return{f:x.toString(16),F:T,offset:y}}var v=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);g.prototype={parse:function(_){function d(){var v=_[I]<<8|_[I+1];return I+=2,v}function f(){var v=d(),y=N(_,v=I+v-2,I);return y&&y.f&&((0,_util.warn)("readDataBlock - incorrect length, current marker is: "+y.f),v=y.offset),v=_.subarray(I,v),I+=v.length,v}function e(_){for(var v=Math.ceil(_.v/8/_.s),y=Math.ceil(_.g/8/_.u),b=0;b<_.b.length;b++){H=_.b[b];var x=Math.ceil(Math.ceil(_.v/8)*H.h/_.s),T=Math.ceil(Math.ceil(_.g/8)*H.j/_.u);H.a=new Int16Array(64*y*H.j*(v*H.h+1)),H.c=x,H.l=T}_.P=v,_.O=y}var y=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).N,T=void 0===y?null:y,I=0,S=null,M=0;y=[];var A=[],P=[],O=d();if(65496!==O)throw new b("SOI not found");for(O=d();65497!==O;){switch(O){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var k=f();65518===O&&65===k[0]&&100===k[1]&&111===k[2]&&98===k[3]&&101===k[4]&&(S={version:k[5]<<8|k[6],Y:k[7]<<8|k[8],Z:k[9]<<8|k[10],W:k[11]});break;case 65499:O=d()+I-2;for(var R;I<O;){var L=_[I++],B=new Uint16Array(64);if(0==L>>4)for(k=0;64>k;k++)B[R=v[k]]=_[I++];else{if(1!=L>>4)throw new b("DQT - invalid table spec");for(k=0;64>k;k++)B[R=v[k]]=d()}y[15&L]=B}break;case 65472:case 65473:case 65474:if(j)throw new b("Only single frame JPEGs supported");d();var j={};for(j.X=65473===O,j.S=65474===O,j.precision=_[I++],O=d(),j.g=T||O,j.v=d(),j.b=[],j.C={},k=_[I++],O=B=L=0;O<k;O++){R=_[I];var U=_[I+1]>>4,z=15&_[I+1];L<U&&(L=U),B<z&&(B=z),U=j.b.push({h:U,j:z,T:_[I+2],G:null}),j.C[R]=U-1,I+=3}j.s=L,j.u=B,e(j);break;case 65476:for(R=d(),O=2;O<R;){for(L=_[I++],B=new Uint8Array(16),k=U=0;16>k;k++,I++)U+=B[k]=_[I];for(z=new Uint8Array(U),k=0;k<U;k++,I++)z[k]=_[I];O+=17+U,(0==L>>4?P:A)[15&L]=W(B,z)}break;case 65501:d();var G=d();break;case 65498:for(k=1==++M&&!T,d(),L=_[I++],R=[],O=0;O<L;O++){B=j.C[_[I++]];var H=j.b[B];B=_[I++],H.D=P[B>>4],H.o=A[15&B],R.push(H)}O=_[I++],L=_[I++],B=_[I++];try{var V=X(_,I,j,R,G,O,L,B>>4,15&B,k);I+=V}catch(v){if(v instanceof x)return(0,_util.warn)('Attempting to re-parse JPEG image using "scanLines" parameter found in DNL marker (0xFFDC) segment.'),this.parse(_,{N:v.g});throw v}break;case 65500:I+=4;break;case 65535:255!==_[I]&&I--;break;default:if(255===_[I-3]&&192<=_[I-2]&&254>=_[I-2])I-=3;else{if(!(k=N(_,I-2))||!k.f)throw new b("unknown marker "+O.toString(16));(0,_util.warn)("JpegImage.parse - unexpected data, current marker is: "+k.f),I=k.offset}}O=d()}for(this.width=j.v,this.height=j.g,this.A=S,this.b=[],O=0;O<j.b.length;O++)(G=y[(H=j.b[O]).T])&&(H.G=G),this.b.push({R:Y(0,H),U:H.h/j.s,V:H.j/j.u,c:H.c,l:H.l});this.i=this.b.length},L:function(_,v){var y,b,x=this.width/_,T=this.height/v,I=this.b.length,S=_*v*I,M=new Uint8ClampedArray(S),A=new Uint32Array(_);for(b=0;b<I;b++){var P=this.b[b],O=P.U*x,k=P.V*T,R=b,L=P.R,B=P.c+1<<3;for(y=0;y<_;y++)P=0|y*O,A[y]=(4294967288&P)<<3|7&P;for(O=0;O<v;O++)for(P=B*(4294967288&(P=0|O*k))|(7&P)<<3,y=0;y<_;y++)M[R]=L[P+A[y]],R+=I}if(T=this.M)for(b=0;b<S;)for(x=P=0;P<I;P++,b++,x+=2)M[b]=(M[b]*T[x]>>8)+T[x+1];return M},w:function(){return this.A?!!this.A.W:3===this.i?0!==this.B:1===this.B},I:function(_){for(var v,y,b,x=0,T=_.length;x<T;x+=3)v=_[x],y=_[x+1],b=_[x+2],_[x]=v-179.456+1.402*b,_[x+1]=v+135.459-.344*y-.714*b,_[x+2]=v-226.816+1.772*y;return _},K:function(_){for(var v,y,b,x,T=0,I=0,S=_.length;I<S;I+=4)v=_[I],y=_[I+1],b=_[I+2],x=_[I+3],_[T++]=y*(-660635669420364e-19*y+.000437130475926232*b-54080610064599e-18*v+.00048449797120281*x-.154362151871126)-122.67195406894+b*(-.000957964378445773*b+.000817076911346625*v-.00477271405408747*x+1.53380253221734)+v*(.000961250184130688*v-.00266257332283933*x+.48357088451265)+x*(-.000336197177618394*x+.484791561490776),_[T++]=107.268039397724+y*(219927104525741e-19*y-.000640992018297945*b+.000659397001245577*v+.000426105652938837*x-.176491792462875)+b*(-.000778269941513683*b+.00130872261408275*v+.000770482631801132*x-.151051492775562)+v*(.00126935368114843*v-.00265090189010898*x+.25802910206845)+x*(-.000318913117588328*x-.213742400323665),_[T++]=y*(-.000570115196973677*y-263409051004589e-19*b+.0020741088115012*v-.00288260236853442*x+.814272968359295)-20.810012546947+b*(-153496057440975e-19*b-.000132689043961446*v+.000560833691242812*x-.195152027534049)+v*(.00174418132927582*v-.00255243321439347*x+.116935020465145)+x*(-.000343531996510555*x+.24165260232407);return _.subarray(0,T)},J:function(_){for(var v,y,b,x=0,T=_.length;x<T;x+=4)v=_[x],y=_[x+1],b=_[x+2],_[x]=434.456-v-1.402*b,_[x+1]=119.541-v+.344*y+.714*b,_[x+2]=481.816-v-1.772*y;return _},H:function(_){for(var v,y,b,x,T=0,I=1/255,S=0,M=_.length;S<M;S+=4)v=_[S]*I,y=_[S+1]*I,b=_[S+2]*I,x=_[S+3]*I,_[T++]=255+v*(-4.387332384609988*v+54.48615194189176*y+18.82290502165302*b+212.25662451639585*x-285.2331026137004)+y*(1.7149763477362134*y-5.6096736904047315*b-17.873870861415444*x-5.497006427196366)+b*(-2.5217340131683033*b-21.248923337353073*x+17.5119270841813)-x*(21.86122147463605*x+189.48180835922747),_[T++]=255+v*(8.841041422036149*v+60.118027045597366*y+6.871425592049007*b+31.159100130055922*x-79.2970844816548)+y*(-15.310361306967817*y+17.575251261109482*b+131.35250912493976*x-190.9453302588951)+b*(4.444339102852739*b+9.8632861493405*x-24.86741582555878)-x*(20.737325471181034*x+187.80453709719578),_[T++]=255+v*(.8842522430003296*v+8.078677503112928*y+30.89978309703729*b-.23883238689178934*x-14.183576799673286)+y*(10.49593273432072*y+63.02378494754052*b+50.606957656360734*x-112.23884253719248)+b*(.03296041114873217*b+115.60384449646641*x-193.58209356861505)-x*(22.33816807309886*x+180.12613974708367);return _.subarray(0,T)},getData:function(_,v,y){if(4<this.i)throw new b("Unsupported color mode");if(_=this.L(_,v),1===this.i&&y){y=_.length,v=new Uint8ClampedArray(3*y);for(var x=0,T=0;T<y;T++){var I=_[T];v[x++]=I,v[x++]=I,v[x++]=I}return v}if(3===this.i&&this.w())return this.I(_);if(4===this.i){if(this.w())return y?this.K(_):this.J(_);if(y)return this.H(_)}return _}},_.JpegDecoder=g}(),_.encodeImage=function(v,y,b,x){var T={t256:[y],t257:[b],t258:[8,8,8,8],t259:[1],t262:[2],t273:[1e3],t277:[4],t278:[b],t279:[y*b*4],t282:[1],t283:[1],t284:[1],t286:[0],t287:[0],t296:[1],t305:["Photopea (UTIF.js)"],t338:[1]};if(x)for(var I in x)T[I]=x[I];var S=new Uint8Array(_.encode([T])),M=new Uint8Array(v),A=new Uint8Array(1e3+y*b*4);for(I=0;I<S.length;I++)A[I]=S[I];for(I=0;I<M.length;I++)A[1e3+I]=M[I];return A.buffer},_.encode=function(v){var y=new Uint8Array(2e4),b=4,x=_._binBE;y[0]=77,y[1]=77,y[3]=42;var T=8;x.writeUint(y,b,T),b+=4;for(var I=0;I<v.length;I++){var S=_._writeIFD(x,y,T,v[I]);T=S[1],I<v.length-1&&x.writeUint(y,S[0],T)}return y.slice(0,T).buffer},_.decode=function(v){_.decode._decodeG3.allow2D=null;var y=new Uint8Array(v),b=0,x=_._binBE.readASCII(y,b,2);b+=2;var T="II"==x?_._binLE:_._binBE;T.readUshort(y,b);b+=2;var I=T.readUint(y,b);b+=4;for(var S=[];;){var M=_._readIFD(T,y,I,S);if(0==(I=T.readUint(y,M)))break}return S},_.decodeImages=function(v,y){for(var b=new Uint8Array(v),x=_._binBE.readASCII(b,0,2),T=0;T<y.length;T++){var I=y[T];if(null!=I.t256){I.isLE="II"==x,I.width=I.t256[0],I.height=I.t257[0];var S=I.t259?I.t259[0]:1,M=I.t266?I.t266[0]:1;I.t284&&2==I.t284[0]&&log("PlanarConfiguration 2 should not be used!");var A=(I.t258?Math.min(32,I.t258[0]):1)*(I.t277?I.t277[0]:1),P=8*Math.ceil(I.width*A/8),O=I.t273;null==O&&(O=I.t324);var k=I.t279;1==S&&1==O.length&&(k=[I.height*(P>>>3)]),null==k&&(k=I.t325);var R=new Uint8Array(I.height*(P>>>3)),L=0;if(null!=I.t322){for(var B=I.t322[0],j=I.t323[0],U=Math.floor((I.width+B-1)/B),z=Math.floor((I.height+j-1)/j),G=new Uint8Array(0|Math.ceil(B*j*A/8)),H=0;H<z;H++)for(var V=0;V<U;V++){for(var $=H*U+V,K=0;K<G.length;K++)G[K]=0;_.decode._decompress(I,b,O[$],k[$],S,G,0,M),6==S?R=G:_._copyTile(G,0|Math.ceil(B*A/8),j,R,0|Math.ceil(I.width*A/8),I.height,0|Math.ceil(V*B*A/8),H*j)}L=8*R.length}else{var ee=I.t278?I.t278[0]:I.height;ee=Math.min(ee,I.height);for($=0;$<O.length;$++)_.decode._decompress(I,b,O[$],k[$],S,R,0|Math.ceil(L/8),M),L+=P*ee;L=Math.min(L,8*R.length)}I.data=new Uint8Array(R.buffer,0,0|Math.ceil(L/8))}}},_.decode._decompress=function(y,b,x,T,I,S,M,A){if(1==I)for(var P=0;P<T;P++)S[M+P]=b[x+P];else if(3==I)_.decode._decodeG3(b,x,T,S,M,y.width,A);else if(4==I)_.decode._decodeG4(b,x,T,S,M,y.width,A);else if(5==I)_.decode._decodeLZW(b,x,S,M);else if(6==I)_.decode._decodeOldJPEG(y,b,x,T,S,M);else if(7==I)_.decode._decodeNewJPEG(y,b,x,T,S,M);else if(8==I)for(var O=new Uint8Array(b.buffer,x,T),k=v.inflate(O),R=0;R<k.length;R++)S[M+R]=k[R];else 32773==I?_.decode._decodePackBits(b,x,T,S,M):32809==I?_.decode._decodeThunder(b,x,T,S,M):log("Unknown compression",I);if(y.t317&&2==y.t317[0])for(var L=y.t277?y.t277[0]:1,B=y.t278?y.t278[0]:y.height,j=y.width*L,U=0;U<B;U++){var z=M+U*j;if(3==L)for(P=3;P<j;P+=3)S[z+P]=S[z+P]+S[z+P-3]&255,S[z+P+1]=S[z+P+1]+S[z+P-2]&255,S[z+P+2]=S[z+P+2]+S[z+P-1]&255;else for(P=L;P<j;P++)S[z+P]=S[z+P]+S[z+P-L]&255}},_.decode._decodeNikon=function(_,v,y,b,x){var T,I;log(_.slice(v,v+100)),T=_[v],I=_[++v],v++,log(T.toString(16),I.toString(16),y)},_.decode._decodeNewJPEG=function(v,y,b,x,T,I){var S=v.t347,M=S?S.length:0,A=new Uint8Array(M+x);if(S){for(var P=0,O=0;O<M-1&&(255!=S[O]||217!=S[O+1]);O++)A[P++]=S[O];var k=y[b],R=y[b+1];255==k&&216==R||(A[P++]=k,A[P++]=R);for(O=2;O<x;O++)A[P++]=y[b+O]}else for(O=0;O<x;O++)A[O]=y[b+O];if(32803==v.t262){var L=v.t258[0],B=(new LosslessJpegDecoder).decode(A),j=B.length;if(16==L)for(O=0;O<j;O++)T[I++]=255&B[O],T[I++]=B[O]>>>8;else{if(12!=L)throw new Error("unsupported bit depth "+L);for(O=0;O<j;O+=2)T[I++]=B[O]>>>4,T[I++]=255&(B[O]<<4|B[O+1]>>>8),T[I++]=255&B[O+1]}}else{var U=new _.JpegDecoder;U.parse(A);var z=U.getData(U.width,U.height);for(O=0;O<z.length;O++)T[I+O]=z[O]}6==v.t262[0]&&(v.t262[0]=2)},_.decode._decodeOldJPEGInit=function(_,v,y,b){var x,T,I,S,M,A=0,P=0,O=!1,k=_.t513,R=k?k[0]:0,L=_.t514,B=L?L[0]:0,j=_.t324||_.t273||k,U=_.t530,z=0,G=0,H=_.t277?_.t277[0]:1,V=_.t515;if(j&&(P=j[0],O=j.length>1),!O){if(255==v[y]&&216==v[y+1])return{jpegOffset:y};if(null!=k&&(255==v[y+R]&&216==v[y+R+1]?A=y+R:log("JPEGInterchangeFormat does not point to SOI"),null==L?log("JPEGInterchangeFormatLength field is missing"):(R>=P||R+B<=P)&&log("JPEGInterchangeFormatLength field value is invalid"),null!=A))return{jpegOffset:A}}if(null!=U&&(z=U[0],G=U[1]),null!=k&&null!=L)if(B>=2&&R+B<=P){for(x=255==v[y+R+B-2]&&216==v[y+R+B-1]?new Uint8Array(B-2):new Uint8Array(B),I=0;I<x.length;I++)x[I]=v[y+R+I];log("Incorrect JPEG interchange format: using JPEGInterchangeFormat offset to derive tables")}else log("JPEGInterchangeFormat+JPEGInterchangeFormatLength > offset to first strip or tile");if(null==x){var $=0,K=[];K[$++]=255,K[$++]=216;var ee=_.t519;if(null==ee)throw new Error("JPEGQTables tag is missing");for(I=0;I<ee.length;I++)for(K[$++]=255,K[$++]=219,K[$++]=0,K[$++]=67,K[$++]=I,S=0;S<64;S++)K[$++]=v[y+ee[I]+S];for(M=0;M<2;M++){var re=_[0==M?"t520":"t521"];if(null==re)throw new Error((0==M?"JPEGDCTables":"JPEGACTables")+" tag is missing");for(I=0;I<re.length;I++){K[$++]=255,K[$++]=196;var ie=19;for(S=0;S<16;S++)ie+=v[y+re[I]+S];for(K[$++]=ie>>>8,K[$++]=255&ie,K[$++]=I|M<<4,S=0;S<16;S++)K[$++]=v[y+re[I]+S];for(S=0;S<ie;S++)K[$++]=v[y+re[I]+16+S]}}if(K[$++]=255,K[$++]=192,K[$++]=0,K[$++]=8+3*H,K[$++]=8,K[$++]=_.height>>>8&255,K[$++]=255&_.height,K[$++]=_.width>>>8&255,K[$++]=255&_.width,K[$++]=H,1==H)K[$++]=1,K[$++]=17,K[$++]=0;else for(I=0;I<3;I++)K[$++]=I+1,K[$++]=0!=I?17:(15&z)<<4|15&G,K[$++]=I;null!=V&&0!=V[0]&&(K[$++]=255,K[$++]=221,K[$++]=0,K[$++]=4,K[$++]=V[0]>>>8&255,K[$++]=255&V[0]),x=new Uint8Array(K)}var ne=-1;for(I=0;I<x.length-1;){if(255==x[I]&&192==x[I+1]){ne=I;break}I++}if(-1==ne){var ae=new Uint8Array(x.length+10+3*H);ae.set(x);var oe=x.length;if(ne=x.length,(x=ae)[oe++]=255,x[oe++]=192,x[oe++]=0,x[oe++]=8+3*H,x[oe++]=8,x[oe++]=_.height>>>8&255,x[oe++]=255&_.height,x[oe++]=_.width>>>8&255,x[oe++]=255&_.width,x[oe++]=H,1==H)x[oe++]=1,x[oe++]=17,x[oe++]=0;else for(I=0;I<3;I++)x[oe++]=I+1,x[oe++]=0!=I?17:(15&z)<<4|15&G,x[oe++]=I}if(255==v[P]&&218==v[P+1]){var se=v[P+2]<<8|v[P+3];for((T=new Uint8Array(se+2))[0]=v[P],T[1]=v[P+1],T[2]=v[P+2],T[3]=v[P+3],I=0;I<se-2;I++)T[I+4]=v[P+I+4]}else{var ce=0;if((T=new Uint8Array(8+2*H))[ce++]=255,T[ce++]=218,T[ce++]=0,T[ce++]=6+2*H,T[ce++]=H,1==H)T[ce++]=1,T[ce++]=0;else for(I=0;I<3;I++)T[ce++]=I+1,T[ce++]=I<<4|I;T[ce++]=0,T[ce++]=63,T[ce++]=0}return{jpegOffset:y,tables:x,sosMarker:T,sofPosition:ne}},_.decode._decodeOldJPEG=function(v,y,b,x,T,I){var S,M,A,P=_.decode._decodeOldJPEGInit(v,y,b,x);if(null!=P.jpegOffset)for(S=b+x-P.jpegOffset,A=new Uint8Array(S),R=0;R<S;R++)A[R]=y[P.jpegOffset+R];else{for(M=P.tables.length,(A=new Uint8Array(M+P.sosMarker.length+x+2)).set(P.tables),M,A[P.sofPosition+5]=v.height>>>8&255,A[P.sofPosition+6]=255&v.height,A[P.sofPosition+7]=v.width>>>8&255,A[P.sofPosition+8]=255&v.width,255==y[b]&&y[b+1]==SOS||(A.set(P.sosMarker,bufoff),bufoff+=sosMarker.length),R=0;R<x;R++)A[bufoff++]=y[b+R];A[bufoff++]=255,A[bufoff++]=EOI}var O=new _.JpegDecoder;O.parse(A);for(var k=O.getData(O.width,O.height),R=0;R<k.length;R++)T[I+R]=k[R];6==v.t262[0]&&(v.t262[0]=2)},_.decode._decodePackBits=function(_,v,y,b,x){for(var T=new Int8Array(_.buffer),I=new Int8Array(b.buffer),S=v+y;v<S;){var M=T[v];if(v++,M>=0&&M<128)for(var A=0;A<M+1;A++)I[x]=T[v],x++,v++;if(M>=-127&&M<0){for(A=0;A<1-M;A++)I[x]=T[v],x++;v++}}},_.decode._decodeThunder=function(_,v,y,b,x){for(var T=[0,1,0,-1],I=[0,1,2,3,0,-3,-2,-1],S=v+y,M=2*x,A=0;v<S;){var P=_[v],O=P>>>6,k=63&P;if(v++,3==O&&(A=15&k,b[M>>>1]|=A<<4*(1-M&1),M++),0==O)for(var R=0;R<k;R++)b[M>>>1]|=A<<4*(1-M&1),M++;if(2==O)for(R=0;R<2;R++){4!=(L=k>>>3*(1-R)&7)&&(A+=I[L],b[M>>>1]|=A<<4*(1-M&1),M++)}if(1==O)for(R=0;R<3;R++){var L;2!=(L=k>>>2*(2-R)&3)&&(A+=T[L],b[M>>>1]|=A<<4*(1-M&1),M++)}}},_.decode._dmap={1:0,"011":1,"000011":2,"0000011":3,"010":-1,"000010":-2,"0000010":-3},_.decode._lens=function(){var addKeys=function(_,v,y,b){for(var x=0;x<v.length;x++)_[v[x]]=y+x*b},_="00110101,000111,0111,1000,1011,1100,1110,1111,10011,10100,00111,01000,001000,000011,110100,110101,101010,101011,0100111,0001100,0001000,0010111,0000011,0000100,0101000,0101011,0010011,0100100,0011000,00000010,00000011,00011010,00011011,00010010,00010011,00010100,00010101,00010110,00010111,00101000,00101001,00101010,00101011,00101100,00101101,00000100,00000101,00001010,00001011,01010010,01010011,01010100,01010101,00100100,00100101,01011000,01011001,01011010,01011011,01001010,01001011,00110010,00110011,00110100",v="0000110111,010,11,10,011,0011,0010,00011,000101,000100,0000100,0000101,0000111,00000100,00000111,000011000,0000010111,0000011000,0000001000,00001100111,00001101000,00001101100,00000110111,00000101000,00000010111,00000011000,000011001010,000011001011,000011001100,000011001101,000001101000,000001101001,000001101010,000001101011,000011010010,000011010011,000011010100,000011010101,000011010110,000011010111,000001101100,000001101101,000011011010,000011011011,000001010100,000001010101,000001010110,000001010111,000001100100,000001100101,000001010010,000001010011,000000100100,000000110111,000000111000,000000100111,000000101000,000001011000,000001011001,000000101011,000000101100,000001011010,000001100110,000001100111",y="11011,10010,010111,0110111,00110110,00110111,01100100,01100101,01101000,01100111,011001100,011001101,011010010,011010011,011010100,011010101,011010110,011010111,011011000,011011001,011011010,011011011,010011000,010011001,010011010,011000,010011011",b="0000001111,000011001000,000011001001,000001011011,000000110011,000000110100,000000110101,0000001101100,0000001101101,0000001001010,0000001001011,0000001001100,0000001001101,0000001110010,0000001110011,0000001110100,0000001110101,0000001110110,0000001110111,0000001010010,0000001010011,0000001010100,0000001010101,0000001011010,0000001011011,0000001100100,0000001100101",x="00000001000,00000001100,00000001101,000000010010,000000010011,000000010100,000000010101,000000010110,000000010111,000000011100,000000011101,000000011110,000000011111";_=_.split(","),v=v.split(","),y=y.split(","),b=b.split(","),x=x.split(",");var T={},I={};return addKeys(T,_,0,1),addKeys(T,y,64,64),addKeys(T,x,1792,64),addKeys(I,v,0,1),addKeys(I,b,64,64),addKeys(I,x,1792,64),[T,I]}(),_.decode._decodeG4=function(v,y,b,x,T,I,S){for(var M=_.decode,A=y<<3,P=0,O="",k=[],R=[],L=0;L<I;L++)R.push(0);R=M._makeDiff(R);for(var B=0,j=0,U=0,z=0,G=0,H=0,V="",$=0,K=8*Math.ceil(I/8);A>>>3<y+b;){U=M._findDiff(R,B+(0==B?0:1),1-G),z=M._findDiff(R,U,G);var ee=0;if(1==S&&(ee=v[A>>>3]>>>7-(7&A)&1),2==S&&(ee=v[A>>>3]>>>(7&A)&1),A++,O+=ee,"H"==V){if(null!=M._lens[G][O]){var re=M._lens[G][O];O="",P+=re,re<64&&(M._addNtimes(k,P,G),B+=P,G=1-G,P=0,0==--$&&(V=""))}}else"0001"==O&&(O="",M._addNtimes(k,z-B,G),B=z),"001"==O&&(O="",V="H",$=2),null!=M._dmap[O]&&(j=U+M._dmap[O],M._addNtimes(k,j-B,G),B=j,O="",G=1-G);k.length==I&&""==V&&(M._writeBits(k,x,8*T+H*K),G=0,H++,B=0,R=M._makeDiff(k),k=[])}},_.decode._findDiff=function(_,v,y){for(var b=0;b<_.length;b+=2)if(_[b]>=v&&_[b+1]==y)return _[b]},_.decode._makeDiff=function(_){var v=[];1==_[0]&&v.push(0,1);for(var y=1;y<_.length;y++)_[y-1]!=_[y]&&v.push(y,_[y]);return v.push(_.length,0,_.length,1),v},_.decode._decodeG3=function(v,y,b,x,T,I,S){for(var M=_.decode,A=y<<3,P=0,O="",k=[],R=[],L=0;L<I;L++)k.push(0);for(var B=0,j=0,U=0,z=0,G=0,H=-1,V="",$=0,K=!1,ee=8*Math.ceil(I/8);A>>>3<y+b;){U=M._findDiff(R,B+(0==B?0:1),1-G),z=M._findDiff(R,U,G);var re=0;if(1==S&&(re=v[A>>>3]>>>7-(7&A)&1),2==S&&(re=v[A>>>3]>>>(7&A)&1),A++,O+=re,K){if(null!=M._lens[G][O]){var ie=M._lens[G][O];O="",P+=ie,ie<64&&(M._addNtimes(k,P,G),G=1-G,P=0)}}else if("H"==V){if(null!=M._lens[G][O]){ie=M._lens[G][O];O="",P+=ie,ie<64&&(M._addNtimes(k,P,G),B+=P,G=1-G,P=0,0==--$&&(V=""))}}else"0001"==O&&(O="",M._addNtimes(k,z-B,G),B=z),"001"==O&&(O="",V="H",$=2),null!=M._dmap[O]&&(j=U+M._dmap[O],M._addNtimes(k,j-B,G),B=j,O="",G=1-G);O.endsWith("000000000001")&&(H>=0&&M._writeBits(k,x,8*T+H*ee),1==S&&(K=1==(v[A>>>3]>>>7-(7&A)&1)),2==S&&(K=1==(v[A>>>3]>>>(7&A)&1)),A++,null==M._decodeG3.allow2D&&(M._decodeG3.allow2D=K),M._decodeG3.allow2D||(K=!0,A--),O="",G=0,H++,B=0,R=M._makeDiff(k),k=[])}k.length==I&&M._writeBits(k,x,8*T+H*ee)},_.decode._addNtimes=function(_,v,y){for(var b=0;b<v;b++)_.push(y)},_.decode._writeBits=function(_,v,y){for(var b=0;b<_.length;b++)v[y+b>>>3]|=_[b]<<7-(y+b&7)},_.decode._decodeLZW=function(v,y,b,x){if(null==_.decode._lzwTab){for(var T=new Uint32Array(65535),I=new Uint16Array(65535),S=new Uint8Array(2e6),M=0;M<256;M++)S[M<<2]=M,T[M]=M<<2,I[M]=1;_.decode._lzwTab=[T,I,S]}for(var A=_.decode._copyData,P=_.decode._lzwTab[0],O=_.decode._lzwTab[1],k=(S=_.decode._lzwTab[2],258),R=1032,L=9,B=y<<3,j=0,U=0;j=(v[B>>>3]<<16|v[B+8>>>3]<<8|v[B+16>>>3])>>24-(7&B)-L&(1<<L)-1,B+=L,257!=j;){if(256==j){if(L=9,k=258,R=1032,j=(v[B>>>3]<<16|v[B+8>>>3]<<8|v[B+16>>>3])>>24-(7&B)-L&(1<<L)-1,B+=L,257==j)break;b[x]=j,x++}else if(j<k){var z=P[j],G=O[j];if(A(S,z,b,x,G),x+=G,U>=k)P[k]=R,S[P[k]]=z[0],O[k]=1,R=R+1+3&-4,k++;else P[k]=R,A(S,P[U],S,R,H=O[U]),S[R+H]=S[z],H++,O[k]=H,k++,R=R+H+3&-4;k+1==1<<L&&L++}else{var H;if(U>=k)P[k]=R,O[k]=0,k++;else P[k]=R,A(S,P[U],S,R,H=O[U]),S[R+H]=S[R],H++,O[k]=H,k++,A(S,R,b,x,H),x+=H,R=R+H+3&-4;k+1==1<<L&&L++}U=j}},_.decode._copyData=function(_,v,y,b,x){for(var T=0;T<x;T+=4)y[b+T]=_[v+T],y[b+T+1]=_[v+T+1],y[b+T+2]=_[v+T+2],y[b+T+3]=_[v+T+3]},_.tags={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",266:"FillOrder",269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffset",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",296:"ResolutionUnit",297:"PageNumber",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",320:"ColorMap",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffset",325:"TileByteCounts",330:"SubIFDs",336:"DotRange",338:"ExtraSample",339:"SampleFormat",347:"JPEGTables",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",700:"XMP",33421:"CFARepeatPatternDim",33422:"CFAPattern",33432:"Copyright",33434:"ExposureTime",33437:"FNumber",33723:"IPTC/NAA",34377:"Photoshop",34665:"ExifIFD",34675:"ICC Profile",34850:"ExposureProgram",34853:"GPSInfo",34855:"ISOSpeedRatings",34858:"TimeZoneOffset",34859:"SelfTimeMode",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37377:"ShutterSpeedValue",37378:"ApertureValue",37380:"ExposureBiasValue",37383:"MeteringMode",37385:"Flash",37386:"FocalLength",37390:"FocalPlaneXResolution",37391:"FocalPlaneYResolution",37392:"FocalPlaneResolutionUnit",37393:"ImageNumber",37398:"TIFF/EPStandardID",37399:"SensingMethod",37500:"MakerNote",37510:"UserComment",37724:"ImageSourceData",40092:"XPComment",40094:"XPKeywords",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelXDimension",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50733:"BayerGreenSplit",50738:"AntiAliasStrength",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50727:"AnalogBalance",50728:"AsShotNeutral",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50739:"ShadowScale",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50781:"RawDataUniqueID",50827:"OriginalRawFileName",50829:"ActiveArea",50830:"MaskedAreas",50931:"CameraCalibrationSignature",50932:"ProfileCalibrationSignature",50935:"NoiseReductionApplied",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:"ProfileEmbedPolicy",50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50969:"PreviewSettingsDigest",50970:"PreviewColorSpace",50971:"PreviewDateTime",50972:"RawImageDigest",51008:"OpcodeList1",51009:"OpcodeList2",51022:"OpcodeList3",51041:"NoiseProfile",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualityFinalSize",51091:"OriginalDefaultCropSize",51125:"DefaultUserCrop"},_.ttypes={256:3,257:3,258:3,259:3,262:3,273:4,274:3,277:3,278:4,279:4,282:5,283:5,284:3,286:5,287:5,296:3,305:2,306:2,338:3,513:4,514:4,34665:4},_._readIFD=function(v,y,b,x){var T=v.readUshort(y,b);b+=2;var I={};x.push(I);for(var S=0;S<T;S++){var M=v.readUshort(y,b);b+=2;var A=v.readUshort(y,b);b+=2;var P=v.readUint(y,b);b+=4;var O=v.readUint(y,b);b+=4;var k=[];if(I["t"+M]=k,1==A||7==A)for(var R=0;R<P;R++)k.push(y[(P<5?b-4:O)+R]);if(2==A&&k.push(v.readASCII(y,P<5?b-4:O,P-1)),3==A)for(R=0;R<P;R++)k.push(v.readUshort(y,(P<3?b-4:O)+2*R));if(4==A)for(R=0;R<P;R++)k.push(v.readUint(y,(P<2?b-4:O)+4*R));if(5==A)for(R=0;R<P;R++)k.push(v.readUint(y,O+8*R)/v.readUint(y,O+8*R+4));if(8==A)for(R=0;R<P;R++)k.push(v.readShort(y,(P<3?b-4:O)+2*R));if(9==A)for(R=0;R<P;R++)k.push(v.readInt(y,(P<2?b-4:O)+4*R));if(10==A)for(R=0;R<P;R++)k.push(v.readInt(y,O+8*R)/v.readInt(y,O+8*R+4));if(11==A)for(R=0;R<P;R++)k.push(v.readFloat(y,O+4*R));if(12==A)for(R=0;R<P;R++)k.push(v.readDouble(y,O+8*R));if(0!=P&&0==k.length&&log("unknown TIFF tag type: ",A,"num:",P),330==M)for(R=0;R<P;R++)_._readIFD(v,y,k[R],x)}return b},_._writeIFD=function(v,y,b,x){var T=Object.keys(x);v.writeUshort(y,b,T.length);for(var I=(b+=2)+12*T.length+4,S=0;S<T.length;S++){var M=T[S],A=parseInt(M.slice(1)),P=_.ttypes[A];if(null==P)throw new Error("unknown type of tag: "+A);var O=x[M];2==P&&(O=O[0]+"\0");var k=O.length;v.writeUshort(y,b,A),b+=2,v.writeUshort(y,b,P),b+=2,v.writeUint(y,b,k);var R=[-1,1,1,2,4,8,0,0,0,0,0,0,8][P]*k,L=b+=4;if(R>4&&(v.writeUint(y,b,I),L=I),2==P&&v.writeASCII(y,L,O),3==P)for(var B=0;B<k;B++)v.writeUshort(y,L+2*B,O[B]);if(4==P)for(B=0;B<k;B++)v.writeUint(y,L+4*B,O[B]);if(5==P)for(B=0;B<k;B++)v.writeUint(y,L+8*B,Math.round(1e4*O[B])),v.writeUint(y,L+8*B+4,1e4);if(12==P)for(B=0;B<k;B++)v.writeDouble(y,L+8*B,O[B]);R>4&&(I+=R+=1&R),b+=4}return[b,I]},_.toRGBA8=function(_){var v=_.width,y=_.height,b=v*y,x=4*b,T=_.data,I=new Uint8Array(4*b),S=_.t262[0],M=_.t258?Math.min(32,_.t258[0]):1,A=_.isLE?1:0;if(0==S)for(var P=Math.ceil(M*v/8),O=0;O<y;O++){var k=O*P,R=O*v;if(1==M)for(var L=0;L<v;L++){var B=R+L<<2,j=T[k+(L>>3)]>>7-(7&L)&1;I[B]=I[B+1]=I[B+2]=255*(1-j),I[B+3]=255}if(4==M)for(L=0;L<v;L++){B=R+L<<2,j=T[k+(L>>1)]>>4-4*(1&L)&15;I[B]=I[B+1]=I[B+2]=17*(15-j),I[B+3]=255}if(8==M)for(L=0;L<v;L++){B=R+L<<2,j=T[k+L];I[B]=I[B+1]=I[B+2]=255-j,I[B+3]=255}}else if(1==S)for(P=Math.ceil(M*v/8),O=0;O<y;O++){k=O*P,R=O*v;if(1==M)for(L=0;L<v;L++){B=R+L<<2,j=T[k+(L>>3)]>>7-(7&L)&1;I[B]=I[B+1]=I[B+2]=255*j,I[B+3]=255}if(2==M)for(L=0;L<v;L++){B=R+L<<2,j=T[k+(L>>2)]>>6-2*(3&L)&3;I[B]=I[B+1]=I[B+2]=85*j,I[B+3]=255}if(8==M)for(L=0;L<v;L++){B=R+L<<2,j=T[k+L];I[B]=I[B+1]=I[B+2]=j,I[B+3]=255}if(16==M)for(L=0;L<v;L++){B=R+L<<2,j=T[k+(2*L+A)];I[B]=I[B+1]=I[B+2]=Math.min(255,j),I[B+3]=255}}else if(2==S)if(8==M)if(_.t338)if(_.t338[0]>0)for(L=0;L<x;L++)I[L]=T[L];else for(L=0;L<x;L+=4)I[L]=T[L],I[L+1]=T[L+1],I[L+2]=T[L+2],I[L+3]=255;else{if(4==(H=_.t258?_.t258.length:3))for(L=0;L<x;L++)I[L]=T[L];if(3==H)for(L=0;L<b;L++){var U=3*L;I[B=L<<2]=T[U],I[B+1]=T[U+1],I[B+2]=T[U+2],I[B+3]=255}}else for(L=0;L<b;L++){U=6*L;I[B=L<<2]=T[U],I[B+1]=T[U+2],I[B+2]=T[U+4],I[B+3]=255}else if(3==S){var z=_.t320;for(L=0;L<b;L++){B=L<<2;var G=T[L];I[B]=z[G]>>8,I[B+1]=z[256+G]>>8,I[B+2]=z[512+G]>>8,I[B+3]=255}}else if(5==S){var H,V=(H=_.t258?_.t258.length:4)>4?1:0;for(L=0;L<b;L++){B=L<<2;var $=L*H,K=255-T[$],ee=255-T[$+1],re=255-T[$+2],ie=(255-T[$+3])*(1/255);I[B]=~~(K*ie+.5),I[B+1]=~~(ee*ie+.5),I[B+2]=~~(re*ie+.5),I[B+3]=255*(1-V)+T[$+4]*V}}else log("Unknown Photometric interpretation: "+S);return I},_.replaceIMG=function(){for(var v=document.getElementsByTagName("img"),y=0;y<v.length;y++){var b=v[y],x=b.getAttribute("src");if(null!=x){var T=x.split(".").pop().toLowerCase();if("tif"==T||"tiff"==T){var I=new XMLHttpRequest;_._xhrs.push(I),_._imgs.push(b),I.open("GET",x),I.responseType="arraybuffer",I.onload=_._imgLoaded,I.send()}}}},_._xhrs=[],_._imgs=[],_._imgLoaded=function(v){var y=v.target.response,b=_.decode(y),x=b[0];_.decodeImages(y,b);var T=_.toRGBA8(x),I=x.width,S=x.height,M=_._xhrs.indexOf(v.target),A=_._imgs[M];_._xhrs.splice(M,1),_._imgs.splice(M,1);var P=document.createElement("canvas");P.width=I,P.height=S;for(var O=P.getContext("2d"),k=O.createImageData(I,S),R=0;R<T.length;R++)k.data[R]=T[R];O.putImageData(k,0,0);var L=["style","class","id"];for(R=0;R<L.length;R++)P.setAttribute(L[R],A.getAttribute(L[R]));A.parentNode.replaceChild(P,A)},_._binBE={nextZero:function(_,v){for(;0!=_[v];)v++;return v},readUshort:function(_,v){return _[v]<<8|_[v+1]},readShort:function(v,y){var b=_._binBE.ui8;return b[0]=v[y+1],b[1]=v[y+0],_._binBE.i16[0]},readInt:function(v,y){var b=_._binBE.ui8;return b[0]=v[y+3],b[1]=v[y+2],b[2]=v[y+1],b[3]=v[y+0],_._binBE.i32[0]},readUint:function(v,y){var b=_._binBE.ui8;return b[0]=v[y+3],b[1]=v[y+2],b[2]=v[y+1],b[3]=v[y+0],_._binBE.ui32[0]},readASCII:function(_,v,y){for(var b="",x=0;x<y;x++)b+=String.fromCharCode(_[v+x]);return b},readFloat:function(v,y){for(var b=_._binBE.ui8,x=0;x<4;x++)b[x]=v[y+3-x];return _._binBE.fl32[0]},readDouble:function(v,y){for(var b=_._binBE.ui8,x=0;x<8;x++)b[x]=v[y+7-x];return _._binBE.fl64[0]},writeUshort:function(_,v,y){_[v]=y>>8&255,_[v+1]=255&y},writeUint:function(_,v,y){_[v]=y>>24&255,_[v+1]=y>>16&255,_[v+2]=y>>8&255,_[v+3]=y>>0&255},writeASCII:function(_,v,y){for(var b=0;b<y.length;b++)_[v+b]=y.charCodeAt(b)},writeDouble:function(v,y,b){_._binBE.fl64[0]=b;for(var x=0;x<8;x++)v[y+x]=_._binBE.ui8[7-x]}},_._binBE.ui8=new Uint8Array(8),_._binBE.i16=new Int16Array(_._binBE.ui8.buffer),_._binBE.i32=new Int32Array(_._binBE.ui8.buffer),_._binBE.ui32=new Uint32Array(_._binBE.ui8.buffer),_._binBE.fl32=new Float32Array(_._binBE.ui8.buffer),_._binBE.fl64=new Float64Array(_._binBE.ui8.buffer),_._binLE={nextZero:_._binBE.nextZero,readUshort:function(_,v){return _[v+1]<<8|_[v]},readShort:function(v,y){var b=_._binBE.ui8;return b[0]=v[y+0],b[1]=v[y+1],_._binBE.i16[0]},readInt:function(v,y){var b=_._binBE.ui8;return b[0]=v[y+0],b[1]=v[y+1],b[2]=v[y+2],b[3]=v[y+3],_._binBE.i32[0]},readUint:function(v,y){var b=_._binBE.ui8;return b[0]=v[y+0],b[1]=v[y+1],b[2]=v[y+2],b[3]=v[y+3],_._binBE.ui32[0]},readASCII:_._binBE.readASCII,readFloat:function(v,y){for(var b=_._binBE.ui8,x=0;x<4;x++)b[x]=v[y+x];return _._binBE.fl32[0]},readDouble:function(v,y){for(var b=_._binBE.ui8,x=0;x<8;x++)b[x]=v[y+x];return _._binBE.fl64[0]}},_._copyTile=function(_,v,y,b,x,T,I,S){for(var M=Math.min(v,x-I),A=Math.min(y,T-S),P=0;P<A;P++)for(var O=(S+P)*x+I,k=P*v,R=0;R<M;R++)b[O+R]=_[k+R]}}(v,y(9591))}()},8361:(_,v,y)=>{var b=Object.create,x=Object.defineProperty,T=Object.getOwnPropertyDescriptor,I=Object.getOwnPropertyNames,S=Object.getOwnPropertySymbols,M=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,df=(_,v,y)=>v in _?x(_,v,{enumerable:!0,configurable:!0,writable:!0,value:y}):_[v]=y,It=(_,v)=>{for(var y in v||(v={}))A.call(v,y)&&df(_,y,v[y]);if(S)for(var y of S(v))P.call(v,y)&&df(_,y,v[y]);return _},hf=_=>x(_,"__esModule",{value:!0}),l=(_,v)=>()=>(v||_((v={exports:{}}).exports,v),v.exports),Ai=_=>((_,v,y)=>{if(v&&"object"==typeof v||"function"==typeof v)for(let b of I(v))!A.call(_,b)&&"default"!==b&&x(_,b,{get:()=>v[b],enumerable:!(y=T(v,b))||y.enumerable});return _})(hf(x(null!=_?b(M(_)):{},"default",_&&_.__esModule&&"default"in _?{get:()=>_.default,enumerable:!0}:{value:_,enumerable:!0})),_),O=l((_,v)=>{"use strict";var y=function(){function e(){}return e.info=function(_){for(var v=[],y=1;y<arguments.length;y++)v[y-1]=arguments[y];e.enableDebug&&console.info(e.TAG+_,v)},e.warn=function(_){for(var v=[],y=1;y<arguments.length;y++)v[y-1]=arguments[y];e.disableWarnings||console.warn(e.TAG+_,v)},e.enableDebug=!1,e.disableWarnings=!1,e.disableErrors=!1,e.TAG="ApplicationInsights:",e}();v.exports=y}),k=l(_=>{"use strict";var v=_&&_.__assign||function(){return(v=Object.assign||function(_){for(var v,y=1,b=arguments.length;y<b;y++)for(var x in v=arguments[y])Object.prototype.hasOwnProperty.call(v,x)&&(_[x]=v[x]);return _}).apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.AsyncScopeManager=_.OpenTelemetryScopeManagerWrapper=void 0;var b=dn(),x=y(2361),T=function(){function e(){}return e.prototype.active=function(){var _=this,y=b.CorrelationContextManager.getCurrentContext();return v(v({},y),{getValue:function(v){return _._activeSymbol?v===_._activeSymbol&&y:(_._activeSymbol=v,y)},setValue:function(){}})},e.prototype.with=function(_,v){var y=_.parentSpanId,x=_.name,T=e._spanToContext(_,y,x);return b.CorrelationContextManager.runWithContext(T,v)()},e.prototype.bind=function(_){return"function"==typeof _?b.CorrelationContextManager.wrapCallback(_):(_ instanceof x.EventEmitter&&b.CorrelationContextManager.wrapEmitter(_),_)},e.prototype.enable=function(){return b.CorrelationContextManager.enable(),this},e.prototype.disable=function(){return b.CorrelationContextManager.disable(),this},e._spanToContext=function(_,y,x){var T=y?"|"+_.spanContext().traceId+"."+y+".":_.spanContext().traceId,I=v(v({},_.spanContext()),{traceFlags:_.spanContext().traceFlags});return b.CorrelationContextManager.spanToContextObject(I,T,x)},e}();_.OpenTelemetryScopeManagerWrapper=T,_.AsyncScopeManager=new T}),R=l((_,v)=>{var y;_=v.exports=N,y="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var _=Array.prototype.slice.call(arguments,0);_.unshift("SEMVER"),console.log.apply(console,_)}:function(){},_.SEMVER_SPEC_VERSION="2.0.0";var b=Number.MAX_SAFE_INTEGER||9007199254740991,x=_.re=[],T=_.src=[],I=0,S=I++;T[S]="0|[1-9]\\d*";var M=I++;T[M]="[0-9]+";var A=I++;T[A]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var P=I++;T[P]="("+T[S]+")\\.("+T[S]+")\\.("+T[S]+")";var O=I++;T[O]="("+T[M]+")\\.("+T[M]+")\\.("+T[M]+")";var k=I++;T[k]="(?:"+T[S]+"|"+T[A]+")";var R=I++;T[R]="(?:"+T[M]+"|"+T[A]+")";var L=I++;T[L]="(?:-("+T[k]+"(?:\\."+T[k]+")*))";var B=I++;T[B]="(?:-?("+T[R]+"(?:\\."+T[R]+")*))";var j=I++;T[j]="[0-9A-Za-z-]+";var U=I++;T[U]="(?:\\+("+T[j]+"(?:\\."+T[j]+")*))";var z=I++,G="v?"+T[P]+T[L]+"?"+T[U]+"?";T[z]="^"+G+"$";var H="[v=\\s]*"+T[O]+T[B]+"?"+T[U]+"?",V=I++;T[V]="^"+H+"$";var $=I++;T[$]="((?:<|>)?=?)";var K=I++;T[K]=T[M]+"|x|X|\\*";var ee=I++;T[ee]=T[S]+"|x|X|\\*";var re=I++;T[re]="[v=\\s]*("+T[ee]+")(?:\\.("+T[ee]+")(?:\\.("+T[ee]+")(?:"+T[L]+")?"+T[U]+"?)?)?";var ie=I++;T[ie]="[v=\\s]*("+T[K]+")(?:\\.("+T[K]+")(?:\\.("+T[K]+")(?:"+T[B]+")?"+T[U]+"?)?)?";var ne=I++;T[ne]="^"+T[$]+"\\s*"+T[re]+"$";var ae=I++;T[ae]="^"+T[$]+"\\s*"+T[ie]+"$";var oe=I++;T[oe]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var se=I++;T[se]="(?:~>?)";var ce=I++;T[ce]="(\\s*)"+T[se]+"\\s+",x[ce]=new RegExp(T[ce],"g");var ue=I++;T[ue]="^"+T[se]+T[re]+"$";var pe=I++;T[pe]="^"+T[se]+T[ie]+"$";var he=I++;T[he]="(?:\\^)";var de=I++;T[de]="(\\s*)"+T[he]+"\\s+",x[de]=new RegExp(T[de],"g");var fe=I++;T[fe]="^"+T[he]+T[re]+"$";var me=I++;T[me]="^"+T[he]+T[ie]+"$";var ge=I++;T[ge]="^"+T[$]+"\\s*("+H+")$|^$";var _e=I++;T[_e]="^"+T[$]+"\\s*("+G+")$|^$";var ve=I++;T[ve]="(\\s*)"+T[$]+"\\s*("+H+"|"+T[re]+")",x[ve]=new RegExp(T[ve],"g");var ye=I++;T[ye]="^\\s*("+T[re]+")\\s+-\\s+("+T[re]+")\\s*$";var be=I++;T[be]="^\\s*("+T[ie]+")\\s+-\\s+("+T[ie]+")\\s*$";var Ee,xe=I++;for(T[xe]="(<|>)?=?\\s*\\*",Ee=0;Ee<35;Ee++)y(Ee,T[Ee]),x[Ee]||(x[Ee]=new RegExp(T[Ee]));function mr(_,v){if((!v||"object"!=typeof v)&&(v={loose:!!v,includePrerelease:!1}),_ instanceof N)return _;if("string"!=typeof _||_.length>256)return null;if(!(v.loose?x[V]:x[z]).test(_))return null;try{return new N(_,v)}catch(_){return null}}function N(_,v){if((!v||"object"!=typeof v)&&(v={loose:!!v,includePrerelease:!1}),_ instanceof N){if(_.loose===v.loose)return _;_=_.version}else if("string"!=typeof _)throw new TypeError("Invalid Version: "+_);if(_.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof N))return new N(_,v);y("SemVer",_,v),this.options=v,this.loose=!!v.loose;var T=_.trim().match(v.loose?x[V]:x[z]);if(!T)throw new TypeError("Invalid Version: "+_);if(this.raw=_,this.major=+T[1],this.minor=+T[2],this.patch=+T[3],this.major>b||this.major<0)throw new TypeError("Invalid major version");if(this.minor>b||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>b||this.patch<0)throw new TypeError("Invalid patch version");T[4]?this.prerelease=T[4].split(".").map((function(_){if(/^[0-9]+$/.test(_)){var v=+_;if(v>=0&&v<b)return v}return _})):this.prerelease=[],this.build=T[5]?T[5].split("."):[],this.format()}_.parse=mr,_.valid=function mS(_,v){var y=mr(_,v);return y?y.version:null},_.clean=function yS(_,v){var y=mr(_.trim().replace(/^[=v]+/,""),v);return y?y.version:null},_.SemVer=N,N.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},N.prototype.toString=function(){return this.version},N.prototype.compare=function(_){return y("SemVer.compare",this.version,this.options,_),_ instanceof N||(_=new N(_,this.options)),this.compareMain(_)||this.comparePre(_)},N.prototype.compareMain=function(_){return _ instanceof N||(_=new N(_,this.options)),ln(this.major,_.major)||ln(this.minor,_.minor)||ln(this.patch,_.patch)},N.prototype.comparePre=function(_){if(_ instanceof N||(_=new N(_,this.options)),this.prerelease.length&&!_.prerelease.length)return-1;if(!this.prerelease.length&&_.prerelease.length)return 1;if(!this.prerelease.length&&!_.prerelease.length)return 0;var v=0;do{var b=this.prerelease[v],x=_.prerelease[v];if(y("prerelease compare",v,b,x),void 0===b&&void 0===x)return 0;if(void 0===x)return 1;if(void 0===b)return-1;if(b!==x)return ln(b,x)}while(++v)},N.prototype.inc=function(_,v){switch(_){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",v);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",v);break;case"prepatch":this.prerelease.length=0,this.inc("patch",v),this.inc("pre",v);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",v),this.inc("pre",v);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var y=this.prerelease.length;--y>=0;)"number"==typeof this.prerelease[y]&&(this.prerelease[y]++,y=-2);-1===y&&this.prerelease.push(0)}v&&(this.prerelease[0]===v?isNaN(this.prerelease[1])&&(this.prerelease=[v,0]):this.prerelease=[v,0]);break;default:throw new Error("invalid increment argument: "+_)}return this.format(),this.raw=this.version,this},_.inc=function TS(_,v,y,b){"string"==typeof y&&(b=y,y=void 0);try{return new N(_,y).inc(v,b).version}catch(_){return null}},_.diff=function SS(_,v){if(wu(_,v))return null;var y=mr(_),b=mr(v),x="";if(y.prerelease.length||b.prerelease.length){x="pre";var T="prerelease"}for(var I in y)if(("major"===I||"minor"===I||"patch"===I)&&y[I]!==b[I])return x+I;return T},_.compareIdentifiers=ln;var Te=/^[0-9]+$/;function ln(_,v){var y=Te.test(_),b=Te.test(v);return y&&b&&(_=+_,v=+v),_===v?0:y&&!b?-1:b&&!y?1:_<v?-1:1}function bt(_,v,y){return new N(_,y).compare(new N(v,y))}function Oi(_,v,y){return bt(_,v,y)>0}function Ba(_,v,y){return bt(_,v,y)<0}function wu(_,v,y){return 0===bt(_,v,y)}function Df(_,v,y){return 0!==bt(_,v,y)}function xu(_,v,y){return bt(_,v,y)>=0}function Mu(_,v,y){return bt(_,v,y)<=0}function Ga(_,v,y,b){switch(v){case"===":return"object"==typeof _&&(_=_.version),"object"==typeof y&&(y=y.version),_===y;case"!==":return"object"==typeof _&&(_=_.version),"object"==typeof y&&(y=y.version),_!==y;case"":case"=":case"==":return wu(_,y,b);case"!=":return Df(_,y,b);case">":return Oi(_,y,b);case">=":return xu(_,y,b);case"<":return Ba(_,y,b);case"<=":return Mu(_,y,b);default:throw new TypeError("Invalid operator: "+v)}}function $e(_,v){if((!v||"object"!=typeof v)&&(v={loose:!!v,includePrerelease:!1}),_ instanceof $e){if(_.loose===!!v.loose)return _;_=_.value}if(!(this instanceof $e))return new $e(_,v);y("comparator",_,v),this.options=v,this.loose=!!v.loose,this.parse(_),this.semver===Ie?this.value="":this.value=this.operator+this.semver.version,y("comp",this)}_.rcompareIdentifiers=function AS(_,v){return ln(v,_)},_.major=function IS(_,v){return new N(_,v).major},_.minor=function bS(_,v){return new N(_,v).minor},_.patch=function CS(_,v){return new N(_,v).patch},_.compare=bt,_.compareLoose=function OS(_,v){return bt(_,v,!0)},_.rcompare=function PS(_,v,y){return bt(v,_,y)},_.sort=function RS(v,y){return v.sort((function(v,b){return _.compare(v,b,y)}))},_.rsort=function NS(v,y){return v.sort((function(v,b){return _.rcompare(v,b,y)}))},_.gt=Oi,_.lt=Ba,_.eq=wu,_.neq=Df,_.gte=xu,_.lte=Mu,_.cmp=Ga,_.Comparator=$e;var Ie={};function Z(_,v){if((!v||"object"!=typeof v)&&(v={loose:!!v,includePrerelease:!1}),_ instanceof Z)return _.loose===!!v.loose&&_.includePrerelease===!!v.includePrerelease?_:new Z(_.raw,v);if(_ instanceof $e)return new Z(_.value,v);if(!(this instanceof Z))return new Z(_,v);if(this.options=v,this.loose=!!v.loose,this.includePrerelease=!!v.includePrerelease,this.raw=_,this.set=_.split(/\s*\|\|\s*/).map((function(_){return this.parseRange(_.trim())}),this).filter((function(_){return _.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+_);this.format()}function Re(_){return!_||"x"===_.toLowerCase()||"*"===_}function US(_,v,y,b,x,T,I,S,M,A,P,O,k){return((v=Re(y)?"":Re(b)?">="+y+".0.0":Re(x)?">="+y+"."+b+".0":">="+v)+" "+(S=Re(M)?"":Re(A)?"<"+(+M+1)+".0.0":Re(P)?"<"+M+"."+(+A+1)+".0":O?"<="+M+"."+A+"."+P+"-"+O:"<="+S)).trim()}function BS(_,v,b){for(var x=0;x<_.length;x++)if(!_[x].test(v))return!1;if(v.prerelease.length&&!b.includePrerelease){for(x=0;x<_.length;x++)if(y(_[x].semver),_[x].semver!==Ie&&_[x].semver.prerelease.length>0){var T=_[x].semver;if(T.major===v.major&&T.minor===v.minor&&T.patch===v.patch)return!0}return!1}return!0}function Fa(_,v,y){try{v=new Z(v,y)}catch(_){return!1}return v.test(_)}function Lu(_,v,y,b){var x,T,I,S,M;switch(_=new N(_,b),v=new Z(v,b),y){case">":x=Oi,T=Mu,I=Ba,S=">",M=">=";break;case"<":x=Ba,T=xu,I=Oi,S="<",M="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Fa(_,v,b))return!1;for(var A=0;A<v.set.length;++A){var P=v.set[A],O=null,k=null;if(P.forEach((function(_){_.semver===Ie&&(_=new $e(">=0.0.0")),O=O||_,k=k||_,x(_.semver,O.semver,b)?O=_:I(_.semver,k.semver,b)&&(k=_)})),O.operator===S||O.operator===M||(!k.operator||k.operator===S)&&T(_,k.semver))return!1;if(k.operator===M&&I(_,k.semver))return!1}return!0}$e.prototype.parse=function(_){var v=this.options.loose?x[ge]:x[_e],y=_.match(v);if(!y)throw new TypeError("Invalid comparator: "+_);this.operator=y[1],"="===this.operator&&(this.operator=""),y[2]?this.semver=new N(y[2],this.options.loose):this.semver=Ie},$e.prototype.toString=function(){return this.value},$e.prototype.test=function(_){return y("Comparator.test",_,this.options.loose),this.semver===Ie||("string"==typeof _&&(_=new N(_,this.options)),Ga(_,this.operator,this.semver,this.options))},$e.prototype.intersects=function(_,v){if(!(_ instanceof $e))throw new TypeError("a Comparator is required");var y;if((!v||"object"!=typeof v)&&(v={loose:!!v,includePrerelease:!1}),""===this.operator)return y=new Z(_.value,v),Fa(this.value,y,v);if(""===_.operator)return y=new Z(this.value,v),Fa(_.semver,y,v);var b=!(">="!==this.operator&&">"!==this.operator||">="!==_.operator&&">"!==_.operator),x=!("<="!==this.operator&&"<"!==this.operator||"<="!==_.operator&&"<"!==_.operator),T=this.semver.version===_.semver.version,I=!(">="!==this.operator&&"<="!==this.operator||">="!==_.operator&&"<="!==_.operator),S=Ga(this.semver,"<",_.semver,v)&&(">="===this.operator||">"===this.operator)&&("<="===_.operator||"<"===_.operator),M=Ga(this.semver,">",_.semver,v)&&("<="===this.operator||"<"===this.operator)&&(">="===_.operator||">"===_.operator);return b||x||T&&I||S||M},_.Range=Z,Z.prototype.format=function(){return this.range=this.set.map((function(_){return _.join(" ").trim()})).join("||").trim(),this.range},Z.prototype.toString=function(){return this.range},Z.prototype.parseRange=function(_){var v=this.options.loose;_=_.trim();var b=v?x[be]:x[ye];_=_.replace(b,US),y("hyphen replace",_),_=_.replace(x[ve],"$1$2$3"),y("comparator trim",_,x[ve]),_=(_=(_=_.replace(x[ce],"$1~")).replace(x[de],"$1^")).split(/\s+/).join(" ");var T=v?x[ge]:x[_e],I=_.split(" ").map((function(_){return function wS(_,v){return y("comp",_,v),_=function LS(_,v){return _.trim().split(/\s+/).map((function(_){return function qS(_,v){y("caret",_,v);var b=v.loose?x[me]:x[fe];return _.replace(b,(function(v,b,x,T,I){var S;return y("caret",_,v,b,x,T,I),Re(b)?S="":Re(x)?S=">="+b+".0.0 <"+(+b+1)+".0.0":Re(T)?S="0"===b?">="+b+"."+x+".0 <"+b+"."+(+x+1)+".0":">="+b+"."+x+".0 <"+(+b+1)+".0.0":I?(y("replaceCaret pr",I),S="0"===b?"0"===x?">="+b+"."+x+"."+T+"-"+I+" <"+b+"."+x+"."+(+T+1):">="+b+"."+x+"."+T+"-"+I+" <"+b+"."+(+x+1)+".0":">="+b+"."+x+"."+T+"-"+I+" <"+(+b+1)+".0.0"):(y("no pr"),S="0"===b?"0"===x?">="+b+"."+x+"."+T+" <"+b+"."+x+"."+(+T+1):">="+b+"."+x+"."+T+" <"+b+"."+(+x+1)+".0":">="+b+"."+x+"."+T+" <"+(+b+1)+".0.0"),y("caret return",S),S}))}(_,v)})).join(" ")}(_,v),y("caret",_),_=function xS(_,v){return _.trim().split(/\s+/).map((function(_){return function MS(_,v){var b=v.loose?x[pe]:x[ue];return _.replace(b,(function(v,b,x,T,I){var S;return y("tilde",_,v,b,x,T,I),Re(b)?S="":Re(x)?S=">="+b+".0.0 <"+(+b+1)+".0.0":Re(T)?S=">="+b+"."+x+".0 <"+b+"."+(+x+1)+".0":I?(y("replaceTilde pr",I),S=">="+b+"."+x+"."+T+"-"+I+" <"+b+"."+(+x+1)+".0"):S=">="+b+"."+x+"."+T+" <"+b+"."+(+x+1)+".0",y("tilde return",S),S}))}(_,v)})).join(" ")}(_,v),y("tildes",_),_=function jS(_,v){return y("replaceXRanges",_,v),_.split(/\s+/).map((function(_){return function kS(_,v){_=_.trim();var b=v.loose?x[ae]:x[ne];return _.replace(b,(function(v,b,x,T,I,S){y("xRange",_,v,b,x,T,I,S);var M=Re(x),A=M||Re(T),P=A||Re(I);return"="===b&&P&&(b=""),M?v=">"===b||"<"===b?"<0.0.0":"*":b&&P?(A&&(T=0),I=0,">"===b?(b=">=",A?(x=+x+1,T=0,I=0):(T=+T+1,I=0)):"<="===b&&(b="<",A?x=+x+1:T=+T+1),v=b+x+"."+T+"."+I):A?v=">="+x+".0.0 <"+(+x+1)+".0.0":P&&(v=">="+x+"."+T+".0 <"+x+"."+(+T+1)+".0"),y("xRange return",v),v}))}(_,v)})).join(" ")}(_,v),y("xrange",_),_=function HS(_,v){return y("replaceStars",_,v),_.trim().replace(x[xe],"")}(_,v),y("stars",_),_}(_,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(I=I.filter((function(_){return!!_.match(T)}))),I=I.map((function(_){return new $e(_,this.options)}),this)},Z.prototype.intersects=function(_,v){if(!(_ instanceof Z))throw new TypeError("a Range is required");return this.set.some((function(y){return y.every((function(y){return _.set.some((function(_){return _.every((function(_){return y.intersects(_,v)}))}))}))}))},_.toComparators=function DS(_,v){return new Z(_,v).set.map((function(_){return _.map((function(_){return _.value})).join(" ").trim().split(" ")}))},Z.prototype.test=function(_){if(!_)return!1;"string"==typeof _&&(_=new N(_,this.options));for(var v=0;v<this.set.length;v++)if(BS(this.set[v],_,this.options))return!0;return!1},_.satisfies=Fa,_.maxSatisfying=function GS(_,v,y){var b=null,x=null;try{var T=new Z(v,y)}catch(_){return null}return _.forEach((function(_){T.test(_)&&(!b||-1===x.compare(_))&&(x=new N(b=_,y))})),b},_.minSatisfying=function FS(_,v,y){var b=null,x=null;try{var T=new Z(v,y)}catch(_){return null}return _.forEach((function(_){T.test(_)&&(!b||1===x.compare(_))&&(x=new N(b=_,y))})),b},_.minVersion=function VS(_,v){_=new Z(_,v);var y=new N("0.0.0");if(_.test(y)||(y=new N("0.0.0-0"),_.test(y)))return y;y=null;for(var b=0;b<_.set.length;++b){_.set[b].forEach((function(_){var v=new N(_.semver.version);switch(_.operator){case">":0===v.prerelease.length?v.patch++:v.prerelease.push(0),v.raw=v.format();case"":case">=":(!y||Oi(y,v))&&(y=v);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+_.operator)}}))}return y&&_.test(y)?y:null},_.validRange=function $S(_,v){try{return new Z(_,v).range||"*"}catch(_){return null}},_.ltr=function zS(_,v,y){return Lu(_,v,"<",y)},_.gtr=function KS(_,v,y){return Lu(_,v,">",y)},_.outside=Lu,_.prerelease=function XS(_,v){var y=mr(_,v);return y&&y.prerelease.length?y.prerelease:null},_.intersects=function YS(_,v,y){return _=new Z(_,y),v=new Z(v,y),_.intersects(v)},_.coerce=function QS(_){if(_ instanceof N)return _;if("string"!=typeof _)return null;var v=_.match(x[oe]);return null==v?null:mr(v[1]+"."+(v[2]||"0")+"."+(v[3]||"0"))}}),L=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.makePatchingRequire=void 0;var v=y(1017),b=R(),x=y(8188),T=Object.keys(process.binding("natives")),I=x.prototype.require;_.makePatchingRequire=function eA(_){var y={};return function(S){var M=I.apply(this,arguments);if(_[S]){var A=x._resolveFilename(S,this);if(y.hasOwnProperty(A))return y[A];var P=void 0;if(T.indexOf(S)<0)try{P=I.call(this,v.join(S,"package.json")).version}catch(_){return M}else P=process.version.substring(1);var O=P.indexOf("-");O>=0&&(P=P.substring(0,O));for(var k=M,R=0,L=_[S];R<L.length;R++){var B=L[R];b.satisfies(P,B.versionSpecifier)&&(k=B.patch(k,A))}return y[A]=k}return M}}}),B=l((_,v)=>{v.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}}),j=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.channel=_.makePatchingRequire=void 0;var v=L(),b=L();Object.defineProperty(_,"makePatchingRequire",{enumerable:!0,get:function(){return b.makePatchingRequire}});var jf=function(_){return!0},x=function(){function e(){this.version=B().version,this.subscribers={},this.contextPreservationFunction=function(_){return _},this.knownPatches={},this.currentlyPublishing=!1}return e.prototype.shouldPublish=function(_){var v=this.subscribers[_];return!!v&&v.some((function(_){var v=_.filter;return!v||v(!1)}))},e.prototype.publish=function(_,v){if(!this.currentlyPublishing){var y=this.subscribers[_];if(y){var b={timestamp:Date.now(),data:v};this.currentlyPublishing=!0,y.forEach((function(_){var v=_.listener,y=_.filter;try{y&&y(!0)&&v(b)}catch(_){}})),this.currentlyPublishing=!1}}},e.prototype.subscribe=function(_,v,y){void 0===y&&(y=jf),this.subscribers[_]||(this.subscribers[_]=[]),this.subscribers[_].push({listener:v,filter:y})},e.prototype.unsubscribe=function(_,v,y){void 0===y&&(y=jf);var b=this.subscribers[_];if(b)for(var x=0;x<b.length;++x)if(b[x].listener===v&&b[x].filter===y)return b.splice(x,1),!0;return!1},e.prototype.reset=function(){var _=this;this.subscribers={},this.contextPreservationFunction=function(_){return _},Object.getOwnPropertyNames(this.knownPatches).forEach((function(v){return delete _.knownPatches[v]}))},e.prototype.bindToContext=function(_){return this.contextPreservationFunction(_)},e.prototype.addContextPreservation=function(_){var v=this.contextPreservationFunction;this.contextPreservationFunction=function(y){return _(v(y))}},e.prototype.registerMonkeyPatch=function(_,v){this.knownPatches[_]||(this.knownPatches[_]=[]),this.knownPatches[_].push(v)},e.prototype.getPatchesObject=function(){return this.knownPatches},e}();global.diagnosticsSource||(global.diagnosticsSource=new x,y(8188).prototype.require=v.makePatchingRequire(global.diagnosticsSource.getPatchesObject())),_.channel=global.diagnosticsSource}),U=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),z=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_._globalThis=void 0,_._globalThis="object"==typeof globalThis?globalThis:global}),G=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),y(z(),_)}),H=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),y(G(),_)}),V=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.VERSION=void 0,_.VERSION="1.0.3"}),$=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.isCompatible=_._makeCompatibilityCheck=void 0;var v=V(),y=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function $f(_){var v=new Set([_]),b=new Set,x=_.match(y);if(!x)return function(){return!1};var T=+x[1],I=+x[2],S=+x[3];if(null!=x[4])return function(v){return v===_};function a(_){return b.add(_),!1}function s(_){return v.add(_),!0}return function(_){if(v.has(_))return!0;if(b.has(_))return!1;var x=_.match(y);if(!x)return a(_);var M=+x[1],A=+x[2],P=+x[3];return null!=x[4]||T!==M?a(_):0===T?I===A&&S<=P?s(_):a(_):I<=A?s(_):a(_)}}_._makeCompatibilityCheck=$f,_.isCompatible=$f(v.VERSION)}),K=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.unregisterGlobal=_.getGlobal=_.registerGlobal=void 0;var v=H(),y=V(),b=$(),x=y.VERSION.split(".")[0],T=Symbol.for("opentelemetry.js.api."+x),I=v._globalThis;_.registerGlobal=function dA(_,v,b,x){var S;void 0===x&&(x=!1);var M=I[T]=null!==(S=I[T])&&void 0!==S?S:{version:y.VERSION};if(!x&&M[_]){var A=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+_);return b.error(A.stack||A.message),!1}if(M.version!==y.VERSION){A=new Error("@opentelemetry/api: All API registration versions must match");return b.error(A.stack||A.message),!1}return M[_]=v,b.debug("@opentelemetry/api: Registered a global for "+_+" v"+y.VERSION+"."),!0},_.getGlobal=function hA(_){var v,y,x=null===(v=I[T])||void 0===v?void 0:v.version;if(x&&b.isCompatible(x))return null===(y=I[T])||void 0===y?void 0:y[_]},_.unregisterGlobal=function _A(_,v){v.debug("@opentelemetry/api: Unregistering a global for "+_+" v"+y.VERSION+".");var b=I[T];b&&delete b[_]}}),ee=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.DiagComponentLogger=void 0;var v=K(),y=function(){function e(_){this._namespace=_.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var _=[],v=0;v<arguments.length;v++)_[v]=arguments[v];return wi("debug",this._namespace,_)},e.prototype.error=function(){for(var _=[],v=0;v<arguments.length;v++)_[v]=arguments[v];return wi("error",this._namespace,_)},e.prototype.info=function(){for(var _=[],v=0;v<arguments.length;v++)_[v]=arguments[v];return wi("info",this._namespace,_)},e.prototype.warn=function(){for(var _=[],v=0;v<arguments.length;v++)_[v]=arguments[v];return wi("warn",this._namespace,_)},e.prototype.verbose=function(){for(var _=[],v=0;v<arguments.length;v++)_[v]=arguments[v];return wi("verbose",this._namespace,_)},e}();function wi(_,y,b){var x=v.getGlobal("diag");if(x)return b.unshift(y),x[_].apply(x,b)}_.DiagComponentLogger=y}),re=l(_=>{"use strict";var v;Object.defineProperty(_,"__esModule",{value:!0}),_.DiagLogLevel=void 0,(v=_.DiagLogLevel||(_.DiagLogLevel={}))[v.NONE=0]="NONE",v[v.ERROR=30]="ERROR",v[v.WARN=50]="WARN",v[v.INFO=60]="INFO",v[v.DEBUG=70]="DEBUG",v[v.VERBOSE=80]="VERBOSE",v[v.ALL=9999]="ALL"}),ie=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.createLogLevelDiagLogger=void 0;var v=re();_.createLogLevelDiagLogger=function mA(_,y){function r(v,b){var x=y[v];return"function"==typeof x&&_>=b?x.bind(y):function(){}}return _<v.DiagLogLevel.NONE?_=v.DiagLogLevel.NONE:_>v.DiagLogLevel.ALL&&(_=v.DiagLogLevel.ALL),y=y||{},{error:r("error",v.DiagLogLevel.ERROR),warn:r("warn",v.DiagLogLevel.WARN),info:r("info",v.DiagLogLevel.INFO),debug:r("debug",v.DiagLogLevel.DEBUG),verbose:r("verbose",v.DiagLogLevel.VERBOSE)}}}),ne=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.DiagAPI=void 0;var v=ee(),y=ie(),b=re(),x=K(),T=function(){function e(){function t(_){return function(){var v=x.getGlobal("diag");if(v)return v[_].apply(v,arguments)}}var _=this;_.setLogger=function(v,T){var I,S;if(void 0===T&&(T=b.DiagLogLevel.INFO),v===_){var M=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return _.error(null!==(I=M.stack)&&void 0!==I?I:M.message),!1}var A=x.getGlobal("diag"),P=y.createLogLevelDiagLogger(T,v);if(A){var O=null!==(S=(new Error).stack)&&void 0!==S?S:"<failed to generate stacktrace>";A.warn("Current logger will be overwritten from "+O),P.warn("Current logger will overwrite one already registered from "+O)}return x.registerGlobal("diag",P,_,!0)},_.disable=function(){x.unregisterGlobal("diag",_)},_.createComponentLogger=function(_){return new v.DiagComponentLogger(_)},_.verbose=t("verbose"),_.debug=t("debug"),_.info=t("info"),_.warn=t("warn"),_.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();_.DiagAPI=T}),ae=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.BaggageImpl=void 0;var v=function(){function e(_){this._entries=_?new Map(_):new Map}return e.prototype.getEntry=function(_){var v=this._entries.get(_);if(v)return Object.assign({},v)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(_){return[_[0],_[1]]}))},e.prototype.setEntry=function(_,v){var y=new e(this._entries);return y._entries.set(_,v),y},e.prototype.removeEntry=function(_){var v=new e(this._entries);return v._entries.delete(_),v},e.prototype.removeEntries=function(){for(var _=[],v=0;v<arguments.length;v++)_[v]=arguments[v];for(var y=new e(this._entries),b=0,x=_;b<x.length;b++){var T=x[b];y._entries.delete(T)}return y},e.prototype.clear=function(){return new e},e}();_.BaggageImpl=v}),oe=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.baggageEntryMetadataSymbol=void 0,_.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),se=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.baggageEntryMetadataFromString=_.createBaggage=void 0;var v=ne(),y=ae(),b=oe(),x=v.DiagAPI.instance();_.createBaggage=function NA(_){return void 0===_&&(_={}),new y.BaggageImpl(new Map(Object.entries(_)))},_.baggageEntryMetadataFromString=function DA(_){return"string"!=typeof _&&(x.error("Cannot create baggage metadata from unknown type: "+typeof _),_=""),{__TYPE__:b.baggageEntryMetadataSymbol,toString:function(){return _}}}}),ce=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),ue=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),pe=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.DiagConsoleLogger=void 0;var v=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],y=function e(){function t(_){return function(){var v=arguments;if(console){var y=console[_];if("function"!=typeof y&&(y=console.log),"function"==typeof y)return y.apply(console,v)}}}for(var _=0;_<v.length;_++)this[v[_].n]=t(v[_].c)};_.DiagConsoleLogger=y}),he=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),y(pe(),_),y(re(),_)}),de=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.defaultTextMapSetter=_.defaultTextMapGetter=void 0,_.defaultTextMapGetter={get:function(_,v){if(null!=_)return _[v]},keys:function(_){return null==_?[]:Object.keys(_)}},_.defaultTextMapSetter={set:function(_,v,y){null!=_&&(_[v]=y)}}}),fe=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),me=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),ge=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.ROOT_CONTEXT=_.createContextKey=void 0,_.createContextKey=function MA(_){return Symbol.for(_)};var v=function e(_){var v=this;v._currentContext=_?new Map(_):new Map,v.getValue=function(_){return v._currentContext.get(_)},v.setValue=function(_,y){var b=new e(v._currentContext);return b._currentContext.set(_,y),b},v.deleteValue=function(_){var y=new e(v._currentContext);return y._currentContext.delete(_),y}};_.ROOT_CONTEXT=new v}),_e=l(_=>{"use strict";var v=_&&_.__spreadArray||function(_,v){for(var y=0,b=v.length,x=_.length;y<b;y++,x++)_[x]=v[y];return _};Object.defineProperty(_,"__esModule",{value:!0}),_.NoopContextManager=void 0;var y=ge(),b=function(){function e(){}return e.prototype.active=function(){return y.ROOT_CONTEXT},e.prototype.with=function(_,y,b){for(var x=[],T=3;T<arguments.length;T++)x[T-3]=arguments[T];return y.call.apply(y,v([b],x))},e.prototype.bind=function(_,v){return v},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}();_.NoopContextManager=b}),ve=l(_=>{"use strict";var v=_&&_.__spreadArray||function(_,v){for(var y=0,b=v.length,x=_.length;y<b;y++,x++)_[x]=v[y];return _};Object.defineProperty(_,"__esModule",{value:!0}),_.ContextAPI=void 0;var y=_e(),b=K(),x=ne(),T="context",I=new y.NoopContextManager,S=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(_){return b.registerGlobal(T,_,x.DiagAPI.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(_,y,b){for(var x,T=[],I=3;I<arguments.length;I++)T[I-3]=arguments[I];return(x=this._getContextManager()).with.apply(x,v([_,y,b],T))},e.prototype.bind=function(_,v){return this._getContextManager().bind(_,v)},e.prototype._getContextManager=function(){return b.getGlobal(T)||I},e.prototype.disable=function(){this._getContextManager().disable(),b.unregisterGlobal(T,x.DiagAPI.instance())},e}();_.ContextAPI=S}),ye=l(_=>{"use strict";var v;Object.defineProperty(_,"__esModule",{value:!0}),_.TraceFlags=void 0,(v=_.TraceFlags||(_.TraceFlags={}))[v.NONE=0]="NONE",v[v.SAMPLED=1]="SAMPLED"}),be=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.INVALID_SPAN_CONTEXT=_.INVALID_TRACEID=_.INVALID_SPANID=void 0;var v=ye();_.INVALID_SPANID="0000000000000000",_.INVALID_TRACEID="00000000000000000000000000000000",_.INVALID_SPAN_CONTEXT={traceId:_.INVALID_TRACEID,spanId:_.INVALID_SPANID,traceFlags:v.TraceFlags.NONE}}),Ee=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.NonRecordingSpan=void 0;var v=be(),y=function(){function e(_){void 0===_&&(_=v.INVALID_SPAN_CONTEXT),this._spanContext=_}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(_,v){return this},e.prototype.setAttributes=function(_){return this},e.prototype.addEvent=function(_,v){return this},e.prototype.setStatus=function(_){return this},e.prototype.updateName=function(_){return this},e.prototype.end=function(_){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(_,v){},e}();_.NonRecordingSpan=y}),xe=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.getSpanContext=_.setSpanContext=_.deleteSpan=_.setSpan=_.getSpan=void 0;var v=ge(),y=Ee(),b=v.createContextKey("OpenTelemetry Context Key SPAN");function ld(_){return _.getValue(b)||void 0}function pd(_,v){return _.setValue(b,v)}_.getSpan=ld,_.setSpan=pd,_.deleteSpan=function YA(_){return _.deleteValue(b)},_.setSpanContext=function QA(_,v){return pd(_,new y.NonRecordingSpan(v))},_.getSpanContext=function WA(_){var v;return null===(v=ld(_))||void 0===v?void 0:v.spanContext()}}),Te=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.wrapSpanContext=_.isSpanContextValid=_.isValidSpanId=_.isValidTraceId=void 0;var v=be(),y=Ee(),b=/^([0-9a-f]{32})$/i,x=/^[0-9a-f]{16}$/i;function dd(_){return b.test(_)&&_!==v.INVALID_TRACEID}function hd(_){return x.test(_)&&_!==v.INVALID_SPANID}_.isValidTraceId=dd,_.isValidSpanId=hd,_.isSpanContextValid=function tI(_){return dd(_.traceId)&&hd(_.spanId)},_.wrapSpanContext=function rI(_){return new y.NonRecordingSpan(_)}}),Ie=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.NoopTracer=void 0;var v=ve(),y=xe(),b=Ee(),x=Te(),T=v.ContextAPI.getInstance(),I=function(){function e(){}return e.prototype.startSpan=function(_,v,T){if(Boolean(null==v?void 0:v.root))return new b.NonRecordingSpan;var I=T&&y.getSpanContext(T);return function sI(_){return"object"==typeof _&&"string"==typeof _.spanId&&"string"==typeof _.traceId&&"number"==typeof _.traceFlags}(I)&&x.isSpanContextValid(I)?new b.NonRecordingSpan(I):new b.NonRecordingSpan},e.prototype.startActiveSpan=function(_,v,b,x){var I,S,M;if(!(arguments.length<2)){2===arguments.length?M=v:3===arguments.length?(I=v,M=b):(I=v,S=b,M=x);var A=null!=S?S:T.active(),P=this.startSpan(_,I,A),O=y.setSpan(A,P);return T.with(O,M,void 0,P)}},e}();_.NoopTracer=I}),Se=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.ProxyTracer=void 0;var v=new(Ie().NoopTracer),y=function(){function e(_,v,y){this._provider=_,this.name=v,this.version=y}return e.prototype.startSpan=function(_,v,y){return this._getTracer().startSpan(_,v,y)},e.prototype.startActiveSpan=function(_,v,y,b){var x=this._getTracer();return Reflect.apply(x.startActiveSpan,x,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var _=this._provider.getDelegateTracer(this.name,this.version);return _?(this._delegate=_,this._delegate):v},e}();_.ProxyTracer=y}),Ae=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.NoopTracerProvider=void 0;var v=Ie(),y=function(){function e(){}return e.prototype.getTracer=function(_,y){return new v.NoopTracer},e}();_.NoopTracerProvider=y}),Pe=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.ProxyTracerProvider=void 0;var v=Se(),y=new(Ae().NoopTracerProvider),b=function(){function e(){}return e.prototype.getTracer=function(_,y){var b;return null!==(b=this.getDelegateTracer(_,y))&&void 0!==b?b:new v.ProxyTracer(this,_,y)},e.prototype.getDelegate=function(){var _;return null!==(_=this._delegate)&&void 0!==_?_:y},e.prototype.setDelegate=function(_){this._delegate=_},e.prototype.getDelegateTracer=function(_,v){var y;return null===(y=this._delegate)||void 0===y?void 0:y.getTracer(_,v)},e}();_.ProxyTracerProvider=b}),Oe=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Ce=l(_=>{"use strict";var v;Object.defineProperty(_,"__esModule",{value:!0}),_.SamplingDecision=void 0,(v=_.SamplingDecision||(_.SamplingDecision={}))[v.NOT_RECORD=0]="NOT_RECORD",v[v.RECORD=1]="RECORD",v[v.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}),De=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Ne=l(_=>{"use strict";var v;Object.defineProperty(_,"__esModule",{value:!0}),_.SpanKind=void 0,(v=_.SpanKind||(_.SpanKind={}))[v.INTERNAL=0]="INTERNAL",v[v.SERVER=1]="SERVER",v[v.CLIENT=2]="CLIENT",v[v.PRODUCER=3]="PRODUCER",v[v.CONSUMER=4]="CONSUMER"}),ke=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Le=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Be=l(_=>{"use strict";var v;Object.defineProperty(_,"__esModule",{value:!0}),_.SpanStatusCode=void 0,(v=_.SpanStatusCode||(_.SpanStatusCode={}))[v.UNSET=0]="UNSET",v[v.OK=1]="OK",v[v.ERROR=2]="ERROR"}),je=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Fe=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Ue=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),ze=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Ge=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.TraceAPI=void 0;var v=K(),y=Pe(),b=Te(),x=xe(),T=ne(),I="trace",S=function(){function e(){this._proxyTracerProvider=new y.ProxyTracerProvider,this.wrapSpanContext=b.wrapSpanContext,this.isSpanContextValid=b.isSpanContextValid,this.deleteSpan=x.deleteSpan,this.getSpan=x.getSpan,this.getSpanContext=x.getSpanContext,this.setSpan=x.setSpan,this.setSpanContext=x.setSpanContext}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(_){var y=v.registerGlobal(I,this._proxyTracerProvider,T.DiagAPI.instance());return y&&this._proxyTracerProvider.setDelegate(_),y},e.prototype.getTracerProvider=function(){return v.getGlobal(I)||this._proxyTracerProvider},e.prototype.getTracer=function(_,v){return this.getTracerProvider().getTracer(_,v)},e.prototype.disable=function(){v.unregisterGlobal(I,T.DiagAPI.instance()),this._proxyTracerProvider=new y.ProxyTracerProvider},e}();_.TraceAPI=S}),He=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.NoopTextMapPropagator=void 0;var v=function(){function e(){}return e.prototype.inject=function(_,v){},e.prototype.extract=function(_,v){return _},e.prototype.fields=function(){return[]},e}();_.NoopTextMapPropagator=v}),Xe=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.deleteBaggage=_.setBaggage=_.getBaggage=void 0;var v=ge().createContextKey("OpenTelemetry Baggage Key");_.getBaggage=function SI(_){return _.getValue(v)||void 0},_.setBaggage=function AI(_,y){return _.setValue(v,y)},_.deleteBaggage=function II(_){return _.deleteValue(v)}}),qe=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.PropagationAPI=void 0;var v=K(),y=He(),b=de(),x=Xe(),T=se(),I=ne(),S="propagation",M=new y.NoopTextMapPropagator,A=function(){function e(){this.createBaggage=T.createBaggage,this.getBaggage=x.getBaggage,this.setBaggage=x.setBaggage,this.deleteBaggage=x.deleteBaggage}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(_){return v.registerGlobal(S,_,I.DiagAPI.instance())},e.prototype.inject=function(_,v,y){return void 0===y&&(y=b.defaultTextMapSetter),this._getGlobalPropagator().inject(_,v,y)},e.prototype.extract=function(_,v,y){return void 0===y&&(y=b.defaultTextMapGetter),this._getGlobalPropagator().extract(_,v,y)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){v.unregisterGlobal(S,I.DiagAPI.instance())},e.prototype._getGlobalPropagator=function(){return v.getGlobal(S)||M},e}();_.PropagationAPI=A}),Ve=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),_.diag=_.propagation=_.trace=_.context=_.INVALID_SPAN_CONTEXT=_.INVALID_TRACEID=_.INVALID_SPANID=_.isValidSpanId=_.isValidTraceId=_.isSpanContextValid=_.baggageEntryMetadataFromString=void 0,y(U(),_);var b=se();Object.defineProperty(_,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return b.baggageEntryMetadataFromString}}),y(ce(),_),y(ue(),_),y(he(),_),y(de(),_),y(fe(),_),y(me(),_),y(Se(),_),y(Pe(),_),y(Oe(),_),y(Ce(),_),y(De(),_),y(Ne(),_),y(ke(),_),y(Le(),_),y(Be(),_),y(ye(),_),y(je(),_),y(Fe(),_),y(Ue(),_);var x=Te();Object.defineProperty(_,"isSpanContextValid",{enumerable:!0,get:function(){return x.isSpanContextValid}}),Object.defineProperty(_,"isValidTraceId",{enumerable:!0,get:function(){return x.isValidTraceId}}),Object.defineProperty(_,"isValidSpanId",{enumerable:!0,get:function(){return x.isValidSpanId}});var T=be();Object.defineProperty(_,"INVALID_SPANID",{enumerable:!0,get:function(){return T.INVALID_SPANID}}),Object.defineProperty(_,"INVALID_TRACEID",{enumerable:!0,get:function(){return T.INVALID_TRACEID}}),Object.defineProperty(_,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return T.INVALID_SPAN_CONTEXT}}),y(ge(),_),y(ze(),_);var I=ve();_.context=I.ContextAPI.getInstance();var S=Ge();_.trace=S.TraceAPI.getInstance();var M=qe();_.propagation=M.PropagationAPI.getInstance();var A=ne();_.diag=A.DiagAPI.instance(),_.default={trace:_.trace,context:_.context,propagation:_.propagation,diag:_.diag}}),Ke=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.isTracingSuppressed=_.unsuppressTracing=_.suppressTracing=void 0;var v=Ve().createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");_.suppressTracing=function qI(_){return _.setValue(v,!0)},_.unsuppressTracing=function jI(_){return _.deleteValue(v)},_.isTracingSuppressed=function kI(_){return!0===_.getValue(v)}}),Je=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.BAGGAGE_MAX_TOTAL_LENGTH=_.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=_.BAGGAGE_MAX_NAME_VALUE_PAIRS=_.BAGGAGE_HEADER=_.BAGGAGE_ITEMS_SEPARATOR=_.BAGGAGE_PROPERTIES_SEPARATOR=_.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,_.BAGGAGE_KEY_PAIR_SEPARATOR="=",_.BAGGAGE_PROPERTIES_SEPARATOR=";",_.BAGGAGE_ITEMS_SEPARATOR=",",_.BAGGAGE_HEADER="baggage",_.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,_.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,_.BAGGAGE_MAX_TOTAL_LENGTH=8192}),et=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.parseKeyPairsIntoRecord=_.parsePairKeyValue=_.getKeyPairs=_.serializeKeyPairs=void 0;var v=Ve(),y=Je();_.serializeKeyPairs=_=>_.reduce((_,v)=>{let b=`${_}${""!==_?y.BAGGAGE_ITEMS_SEPARATOR:""}${v}`;return b.length>y.BAGGAGE_MAX_TOTAL_LENGTH?_:b},"");_.getKeyPairs=_=>_.getAllEntries().map(([_,v])=>`${encodeURIComponent(_)}=${encodeURIComponent(v.value)}`);_.parsePairKeyValue=_=>{let b=_.split(y.BAGGAGE_PROPERTIES_SEPARATOR);if(b.length<=0)return;let x=b.shift();if(!x)return;let T=x.split(y.BAGGAGE_KEY_PAIR_SEPARATOR);if(2!==T.length)return;let I,S=decodeURIComponent(T[0].trim()),M=decodeURIComponent(T[1].trim());return b.length>0&&(I=v.baggageEntryMetadataFromString(b.join(y.BAGGAGE_PROPERTIES_SEPARATOR))),{key:S,value:M,metadata:I}};_.parseKeyPairsIntoRecord=v=>"string"!=typeof v||0===v.length?{}:v.split(y.BAGGAGE_ITEMS_SEPARATOR).map(v=>_.parsePairKeyValue(v)).filter(_=>void 0!==_&&_.value.length>0).reduce((_,v)=>(_[v.key]=v.value,_),{})}),tt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.HttpBaggagePropagator=void 0;var v=Ve(),y=Ke(),b=Je(),x=et();_.HttpBaggagePropagator=class{inject(_,T,I){let S=v.propagation.getBaggage(_);if(!S||y.isTracingSuppressed(_))return;let M=x.getKeyPairs(S).filter(_=>_.length<=b.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,b.BAGGAGE_MAX_NAME_VALUE_PAIRS),A=x.serializeKeyPairs(M);A.length>0&&I.set(T,b.BAGGAGE_HEADER,A)}extract(_,y,T){let I=T.get(y,b.BAGGAGE_HEADER);if(!I)return _;let S={};return 0===I.length||(I.split(b.BAGGAGE_ITEMS_SEPARATOR).forEach(_=>{let v=x.parsePairKeyValue(_);if(v){let _={value:v.value};v.metadata&&(_.metadata=v.metadata),S[v.key]=_}}),0===Object.entries(S).length)?_:v.propagation.setBaggage(_,v.propagation.createBaggage(S))}fields(){return[b.BAGGAGE_HEADER]}}}),rt=l(_=>{"use strict";function Xd(_){return null==_||(Array.isArray(_)?function zI(_){let v;for(let y of _)if(null!=y){if(!v){if(Yd(y)){v=typeof y;continue}return!1}if(typeof y!==v)return!1}return!0}(_):Yd(_))}function Yd(_){switch(typeof _){case"number":case"boolean":case"string":return!0}return!1}Object.defineProperty(_,"__esModule",{value:!0}),_.isAttributeValue=_.sanitizeAttributes=void 0,_.sanitizeAttributes=function $I(_){let v={};if(null==_||"object"!=typeof _)return v;for(let[y,b]of Object.entries(_))Xd(b)&&(Array.isArray(b)?v[y]=b.slice():v[y]=b);return v},_.isAttributeValue=Xd}),it=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.loggingErrorHandler=void 0;var v=Ve();_.loggingErrorHandler=function XI(){return _=>{v.diag.error(function YI(_){return"string"==typeof _?_:JSON.stringify(function QI(_){let v={},y=_;for(;null!==y;)Object.getOwnPropertyNames(y).forEach(_=>{if(v[_])return;let b=y[_];b&&(v[_]=String(b))}),y=Object.getPrototypeOf(y);return v}(_))}(_))}}}),nt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.globalErrorHandler=_.setGlobalErrorHandler=void 0;var v=it().loggingErrorHandler();_.setGlobalErrorHandler=function ZI(_){v=_};_.globalErrorHandler=_=>{try{v(_)}catch(_){}}}),at=l(_=>{"use strict";var v;Object.defineProperty(_,"__esModule",{value:!0}),_.TracesSamplerValues=void 0,(v=_.TracesSamplerValues||(_.TracesSamplerValues={})).AlwaysOff="always_off",v.AlwaysOn="always_on",v.ParentBasedAlwaysOff="parentbased_always_off",v.ParentBasedAlwaysOn="parentbased_always_on",v.ParentBasedTraceIdRatio="parentbased_traceidratio",v.TraceIdRatio="traceidratio"}),st=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.parseEnvironment=_.DEFAULT_ENVIRONMENT=void 0;var v=Ve(),y=at(),b=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function ib(_){return b.indexOf(_)>-1}var x=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function sb(_){return x.indexOf(_)>-1}function ob(_,v,y,b=-1/0,x=1/0){if(void 0!==y[_]){let T=Number(y[_]);isNaN(T)||(v[_]=T<b?b:T>x?x:T)}}function ub(_,v,y,b=","){let x=y[_];"string"==typeof x&&(v[_]=x.split(b).map(_=>_.trim()))}_.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:v.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:y.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};var T={ALL:v.DiagLogLevel.ALL,VERBOSE:v.DiagLogLevel.VERBOSE,DEBUG:v.DiagLogLevel.DEBUG,INFO:v.DiagLogLevel.INFO,WARN:v.DiagLogLevel.WARN,ERROR:v.DiagLogLevel.ERROR,NONE:v.DiagLogLevel.NONE};function lb(_,v,y){let b=y[_];if("string"==typeof b){let y=T[b.toUpperCase()];null!=y&&(v[_]=y)}}_.parseEnvironment=function pb(v){let y={};for(let b in _.DEFAULT_ENVIRONMENT){let _=b;switch(_){case"OTEL_LOG_LEVEL":lb(_,y,v);break;default:if(ib(_))ob(_,y,v);else if(sb(_))ub(_,y,v);else{let b=v[_];null!=b&&(y[_]=String(b))}}}return y}}),ct=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.getEnv=void 0;var v=y(2037),b=st();_.getEnv=function db(){let _=b.parseEnvironment(process.env);return Object.assign({HOSTNAME:v.hostname()},b.DEFAULT_ENVIRONMENT,_)}}),lt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.hexToBase64=void 0,_.hexToBase64=function hb(_){let v=_.length,y="";for(let b=0;b<v;b+=2){let v=_.substring(b,b+2),x=parseInt(v,16);y+=String.fromCharCode(x)}return Buffer.from(y,"ascii").toString("base64")}}),ut=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.RandomIdGenerator=void 0;_.RandomIdGenerator=class{constructor(){this.generateTraceId=nh(16),this.generateSpanId=nh(8)}};var v=Buffer.allocUnsafe(16);function nh(_){return function(){for(let y=0;y<_/4;y++)v.writeUInt32BE(Math.random()*2**32>>>0,4*y);for(let y=0;y<_&&!(v[y]>0);y++)y===_-1&&(v[_-1]=1);return v.toString("hex",0,_)}}}),pt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.otperformance=void 0;var v=y(4074);_.otperformance=v.performance}),ht=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.VERSION=void 0,_.VERSION="0.23.0"}),dt=l(_=>{"use strict";var v;Object.defineProperty(_,"__esModule",{value:!0}),_.RpcGrpcStatusCodeValues=_.MessagingOperationValues=_.MessagingDestinationKindValues=_.HttpFlavorValues=_.NetTransportValues=_.FaasInvokedProviderValues=_.FaasDocumentOperationValues=_.FaasTriggerValues=_.DbCassandraConsistencyLevelValues=_.DbSystemValues=_.SemanticAttributes=void 0,_.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"},(v=_.DbSystemValues||(_.DbSystemValues={})).OTHER_SQL="other_sql",v.MSSQL="mssql",v.MYSQL="mysql",v.ORACLE="oracle",v.DB2="db2",v.POSTGRESQL="postgresql",v.REDSHIFT="redshift",v.HIVE="hive",v.CLOUDSCAPE="cloudscape",v.HSQLDB="hsqldb",v.PROGRESS="progress",v.MAXDB="maxdb",v.HANADB="hanadb",v.INGRES="ingres",v.FIRSTSQL="firstsql",v.EDB="edb",v.CACHE="cache",v.ADABAS="adabas",v.FIREBIRD="firebird",v.DERBY="derby",v.FILEMAKER="filemaker",v.INFORMIX="informix",v.INSTANTDB="instantdb",v.INTERBASE="interbase",v.MARIADB="mariadb",v.NETEZZA="netezza",v.PERVASIVE="pervasive",v.POINTBASE="pointbase",v.SQLITE="sqlite",v.SYBASE="sybase",v.TERADATA="teradata",v.VERTICA="vertica",v.H2="h2",v.COLDFUSION="coldfusion",v.CASSANDRA="cassandra",v.HBASE="hbase",v.MONGODB="mongodb",v.REDIS="redis",v.COUCHBASE="couchbase",v.COUCHDB="couchdb",v.COSMOSDB="cosmosdb",v.DYNAMODB="dynamodb",v.NEO4J="neo4j",v.GEODE="geode",v.ELASTICSEARCH="elasticsearch",v.MEMCACHED="memcached",v.COCKROACHDB="cockroachdb",function(_){_.ALL="all",_.EACH_QUORUM="each_quorum",_.QUORUM="quorum",_.LOCAL_QUORUM="local_quorum",_.ONE="one",_.TWO="two",_.THREE="three",_.LOCAL_ONE="local_one",_.ANY="any",_.SERIAL="serial",_.LOCAL_SERIAL="local_serial"}(_.DbCassandraConsistencyLevelValues||(_.DbCassandraConsistencyLevelValues={})),function(_){_.DATASOURCE="datasource",_.HTTP="http",_.PUBSUB="pubsub",_.TIMER="timer",_.OTHER="other"}(_.FaasTriggerValues||(_.FaasTriggerValues={})),function(_){_.INSERT="insert",_.EDIT="edit",_.DELETE="delete"}(_.FaasDocumentOperationValues||(_.FaasDocumentOperationValues={})),function(_){_.AWS="aws",_.AZURE="azure",_.GCP="gcp"}(_.FaasInvokedProviderValues||(_.FaasInvokedProviderValues={})),function(_){_.IP_TCP="ip_tcp",_.IP_UDP="ip_udp",_.IP="ip",_.UNIX="unix",_.PIPE="pipe",_.INPROC="inproc",_.OTHER="other"}(_.NetTransportValues||(_.NetTransportValues={})),function(_){_.HTTP_1_0="1.0",_.HTTP_1_1="1.1",_.HTTP_2_0="2.0",_.SPDY="SPDY",_.QUIC="QUIC"}(_.HttpFlavorValues||(_.HttpFlavorValues={})),function(_){_.QUEUE="queue",_.TOPIC="topic"}(_.MessagingDestinationKindValues||(_.MessagingDestinationKindValues={})),function(_){_.RECEIVE="receive",_.PROCESS="process"}(_.MessagingOperationValues||(_.MessagingOperationValues={})),function(_){_[_.OK=0]="OK",_[_.CANCELLED=1]="CANCELLED",_[_.UNKNOWN=2]="UNKNOWN",_[_.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_[_.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_[_.NOT_FOUND=5]="NOT_FOUND",_[_.ALREADY_EXISTS=6]="ALREADY_EXISTS",_[_.PERMISSION_DENIED=7]="PERMISSION_DENIED",_[_.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_[_.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_[_.ABORTED=10]="ABORTED",_[_.OUT_OF_RANGE=11]="OUT_OF_RANGE",_[_.UNIMPLEMENTED=12]="UNIMPLEMENTED",_[_.INTERNAL=13]="INTERNAL",_[_.UNAVAILABLE=14]="UNAVAILABLE",_[_.DATA_LOSS=15]="DATA_LOSS",_[_.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(_.RpcGrpcStatusCodeValues||(_.RpcGrpcStatusCodeValues={}))}),ft=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),y(dt(),_)}),_t=l(_=>{"use strict";var v;Object.defineProperty(_,"__esModule",{value:!0}),_.TelemetrySdkLanguageValues=_.OsTypeValues=_.HostArchValues=_.AwsEcsLaunchtypeValues=_.CloudPlatformValues=_.CloudProviderValues=_.ResourceAttributes=void 0,_.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},(v=_.CloudProviderValues||(_.CloudProviderValues={})).AWS="aws",v.AZURE="azure",v.GCP="gcp",function(_){_.AWS_EC2="aws_ec2",_.AWS_ECS="aws_ecs",_.AWS_EKS="aws_eks",_.AWS_LAMBDA="aws_lambda",_.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",_.AZURE_VM="azure_vm",_.AZURE_CONTAINER_INSTANCES="azure_container_instances",_.AZURE_AKS="azure_aks",_.AZURE_FUNCTIONS="azure_functions",_.AZURE_APP_SERVICE="azure_app_service",_.GCP_COMPUTE_ENGINE="gcp_compute_engine",_.GCP_CLOUD_RUN="gcp_cloud_run",_.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",_.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",_.GCP_APP_ENGINE="gcp_app_engine"}(_.CloudPlatformValues||(_.CloudPlatformValues={})),function(_){_.EC2="ec2",_.FARGATE="fargate"}(_.AwsEcsLaunchtypeValues||(_.AwsEcsLaunchtypeValues={})),function(_){_.AMD64="amd64",_.ARM32="arm32",_.ARM64="arm64",_.IA64="ia64",_.PPC32="ppc32",_.PPC64="ppc64",_.X86="x86"}(_.HostArchValues||(_.HostArchValues={})),function(_){_.WINDOWS="windows",_.LINUX="linux",_.DARWIN="darwin",_.FREEBSD="freebsd",_.NETBSD="netbsd",_.OPENBSD="openbsd",_.DRAGONFLYBSD="dragonflybsd",_.HPUX="hpux",_.AIX="aix",_.SOLARIS="solaris",_.Z_OS="z_os"}(_.OsTypeValues||(_.OsTypeValues={})),function(_){_.CPP="cpp",_.DOTNET="dotnet",_.ERLANG="erlang",_.GO="go",_.JAVA="java",_.NODEJS="nodejs",_.PHP="php",_.PYTHON="python",_.RUBY="ruby",_.WEBJS="webjs"}(_.TelemetrySdkLanguageValues||(_.TelemetrySdkLanguageValues={}))}),vt=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),y(_t(),_)}),yt=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),y(ft(),_),y(vt(),_)}),Et=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.SDK_INFO=void 0;var v=ht(),y=yt();_.SDK_INFO={[y.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[y.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[y.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:y.TelemetrySdkLanguageValues.NODEJS,[y.ResourceAttributes.TELEMETRY_SDK_VERSION]:v.VERSION}}),xt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.unrefTimer=void 0,_.unrefTimer=function Hb(_){_.unref()}}),Tt=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),y(ct(),_),y(lt(),_),y(ut(),_),y(pt(),_),y(Et(),_),y(xt(),_)}),St=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),y(Tt(),_)}),Mt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.isTimeInput=_.isTimeInputHrTime=_.hrTimeToMicroseconds=_.hrTimeToMilliseconds=_.hrTimeToNanoseconds=_.hrTimeToTimeStamp=_.hrTimeDuration=_.timeInputToHrTime=_.hrTime=void 0;var v=St(),y=Math.pow(10,9);function Is(_){let v=_/1e3,b=Math.trunc(v);return[b,Number((v-b).toFixed(9))*y]}function hh(){let _=v.otperformance.timeOrigin;if("number"!=typeof _){let y=v.otperformance;_=y.timing&&y.timing.fetchStart}return _}function _h(_){let b=Is(hh()),x=Is("number"==typeof _?_:v.otperformance.now()),T=b[0]+x[0],I=b[1]+x[1];return I>y&&(I-=y,T+=1),[T,I]}function gc(_){return Array.isArray(_)&&2===_.length&&"number"==typeof _[0]&&"number"==typeof _[1]}_.hrTime=_h,_.timeInputToHrTime=function Fb(_){if(gc(_))return _;if("number"==typeof _)return _<hh()?_h(_):Is(_);if(_ instanceof Date)return Is(_.getTime());throw TypeError("Invalid input type")},_.hrTimeDuration=function Vb(_,v){let b=v[0]-_[0],x=v[1]-_[1];return x<0&&(b-=1,x+=y),[b,x]},_.hrTimeToTimeStamp=function $b(_){let v=`${"0".repeat(9)}${_[1]}Z`,y=v.substr(v.length-9-1);return new Date(1e3*_[0]).toISOString().replace("000Z",y)},_.hrTimeToNanoseconds=function zb(_){return _[0]*y+_[1]},_.hrTimeToMilliseconds=function Kb(_){return Math.round(1e3*_[0]+_[1]/1e6)},_.hrTimeToMicroseconds=function Xb(_){return Math.round(1e6*_[0]+_[1]/1e3)},_.isTimeInputHrTime=gc,_.isTimeInput=function Yb(_){return gc(_)||"number"==typeof _||_ instanceof Date}}),At=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Pt=l(_=>{"use strict";var v;Object.defineProperty(_,"__esModule",{value:!0}),_.ExportResultCode=void 0,(v=_.ExportResultCode||(_.ExportResultCode={}))[v.SUCCESS=0]="SUCCESS",v[v.FAILED=1]="FAILED"}),Ot=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.CompositePropagator=void 0;var v=Ve();_.CompositePropagator=class{constructor(_={}){var v;this._propagators=null!==(v=_.propagators)&&void 0!==v?v:[],this._fields=Array.from(new Set(this._propagators.map(_=>"function"==typeof _.fields?_.fields():[]).reduce((_,v)=>_.concat(v),[])))}inject(_,y,b){for(let x of this._propagators)try{x.inject(_,y,b)}catch(_){v.diag.warn(`Failed to inject with ${x.constructor.name}. Err: ${_.message}`)}}extract(_,y,b){return this._propagators.reduce((_,x)=>{try{return x.extract(_,y,b)}catch(_){v.diag.warn(`Failed to inject with ${x.constructor.name}. Err: ${_.message}`)}return _},_)}fields(){return this._fields.slice()}}}),Ct=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.validateValue=_.validateKey=void 0;var v="[_0-9a-z-*/]",y=new RegExp(`^(?:${`[a-z]${v}{0,255}`}|${`[a-z0-9]${v}{0,240}@[a-z]${v}{0,13}`})$`),b=/^[ -~]{0,255}[!-~]$/,x=/,|=/;_.validateKey=function rC(_){return y.test(_)},_.validateValue=function nC(_){return b.test(_)&&!x.test(_)}}),Dt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.TraceState=void 0;var v=Ct(),y=class{constructor(_){this._internalState=new Map,_&&this._parse(_)}set(_,v){let y=this._clone();return y._internalState.has(_)&&y._internalState.delete(_),y._internalState.set(_,v),y}unset(_){let v=this._clone();return v._internalState.delete(_),v}get(_){return this._internalState.get(_)}serialize(){return this._keys().reduce((_,v)=>(_.push(v+"="+this.get(v)),_),[]).join(",")}_parse(_){_.length>512||(this._internalState=_.split(",").reverse().reduce((_,y)=>{let b=y.trim(),x=b.indexOf("=");if(-1!==x){let T=b.slice(0,x),I=b.slice(x+1,y.length);v.validateKey(T)&&v.validateValue(I)&&_.set(T,I)}return _},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let _=new y;return _._internalState=new Map(this._internalState),_}};_.TraceState=y}),Nt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.HttpTraceContextPropagator=_.parseTraceParent=_.TRACE_STATE_HEADER=_.TRACE_PARENT_HEADER=void 0;var v=Ve(),y=Ke(),b=Dt();_.TRACE_PARENT_HEADER="traceparent",_.TRACE_STATE_HEADER="tracestate";var x=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");function Ph(_){let v=x.exec(_);return!v||"00"===v[1]&&v[5]?null:{traceId:v[2],spanId:v[3],traceFlags:parseInt(v[4],16)}}_.parseTraceParent=Ph;_.HttpTraceContextPropagator=class{inject(b,x,T){let I=v.trace.getSpanContext(b);if(!I||y.isTracingSuppressed(b)||!v.isSpanContextValid(I))return;let S=`00-${I.traceId}-${I.spanId}-0${Number(I.traceFlags||v.TraceFlags.NONE).toString(16)}`;T.set(x,_.TRACE_PARENT_HEADER,S),I.traceState&&T.set(x,_.TRACE_STATE_HEADER,I.traceState.serialize())}extract(y,x,T){let I=T.get(x,_.TRACE_PARENT_HEADER);if(!I)return y;let S=Array.isArray(I)?I[0]:I;if("string"!=typeof S)return y;let M=Ph(S);if(!M)return y;M.isRemote=!0;let A=T.get(x,_.TRACE_STATE_HEADER);if(A){let _=Array.isArray(A)?A.join(","):A;M.traceState=new b.TraceState("string"==typeof _?_:void 0)}return v.trace.setSpanContext(y,M)}fields(){return[_.TRACE_PARENT_HEADER,_.TRACE_STATE_HEADER]}}}),kt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Lt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.getRPCMetadata=_.deleteRPCMetadata=_.setRPCMetadata=_.RPCType=void 0;var v=Ve().createContextKey("OpenTelemetry SDK Context Key RPC_METADATA");(_.RPCType||(_.RPCType={})).HTTP="http",_.setRPCMetadata=function _C(_,y){return _.setValue(v,y)},_.deleteRPCMetadata=function vC(_){return _.deleteValue(v)},_.getRPCMetadata=function gC(_){return _.getValue(v)}}),Bt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.AlwaysOffSampler=void 0;var v=Ve();_.AlwaysOffSampler=class{shouldSample(){return{decision:v.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}}),jt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.AlwaysOnSampler=void 0;var v=Ve();_.AlwaysOnSampler=class{shouldSample(){return{decision:v.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}}),Ft=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.ParentBasedSampler=void 0;var v=Ve(),y=nt(),b=Bt(),x=jt();_.ParentBasedSampler=class{constructor(_){var v,T,I,S;this._root=_.root,this._root||(y.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new x.AlwaysOnSampler),this._remoteParentSampled=null!==(v=_.remoteParentSampled)&&void 0!==v?v:new x.AlwaysOnSampler,this._remoteParentNotSampled=null!==(T=_.remoteParentNotSampled)&&void 0!==T?T:new b.AlwaysOffSampler,this._localParentSampled=null!==(I=_.localParentSampled)&&void 0!==I?I:new x.AlwaysOnSampler,this._localParentNotSampled=null!==(S=_.localParentNotSampled)&&void 0!==S?S:new b.AlwaysOffSampler}shouldSample(_,y,b,x,T,I){let S=v.trace.getSpanContext(_);return S&&v.isSpanContextValid(S)?S.isRemote?S.traceFlags&v.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(_,y,b,x,T,I):this._remoteParentNotSampled.shouldSample(_,y,b,x,T,I):S.traceFlags&v.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(_,y,b,x,T,I):this._localParentNotSampled.shouldSample(_,y,b,x,T,I):this._root.shouldSample(_,y,b,x,T,I)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}}),Ut=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.TraceIdRatioBasedSampler=void 0;var v=Ve();_.TraceIdRatioBasedSampler=class{constructor(_=0){this._ratio=_,this._ratio=this._normalize(_),this._upperBound=Math.floor(4294967295*this._ratio)}shouldSample(_,y){return{decision:v.isValidTraceId(y)&&this._accumulate(y)<this._upperBound?v.SamplingDecision.RECORD_AND_SAMPLED:v.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(_){return"number"!=typeof _||isNaN(_)?0:_>=1?1:_<=0?0:_}_accumulate(_){let v=0;for(let y=0;y<_.length/8;y++){let b=8*y;v=(v^parseInt(_.slice(b,b+8),16))>>>0}return v}}}),zt=l(_=>{"use strict";function Bh(_,v){return"string"==typeof v?_===v:v.test(_)}Object.defineProperty(_,"__esModule",{value:!0}),_.isUrlIgnored=_.urlMatches=void 0,_.urlMatches=Bh,_.isUrlIgnored=function TC(_,v){if(!v)return!1;for(let y of v)if(Bh(_,y))return!0;return!1}}),Gt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.isWrapped=void 0,_.isWrapped=function SC(_){return"function"==typeof _&&"function"==typeof _.__original&&"function"==typeof _.__unwrap&&!0===_.__wrapped}}),Ht=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),_.baggageUtils=void 0,y(tt(),_),y(rt(),_),y(nt(),_),y(it(),_),y(Mt(),_),y(At(),_),y(Pt(),_),y(ht(),_),_.baggageUtils=et(),y(St(),_),y(Ot(),_),y(Nt(),_),y(kt(),_),y(Lt(),_),y(Bt(),_),y(jt(),_),y(Ft(),_),y(Ut(),_),y(Ke(),_),y(Dt(),_),y(st(),_),y(at(),_),y(zt(),_),y(Gt(),_),y(ht(),_)}),Xt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.ExceptionEventName=void 0,_.ExceptionEventName="exception"}),Vt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.Span=void 0;var v=Ve(),y=Ht(),b=yt(),x=Xt();_.Span=class{constructor(_,b,x,T,I,S,M=[],A=y.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:v.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=x,this._spanContext=T,this.parentSpanId=S,this.kind=I,this.links=M,this.startTime=y.timeInputToHrTime(A),this.resource=_.resource,this.instrumentationLibrary=_.instrumentationLibrary,this._spanLimits=_.getSpanLimits(),this._spanProcessor=_.getActiveSpanProcessor(),this._spanProcessor.onStart(this,b)}spanContext(){return this._spanContext}setAttribute(_,b){return null==b||this._isSpanEnded()?this:0===_.length?(v.diag.warn("Invalid attribute key: "+_),this):y.isAttributeValue(b)?(Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,_)||(this.attributes[_]=b),this):(v.diag.warn("Invalid attribute value set for key: "+_),this)}setAttributes(_){for(let[v,y]of Object.entries(_))this.setAttribute(v,y);return this}addEvent(_,b,x){return this._isSpanEnded()||(this.events.length>=this._spanLimits.eventCountLimit&&(v.diag.warn("Dropping extra events."),this.events.shift()),y.isTimeInput(b)&&(void 0===x&&(x=b),b=void 0),void 0===x&&(x=y.hrTime()),this.events.push({name:_,attributes:b,time:y.timeInputToHrTime(x)})),this}setStatus(_){return this._isSpanEnded()||(this.status=_),this}updateName(_){return this._isSpanEnded()||(this.name=_),this}end(_=y.hrTime()){this._isSpanEnded()?v.diag.error("You can only call end() on a span once."):(this._ended=!0,this.endTime=y.timeInputToHrTime(_),this._duration=y.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&v.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this))}isRecording(){return!1===this._ended}recordException(_,T=y.hrTime()){let I={};"string"==typeof _?I[b.SemanticAttributes.EXCEPTION_MESSAGE]=_:_&&(_.code?I[b.SemanticAttributes.EXCEPTION_TYPE]=_.code.toString():_.name&&(I[b.SemanticAttributes.EXCEPTION_TYPE]=_.name),_.message&&(I[b.SemanticAttributes.EXCEPTION_MESSAGE]=_.message),_.stack&&(I[b.SemanticAttributes.EXCEPTION_STACKTRACE]=_.stack)),I[b.SemanticAttributes.EXCEPTION_TYPE]||I[b.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(x.ExceptionEventName,I,T):v.diag.warn("Failed to record an exception "+_)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&v.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}}}),Wt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.buildSamplerFromEnv=_.DEFAULT_CONFIG=void 0;var v=Ve(),y=Ht(),b=y.getEnv(),x=y.TracesSamplerValues.AlwaysOn;function zh(_=y.getEnv()){switch(_.OTEL_TRACES_SAMPLER){case y.TracesSamplerValues.AlwaysOn:return new y.AlwaysOnSampler;case y.TracesSamplerValues.AlwaysOff:return new y.AlwaysOffSampler;case y.TracesSamplerValues.ParentBasedAlwaysOn:return new y.ParentBasedSampler({root:new y.AlwaysOnSampler});case y.TracesSamplerValues.ParentBasedAlwaysOff:return new y.ParentBasedSampler({root:new y.AlwaysOffSampler});case y.TracesSamplerValues.TraceIdRatio:return new y.TraceIdRatioBasedSampler(Kh(_));case y.TracesSamplerValues.ParentBasedTraceIdRatio:return new y.ParentBasedSampler({root:new y.TraceIdRatioBasedSampler(Kh(_))});default:return v.diag.error(`OTEL_TRACES_SAMPLER value "${_.OTEL_TRACES_SAMPLER} invalid, defaulting to ${x}".`),new y.AlwaysOnSampler}}_.DEFAULT_CONFIG={sampler:zh(b),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:y.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:y.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:y.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}},_.buildSamplerFromEnv=zh;function Kh(_){if(void 0===_.OTEL_TRACES_SAMPLER_ARG||""===_.OTEL_TRACES_SAMPLER_ARG)return v.diag.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to 1."),1;let y=Number(_.OTEL_TRACES_SAMPLER_ARG);return isNaN(y)?(v.diag.error(`OTEL_TRACES_SAMPLER_ARG=${_.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to 1.`),1):y<0||y>1?(v.diag.error(`OTEL_TRACES_SAMPLER_ARG=${_.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to 1.`),1):y}}),$t=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.mergeConfig=void 0;var v=Wt();_.mergeConfig=function OC(_){let y={sampler:v.buildSamplerFromEnv()},b=Object.assign({},v.DEFAULT_CONFIG,y,_);return b.spanLimits=Object.assign({},v.DEFAULT_CONFIG.spanLimits,_.spanLimits||{}),b}}),Yt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.Tracer=void 0;var v=Ve(),y=Ht(),b=Vt(),x=$t();_.Tracer=class{constructor(_,v,b){this._tracerProvider=b;let T=x.mergeConfig(v);this._sampler=T.sampler,this._spanLimits=T.spanLimits,this._idGenerator=v.idGenerator||new y.RandomIdGenerator,this.resource=b.resource,this.instrumentationLibrary=_}startSpan(_,x={},T=v.context.active()){var I,S;if(y.isTracingSuppressed(T))return v.diag.debug("Instrumentation suppressed, returning Noop Span"),v.trace.wrapSpanContext(v.INVALID_SPAN_CONTEXT);let M,A,P,O=function NC(_,y){if(!_.root)return v.trace.getSpanContext(y)}(x,T),k=this._idGenerator.generateSpanId();O&&v.trace.isSpanContextValid(O)?(M=O.traceId,A=O.traceState,P=O.spanId):M=this._idGenerator.generateTraceId();let R=null!==(I=x.kind)&&void 0!==I?I:v.SpanKind.INTERNAL,L=null!==(S=x.links)&&void 0!==S?S:[],B=y.sanitizeAttributes(x.attributes),j=this._sampler.shouldSample(x.root?v.trace.setSpanContext(T,v.INVALID_SPAN_CONTEXT):T,M,_,R,B,L),U={traceId:M,spanId:k,traceFlags:j.decision===v.SamplingDecision.RECORD_AND_SAMPLED?v.TraceFlags.SAMPLED:v.TraceFlags.NONE,traceState:A};if(j.decision===v.SamplingDecision.NOT_RECORD)return v.diag.debug("Recording is off, propagating context in a non-recording span"),v.trace.wrapSpanContext(U);let z=new b.Span(this,T,_,U,R,P,L,x.startTime);return z.setAttributes(Object.assign(B,j.attributes)),z}startActiveSpan(_,y,b,x){let T,I,S;if(arguments.length<2)return;2===arguments.length?S=y:3===arguments.length?(T=y,S=b):(T=y,I=b,S=x);let M=null!=I?I:v.context.active(),A=this.startSpan(_,T,M),P=v.trace.setSpan(M,A);return v.context.with(P,S,void 0,A)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}}}),Qt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.defaultServiceName=void 0,_.defaultServiceName=function DC(){return"unknown_service:"+process.argv0}}),Kt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.detectResources=void 0;var v=ir(),b=Ve(),x=y(3837);_.detectResources=async(_={})=>{let y=Object.assign(_),x=await Promise.all((y.detectors||[]).map(async _=>{try{let v=await _.detect(y);return b.diag.debug(_.constructor.name+" found resource.",v),v}catch(y){return b.diag.debug(`${_.constructor.name} failed: ${y.message}`),v.Resource.empty()}}));return MC(x),x.reduce((_,v)=>_.merge(v),v.Resource.empty())};var MC=_=>{_.forEach(_=>{if(Object.keys(_.attributes).length>0){let v=x.inspect(_.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});b.diag.verbose(v)}})}}),Zt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.envDetector=void 0;var v=Ve(),y=Ht(),b=yt(),x=or();_.envDetector=new class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(_){let T={},I=y.getEnv(),S=I.OTEL_RESOURCE_ATTRIBUTES,M=I.OTEL_SERVICE_NAME;if(S)try{let _=this._parseResourceAttributes(S);Object.assign(T,_)}catch(_){v.diag.debug("EnvDetector failed: "+_.message)}return M&&(T[b.ResourceAttributes.SERVICE_NAME]=M),new x.Resource(T)}_parseResourceAttributes(_){if(!_)return{};let v={},y=_.split(this._COMMA_SEPARATOR,-1);for(let _ of y){let y=_.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(2!==y.length)continue;let[b,x]=y;if(b=b.trim(),x=x.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(b))throw new Error("Attribute key "+this._ERROR_MESSAGE_INVALID_CHARS);if(!this._isValid(x))throw new Error("Attribute value "+this._ERROR_MESSAGE_INVALID_VALUE);v[b]=x}return v}_isValid(_){return _.length<=this._MAX_LENGTH&&this._isPrintableString(_)}_isPrintableString(_){for(let v=0;v<_.length;v++){let y=_.charAt(v);if(y<=" "||y>="~")return!1}return!0}_isValidAndNotEmpty(_){return _.length>0&&this._isValid(_)}}}),Jt=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.processDetector=void 0;var v=Ve(),y=yt(),b=or();_.processDetector=new class{async detect(_){let v={[y.ResourceAttributes.PROCESS_PID]:process.pid,[y.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[y.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[y.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(v,_)}_getResourceAttributes(_,x){return""===_[y.ResourceAttributes.PROCESS_EXECUTABLE_NAME]||""===_[y.ResourceAttributes.PROCESS_EXECUTABLE_PATH]||""===_[y.ResourceAttributes.PROCESS_COMMAND]||""===_[y.ResourceAttributes.PROCESS_COMMAND_LINE]?(v.diag.debug("ProcessDetector failed: Unable to find required process resources. "),b.Resource.empty()):new b.Resource(Object.assign({},_))}}}),er=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),y(Zt(),_),y(Jt(),_)}),tr=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),y(Qt(),_),y(Kt(),_),y(er(),_)}),rr=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),y(tr(),_)}),ir=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.Resource=void 0;var v=yt(),y=Ht(),b=rr(),x=class{constructor(_){this.attributes=_}static empty(){return x.EMPTY}static default(){return new x({[v.ResourceAttributes.SERVICE_NAME]:b.defaultServiceName(),[v.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:y.SDK_INFO[v.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[v.ResourceAttributes.TELEMETRY_SDK_NAME]:y.SDK_INFO[v.ResourceAttributes.TELEMETRY_SDK_NAME],[v.ResourceAttributes.TELEMETRY_SDK_VERSION]:y.SDK_INFO[v.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(_){if(!_||!Object.keys(_.attributes).length)return this;let v=Object.assign({},this.attributes,_.attributes);return new x(v)}};_.Resource=x,x.EMPTY=new x({})}),nr=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),ar=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),or=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),y(ir(),_),y(rr(),_),y(nr(),_),y(ar(),_)}),sr=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.MultiSpanProcessor=void 0;var v=Ht();_.MultiSpanProcessor=class{constructor(_){this._spanProcessors=_}forceFlush(){let _=[];for(let v of this._spanProcessors)_.push(v.forceFlush());return new Promise(y=>{Promise.all(_).then(()=>{y()}).catch(_=>{v.globalErrorHandler(_||new Error("MultiSpanProcessor: forceFlush failed")),y()})})}onStart(_,v){for(let y of this._spanProcessors)y.onStart(_,v)}onEnd(_){for(let v of this._spanProcessors)v.onEnd(_)}shutdown(){let _=[];for(let v of this._spanProcessors)_.push(v.shutdown());return new Promise((v,y)=>{Promise.all(_).then(()=>{v()},y)})}}}),cr=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.NoopSpanProcessor=void 0;_.NoopSpanProcessor=class{onStart(_,v){}onEnd(_){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}}}),lr=l((_,v)=>{var y="__lodash_hash_undefined__",b=9007199254740991,x="[object Arguments]",T="[object Function]",I="[object Object]",S=/^\[object .+?Constructor\]$/,M=/^(?:0|[1-9]\d*)$/,A={};A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A[x]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object Boolean]"]=A["[object DataView]"]=A["[object Date]"]=A["[object Error]"]=A[T]=A["[object Map]"]=A["[object Number]"]=A[I]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object WeakMap]"]=!1;var P="object"==typeof global&&global&&global.Object===Object&&global,O="object"==typeof self&&self&&self.Object===Object&&self,k=P||O||Function("return this")(),R="object"==typeof _&&_&&!_.nodeType&&_,L=R&&"object"==typeof v&&v&&!v.nodeType&&v,B=L&&L.exports===R,j=B&&P.process,U=function(){try{return L&&L.require&&L.require("util").types||j&&j.binding&&j.binding("util")}catch(_){}}(),z=U&&U.isTypedArray;function CO(_,v,y){switch(y.length){case 0:return _.call(v);case 1:return _.call(v,y[0]);case 2:return _.call(v,y[0],y[1]);case 3:return _.call(v,y[0],y[1],y[2])}return _.apply(v,y)}var G,H=Array.prototype,V=Function.prototype,$=Object.prototype,K=k["__core-js_shared__"],ee=V.toString,re=$.hasOwnProperty,ie=(G=/[^.]+$/.exec(K&&K.keys&&K.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"",ne=$.toString,ae=ee.call(Object),oe=RegExp("^"+ee.call(re).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),se=B?k.Buffer:void 0,ce=k.Symbol,ue=k.Uint8Array,pe=se?se.allocUnsafe:void 0,he=function NO(_,v){return function(y){return _(v(y))}}(Object.getPrototypeOf,Object),de=Object.create,fe=$.propertyIsEnumerable,me=H.splice,ge=ce?ce.toStringTag:void 0,_e=function(){try{var _=Hc(Object,"defineProperty");return _({},"",{}),_}catch(_){}}(),ve=se?se.isBuffer:void 0,ye=Math.max,be=Date.now,Ee=Hc(k,"Map"),xe=Hc(Object,"create"),Te=function(){function e(){}return function(_){if(!Dr(_))return{};if(de)return de(_);e.prototype=_;var v=new e;return e.prototype=void 0,v}}();function Nr(_){var v=-1,y=null==_?0:_.length;for(this.clear();++v<y;){var b=_[v];this.set(b[0],b[1])}}function Rt(_){var v=-1,y=null==_?0:_.length;for(this.clear();++v<y;){var b=_[v];this.set(b[0],b[1])}}function Nn(_){var v=-1,y=null==_?0:_.length;for(this.clear();++v<y;){var b=_[v];this.set(b[0],b[1])}}function Dn(_){var v=this.__data__=new Rt(_);this.size=v.size}function sP(_,v){var y=Pe(_),b=!y&&Ae(_),x=!y&&!b&&Oe(_),T=!y&&!b&&!x&&Ce(_),I=y||b||x||T,S=I?function OO(_,v){for(var y=-1,b=Array(_);++y<_;)b[y]=v(y);return b}(_.length,String):[],M=S.length;for(var A in _)(v||re.call(_,A))&&(!I||!("length"==A||x&&("offset"==A||"parent"==A)||T&&("buffer"==A||"byteLength"==A||"byteOffset"==A)||q_(A,M)))&&S.push(A);return S}function jc(_,v,y){(void 0!==y&&!ro(_[v],y)||void 0===y&&!(v in _))&&kc(_,v,y)}function oP(_,v,y){var b=_[v];(!re.call(_,v)||!ro(b,y)||void 0===y&&!(v in _))&&kc(_,v,y)}function Js(_,v){for(var y=_.length;y--;)if(ro(_[y][0],v))return y;return-1}function kc(_,v,y){"__proto__"==v&&_e?_e(_,v,{configurable:!0,enumerable:!0,value:y,writable:!0}):_[v]=y}Nr.prototype.clear=function UO(){this.__data__=xe?xe(null):{},this.size=0},Nr.prototype.delete=function BO(_){var v=this.has(_)&&delete this.__data__[_];return this.size-=v?1:0,v},Nr.prototype.get=function GO(_){var v=this.__data__;if(xe){var b=v[_];return b===y?void 0:b}return re.call(v,_)?v[_]:void 0},Nr.prototype.has=function FO(_){var v=this.__data__;return xe?void 0!==v[_]:re.call(v,_)},Nr.prototype.set=function VO(_,v){var b=this.__data__;return this.size+=this.has(_)?0:1,b[_]=xe&&void 0===v?y:v,this},Rt.prototype.clear=function $O(){this.__data__=[],this.size=0},Rt.prototype.delete=function zO(_){var v=this.__data__,y=Js(v,_);return!(y<0)&&(y==v.length-1?v.pop():me.call(v,y,1),--this.size,!0)},Rt.prototype.get=function KO(_){var v=this.__data__,y=Js(v,_);return y<0?void 0:v[y][1]},Rt.prototype.has=function XO(_){return Js(this.__data__,_)>-1},Rt.prototype.set=function YO(_,v){var y=this.__data__,b=Js(y,_);return b<0?(++this.size,y.push([_,v])):y[b][1]=v,this},Nn.prototype.clear=function QO(){this.size=0,this.__data__={hash:new Nr,map:new(Ee||Rt),string:new Nr}},Nn.prototype.delete=function WO(_){var v=to(this,_).delete(_);return this.size-=v?1:0,v},Nn.prototype.get=function ZO(_){return to(this,_).get(_)},Nn.prototype.has=function JO(_){return to(this,_).has(_)},Nn.prototype.set=function eP(_,v){var y=to(this,_),b=y.size;return y.set(_,v),this.size+=y.size==b?0:1,this},Dn.prototype.clear=function tP(){this.__data__=new Rt,this.size=0},Dn.prototype.delete=function rP(_){var v=this.__data__,y=v.delete(_);return this.size=v.size,y},Dn.prototype.get=function nP(_){return this.__data__.get(_)},Dn.prototype.has=function iP(_){return this.__data__.has(_)},Dn.prototype.set=function aP(_,v){var y=this.__data__;if(y instanceof Rt){var b=y.__data__;if(!Ee||b.length<199)return b.push([_,v]),this.size=++y.size,this;y=this.__data__=new Nn(b)}return y.set(_,v),this.size=y.size,this};var Ie=function TP(_){return function(v,y,b){for(var x=-1,T=Object(v),I=b(v),S=I.length;S--;){var M=I[_?S:++x];if(!1===y(T[M],M,T))break}return v}}();function eo(_){return null==_?void 0===_?"[object Undefined]":"[object Null]":ge&&ge in Object(_)?function SP(_){var v=re.call(_,ge),y=_[ge];try{_[ge]=void 0;var b=!0}catch(_){}var x=ne.call(_);return b&&(v?_[ge]=y:delete _[ge]),x}(_):function PP(_){return ne.call(_)}(_)}function M_(_){return Ki(_)&&eo(_)==x}function cP(_){return!(!Dr(_)||function CP(_){return!!ie&&ie in _}(_))&&(Vc(_)?oe:S).test(function wP(_){if(null!=_){try{return ee.call(_)}catch(_){}try{return _+""}catch(_){}}return""}(_))}function pP(_){if(!Dr(_))return function OP(_){var v=[];if(null!=_)for(var y in Object(_))v.push(y);return v}(_);var v=j_(_),y=[];for(var b in _)"constructor"==b&&(v||!re.call(_,b))||y.push(b);return y}function L_(_,v,y,b,x){_!==v&&Ie(v,(function(T,S){if(x||(x=new Dn),Dr(T))!function fP(_,v,y,b,x,T,S){var M=Uc(_,y),A=Uc(v,y),P=S.get(A);if(P)return void jc(_,y,P);var O=T?T(M,A,y+"",_,v,S):void 0,k=void 0===O;if(k){var R=Pe(A),L=!R&&Oe(A),B=!R&&!L&&Ce(A);O=A,R||L||B?Pe(M)?O=M:function xP(_){return Ki(_)&&Fc(_)}(M)?O=function EP(_,v){var y=-1,b=_.length;for(v||(v=Array(b));++y<b;)v[y]=_[y];return v}(M):L?(k=!1,O=function _P(_,v){if(v)return _.slice();var y=_.length,b=pe?pe(y):new _.constructor(y);return _.copy(b),b}(A,!0)):B?(k=!1,O=function gP(_,v){var y=v?function vP(_){var v=new _.constructor(_.byteLength);return new ue(v).set(new ue(_)),v}(_.buffer):_.buffer;return new _.constructor(y,_.byteOffset,_.length)}(A,!0)):O=[]:function MP(_){if(!Ki(_)||eo(_)!=I)return!1;var v=he(_);if(null===v)return!0;var y=re.call(v,"constructor")&&v.constructor;return"function"==typeof y&&y instanceof y&&ee.call(y)==ae}(A)||Ae(A)?(O=M,Ae(M)?O=function LP(_){return function mP(_,v,y,b){var x=!y;y||(y={});for(var T=-1,I=v.length;++T<I;){var S=v[T],M=b?b(y[S],_[S],S,y,_):void 0;void 0===M&&(M=_[S]),x?kc(y,S,M):oP(y,S,M)}return y}(_,B_(_))}(M):(!Dr(M)||Vc(M))&&(O=function AP(_){return"function"!=typeof _.constructor||j_(_)?{}:Te(he(_))}(A))):k=!1}k&&(S.set(A,O),x(O,A,b,T,S),S.delete(A)),jc(_,y,O)}(_,v,S,y,L_,b,x);else{var M=b?b(Uc(_,S),T,S+"",_,v,x):void 0;void 0===M&&(M=T),jc(_,S,M)}}),B_)}function dP(_,v){return Se(function RP(_,v,y){return v=ye(void 0===v?_.length-1:v,0),function(){for(var b=arguments,x=-1,T=ye(b.length-v,0),I=Array(T);++x<T;)I[x]=b[v+x];x=-1;for(var S=Array(v+1);++x<v;)S[x]=b[x];return S[v]=y(I),CO(_,this,S)}}(_,v,G_),_+"")}function to(_,v){var y=_.__data__;return function bP(_){var v=typeof _;return"string"==v||"number"==v||"symbol"==v||"boolean"==v?"__proto__"!==_:null===_}(v)?y["string"==typeof v?"string":"hash"]:y.map}function Hc(_,v){var y=function RO(_,v){return null==_?void 0:_[v]}(_,v);return cP(y)?y:void 0}function q_(_,v){var y=typeof _;return!!(v=null==v?b:v)&&("number"==y||"symbol"!=y&&M.test(_))&&_>-1&&_%1==0&&_<v}function j_(_){var v=_&&_.constructor;return _===("function"==typeof v&&v.prototype||$)}function Uc(_,v){if(("constructor"!==v||"function"!=typeof _[v])&&"__proto__"!=v)return _[v]}var Se=function DP(_){var v=0,y=0;return function(){var b=be(),x=16-(b-y);if(y=b,x>0){if(++v>=800)return arguments[0]}else v=0;return _.apply(void 0,arguments)}}(_e?function(_,v){return _e(_,"toString",{configurable:!0,enumerable:!1,value:jP(v),writable:!0})}:G_);function ro(_,v){return _===v||_!=_&&v!=v}var Ae=M_(function(){return arguments}())?M_:function(_){return Ki(_)&&re.call(_,"callee")&&!fe.call(_,"callee")},Pe=Array.isArray;function Fc(_){return null!=_&&H_(_.length)&&!Vc(_)}var Oe=ve||function kP(){return!1};function Vc(_){if(!Dr(_))return!1;var v=eo(_);return v==T||"[object GeneratorFunction]"==v||"[object AsyncFunction]"==v||"[object Proxy]"==v}function H_(_){return"number"==typeof _&&_>-1&&_%1==0&&_<=b}function Dr(_){var v=typeof _;return null!=_&&("object"==v||"function"==v)}function Ki(_){return null!=_&&"object"==typeof _}var Ce=z?function PO(_){return function(v){return _(v)}}(z):function lP(_){return Ki(_)&&H_(_.length)&&!!A[eo(_)]};function B_(_){return Fc(_)?sP(_,!0):pP(_)}var De=function yP(_){return dP((function(v,y){var b=-1,x=y.length,T=x>1?y[x-1]:void 0,I=x>2?y[2]:void 0;for(T=_.length>3&&"function"==typeof T?(x--,T):void 0,I&&function IP(_,v,y){if(!Dr(y))return!1;var b=typeof v;return!!("number"==b?Fc(y)&&q_(v,y.length):"string"==b&&v in y)&&ro(y[v],_)}(y[0],y[1],I)&&(T=x<3?void 0:T,x=1),v=Object(v);++b<x;){var S=y[b];S&&_(v,S,b,T)}return v}))}((function(_,v,y){L_(_,v,y)}));function jP(_){return function(){return _}}function G_(_){return _}v.exports=De}),ur=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.BatchSpanProcessorBase=void 0;var v=Ve(),y=Ht();_.BatchSpanProcessorBase=class{constructor(_,v){this._exporter=_,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let b=y.getEnv();this._maxExportBatchSize="number"==typeof(null==v?void 0:v.maxExportBatchSize)?v.maxExportBatchSize:b.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==v?void 0:v.maxQueueSize)?v.maxQueueSize:b.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==v?void 0:v.scheduledDelayMillis)?v.scheduledDelayMillis:b.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==v?void 0:v.exportTimeoutMillis)?v.exportTimeoutMillis:b.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(_){}onEnd(_){this._isShutdown||this._addToBuffer(_)}shutdown(){return this._isShutdown||(this._isShutdown=!0,this._shuttingDownPromise=new Promise((_,v)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(_).catch(_=>{v(_)})})),this._shuttingDownPromise}_addToBuffer(_){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(_),this._maybeStartTimer())}_flushAll(){return new Promise((_,v)=>{let y=[];for(let _=0,v=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);_<v;_++)y.push(this._flushOneBatch());Promise.all(y).then(()=>{_()}).catch(v)})}_flushOneBatch(){return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise((_,b)=>{let x=setTimeout(()=>{b(new Error("Timeout"))},this._exportTimeoutMillis);v.context.with(y.suppressTracing(v.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),v=>{var T;clearTimeout(x),v.code===y.ExportResultCode.SUCCESS?_():b(null!==(T=v.error)&&void 0!==T?T:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){void 0===this._timer&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(_=>{y.globalErrorHandler(_)})},this._scheduledDelayMillis),y.unrefTimer(this._timer))}_clearTimer(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)}}}),pr=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.BatchSpanProcessor=void 0;var v=ur(),y=class extends v.BatchSpanProcessorBase{onShutdown(){}};_.BatchSpanProcessor=y}),hr=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),y(pr(),_)}),dr=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),y(hr(),_)}),fr=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.BasicTracerProvider=_.ForceFlushState=void 0;var v,y,b=Ve(),x=Ht(),T=or(),I=Tr(),S=Wt(),M=sr(),A=cr(),P=lr(),O=dr();(y=v=_.ForceFlushState||(_.ForceFlushState={}))[y.resolved=0]="resolved",y[y.timeout=1]="timeout",y[y.error=2]="error",y[y.unresolved=3]="unresolved";var k=class{constructor(_={}){var v;this._registeredSpanProcessors=[],this._tracers=new Map;let y=P({},S.DEFAULT_CONFIG,_);this.resource=null!==(v=y.resource)&&void 0!==v?v:T.Resource.empty(),this.resource=T.Resource.default().merge(this.resource),this._config=Object.assign({},y,{resource:this.resource});let b=this._buildExporterFromEnv();if(void 0!==b){let _=new O.BatchSpanProcessor(b);this.activeSpanProcessor=_}else this.activeSpanProcessor=new A.NoopSpanProcessor}getTracer(_,v){let y=`${_}@${v||""}`;return this._tracers.has(y)||this._tracers.set(y,new I.Tracer({name:_,version:v},this._config,this)),this._tracers.get(y)}addSpanProcessor(_){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch(_=>b.diag.error("Error while trying to shutdown current span processor",_)),this._registeredSpanProcessors.push(_),this.activeSpanProcessor=new M.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(_={}){b.trace.setGlobalTracerProvider(this),void 0===_.propagator&&(_.propagator=this._buildPropagatorFromEnv()),_.contextManager&&b.context.setGlobalContextManager(_.contextManager),_.propagator&&b.propagation.setGlobalPropagator(_.propagator)}forceFlush(){let _=this._config.forceFlushTimeoutMillis,y=this._registeredSpanProcessors.map(y=>new Promise(b=>{let x,T=setTimeout(()=>{b(new Error(`Span processor did not completed within timeout period of ${_} ms`)),x=v.timeout},_);y.forceFlush().then(()=>{clearTimeout(T),x!==v.timeout&&(x=v.resolved,b(x))}).catch(_=>{clearTimeout(T),x=v.error,b(_)})}));return new Promise((_,b)=>{Promise.all(y).then(y=>{let x=y.filter(_=>_!==v.resolved);x.length>0?b(x):_()}).catch(_=>b([_]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(_){var v;return null===(v=k._registeredPropagators.get(_))||void 0===v?void 0:v()}_getSpanExporter(_){var v;return null===(v=k._registeredExporters.get(_))||void 0===v?void 0:v()}_buildPropagatorFromEnv(){let _=Array.from(new Set(x.getEnv().OTEL_PROPAGATORS)),v=_.map(_=>{let v=this._getPropagator(_);return v||b.diag.warn(`Propagator "${_}" requested through environment variable is unavailable.`),v}).reduce((_,v)=>(v&&_.push(v),_),[]);if(0!==v.length)return 1===_.length?v[0]:new x.CompositePropagator({propagators:v})}_buildExporterFromEnv(){let _=x.getEnv().OTEL_TRACES_EXPORTER;if("none"===_)return;let v=this._getSpanExporter(_);return v||b.diag.error(`Exporter "${_}" requested through environment variable is unavailable.`),v}};_.BasicTracerProvider=k,k._registeredPropagators=new Map([["tracecontext",()=>new x.HttpTraceContextPropagator],["baggage",()=>new x.HttpBaggagePropagator]]),k._registeredExporters=new Map}),gr=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.ConsoleSpanExporter=void 0;var v=Ht();_.ConsoleSpanExporter=class{export(_,v){return this._sendSpans(_,v)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(_){return{traceId:_.spanContext().traceId,parentId:_.parentSpanId,name:_.name,id:_.spanContext().spanId,kind:_.kind,timestamp:v.hrTimeToMicroseconds(_.startTime),duration:v.hrTimeToMicroseconds(_.duration),attributes:_.attributes,status:_.status,events:_.events}}_sendSpans(_,y){for(let v of _)console.log(this._exportInfo(v));if(y)return y({code:v.ExportResultCode.SUCCESS})}}}),_r=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.InMemorySpanExporter=void 0;var v=Ht();_.InMemorySpanExporter=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(_,y){if(this._stopped)return y({code:v.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(..._),setTimeout(()=>y({code:v.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}}}),vr=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),yr=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.SimpleSpanProcessor=void 0;var v=Ve(),y=Ht();_.SimpleSpanProcessor=class{constructor(_){this._exporter=_,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(_){}onEnd(_){this._isShutdown||v.context.with(y.suppressTracing(v.context.active()),()=>{this._exporter.export([_],_=>{var v;_.code!==y.ExportResultCode.SUCCESS&&y.globalErrorHandler(null!==(v=_.error)&&void 0!==v?v:new Error(`SimpleSpanProcessor: span export failed (status ${_})`))})})}shutdown(){return this._isShutdown||(this._isShutdown=!0,this._shuttingDownPromise=new Promise((_,v)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(_).catch(_=>{v(_)})})),this._shuttingDownPromise}}}),br=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),wr=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Er=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),xr=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Tr=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),y(Yt(),_),y(fr(),_),y(dr(),_),y(gr(),_),y(_r(),_),y(vr(),_),y(yr(),_),y(br(),_),y(cr(),_),y(Vt(),_),y(wr(),_),y(Er(),_),y(xr(),_)}),Ir=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.enable=_.azureCoreTracing=_.AzureMonitorSymbol=void 0;var v=j();_.AzureMonitorSymbol="Azure_Monitor_Tracer";var y=!1;_.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(b){if(y)return b;try{var x=Tr(),T=Ve(),I=(new x.BasicTracerProvider).getTracer("applicationinsights tracer"),S=b.setTracer;b.setTracer=function(y){var b=y.startSpan;y.startSpan=function(_,y,x){var T=b.call(this,_,y,x),I=T.end;return T.end=function(){var _=I.apply(this,arguments);return v.channel.publish("azure-coretracing",T),_},T},y[_.AzureMonitorSymbol]=!0,S.call(this,y)},T.trace.getSpan(T.context.active()),b.setTracer(I),y=!0}catch(_){}return b}},_.enable=function ZP(){v.channel.registerMonkeyPatch("@azure/core-tracing",_.azureCoreTracing)}}),Sr=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.enable=_.bunyan=void 0;var v=j();_.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(_){var y=_.prototype._emit;return _.prototype._emit=function(_,b){var x=y.apply(this,arguments);if(!b){var T=x;T||(T=y.call(this,_,!0)),v.channel.publish("bunyan",{level:_.level,result:T})}return x},_}},_.enable=function eR(){v.channel.registerMonkeyPatch("bunyan",_.bunyan)}}),Mr=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.enable=_.console=void 0;var v=j(),b=y(2781);_.console={versionSpecifier:">= 4.0.0",patch:function(_){var y=new b.Writable,x=new b.Writable;y.write=function(_){if(!_)return!0;var y=_.toString();return v.channel.publish("console",{message:y}),!0},x.write=function(_){if(!_)return!0;var y=_.toString();return v.channel.publish("console",{message:y,stderr:!0}),!0};for(var T=new _.Console(y,x),a=function(v){var y=_[v];y&&(_[v]=function(){if(T[v])try{T[v].apply(T,arguments)}catch(_){}return y.apply(_,arguments)})},I=0,S=["log","info","warn","error","dir","time","timeEnd","trace","assert"];I<S.length;I++){a(S[I])}return _}},_.enable=function rR(){v.channel.registerMonkeyPatch("console",_.console),y(6206)}}),Ar=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.enable=_.mongoCore=void 0;var v=j();_.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(_){var y=_.Server.prototype.connect;return _.Server.prototype.connect=function(){var _=y.apply(this,arguments),b=this.s.pool.write;this.s.pool.write=function(){var _="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[_]&&(arguments[_]=v.channel.bindToContext(arguments[_])),b.apply(this,arguments)};var x=this.s.pool.logout;return this.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=v.channel.bindToContext(arguments[1])),x.apply(this,arguments)},_},_}},_.enable=function iR(){v.channel.registerMonkeyPatch("mongodb-core",_.mongoCore)}}),Pr=l(_=>{"use strict";var v=_&&_.__assign||function(){return(v=Object.assign||function(_){for(var v,y=1,b=arguments.length;y<b;y++)for(var x in v=arguments[y])Object.prototype.hasOwnProperty.call(v,x)&&(_[x]=v[x]);return _}).apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.enable=_.mongo330=_.mongo3=_.mongo2=void 0;var y=j();_.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:function(_){var b=_.instrument({operationIdGenerator:{next:function(){return y.channel.bindToContext((function(_){return _()}))}}}),x={};return b.on("started",(function(_){x[_.requestId]||(x[_.requestId]=v(v({},_),{time:new Date}))})),b.on("succeeded",(function(_){var v=x[_.requestId];v&&delete x[_.requestId],"function"==typeof _.operationId?_.operationId((function(){return y.channel.publish("mongodb",{startedData:v,event:_,succeeded:!0})})):y.channel.publish("mongodb",{startedData:v,event:_,succeeded:!0})})),b.on("failed",(function(_){var v=x[_.requestId];v&&delete x[_.requestId],"function"==typeof _.operationId?_.operationId((function(){return y.channel.publish("mongodb",{startedData:v,event:_,succeeded:!1})})):y.channel.publish("mongodb",{startedData:v,event:_,succeeded:!1})})),_}},_.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:function(_){var b=_.instrument(),x={},T={};return b.on("started",(function(_){x[_.requestId]||(T[_.requestId]=y.channel.bindToContext((function(_){return _()})),x[_.requestId]=v(v({},_),{time:new Date}))})),b.on("succeeded",(function(_){var v=x[_.requestId];v&&delete x[_.requestId],"object"==typeof _&&"function"==typeof T[_.requestId]&&(T[_.requestId]((function(){return y.channel.publish("mongodb",{startedData:v,event:_,succeeded:!0})})),delete T[_.requestId])})),b.on("failed",(function(_){var v=x[_.requestId];v&&delete x[_.requestId],"object"==typeof _&&"function"==typeof T[_.requestId]&&(T[_.requestId]((function(){return y.channel.publish("mongodb",{startedData:v,event:_,succeeded:!1})})),delete T[_.requestId])})),_}},_.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:function(_){!function(_){var v=_.Server.prototype.connect;_.Server.prototype.connect=function(){var _=v.apply(this,arguments),b=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var _="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[_]&&(arguments[_]=y.channel.bindToContext(arguments[_])),b.apply(this,arguments)};var x=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=y.channel.bindToContext(arguments[1])),x.apply(this,arguments)},_}}(_);var v=_.instrument(),b={},x={};return v.on("started",(function(_){b[_.requestId]||(x[_.requestId]=y.channel.bindToContext((function(_){return _()})),b[_.requestId]=_)})),v.on("succeeded",(function(_){var v=b[_.requestId];v&&delete b[_.requestId],"object"==typeof _&&"function"==typeof x[_.requestId]&&(x[_.requestId]((function(){return y.channel.publish("mongodb",{startedData:v,event:_,succeeded:!0})})),delete x[_.requestId])})),v.on("failed",(function(_){var v=b[_.requestId];v&&delete b[_.requestId],"object"==typeof _&&"function"==typeof x[_.requestId]&&(x[_.requestId]((function(){return y.channel.publish("mongodb",{startedData:v,event:_,succeeded:!1})})),delete x[_.requestId])})),_}},_.enable=function cR(){y.channel.registerMonkeyPatch("mongodb",_.mongo2),y.channel.registerMonkeyPatch("mongodb",_.mongo3),y.channel.registerMonkeyPatch("mongodb",_.mongo330)}}),Or=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.enable=_.mysql=void 0;var v=j(),b=y(1017);_.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:function(_,x){var r=function(_,y){return function(y,b){var x=_[y];x&&(_[y]=function(){for(var _=arguments.length-1,y=arguments.length-1;y>=0;--y){if("function"==typeof arguments[y]){_=y;break}if(void 0!==arguments[y])break}var T=arguments[_],I={result:null,startTime:null,startDate:null};"function"==typeof T&&(b?(I.startTime=process.hrtime(),I.startDate=new Date,arguments[_]=v.channel.bindToContext(b(I,T))):arguments[_]=v.channel.bindToContext(T));var S=x.apply(this,arguments);return I.result=S,S})}},n=function(_,v){return r(_.prototype)},T=y(3255)(b.dirname(x)+"/lib/Connection");["connect","changeUser","ping","statistics","end"].forEach((function(_){return n(T)(_)})),r(T)("createQuery",(function(_,y){return function(b){var x=process.hrtime(_.startTime),T=1e3*x[0]+x[1]/1e6|0;v.channel.publish("mysql",{query:_.result,callbackArgs:arguments,err:b,duration:T,time:_.startDate}),y.apply(this,arguments)}}));var I=y(9118)(b.dirname(x)+"/lib/Pool");return["_enqueueCallback"].forEach((function(_){return n(I)(_)})),_}},_.enable=function pR(){v.channel.registerMonkeyPatch("mysql",_.mysql)}}),Cr=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.enable=_.postgresPool1=void 0;var v=j();_.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:function fR(_){var y=_.prototype.connect;return _.prototype.connect=function(_){return _&&(arguments[0]=v.channel.bindToContext(_)),y.apply(this,arguments)},_}},_.enable=function dR(){v.channel.registerMonkeyPatch("pg-pool",_.postgresPool1)}}),kr=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.enable=_.postgres7=_.postgres6=void 0;var v=j(),b=y(2361);_.postgres6={versionSpecifier:"6.*",patch:function hR(_,y){var x=_.Client.prototype.query,T="__diagnosticOriginalFunc";return _.Client.prototype.query=function(_,y,I){var S,M={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},A=process.hrtime();function f(_){_&&_[T]&&(_=_[T]);var y=v.channel.bindToContext((function(y,x){var T=process.hrtime(A);if(M.result=x&&{rowCount:x.rowCount,command:x.command},M.error=y,M.duration=Math.ceil(1e3*T[0]+T[1]/1e6),v.channel.publish("postgres",M),y){if(_)return _.apply(this,arguments);S&&S instanceof b.EventEmitter&&S.emit("error",y)}else _&&_.apply(this,arguments)}));try{return Object.defineProperty(y,T,{value:_}),y}catch(v){return _}}try{"string"==typeof _?y instanceof Array?(M.query.preparable={text:_,args:y},I=f(I)):(M.query.text=_,I?I=f(I):y=f(y)):("string"==typeof _.name?M.query.plan=_.name:_.values instanceof Array?M.query.preparable={text:_.text,args:_.values}:M.query.text=_.text,I?I=f(I):y?y=f(y):_.callback=f(_.callback))}catch(_){return x.apply(this,arguments)}return arguments[0]=_,arguments[1]=y,arguments[2]=I,arguments.length=arguments.length>3?arguments.length:3,S=x.apply(this,arguments)},_}},_.postgres7={versionSpecifier:">=7.* <=8.*",patch:function _R(_,y){var x=_.Client.prototype.query,T="__diagnosticOriginalFunc";return _.Client.prototype.query=function(_,y,I){var S,M=this,A=!!I,P={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},O=process.hrtime();function h(_){_&&_[T]&&(_=_[T]);var y=v.channel.bindToContext((function(y,x){var T=process.hrtime(O);if(P.result=x&&{rowCount:x.rowCount,command:x.command},P.error=y,P.duration=Math.ceil(1e3*T[0]+T[1]/1e6),v.channel.publish("postgres",P),y){if(_)return _.apply(this,arguments);S&&S instanceof b.EventEmitter&&S.emit("error",y)}else _&&_.apply(this,arguments)}));try{return Object.defineProperty(y,T,{value:_}),y}catch(v){return _}}try{"string"==typeof _?y instanceof Array?(P.query.preparable={text:_,args:y},I=(A="function"==typeof I)?h(I):I):(P.query.text=_,I?I=(A="function"==typeof I)?h(I):I:y=(A="function"==typeof y)?h(y):y):("string"==typeof _.name?P.query.plan=_.name:_.values instanceof Array?P.query.preparable={text:_.text,args:_.values}:P.query.text=_.text,I?(A="function"==typeof I,I=h(I)):y?y=(A="function"==typeof y)?h(y):y:(A="function"==typeof _.callback,_.callback=A?h(_.callback):_.callback))}catch(_){return x.apply(this,arguments)}return arguments[0]=_,arguments[1]=y,arguments[2]=I,arguments.length=arguments.length>3?arguments.length:3,S=x.apply(this,arguments),A?S:S.then((function(_){return h()(void 0,_),new M._Promise((function(v,y){v(_)}))})).catch((function(_){return h()(_,void 0),new M._Promise((function(v,y){y(_)}))}))},_}},_.enable=function vR(){v.channel.registerMonkeyPatch("pg",_.postgres6),v.channel.registerMonkeyPatch("pg",_.postgres7)}}),Rr=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.enable=_.redis=void 0;var v=j();_.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(_){var y=_.RedisClient.prototype.internal_send_command;return _.RedisClient.prototype.internal_send_command=function(_){if(_){var b=_.callback;if(!b||!b.pubsubBound){var x=this.address,T=process.hrtime(),I=new Date;_.callback=v.channel.bindToContext((function(y,S){var M=process.hrtime(T),A=1e3*M[0]+M[1]/1e6|0;v.channel.publish("redis",{duration:A,address:x,commandObj:_,err:y,result:S,time:I}),"function"==typeof b&&b.apply(this,arguments)})),_.callback.pubsubBound=!0}}return y.call(this,_)},_}},_.enable=function ER(){v.channel.registerMonkeyPatch("redis",_.redis)}}),Lr=l(_=>{"use strict";var v=_&&_.__assign||function(){return(v=Object.assign||function(_){for(var v,y=1,b=arguments.length;y<b;y++)for(var x in v=arguments[y])Object.prototype.hasOwnProperty.call(v,x)&&(_[x]=v[x]);return _}).apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.enable=_.tedious=void 0;var y=j();_.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:function(_){var b=_.Connection.prototype.makeRequest;return _.Connection.prototype.makeRequest=function(){function n(_){var b=process.hrtime(),x={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return y.channel.bindToContext((function(T,I,S){var M=process.hrtime(b);x=v(v({},x),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!T&&{rowCount:I,rows:S},query:{text:this.parametersByName.statement.value},error:T,duration:Math.ceil(1e3*M[0]+M[1]/1e6)}),y.channel.publish("tedious",x),_.call(this,T,I,S)}))}var _=arguments[0];arguments[0].callback=n(_.callback),b.apply(this,arguments)},_}},_.enable=function yR(){y.channel.registerMonkeyPatch("tedious",_.tedious)}}),Br=l(_=>{"use strict";var v,y=_&&_.__extends||(v=function(_,y){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,v){_.__proto__=v}||function(_,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(_[y]=v[y])})(_,y)},function(_,y){function n(){this.constructor=_}v(_,y),_.prototype=null===y?Object.create(y):(n.prototype=y.prototype,new n)}),b=_&&_.__rest||function(_,v){var y={};for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&v.indexOf(b)<0&&(y[b]=_[b]);if(null!=_&&"function"==typeof Object.getOwnPropertySymbols){var x=0;for(b=Object.getOwnPropertySymbols(_);x<b.length;x++)v.indexOf(b[x])<0&&Object.prototype.propertyIsEnumerable.call(_,b[x])&&(y[b[x]]=_[b[x]])}return y};Object.defineProperty(_,"__esModule",{value:!0}),_.enable=_.winston2=_.winston3=void 0;var x=j();_.winston3={versionSpecifier:"3.x",patch:function(_){var v=function(_){function o(v,y){var b=_.call(this,y)||this;return b.winston=v,b}return y(o,_),o.prototype.log=function(_,v){var y=_.message,T=_.level,I=_.meta,S=b(_,["message","level","meta"]);T="function"==typeof Symbol.for?_[Symbol.for("level")]:T,y=_ instanceof Error?_:y;var M=function(_,v){return null!=_.config.npm.levels[v]?"npm":null!=_.config.syslog.levels[v]?"syslog":"unknown"}(this.winston,T);for(var A in I=I||{},S)S.hasOwnProperty(A)&&(I[A]=S[A]);x.channel.publish("winston",{message:y,level:T,levelKind:M,meta:I}),v()},o}(_.Transport);function n(){var y,b=arguments[0].levels||_.config.npm.levels;for(var x in b)b.hasOwnProperty(x)&&(y=void 0===y||b[x]>b[y]?x:y);this.add(new v(_,{level:y}))}var T=_.createLogger;_.createLogger=function(){var y,b=arguments[0].levels||_.config.npm.levels;for(var x in b)b.hasOwnProperty(x)&&(y=void 0===y||b[x]>b[y]?x:y);var I=T.apply(this,arguments);I.add(new v(_,{level:y}));var S=I.configure;return I.configure=function(){S.apply(this,arguments),n.apply(this,arguments)},I};var I=_.configure;return _.configure=function(){I.apply(this,arguments),n.apply(this,arguments)},_.add(new v(_)),_}},_.winston2={versionSpecifier:"2.x",patch:function(_){var v,y=_.Logger.prototype.log,n=function(y,b,T){var I;return I=v===_.config.npm.levels?"npm":v===_.config.syslog.levels?"syslog":"unknown",x.channel.publish("winston",{level:y,message:b,meta:T,levelKind:I}),b};return _.Logger.prototype.log=function(){return v=this.levels,this.filters&&0!==this.filters.length?this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter((function(_){return _!==n})),this.filters.push(n)):this.filters=[n],y.apply(this,arguments)},_}},_.enable=function bR(){x.channel.registerMonkeyPatch("winston",_.winston2),x.channel.registerMonkeyPatch("winston",_.winston3)}}),jr=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.enable=_.tedious=_.pgPool=_.pg=_.winston=_.redis=_.mysql=_.mongodb=_.mongodbCore=_.console=_.bunyan=_.azuresdk=void 0;var v=Ir();_.azuresdk=v;var y=Sr();_.bunyan=y;var b=Mr();_.console=b;var x=Ar();_.mongodbCore=x;var T=Pr();_.mongodb=T;var I=Or();_.mysql=I;var S=Cr();_.pgPool=S;var M=kr();_.pg=M;var A=Rr();_.redis=A;var P=Lr();_.tedious=P;var O=Br();_.winston=O,_.enable=function CR(){y.enable(),b.enable(),x.enable(),T.enable(),I.enable(),M.enable(),S.enable(),A.enable(),O.enable(),v.enable(),P.enable()}}),Fr=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.registerContextPreservation=_.IsInitialized=void 0;var v=k(),y=O();_.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var b,x,T,I,S="DiagnosticChannel";if(_.IsInitialized){for(I in b=jr(),x=(process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"").split(","),T={bunyan:b.bunyan,console:b.console,mongodb:b.mongodb,mongodbCore:b.mongodbCore,mysql:b.mysql,redis:b.redis,pg:b.pg,pgPool:b.pgPool,winston:b.winston,azuresdk:b.azuresdk})-1===x.indexOf(I)&&(T[I].enable(),y.info(S,"Subscribed to "+I+" events"));x.length>0&&y.info(S,"Some modules will not be patched",x)}else y.info(S,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");_.registerContextPreservation=function PR(y){if(_.IsInitialized){var b=j();b.channel.addContextPreservation(y),b.channel.spanContextPropagator=v.AsyncScopeManager}}}),Ur=l((_,v)=>{"use strict";v.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),zr=l((_,v)=>{"use strict";var b=_&&_.__assign||function(){return(b=Object.assign||function(_){for(var v,y=1,b=arguments.length;y<b;y++)for(var x in v=arguments[y])Object.prototype.hasOwnProperty.call(v,x)&&(_[x]=v[x]);return _}).apply(this,arguments)},x=y(3685),T=y(5687),I=y(7310),S=y(2057),M=O(),A=Ur(),P=function(){function e(){}return e.getCookie=function(_,v){var y="";if(_&&_.length&&"string"==typeof v)for(var b=_+"=",x=v.split(";"),T=0;T<x.length;T++){v=x[T];if((v=e.trim(v))&&0===v.indexOf(b)){y=v.substring(b.length,x[T].length);break}}return y},e.trim=function(_){return"string"==typeof _?_.replace(/^\s+|\s+$/g,""):""},e.int32ArrayToBase64=function(_){var r=function(_,v){return String.fromCharCode(_>>v&255)},v=_.map((function(_){return r(_,24)+r(_,16)+r(_,8)+r(_,0)})).join(""),y=(Buffer.from?Buffer.from(v,"binary"):new Buffer(v,"binary")).toString("base64");return y.substr(0,y.indexOf("="))},e.random32=function(){return 4294967296*Math.random()|0},e.randomu32=function(){return e.random32()+2147483648},e.w3cTraceId=function(){for(var _,v=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],y="",b=0;b<4;b++)y+=v[15&(_=e.random32())]+v[_>>4&15]+v[_>>8&15]+v[_>>12&15]+v[_>>16&15]+v[_>>20&15]+v[_>>24&15]+v[_>>28&15];var x=v[8+4*Math.random()|0];return y.substr(0,8)+y.substr(9,4)+"4"+y.substr(13,3)+x+y.substr(16,3)+y.substr(19,12)},e.w3cSpanId=function(){return e.w3cTraceId().substring(16)},e.isValidW3CId=function(_){return 32===_.length&&"00000000000000000000000000000000"!==_},e.isArray=function(_){return"[object Array]"===Object.prototype.toString.call(_)},e.isError=function(_){return _ instanceof Error},e.isPrimitive=function(_){var v=typeof _;return"string"===v||"number"===v||"boolean"===v},e.isDate=function(_){return"[object Date]"===Object.prototype.toString.call(_)},e.msToTimeSpan=function(_){(isNaN(_)||_<0)&&(_=0);var v=(_/1e3%60).toFixed(7).replace(/0{0,4}$/,""),y=""+Math.floor(_/6e4)%60,b=""+Math.floor(_/36e5)%24,x=Math.floor(_/864e5);return v=v.indexOf(".")<2?"0"+v:v,y=y.length<2?"0"+y:y,(x>0?x+".":"")+(b=b.length<2?"0"+b:b)+":"+y+":"+v},e.extractError=function(_){var v=_;return{message:_.message,code:v.code||v.id||""}},e.extractObject=function(_){return _ instanceof Error?e.extractError(_):"function"==typeof _.toJSON?_.toJSON():_},e.validateStringMap=function(_){if("object"==typeof _){var v={};for(var y in _){var b="",x=_[y],T=typeof x;if(e.isPrimitive(x))b=x.toString();else if(null===x||"undefined"===T)b="";else{if("function"===T){M.info("key: "+y+" was function; will not serialize");continue}var I=e.isArray(x)?x:e.extractObject(x);try{b=e.isPrimitive(I)?I:JSON.stringify(I)}catch(_){b=x.constructor.name.toString()+" (Error: "+_.message+")",M.info("key: "+y+", could not be serialized")}}v[y]=b.substring(0,e.MAX_PROPERTY_LENGTH)}return v}M.info("Invalid properties dropped from payload")},e.canIncludeCorrelationHeader=function(_,v){var y=_&&_.config&&_.config.correlationHeaderExcludedDomains;if(!y||0==y.length||!v)return!0;for(var b=0;b<y.length;b++){if(new RegExp(y[b].replace(/\./g,".").replace(/\*/g,".*")).test(I.parse(v).hostname))return!1}return!0},e.getCorrelationContextTarget=function(_,v){var y=_.headers&&_.headers[A.requestContextHeader];if(y)for(var b=y.split(","),x=0;x<b.length;++x){var T=b[x].split("=");if(2==T.length&&T[0]==v)return T[1]}},e.makeRequest=function(_,v,y,S){v&&0===v.indexOf("//")&&(v="https:"+v);var A=I.parse(v),P=b(b({},y),{host:A.hostname,port:A.port,path:A.pathname}),O=void 0;if("https:"===A.protocol&&(O=_.proxyHttpsUrl||void 0),"http:"===A.protocol&&(O=_.proxyHttpUrl||void 0),O){0===O.indexOf("//")&&(O="http:"+O);var k=I.parse(O);"https:"===k.protocol?(M.info("Proxies that use HTTPS are not supported"),O=void 0):P=b(b({},P),{host:k.hostname,port:k.port||"80",path:v,headers:b(b({},P.headers),{Host:A.hostname})})}var R="https:"===A.protocol&&!O;return R&&void 0!==_.httpsAgent?P.agent=_.httpsAgent:R||void 0===_.httpAgent?R&&(P.agent=e.tlsRestrictedAgent):P.agent=_.httpAgent,R?T.request(P,S):x.request(P,S)},e.safeIncludeCorrelationHeader=function(_,v,y){var b;if("string"==typeof y)b=y;else if(y instanceof Array)b=y.join(",");else if(y&&"function"==typeof y.toString)try{b=y.toString()}catch(_){M.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",_,y)}b?e.addCorrelationIdHeaderFromString(_,v,b):v.setHeader(A.requestContextHeader,A.requestContextSourceKey+"="+_.config.correlationId)},e.dumpObj=function(_){var v=Object.prototype.toString.call(_);return v+("[object Error]"===v?"{ stack: '"+_.stack+"', message: '"+_.message+"', name: '"+_.name+"'":JSON.stringify(_))},e.addCorrelationIdHeaderFromString=function(_,v,y){var b=y.split(","),x=A.requestContextSourceKey+"=";b.some((function(_){return _.substring(0,x.length)===x}))||v.setHeader(A.requestContextHeader,y+","+A.requestContextSourceKey+"="+_.config.correlationId)},e.MAX_PROPERTY_LENGTH=8192,e.tlsRestrictedAgent=new T.Agent({keepAlive:!0,maxSockets:25,secureOptions:S.SSL_OP_NO_SSLv2|S.SSL_OP_NO_SSLv3|S.SSL_OP_NO_TLSv1|S.SSL_OP_NO_TLSv1_1}),e}();v.exports=P}),Gr=l((_,v)=>{"use strict";var y=zr(),b=O(),x=function(){function e(){}return e.queryCorrelationId=function(_,v){var x=_.profileQueryEndpoint+"/api/profiles/"+_.instrumentationKey+"/appId";if(e.completedLookups.hasOwnProperty(x))v(e.completedLookups[x]);else if(e.pendingLookups[x])e.pendingLookups[x].push(v);else{e.pendingLookups[x]=[v];var i=function(){if(e.pendingLookups[x]){var v={method:"GET",disableAppInsightsAutoCollection:!0};b.info(e.TAG,v);var T=y.makeRequest(_,x,v,(function(v){if(200===v.statusCode){var y="";v.setEncoding("utf-8"),v.on("data",(function(_){y+=_})),v.on("end",(function(){b.info(e.TAG,y);var _=e.correlationIdPrefix+y;e.completedLookups[x]=_,e.pendingLookups[x]&&e.pendingLookups[x].forEach((function(v){return v(_)})),delete e.pendingLookups[x]}))}else v.statusCode>=400&&v.statusCode<500?(e.completedLookups[x]=void 0,delete e.pendingLookups[x]):setTimeout(i,_.correlationIdRetryIntervalMs)}));T&&(T.on("error",(function(_){b.warn(e.TAG,_)})),T.end())}};setTimeout(i,0)}},e.cancelCorrelationIdQuery=function(_,v){var y=_.profileQueryEndpoint+"/api/profiles/"+_.instrumentationKey+"/appId",b=e.pendingLookups[y];b&&(e.pendingLookups[y]=b.filter((function(_){return _!=v})),0==e.pendingLookups[y].length&&delete e.pendingLookups[y])},e.generateRequestId=function(_){if(_){"."!==(_="|"==_[0]?_:"|"+_)[_.length-1]&&(_+=".");var v=(e.currentRootId++).toString(16);return e.appendSuffix(_,v,"_")}return e.generateRootId()},e.getRootId=function(_){var v=_.indexOf(".");v<0&&(v=_.length);var y="|"===_[0]?1:0;return _.substring(y,v)},e.generateRootId=function(){return"|"+y.w3cTraceId()+"."},e.appendSuffix=function(_,v,b){if(_.length+v.length<e.requestIdMaxLength)return _+v+b;var x=e.requestIdMaxLength-9;if(_.length>x)for(;x>1;--x){var T=_[x-1];if("."===T||"_"===T)break}if(x<=1)return e.generateRootId();for(v=y.randomu32().toString(16);v.length<8;)v="0"+v;return _.substring(0,x)+v+"#"},e.TAG="CorrelationIdManager",e.correlationIdPrefix="cid-v1:",e.w3cEnabled=!0,e.pendingLookups={},e.completedLookups={},e.requestIdMaxLength=1024,e.currentRootId=y.randomu32(),e}();v.exports=x}),Hr=l((_,v)=>{"use strict";var y=zr(),b=Gr(),x=function(){function e(_,v){if(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,_&&"string"==typeof _)if(_.split(",").length>1)this.traceId=y.w3cTraceId(),this.spanId=y.w3cTraceId().substr(0,16);else{var x=_.trim().split("-"),T=x.length;T>=4?(this.version=x[0],this.traceId=x[1],this.spanId=x[2],this.traceFlag=x[3]):(this.traceId=y.w3cTraceId(),this.spanId=y.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=e.DEFAULT_VERSION,this.traceId=y.w3cTraceId()),"00"===this.version&&4!==T&&(this.traceId=y.w3cTraceId(),this.spanId=y.w3cTraceId().substr(0,16)),"ff"===this.version&&(this.version=e.DEFAULT_VERSION,this.traceId=y.w3cTraceId(),this.spanId=y.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=e.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.traceId=y.w3cTraceId()),e.isValidTraceId(this.traceId)||(this.traceId=y.w3cTraceId()),e.isValidSpanId(this.spanId)||(this.spanId=y.w3cTraceId().substr(0,16),this.traceId=y.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(v){this.parentId=v.slice();var I=b.getRootId(v);e.isValidTraceId(I)||(this.legacyRootId=I,I=y.w3cTraceId()),-1!==v.indexOf("|")&&(v=v.substring(1+v.substring(0,v.length-1).lastIndexOf("."),v.length-1)),this.traceId=I,this.spanId=v}else this.traceId=y.w3cTraceId(),this.spanId=y.w3cTraceId().substr(0,16)}return e.isValidTraceId=function(_){return _.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==_},e.isValidSpanId=function(_){return _.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==_},e.formatOpenTelemetryTraceFlags=function(_){var v="0"+_.toString(16);return v.substring(v.length-2)},e.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.prototype.updateSpanId=function(){this.spanId=y.w3cTraceId().substr(0,16)},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}();v.exports=x}),Xr=l((_,v)=>{"use strict";var y=function(){function e(_){this.fieldmap=[],_&&(this.fieldmap=this.parseHeader(_))}return e.prototype.toString=function(){var _=this.fieldmap;return _&&0!=_.length?_.join(", "):null},e.validateKeyChars=function(_){var v=_.split("@");if(2==v.length){var y=v[0].trim(),b=v[1].trim(),x=Boolean(y.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),T=Boolean(b.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return x&&T}return 1==v.length&&Boolean(_.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/))},e.prototype.parseHeader=function(_){var v=[],y={},b=_.split(",");if(b.length>32)return null;for(var x=0,T=b;x<T.length;x++){var I=T[x].trim();if(0!==I.length){var S=I.split("=");if(2!==S.length||!e.validateKeyChars(S[0])||y[S[0]])return null;y[S[0]]=!0,v.push(I)}}return v},e.strict=!0,e}();v.exports=y}),qr=l((_,v)=>{"use strict";var y=function e(){};v.exports=y}),Vr=l((_,v)=>{"use strict";var y,b=_&&_.__extends||(y=function(_,v){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,v){_.__proto__=v}||function(_,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(_[y]=v[y])})(_,v)},function(_,v){function n(){this.constructor=_}y(_,v),_.prototype=null===v?Object.create(v):(n.prototype=v.prototype,new n)}),x=function(_){function t(){var v=_.call(this)||this;return v.ver=2,v.properties={},v.measurements={},v}return b(t,_),t}(qr());v.exports=x}),Wr=l((_,v)=>{"use strict";var y=function e(){};v.exports=y}),Yr=l((_,v)=>{"use strict";var y=function e(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"};v.exports=y}),Qr=l((_,v)=>{"use strict";var y,b=_&&_.__extends||(y=function(_,v){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,v){_.__proto__=v}||function(_,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(_[y]=v[y])})(_,v)},function(_,v){function n(){this.constructor=_}y(_,v),_.prototype=null===v?Object.create(v):(n.prototype=v.prototype,new n)}),x=function(_){function t(){return _.call(this)||this}return b(t,_),t}(Wr());v.exports=x}),Zr=l((_,v)=>{"use strict";var y,b;(b=y||(y={}))[b.Measurement=0]="Measurement",b[b.Aggregation=1]="Aggregation",v.exports=y}),Jr=l((_,v)=>{"use strict";var y=Zr(),b=function e(){this.kind=y.Measurement};v.exports=b}),ei=l((_,v)=>{"use strict";var y=function e(){this.ver=1,this.sampleRate=100,this.tags={}};v.exports=y}),ti=l((_,v)=>{"use strict";var y,b=_&&_.__extends||(y=function(_,v){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,v){_.__proto__=v}||function(_,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(_[y]=v[y])})(_,v)},function(_,v){function n(){this.constructor=_}y(_,v),_.prototype=null===v?Object.create(v):(n.prototype=v.prototype,new n)}),x=function(_){function t(){var v=_.call(this)||this;return v.ver=2,v.properties={},v.measurements={},v}return b(t,_),t}(qr());v.exports=x}),ri=l((_,v)=>{"use strict";var y,b=_&&_.__extends||(y=function(_,v){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,v){_.__proto__=v}||function(_,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(_[y]=v[y])})(_,v)},function(_,v){function n(){this.constructor=_}y(_,v),_.prototype=null===v?Object.create(v):(n.prototype=v.prototype,new n)}),x=function(_){function t(){var v=_.call(this)||this;return v.ver=2,v.exceptions=[],v.properties={},v.measurements={},v}return b(t,_),t}(qr());v.exports=x}),ii=l((_,v)=>{"use strict";var y=function e(){this.hasFullStack=!0,this.parsedStack=[]};v.exports=y}),ni=l((_,v)=>{"use strict";var y,b=_&&_.__extends||(y=function(_,v){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,v){_.__proto__=v}||function(_,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(_[y]=v[y])})(_,v)},function(_,v){function n(){this.constructor=_}y(_,v),_.prototype=null===v?Object.create(v):(n.prototype=v.prototype,new n)}),x=function(_){function t(){var v=_.call(this)||this;return v.ver=2,v.properties={},v}return b(t,_),t}(qr());v.exports=x}),ai=l((_,v)=>{"use strict";var y,b=_&&_.__extends||(y=function(_,v){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,v){_.__proto__=v}||function(_,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(_[y]=v[y])})(_,v)},function(_,v){function n(){this.constructor=_}y(_,v),_.prototype=null===v?Object.create(v):(n.prototype=v.prototype,new n)}),x=function(_){function t(){var v=_.call(this)||this;return v.ver=2,v.metrics=[],v.properties={},v}return b(t,_),t}(qr());v.exports=x}),oi=l((_,v)=>{"use strict";var y,b=_&&_.__extends||(y=function(_,v){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,v){_.__proto__=v}||function(_,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(_[y]=v[y])})(_,v)},function(_,v){function n(){this.constructor=_}y(_,v),_.prototype=null===v?Object.create(v):(n.prototype=v.prototype,new n)}),x=function(_){function t(){var v=_.call(this)||this;return v.ver=2,v.properties={},v.measurements={},v}return b(t,_),t}(ti());v.exports=x}),si=l((_,v)=>{"use strict";var y,b=_&&_.__extends||(y=function(_,v){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,v){_.__proto__=v}||function(_,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(_[y]=v[y])})(_,v)},function(_,v){function n(){this.constructor=_}y(_,v),_.prototype=null===v?Object.create(v):(n.prototype=v.prototype,new n)}),x=function(_){function t(){var v=_.call(this)||this;return v.ver=2,v.success=!0,v.properties={},v.measurements={},v}return b(t,_),t}(qr());v.exports=x}),ci=l((_,v)=>{"use strict";var y,b=_&&_.__extends||(y=function(_,v){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,v){_.__proto__=v}||function(_,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(_[y]=v[y])})(_,v)},function(_,v){function n(){this.constructor=_}y(_,v),_.prototype=null===v?Object.create(v):(n.prototype=v.prototype,new n)}),x=function(_){function t(){var v=_.call(this)||this;return v.ver=2,v.properties={},v.measurements={},v}return b(t,_),t}(qr());v.exports=x}),li=l((_,v)=>{"use strict";var y,b;(b=y||(y={}))[b.Verbose=0]="Verbose",b[b.Information=1]="Information",b[b.Warning=2]="Warning",b[b.Error=3]="Error",b[b.Critical=4]="Critical",v.exports=y}),ui=l((_,v)=>{"use strict";var y=function e(){};v.exports=y}),pi=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.AvailabilityData=Vr(),_.Base=Wr(),_.ContextTagKeys=Yr(),_.Data=Qr(),_.DataPoint=Jr(),_.DataPointType=Zr(),_.Domain=qr(),_.Envelope=ei(),_.EventData=ti(),_.ExceptionData=ri(),_.ExceptionDetails=ii(),_.MessageData=ni(),_.MetricData=ai(),_.PageViewData=oi(),_.RemoteDependencyData=si(),_.RequestData=ci(),_.SeverityLevel=li(),_.StackFrame=ui()}),hi=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.domainSupportsProperties=_.RemoteDependencyDataConstants=void 0;var v=pi(),y=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e}();_.RemoteDependencyDataConstants=y,_.domainSupportsProperties=function g0(_){return"properties"in _||_ instanceof v.EventData||_ instanceof v.ExceptionData||_ instanceof v.MessageData||_ instanceof v.MetricData||_ instanceof v.PageViewData||_ instanceof v.RemoteDependencyData||_ instanceof v.RequestData}}),di=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),fi=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),mi=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),gi=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),_i=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),vi=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),yi=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),bi=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Ei=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),xi=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Ti=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Ii=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Si=l(_=>{"use strict";var v,y;Object.defineProperty(_,"__esModule",{value:!0}),_.TelemetryType=_.TelemetryTypeString=_.baseTypeToTelemetryType=_.telemetryTypeToBaseType=void 0,_.telemetryTypeToBaseType=function E0(_){switch(_){case v.Event:return"EventData";case v.Exception:return"ExceptionData";case v.Trace:return"MessageData";case v.Metric:return"MetricData";case v.Request:return"RequestData";case v.Dependency:return"RemoteDependencyData";case v.Availability:return"AvailabilityData";case v.PageView:return"PageViewData"}},_.baseTypeToTelemetryType=function m0(_){switch(_){case"EventData":return v.Event;case"ExceptionData":return v.Exception;case"MessageData":return v.Trace;case"MetricData":return v.Metric;case"RequestData":return v.Request;case"RemoteDependencyData":return v.Dependency;case"AvailabilityData":return v.Availability;case"PageViewData":return v.PageView}},_.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"},(y=v=_.TelemetryType||(_.TelemetryType={}))[y.Event=0]="Event",y[y.Exception=1]="Exception",y[y.Trace=2]="Trace",y[y.Metric=3]="Metric",y[y.Request=4]="Request",y[y.Dependency=5]="Dependency",y[y.Availability=6]="Availability",y[y.PageView=7]="PageView"}),Mi=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),y(di(),_),y(fi(),_),y(mi(),_),y(gi(),_),y(_i(),_),y(vi(),_),y(yi(),_),y(bi(),_),y(Ei(),_),y(xi(),_),y(Ti(),_),y(Ii(),_),y(Si(),_)}),Pi=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Ci=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Di=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Ni=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),ki=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Ri=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Li=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),Bi=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),ji=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),y(Pi(),_),y(Ci(),_),y(Di(),_),y(Ni(),_),y(ki(),_),y(Ri(),_),y(Li(),_),y(Bi(),_)}),Fi=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),y(hi(),_),y(pi(),_),y(Mi(),_),y(ji(),_)}),Ui=l((_,v)=>{"use strict";var y=function(){function e(){}return e.prototype.getUrl=function(){return this.url},e.prototype.RequestParser=function(){this.startTime=+new Date},e.prototype._setStatus=function(_,v){var y=+new Date;this.duration=y-this.startTime,this.statusCode=_;var b=this.properties||{};if(v)if("string"==typeof v)b.error=v;else if(v instanceof Error)b.error=v.message;else if("object"==typeof v)for(var x in v)b[x]=v[x]&&v[x].toString&&v[x].toString();this.properties=b},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},e}();v.exports=y}),zi=l((_,v)=>{"use strict";var b,x=_&&_.__extends||(b=function(_,v){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,v){_.__proto__=v}||function(_,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(_[y]=v[y])})(_,v)},function(_,v){function n(){this.constructor=_}b(_,v),_.prototype=null===v?Object.create(v):(n.prototype=v.prototype,new n)}),T=y(7310),I=Fi(),S=zr(),M=Ur(),A=Ui(),P=Gr(),O=Xr(),k=Hr(),R=function(_){function t(v,y){var b=_.call(this)||this;return v&&(b.method=v.method,b.url=b._getAbsoluteUrl(v),b.startTime=+new Date,b.socketRemoteAddress=v.socket&&v.socket.remoteAddress,b.parseHeaders(v,y),v.connection&&(b.connectionRemoteAddress=v.connection.remoteAddress,b.legacySocketRemoteAddress=v.connection.socket&&v.connection.socket.remoteAddress)),b}return x(t,_),t.prototype.onError=function(_,v){this._setStatus(void 0,_),v&&(this.duration=v)},t.prototype.onResponse=function(_,v){this._setStatus(_.statusCode,void 0),v&&(this.duration=v)},t.prototype.getRequestTelemetry=function(_){var v={id:this.requestId,name:this.method+" "+T.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(_&&_.time?v.time=_.time:this.startTime&&(v.time=new Date(this.startTime)),_){for(var y in _)v[y]||(v[y]=_[y]);if(_.properties)for(var y in _.properties)v.properties[y]=_.properties[y]}return v},t.prototype.getRequestTags=function(_){var v={};for(var y in _)v[y]=_[y];return v[t.keys.locationIp]=_[t.keys.locationIp]||this._getIp(),v[t.keys.sessionId]=_[t.keys.sessionId]||this._getId("ai_session"),v[t.keys.userId]=_[t.keys.userId]||this._getId("ai_user"),v[t.keys.userAuthUserId]=_[t.keys.userAuthUserId]||this._getId("ai_authUser"),v[t.keys.operationName]=this.getOperationName(_),v[t.keys.operationParentId]=this.getOperationParentId(_),v[t.keys.operationId]=this.getOperationId(_),v},t.prototype.getOperationId=function(_){return _[t.keys.operationId]||this.operationId},t.prototype.getOperationParentId=function(_){return _[t.keys.operationParentId]||this.parentId||this.getOperationId(_)},t.prototype.getOperationName=function(_){return _[t.keys.operationName]||this.method+" "+T.parse(this.url).pathname},t.prototype.getRequestId=function(){return this.requestId},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},t.prototype.getTraceparent=function(){return this.traceparent},t.prototype.getTracestate=function(){return this.tracestate},t.prototype.getLegacyRootId=function(){return this.legacyRootId},t.prototype._getAbsoluteUrl=function(_){if(!_.headers)return _.url;var v=_.connection?_.connection.encrypted:null,y=T.parse(_.url),b=y.pathname,x=y.search,I=v||"https"==_.headers["x-forwarded-proto"]?"https":"http";return T.format({protocol:I,host:_.headers.host,pathname:b,search:x})},t.prototype._getIp=function(){var _=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,n=function(v){var y=_.exec(v);if(y)return y[0]},v=n(this.rawHeaders["x-forwarded-for"])||n(this.rawHeaders["x-client-ip"])||n(this.rawHeaders["x-real-ip"])||n(this.connectionRemoteAddress)||n(this.socketRemoteAddress)||n(this.legacySocketRemoteAddress);return!v&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&"::"===this.connectionRemoteAddress.substr(0,2)&&(v="127.0.0.1"),v},t.prototype._getId=function(_){var v=this.rawHeaders&&this.rawHeaders.cookie&&"string"==typeof this.rawHeaders.cookie&&this.rawHeaders.cookie||"";return t.parseId(S.getCookie(_,v))},t.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},t.prototype.parseHeaders=function(_,v){if(this.rawHeaders=_.headers||_.rawHeaders,this.userAgent=_.headers&&_.headers["user-agent"],this.sourceCorrelationId=S.getCorrelationContextTarget(_,M.requestContextSourceKey),_.headers){var y=_.headers[M.traceStateHeader]?_.headers[M.traceStateHeader].toString():null,b=_.headers[M.traceparentHeader]?_.headers[M.traceparentHeader].toString():null,x=_.headers[M.requestIdHeader]?_.headers[M.requestIdHeader].toString():null,T=_.headers[M.parentIdHeader]?_.headers[M.parentIdHeader].toString():null,I=_.headers[M.rootIdHeader]?_.headers[M.rootIdHeader].toString():null;this.correlationContextHeader=_.headers[M.correlationContextHeader]?_.headers[M.correlationContextHeader].toString():null,P.w3cEnabled&&(b||y)?(this.traceparent=new k(b?b.toString():null),this.tracestate=b&&y&&new O(y?y.toString():null),this.setBackCompatFromThisTraceContext()):x?P.w3cEnabled?(this.traceparent=new k(null,x),this.setBackCompatFromThisTraceContext()):(this.parentId=x,this.requestId=P.generateRequestId(this.parentId),this.operationId=P.getRootId(this.requestId)):P.w3cEnabled?(this.traceparent=new k,this.traceparent.parentId=T,this.traceparent.legacyRootId=I||T,this.setBackCompatFromThisTraceContext()):(this.parentId=T,this.requestId=P.generateRequestId(I||this.parentId),this.correlationContextHeader=null,this.operationId=P.getRootId(this.requestId)),v&&(this.requestId=v,this.operationId=P.getRootId(this.requestId))}},t.parseId=function(_){var v=_.split("|");return v.length>0?v[0]:""},t.keys=new I.ContextTagKeys,t}(A);v.exports=R}),Gi=l((_,v)=>{var y;_=v.exports=D,y="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var _=Array.prototype.slice.call(arguments,0);_.unshift("SEMVER"),console.log.apply(console,_)}:function(){},_.SEMVER_SPEC_VERSION="2.0.0";var b=Number.MAX_SAFE_INTEGER||9007199254740991,x=_.re=[],T=_.src=[],I=0,S=I++;T[S]="0|[1-9]\\d*";var M=I++;T[M]="[0-9]+";var A=I++;T[A]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var P=I++;T[P]="("+T[S]+")\\.("+T[S]+")\\.("+T[S]+")";var O=I++;T[O]="("+T[M]+")\\.("+T[M]+")\\.("+T[M]+")";var k=I++;T[k]="(?:"+T[S]+"|"+T[A]+")";var R=I++;T[R]="(?:"+T[M]+"|"+T[A]+")";var L=I++;T[L]="(?:-("+T[k]+"(?:\\."+T[k]+")*))";var B=I++;T[B]="(?:-?("+T[R]+"(?:\\."+T[R]+")*))";var j=I++;T[j]="[0-9A-Za-z-]+";var U=I++;T[U]="(?:\\+("+T[j]+"(?:\\."+T[j]+")*))";var z=I++,G="v?"+T[P]+T[L]+"?"+T[U]+"?";T[z]="^"+G+"$";var H="[v=\\s]*"+T[O]+T[B]+"?"+T[U]+"?",V=I++;T[V]="^"+H+"$";var $=I++;T[$]="((?:<|>)?=?)";var K=I++;T[K]=T[M]+"|x|X|\\*";var ee=I++;T[ee]=T[S]+"|x|X|\\*";var re=I++;T[re]="[v=\\s]*("+T[ee]+")(?:\\.("+T[ee]+")(?:\\.("+T[ee]+")(?:"+T[L]+")?"+T[U]+"?)?)?";var ie=I++;T[ie]="[v=\\s]*("+T[K]+")(?:\\.("+T[K]+")(?:\\.("+T[K]+")(?:"+T[B]+")?"+T[U]+"?)?)?";var ne=I++;T[ne]="^"+T[$]+"\\s*"+T[re]+"$";var ae=I++;T[ae]="^"+T[$]+"\\s*"+T[ie]+"$";var oe=I++;T[oe]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var se=I++;T[se]="(?:~>?)";var ce=I++;T[ce]="(\\s*)"+T[se]+"\\s+",x[ce]=new RegExp(T[ce],"g");var ue=I++;T[ue]="^"+T[se]+T[re]+"$";var pe=I++;T[pe]="^"+T[se]+T[ie]+"$";var he=I++;T[he]="(?:\\^)";var de=I++;T[de]="(\\s*)"+T[he]+"\\s+",x[de]=new RegExp(T[de],"g");var fe=I++;T[fe]="^"+T[he]+T[re]+"$";var me=I++;T[me]="^"+T[he]+T[ie]+"$";var ge=I++;T[ge]="^"+T[$]+"\\s*("+H+")$|^$";var _e=I++;T[_e]="^"+T[$]+"\\s*("+G+")$|^$";var ve=I++;T[ve]="(\\s*)"+T[$]+"\\s*("+H+"|"+T[re]+")",x[ve]=new RegExp(T[ve],"g");var ye=I++;T[ye]="^\\s*("+T[re]+")\\s+-\\s+("+T[re]+")\\s*$";var be=I++;T[be]="^\\s*("+T[ie]+")\\s+-\\s+("+T[ie]+")\\s*$";var Ee,xe=I++;for(T[xe]="(<|>)?=?\\s*\\*",Ee=0;Ee<35;Ee++)y(Ee,T[Ee]),x[Ee]||(x[Ee]=new RegExp(T[Ee]));function $r(_,v){if((!v||"object"!=typeof v)&&(v={loose:!!v,includePrerelease:!1}),_ instanceof D)return _;if("string"!=typeof _||_.length>256)return null;if(!(v.loose?x[V]:x[z]).test(_))return null;try{return new D(_,v)}catch(_){return null}}function D(_,v){if((!v||"object"!=typeof v)&&(v={loose:!!v,includePrerelease:!1}),_ instanceof D){if(_.loose===v.loose)return _;_=_.version}else if("string"!=typeof _)throw new TypeError("Invalid Version: "+_);if(_.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof D))return new D(_,v);y("SemVer",_,v),this.options=v,this.loose=!!v.loose;var T=_.trim().match(v.loose?x[V]:x[z]);if(!T)throw new TypeError("Invalid Version: "+_);if(this.raw=_,this.major=+T[1],this.minor=+T[2],this.patch=+T[3],this.major>b||this.major<0)throw new TypeError("Invalid major version");if(this.minor>b||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>b||this.patch<0)throw new TypeError("Invalid patch version");T[4]?this.prerelease=T[4].split(".").map((function(_){if(/^[0-9]+$/.test(_)){var v=+_;if(v>=0&&v<b)return v}return _})):this.prerelease=[],this.build=T[5]?T[5].split("."):[],this.format()}_.parse=$r,_.valid=function w0(_,v){var y=$r(_,v);return y?y.version:null},_.clean=function x0(_,v){var y=$r(_.trim().replace(/^[=v]+/,""),v);return y?y.version:null},_.SemVer=D,D.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},D.prototype.toString=function(){return this.version},D.prototype.compare=function(_){return y("SemVer.compare",this.version,this.options,_),_ instanceof D||(_=new D(_,this.options)),this.compareMain(_)||this.comparePre(_)},D.prototype.compareMain=function(_){return _ instanceof D||(_=new D(_,this.options)),Vn(this.major,_.major)||Vn(this.minor,_.minor)||Vn(this.patch,_.patch)},D.prototype.comparePre=function(_){if(_ instanceof D||(_=new D(_,this.options)),this.prerelease.length&&!_.prerelease.length)return-1;if(!this.prerelease.length&&_.prerelease.length)return 1;if(!this.prerelease.length&&!_.prerelease.length)return 0;var v=0;do{var b=this.prerelease[v],x=_.prerelease[v];if(y("prerelease compare",v,b,x),void 0===b&&void 0===x)return 0;if(void 0===x)return 1;if(void 0===b)return-1;if(b!==x)return Vn(b,x)}while(++v)},D.prototype.inc=function(_,v){switch(_){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",v);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",v);break;case"prepatch":this.prerelease.length=0,this.inc("patch",v),this.inc("pre",v);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",v),this.inc("pre",v);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var y=this.prerelease.length;--y>=0;)"number"==typeof this.prerelease[y]&&(this.prerelease[y]++,y=-2);-1===y&&this.prerelease.push(0)}v&&(this.prerelease[0]===v?isNaN(this.prerelease[1])&&(this.prerelease=[v,0]):this.prerelease=[v,0]);break;default:throw new Error("invalid increment argument: "+_)}return this.format(),this.raw=this.version,this},_.inc=function M0(_,v,y,b){"string"==typeof y&&(b=y,y=void 0);try{return new D(_,y).inc(v,b).version}catch(_){return null}},_.diff=function L0(_,v){if(kl(_,v))return null;var y=$r(_),b=$r(v),x="";if(y.prerelease.length||b.prerelease.length){x="pre";var T="prerelease"}for(var I in y)if(("major"===I||"minor"===I||"patch"===I)&&y[I]!==b[I])return x+I;return T},_.compareIdentifiers=Vn;var Te=/^[0-9]+$/;function Vn(_,v){var y=Te.test(_),b=Te.test(v);return y&&b&&(_=+_,v=+v),_===v?0:y&&!b?-1:b&&!y?1:_<v?-1:1}function wt(_,v,y){return new D(_,y).compare(new D(v,y))}function ta(_,v,y){return wt(_,v,y)>0}function Co(_,v,y){return wt(_,v,y)<0}function kl(_,v,y){return 0===wt(_,v,y)}function kE(_,v,y){return 0!==wt(_,v,y)}function Hl(_,v,y){return wt(_,v,y)>=0}function Ul(_,v,y){return wt(_,v,y)<=0}function Oo(_,v,y,b){switch(v){case"===":return"object"==typeof _&&(_=_.version),"object"==typeof y&&(y=y.version),_===y;case"!==":return"object"==typeof _&&(_=_.version),"object"==typeof y&&(y=y.version),_!==y;case"":case"=":case"==":return kl(_,y,b);case"!=":return kE(_,y,b);case">":return ta(_,y,b);case">=":return Hl(_,y,b);case"<":return Co(_,y,b);case"<=":return Ul(_,y,b);default:throw new TypeError("Invalid operator: "+v)}}function Ye(_,v){if((!v||"object"!=typeof v)&&(v={loose:!!v,includePrerelease:!1}),_ instanceof Ye){if(_.loose===!!v.loose)return _;_=_.value}if(!(this instanceof Ye))return new Ye(_,v);y("comparator",_,v),this.options=v,this.loose=!!v.loose,this.parse(_),this.semver===Ie?this.value="":this.value=this.operator+this.semver.version,y("comp",this)}_.rcompareIdentifiers=function q0(_,v){return Vn(v,_)},_.major=function j0(_,v){return new D(_,v).major},_.minor=function k0(_,v){return new D(_,v).minor},_.patch=function H0(_,v){return new D(_,v).patch},_.compare=wt,_.compareLoose=function U0(_,v){return wt(_,v,!0)},_.rcompare=function B0(_,v,y){return wt(v,_,y)},_.sort=function G0(v,y){return v.sort((function(v,b){return _.compare(v,b,y)}))},_.rsort=function F0(v,y){return v.sort((function(v,b){return _.rcompare(v,b,y)}))},_.gt=ta,_.lt=Co,_.eq=kl,_.neq=kE,_.gte=Hl,_.lte=Ul,_.cmp=Oo,_.Comparator=Ye;var Ie={};function J(_,v){if((!v||"object"!=typeof v)&&(v={loose:!!v,includePrerelease:!1}),_ instanceof J)return _.loose===!!v.loose&&_.includePrerelease===!!v.includePrerelease?_:new J(_.raw,v);if(_ instanceof Ye)return new J(_.value,v);if(!(this instanceof J))return new J(_,v);if(this.options=v,this.loose=!!v.loose,this.includePrerelease=!!v.includePrerelease,this.raw=_,this.set=_.split(/\s*\|\|\s*/).map((function(_){return this.parseRange(_.trim())}),this).filter((function(_){return _.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+_);this.format()}function we(_){return!_||"x"===_.toLowerCase()||"*"===_}function J0(_,v,y,b,x,T,I,S,M,A,P,O,k){return((v=we(y)?"":we(b)?">="+y+".0.0":we(x)?">="+y+"."+b+".0":">="+v)+" "+(S=we(M)?"":we(A)?"<"+(+M+1)+".0.0":we(P)?"<"+M+"."+(+A+1)+".0":O?"<="+M+"."+A+"."+P+"-"+O:"<="+S)).trim()}function eN(_,v,b){for(var x=0;x<_.length;x++)if(!_[x].test(v))return!1;if(v.prerelease.length&&!b.includePrerelease){for(x=0;x<_.length;x++)if(y(_[x].semver),_[x].semver!==Ie&&_[x].semver.prerelease.length>0){var T=_[x].semver;if(T.major===v.major&&T.minor===v.minor&&T.patch===v.patch)return!0}return!1}return!0}function Po(_,v,y){try{v=new J(v,y)}catch(_){return!1}return v.test(_)}function Bl(_,v,y,b){var x,T,I,S,M;switch(_=new D(_,b),v=new J(v,b),y){case">":x=ta,T=Ul,I=Co,S=">",M=">=";break;case"<":x=Co,T=Hl,I=ta,S="<",M="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Po(_,v,b))return!1;for(var A=0;A<v.set.length;++A){var P=v.set[A],O=null,k=null;if(P.forEach((function(_){_.semver===Ie&&(_=new Ye(">=0.0.0")),O=O||_,k=k||_,x(_.semver,O.semver,b)?O=_:I(_.semver,k.semver,b)&&(k=_)})),O.operator===S||O.operator===M||(!k.operator||k.operator===S)&&T(_,k.semver))return!1;if(k.operator===M&&I(_,k.semver))return!1}return!0}Ye.prototype.parse=function(_){var v=this.options.loose?x[ge]:x[_e],y=_.match(v);if(!y)throw new TypeError("Invalid comparator: "+_);this.operator=y[1],"="===this.operator&&(this.operator=""),y[2]?this.semver=new D(y[2],this.options.loose):this.semver=Ie},Ye.prototype.toString=function(){return this.value},Ye.prototype.test=function(_){return y("Comparator.test",_,this.options.loose),this.semver===Ie||("string"==typeof _&&(_=new D(_,this.options)),Oo(_,this.operator,this.semver,this.options))},Ye.prototype.intersects=function(_,v){if(!(_ instanceof Ye))throw new TypeError("a Comparator is required");var y;if((!v||"object"!=typeof v)&&(v={loose:!!v,includePrerelease:!1}),""===this.operator)return y=new J(_.value,v),Po(this.value,y,v);if(""===_.operator)return y=new J(this.value,v),Po(_.semver,y,v);var b=!(">="!==this.operator&&">"!==this.operator||">="!==_.operator&&">"!==_.operator),x=!("<="!==this.operator&&"<"!==this.operator||"<="!==_.operator&&"<"!==_.operator),T=this.semver.version===_.semver.version,I=!(">="!==this.operator&&"<="!==this.operator||">="!==_.operator&&"<="!==_.operator),S=Oo(this.semver,"<",_.semver,v)&&(">="===this.operator||">"===this.operator)&&("<="===_.operator||"<"===_.operator),M=Oo(this.semver,">",_.semver,v)&&("<="===this.operator||"<"===this.operator)&&(">="===_.operator||">"===_.operator);return b||x||T&&I||S||M},_.Range=J,J.prototype.format=function(){return this.range=this.set.map((function(_){return _.join(" ").trim()})).join("||").trim(),this.range},J.prototype.toString=function(){return this.range},J.prototype.parseRange=function(_){var v=this.options.loose;_=_.trim();var b=v?x[be]:x[ye];_=_.replace(b,J0),y("hyphen replace",_),_=_.replace(x[ve],"$1$2$3"),y("comparator trim",_,x[ve]),_=(_=(_=_.replace(x[ce],"$1~")).replace(x[de],"$1^")).split(/\s+/).join(" ");var T=v?x[ge]:x[_e],I=_.split(" ").map((function(_){return function $0(_,v){return y("comp",_,v),_=function X0(_,v){return _.trim().split(/\s+/).map((function(_){return function Y0(_,v){y("caret",_,v);var b=v.loose?x[me]:x[fe];return _.replace(b,(function(v,b,x,T,I){var S;return y("caret",_,v,b,x,T,I),we(b)?S="":we(x)?S=">="+b+".0.0 <"+(+b+1)+".0.0":we(T)?S="0"===b?">="+b+"."+x+".0 <"+b+"."+(+x+1)+".0":">="+b+"."+x+".0 <"+(+b+1)+".0.0":I?(y("replaceCaret pr",I),S="0"===b?"0"===x?">="+b+"."+x+"."+T+"-"+I+" <"+b+"."+x+"."+(+T+1):">="+b+"."+x+"."+T+"-"+I+" <"+b+"."+(+x+1)+".0":">="+b+"."+x+"."+T+"-"+I+" <"+(+b+1)+".0.0"):(y("no pr"),S="0"===b?"0"===x?">="+b+"."+x+"."+T+" <"+b+"."+x+"."+(+T+1):">="+b+"."+x+"."+T+" <"+b+"."+(+x+1)+".0":">="+b+"."+x+"."+T+" <"+(+b+1)+".0.0"),y("caret return",S),S}))}(_,v)})).join(" ")}(_,v),y("caret",_),_=function z0(_,v){return _.trim().split(/\s+/).map((function(_){return function K0(_,v){var b=v.loose?x[pe]:x[ue];return _.replace(b,(function(v,b,x,T,I){var S;return y("tilde",_,v,b,x,T,I),we(b)?S="":we(x)?S=">="+b+".0.0 <"+(+b+1)+".0.0":we(T)?S=">="+b+"."+x+".0 <"+b+"."+(+x+1)+".0":I?(y("replaceTilde pr",I),S=">="+b+"."+x+"."+T+"-"+I+" <"+b+"."+(+x+1)+".0"):S=">="+b+"."+x+"."+T+" <"+b+"."+(+x+1)+".0",y("tilde return",S),S}))}(_,v)})).join(" ")}(_,v),y("tildes",_),_=function Q0(_,v){return y("replaceXRanges",_,v),_.split(/\s+/).map((function(_){return function W0(_,v){_=_.trim();var b=v.loose?x[ae]:x[ne];return _.replace(b,(function(v,b,x,T,I,S){y("xRange",_,v,b,x,T,I,S);var M=we(x),A=M||we(T),P=A||we(I);return"="===b&&P&&(b=""),M?v=">"===b||"<"===b?"<0.0.0":"*":b&&P?(A&&(T=0),I=0,">"===b?(b=">=",A?(x=+x+1,T=0,I=0):(T=+T+1,I=0)):"<="===b&&(b="<",A?x=+x+1:T=+T+1),v=b+x+"."+T+"."+I):A?v=">="+x+".0.0 <"+(+x+1)+".0.0":P&&(v=">="+x+"."+T+".0 <"+x+"."+(+T+1)+".0"),y("xRange return",v),v}))}(_,v)})).join(" ")}(_,v),y("xrange",_),_=function Z0(_,v){return y("replaceStars",_,v),_.trim().replace(x[xe],"")}(_,v),y("stars",_),_}(_,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(I=I.filter((function(_){return!!_.match(T)}))),I=I.map((function(_){return new Ye(_,this.options)}),this)},J.prototype.intersects=function(_,v){if(!(_ instanceof J))throw new TypeError("a Range is required");return this.set.some((function(y){return y.every((function(y){return _.set.some((function(_){return _.every((function(_){return y.intersects(_,v)}))}))}))}))},_.toComparators=function V0(_,v){return new J(_,v).set.map((function(_){return _.map((function(_){return _.value})).join(" ").trim().split(" ")}))},J.prototype.test=function(_){if(!_)return!1;"string"==typeof _&&(_=new D(_,this.options));for(var v=0;v<this.set.length;v++)if(eN(this.set[v],_,this.options))return!0;return!1},_.satisfies=Po,_.maxSatisfying=function tN(_,v,y){var b=null,x=null;try{var T=new J(v,y)}catch(_){return null}return _.forEach((function(_){T.test(_)&&(!b||-1===x.compare(_))&&(x=new D(b=_,y))})),b},_.minSatisfying=function rN(_,v,y){var b=null,x=null;try{var T=new J(v,y)}catch(_){return null}return _.forEach((function(_){T.test(_)&&(!b||1===x.compare(_))&&(x=new D(b=_,y))})),b},_.minVersion=function nN(_,v){_=new J(_,v);var y=new D("0.0.0");if(_.test(y)||(y=new D("0.0.0-0"),_.test(y)))return y;y=null;for(var b=0;b<_.set.length;++b){_.set[b].forEach((function(_){var v=new D(_.semver.version);switch(_.operator){case">":0===v.prerelease.length?v.patch++:v.prerelease.push(0),v.raw=v.format();case"":case">=":(!y||ta(y,v))&&(y=v);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+_.operator)}}))}return y&&_.test(y)?y:null},_.validRange=function iN(_,v){try{return new J(_,v).range||"*"}catch(_){return null}},_.ltr=function aN(_,v,y){return Bl(_,v,"<",y)},_.gtr=function sN(_,v,y){return Bl(_,v,">",y)},_.outside=Bl,_.prerelease=function oN(_,v){var y=$r(_,v);return y&&y.prerelease.length?y.prerelease:null},_.intersects=function uN(_,v,y){return _=new J(_,y),v=new J(v,y),_.intersects(v)},_.coerce=function cN(_){if(_ instanceof D)return _;if("string"!=typeof _)return null;var v=_.match(x[oe]);return null==v?null:$r(v[1]+"."+(v[2]||"0")+"."+(v[3]||"0"))}}),Hi=l((_,v)=>{"use strict";function Gl(_){return"function"==typeof _}var y=console.error.bind(console);function na(_,v,y){var b=!!_[v]&&_.propertyIsEnumerable(v);Object.defineProperty(_,v,{configurable:!0,enumerable:b,writable:!0,value:y})}function ia(_){_&&_.logger&&(Gl(_.logger)?y=_.logger:y("new logger isn't a function, not replacing"))}function BE(_,v,b){if(_&&_[v]){if(!b)return y("no wrapper function"),void y((new Error).stack);if(Gl(_[v])&&Gl(b)){var x=_[v],T=b(x,v);return na(T,"__original",x),na(T,"__unwrap",(function(){_[v]===T&&na(_,v,x)})),na(T,"__wrapped",!0),na(_,v,T),T}y("original object and wrapper must be functions")}else y("no original function "+v+" to wrap")}function GE(_,v){return _&&_[v]?_[v].__unwrap?_[v].__unwrap():void y("no original to unwrap to -- has "+v+" already been unwrapped?"):(y("no function to unwrap."),void y((new Error).stack))}ia.wrap=BE,ia.massWrap=function lN(_,v,b){if(!_)return y("must provide one or more modules to patch"),void y((new Error).stack);Array.isArray(_)||(_=[_]),v&&Array.isArray(v)?_.forEach((function(_){v.forEach((function(v){BE(_,v,b)}))})):y("must provide one or more functions to wrap on modules")},ia.unwrap=GE,ia.massUnwrap=function pN(_,v){if(!_)return y("must provide one or more modules to patch"),void y((new Error).stack);Array.isArray(_)||(_=[_]),v&&Array.isArray(v)?_.forEach((function(_){v.forEach((function(v){GE(_,v)}))})):y("must provide one or more functions to unwrap on modules")},v.exports=ia}),Xi=l((_,v)=>{"use strict";var y=Hi(),b=y.wrap,x=y.unwrap,T="wrap@before";function Do(_,v,y){var b=!!_[v]&&_.propertyIsEnumerable(v);Object.defineProperty(_,v,{configurable:!0,enumerable:b,writable:!0,value:y})}function $E(_,v){var y;return y=_._events&&_._events[v],Array.isArray(y)||(y=y?[y]:[]),y}function dN(_,v,y){var b=$E(_,v).filter((function(_){return-1===y.indexOf(_)}));b.length>0&&function fN(_,v){for(var y=v.length,b=0;b<y;b++){var x=v[b],I=_[T];if("function"==typeof I)I(x);else if(Array.isArray(I))for(var S=I.length,M=0;M<S;M++)I[M](x)}}(_,b)}function zE(_,v){if(_){var y=_;if("function"==typeof _)y=v(_);else if(Array.isArray(_)){y=[];for(var b=0;b<_.length;b++)y[b]=v(_[b])}return y}}v.exports=function(_,v,y){if(!(_&&_.on&&_.addListener&&_.removeListener&&_.emit))throw new Error("can only wrap real EEs");if(!v)throw new Error("must have function to run on listener addition");if(!y)throw new Error("must have function to wrap listeners when emitting");function i(_){return function(v,y){var x=$E(this,v).slice();try{var T=_.call(this,v,y);return dN(this,v,x),T}finally{this.on.__wrapped||b(this,"on",i),this.addListener.__wrapped||b(this,"addListener",i)}}}_[T]?"function"==typeof _[T]?Do(_,T,[_[T],v]):Array.isArray(_[T])&&_[T].push(v):Do(_,T,v),_.__wrapped||(b(_,"addListener",i),b(_,"on",i),b(_,"emit",(function a(_){return function(v){if(!this._events||!this._events[v])return _.apply(this,arguments);var T=this._events[v];function p(_){return function(){this._events[v]=T;try{return _.apply(this,arguments)}finally{T=this._events[v],this._events[v]=zE(T,y)}}}b(this,"removeListener",p);try{return this._events[v]=zE(T,y),_.apply(this,arguments)}finally{x(this,"removeListener"),this._events[v]=T}}})),Do(_,"__unwrap",(function(){x(_,"addListener"),x(_,"on"),x(_,"emit"),delete _[T],delete _.__wrapped})),Do(_,"__wrapped",!0))}}),qi=l((_,v)=>{"use strict";var b=y(3837),x=y(9491),T=Xi(),I=y(852),S="cls@contexts",M="error@context",A=process.env.DEBUG_CLS_HOOKED,P=-1;function Qe(_){this.name=_,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}function XE(_){return process.namespaces[_]}function YE(_){let v=XE(_);x.ok(v,"can't delete nonexistent namespace! \""+_+'"'),x.ok(v.id,"don't assign to process.namespaces directly! "+b.inspect(v)),process.namespaces[_]=null}function Q(..._){A&&process._rawDebug(""+b.format(..._))}v.exports={getNamespace:XE,createNamespace:function _N(_){x.ok(_,"namespace must be given a name."),A&&Q(`NS-CREATING NAMESPACE (${_})`);let v=new Qe(_);return v.id=P,I.createHook({init(y,x,T,S){if(P=I.executionAsyncId(),v.active){if(v._contexts.set(y,v.active),A){Q(`${" ".repeat(v._indent<0?0:v._indent)}INIT [${x}] (${_}) asyncId:${y} currentUid:${P} triggerId:${T} active:${b.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${S}`)}}else if(0===P){let T=I.triggerAsyncId(),M=v._contexts.get(T);if(M){if(v._contexts.set(y,M),A){Q(`${" ".repeat(v._indent<0?0:v._indent)}INIT USING CONTEXT FROM TRIGGERID [${x}] (${_}) asyncId:${y} currentUid:${P} triggerId:${T} active:${b.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${S}`)}}else if(A){Q(`${" ".repeat(v._indent<0?0:v._indent)}INIT MISSING CONTEXT [${x}] (${_}) asyncId:${y} currentUid:${P} triggerId:${T} active:${b.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${S}`)}}if(A&&"PROMISE"===x){Q(b.inspect(S,{showHidden:!0}));let I=S.parentId;Q(`${" ".repeat(v._indent<0?0:v._indent)}INIT RESOURCE-PROMISE [${x}] (${_}) parentId:${I} asyncId:${y} currentUid:${P} triggerId:${T} active:${b.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${S}`)}},before(y){let x;if(P=I.executionAsyncId(),x=v._contexts.get(y)||v._contexts.get(P),x){if(A){let T=I.triggerAsyncId();Q(`${" ".repeat(v._indent<0?0:v._indent)}BEFORE (${_}) asyncId:${y} currentUid:${P} triggerId:${T} active:${b.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${b.inspect(x)}`),v._indent+=2}v.enter(x)}else if(A){let x=I.triggerAsyncId();Q(`${" ".repeat(v._indent<0?0:v._indent)}BEFORE MISSING CONTEXT (${_}) asyncId:${y} currentUid:${P} triggerId:${x} active:${b.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${b.inspect(v._contexts,{showHidden:!0,depth:2,colors:!0})}`),v._indent+=2}},after(y){let x;if(P=I.executionAsyncId(),x=v._contexts.get(y)||v._contexts.get(P),x){if(A){let T=I.triggerAsyncId();v._indent-=2,Q(`${" ".repeat(v._indent<0?0:v._indent)}AFTER (${_}) asyncId:${y} currentUid:${P} triggerId:${T} active:${b.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${b.inspect(x)}`)}v.exit(x)}else if(A){let T=I.triggerAsyncId();v._indent-=2,Q(`${" ".repeat(v._indent<0?0:v._indent)}AFTER MISSING CONTEXT (${_}) asyncId:${y} currentUid:${P} triggerId:${T} active:${b.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${b.inspect(x)}`)}},destroy(y){if(P=I.executionAsyncId(),A){let x=I.triggerAsyncId();Q(`${" ".repeat(v._indent<0?0:v._indent)}DESTROY (${_}) currentUid:${P} asyncId:${y} triggerId:${x} active:${b.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${b.inspect(v._contexts.get(P))}`)}v._contexts.delete(y)}}).enable(),process.namespaces[_]=v,v},destroyNamespace:YE,reset:function vN(){process.namespaces&&Object.keys(process.namespaces).forEach((function(_){YE(_)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:M},Qe.prototype.set=function(_,v){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[_]=v,A){Q(" ".repeat(this._indent<0?0:this._indent)+"CONTEXT-SET KEY:"+_+"="+v+" in ns:"+this.name+" currentUid:"+P+" active:"+b.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return v},Qe.prototype.get=function(_){if(this.active){if(A){let v=I.executionAsyncId(),y=I.triggerAsyncId(),x=" ".repeat(this._indent<0?0:this._indent);Q(x+"CONTEXT-GETTING KEY:"+_+"="+this.active[_]+" ("+this.name+") currentUid:"+P+" active:"+b.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),Q(`${x}CONTEXT-GETTING KEY: (${this.name}) ${_}=${this.active[_]} currentUid:${P} asyncHooksCurrentId:${v} triggerId:${y} len:${this._set.length} active:${b.inspect(this.active)}`)}return this.active[_]}if(A){let v=I.currentId(),y=I.triggerAsyncId();Q(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${_}=undefined currentUid:${P} asyncHooksCurrentId:${v} triggerId:${y} len:${this._set.length}`)}},Qe.prototype.createContext=function(){let _=Object.create(this.active?this.active:Object.prototype);if(_._ns_name=this.name,_.id=P,A){let v=I.executionAsyncId(),y=I.triggerAsyncId();Q(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-CREATED Context: (${this.name}) currentUid:${P} asyncHooksCurrentId:${v} triggerId:${y} len:${this._set.length} context:${b.inspect(_,{showHidden:!0,depth:2,colors:!0})}`)}return _},Qe.prototype.run=function(_){let v=this.createContext();this.enter(v);try{if(A){let _=I.triggerAsyncId(),y=I.executionAsyncId();Q(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${P} triggerId:${_} asyncHooksCurrentId:${y} len:${this._set.length} context:${b.inspect(v)}`)}return _(v),v}catch(_){throw _&&(_[M]=v),_}finally{if(A){let _=I.triggerAsyncId(),y=I.executionAsyncId();Q(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN END: (${this.name}) currentUid:${P} triggerId:${_} asyncHooksCurrentId:${y} len:${this._set.length} ${b.inspect(v)}`)}this.exit(v)}},Qe.prototype.runAndReturn=function(_){let v;return this.run((function(y){v=_(y)})),v},Qe.prototype.runPromise=function(_){let v=this.createContext();this.enter(v);let y=_(v);if(!y||!y.then||!y.catch)throw new Error("fn must return a promise.");return A&&Q("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+P+" len:"+this._set.length+" "+b.inspect(v)),y.then(_=>(A&&Q("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+P+" len:"+this._set.length+" "+b.inspect(v)),this.exit(v),_)).catch(_=>{throw _[M]=v,A&&Q("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+P+" len:"+this._set.length+" "+b.inspect(v)),this.exit(v),_})},Qe.prototype.bind=function(_,v){v||(v=this.active?this.active:this.createContext());let y=this;return function(){y.enter(v);try{return _.apply(this,arguments)}catch(_){throw _&&(_[M]=v),_}finally{y.exit(v)}}},Qe.prototype.enter=function(_){if(x.ok(_,"context must be provided for entering"),A){let v=I.executionAsyncId(),y=I.triggerAsyncId();Q(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-ENTER: (${this.name}) currentUid:${P} triggerId:${y} asyncHooksCurrentId:${v} len:${this._set.length} ${b.inspect(_)}`)}this._set.push(this.active),this.active=_},Qe.prototype.exit=function(_){if(x.ok(_,"context must be provided for exiting"),A){let v=I.executionAsyncId(),y=I.triggerAsyncId();Q(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-EXIT: (${this.name}) currentUid:${P} triggerId:${y} asyncHooksCurrentId:${v} len:${this._set.length} ${b.inspect(_)}`)}if(this.active===_)return x.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let v=this._set.lastIndexOf(_);v<0?(A&&Q("??ERROR?? context exiting but not entered - ignoring: "+b.inspect(_)),x.ok(v>=0,"context not currently entered; can't exit. \n"+b.inspect(this)+"\n"+b.inspect(_))):(x.ok(v,"can't remove top context"),this._set.splice(v,1))},Qe.prototype.bindEmitter=function(_){x.ok(_.on&&_.addListener&&_.emit,"can only bind real EEs");let v=this,y="context@"+this.name;T(_,(function i(_){!_||(_[S]||(_[S]=Object.create(null)),_[S][y]={namespace:v,context:v.active})}),(function a(_){if(!_||!_[S])return _;let v=_,y=_[S];return Object.keys(y).forEach((function(_){let b=y[_];v=b.namespace.bind(v,b.context)})),v}))},Qe.prototype.fromException=function(_){return _[M]},process.namespaces={}}),Vi=l((_,v)=>{"use strict";function gN(){}v.exports=function(){let _=this._hooks,v=this._state,y=process.nextTick;process.nextTick=function(){if(!v.enabled)return y.apply(process,arguments);let b=new Array(arguments.length);for(let _=0;_<arguments.length;_++)b[_]=arguments[_];let x=b[0];if("function"!=typeof x)throw new TypeError("callback is not a function");let T=new gN,I=--v.counter;return _.init.call(T,I,0,null,null),b[0]=function(){_.pre.call(T,I);let v=!0;try{x.apply(this,arguments),v=!1}finally{v&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){_.post.call(T,I,!0),_.destroy.call(null,I)}))}_.post.call(T,I,!1),_.destroy.call(null,I)},y.apply(process,b)}}}),Wi=l((_,v)=>{"use strict";function EN(){}v.exports=function(){let _=this._hooks,v=this._state,y=global.Promise,b=y.prototype.then;function a(v,y,b,x){return"function"!=typeof v?x?function s(v){return function(y){return _.destroy.call(null,v),y}}(b):function o(v){return function(y){throw _.destroy.call(null,v),y}}(b):function(){_.pre.call(y,b);try{return v.apply(this,arguments)}finally{_.post.call(y,b,!1),_.destroy.call(null,b)}}}y.prototype.then=function u(y,x){if(!v.enabled)return b.call(this,y,x);let T=new EN,I=--v.counter;return _.init.call(T,I,0,null,null),b.call(this,a(y,T,I,!0),a(x,T,I,!1))}}}),$i=l((_,v)=>{"use strict";var b=y(9512);function mN(){}function yN(){}function TN(){}var x=new Map,T=new Map,I=new Map,S=null,M=!1;function $l(_,v,y,x,T,I,A){let P=b[y],O=b[x];b[y]=function(){if(!v.enabled)return P.apply(b,arguments);let y=new Array(arguments.length);for(let _=0;_<arguments.length;_++)y[_]=arguments[_];let x=y[0];if("function"!=typeof x)throw new TypeError('"callback" argument must be a function');let O,k=new T,R=--v.counter;return _.init.call(k,R,0,null,null),y[0]=function(){S=O,_.pre.call(k,R);let v=!0;try{x.apply(this,arguments),v=!1}finally{v&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){_.post.call(k,R,!0),I.delete(O),_.destroy.call(null,R)}))}_.post.call(k,R,!1),S=null,(A||M)&&(M=!1,I.delete(O),_.destroy.call(null,R))},O=P.apply(b,y),I.set(O,R),O},b[x]=function(v){if(S===v&&null!==v)M=!0;else if(I.has(v)){let y=I.get(v);I.delete(v),_.destroy.call(null,y)}O.apply(b,arguments)}}v.exports=function(){$l(this._hooks,this._state,"setTimeout","clearTimeout",mN,x,!0),$l(this._hooks,this._state,"setInterval","clearInterval",yN,T,!1),$l(this._hooks,this._state,"setImmediate","clearImmediate",TN,I,!0),global.setTimeout=b.setTimeout,global.setInterval=b.setInterval,global.setImmediate=b.setImmediate,global.clearTimeout=b.clearTimeout,global.clearInterval=b.clearInterval,global.clearImmediate=b.clearImmediate}}),Yi=l((_,v)=>{v.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}}),Qi=l((_,v)=>{"use strict";var y=process.binding("async_wrap"),b=y.Providers.TIMERWRAP,x={nextTick:Vi(),promise:Wi(),timers:$i()},T=new Set;function ON(){this.enabled=!1,this.counter=0}function Kl(){let _=this.initFns=[],v=this.preFns=[],y=this.postFns=[],x=this.destroyFns=[];this.init=function(v,y,x,I){if(y!==b)for(let b of _)b(v,this,y,x,I);else T.add(v)},this.pre=function(_){if(!T.has(_))for(let y of v)y(_,this)},this.post=function(_,v){if(!T.has(_))for(let b of y)b(_,this,v)},this.destroy=function(_){if(T.has(_))T.delete(_);else for(let v of x)v(_)}}function xo(_,v){let y=_.indexOf(v);-1!==y&&_.splice(y,1)}function ca(){this._state=new ON,this._hooks=new Kl,this.version=Yi().version,this.providers=y.Providers;for(let _ of Object.keys(x))x[_].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),y.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}Kl.prototype.add=function(_){_.init&&this.initFns.push(_.init),_.pre&&this.preFns.push(_.pre),_.post&&this.postFns.push(_.post),_.destroy&&this.destroyFns.push(_.destroy)},Kl.prototype.remove=function(_){_.init&&xo(this.initFns,_.init),_.pre&&xo(this.preFns,_.pre),_.post&&xo(this.postFns,_.post),_.destroy&&xo(this.destroyFns,_.destroy)},v.exports=ca,ca.prototype.addHooks=function(_){this._hooks.add(_)},ca.prototype.removeHooks=function(_){this._hooks.remove(_)},ca.prototype.enable=function(){this._state.enabled=!0,y.enable()},ca.prototype.disable=function(){this._state.enabled=!1,y.disable()}}),Zi=l((_,v)=>{v.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}}),Ji=l((_,v)=>{v.exports=function(_,v){var y=[];y.push(function RN(_){try{return Error.prototype.toString.call(_)}catch(_){try{return"<error: "+_+">"}catch(_){return"<error>"}}}(_));for(var b=0;b<v.length;b++){var x,T=v[b];try{x=T.toString()}catch(_){try{x="<error: "+_+">"}catch(_){x="<error>"}}y.push("    at "+x)}return y.join("\n")}}),en=l((_,v)=>{var y=Ji();function cm(){this.extend=new la,this.filter=new la,this.format=new pa,this.version=Zi().version}var b=!1;cm.prototype.callSite=function e(_){_||(_={}),b=!0;var v={};Error.captureStackTrace(v,e);var y=v.stack;return b=!1,y=y.slice(_.slice||0),_.extend&&(y=this.extend._modify(v,y)),_.filter&&(y=this.filter._modify(v,y)),y};var x=new cm;function la(){this._modifiers=[]}function pa(){this._formater=y,this._previous=void 0}la.prototype._modify=function(_,v){for(var y=0,b=this._modifiers.length;y<b;y++)v=this._modifiers[y](_,v);return v},la.prototype.attach=function(_){this._modifiers.push(_)},la.prototype.deattach=function(_){var v=this._modifiers.indexOf(_);return-1!==v&&(this._modifiers.splice(v,1),!0)},pa.prototype.replace=function(_){_?this._formater=_:this.restore()},pa.prototype.restore=function(){this._formater=y,this._previous=void 0},pa.prototype._backup=function(){this._previous=this._formater},pa.prototype._roolback=function(){this._previous===y?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&x.format.replace(Error.prepareStackTrace);var T=!1;function lm(_,v){if(b)return v;if(T)return y(_,v);var I=v.concat();I=x.extend._modify(_,I),I=(I=x.filter._modify(_,I)).slice(0,Error.stackTraceLimit),Object.isExtensible(_)&&void 0===Object.getOwnPropertyDescriptor(_,"callSite")&&(_.callSite={original:v,mutated:I}),T=!0;var S=x.format._formater(_,I);return T=!1,S}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return lm},set:function(_){_===lm?x.format._roolback():(x.format._backup(),x.format.replace(_))}}),Object.defineProperty(Error.prototype,"callSite",{get:function NN(){return this.stack,this.callSite},set:function(_){Object.defineProperty(this,"callSite",{value:_,writable:!0,configurable:!0})},configurable:!0}),v.exports=x}),tn=l((_,v)=>{if(global._stackChain){if(global._stackChain.version!==Zi().version)throw new Error("Conflicting version of stack-chain found");v.exports=global._stackChain}else v.exports=global._stackChain=en()}),rn=l((_,v)=>{"use strict";var y=Qi();if(global._asyncHook){if(global._asyncHook.version!==Yi().version)throw new Error("Conflicting version of async-hook-jl found");v.exports=global._asyncHook}else tn().filter.attach((function(_,v){return v.filter((function(_){let v=_.getFileName();return!(v&&v.slice(0,__dirname.length)===__dirname)}))})),v.exports=global._asyncHook=new y}),an=l((_,v)=>{"use strict";var b=y(3837),x=y(9491),T=Xi(),I=rn(),S="cls@contexts",M="error@context",A=[];for(let _ in I.providers)A[I.providers[_]]=_;var P,O,k=process.env.DEBUG_CLS_HOOKED,R=-1;function We(_){this.name=_,this.active=null,this._set=[],this.id=null,this._contexts=new Map}function _m(_){return process.namespaces[_]}function vm(_){let v=_m(_);x.ok(v,"can't delete nonexistent namespace! \""+_+'"'),x.ok(v.id,"don't assign to process.namespaces directly! "+b.inspect(v)),process.namespaces[_]=null}function le(_){process.env.DEBUG&&process._rawDebug(_)}function Lo(_){return _?"function"==typeof _?_.name?_.name:(_.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1]:_.constructor&&_.constructor.name?_.constructor.name:void 0:_}if(v.exports={getNamespace:_m,createNamespace:function xN(_){x.ok(_,"namespace must be given a name."),k&&le("CREATING NAMESPACE "+_);let v=new We(_);return v.id=R,I.addHooks({init(y,x,T,I,S){R=y,I?(v._contexts.set(y,v._contexts.get(I)),k&&le("PARENTID: "+_+" uid:"+y+" parent:"+I+" provider:"+T)):v._contexts.set(R,v.active),k&&le("INIT "+_+" uid:"+y+" parent:"+I+" provider:"+A[T]+" active:"+b.inspect(v.active,!0))},pre(y,x){R=y;let T=v._contexts.get(y);T?(k&&le(" PRE "+_+" uid:"+y+" handle:"+Lo(x)+" context:"+b.inspect(T)),v.enter(T)):k&&le(" PRE MISSING CONTEXT "+_+" uid:"+y+" handle:"+Lo(x))},post(y,x){R=y;let T=v._contexts.get(y);T?(k&&le(" POST "+_+" uid:"+y+" handle:"+Lo(x)+" context:"+b.inspect(T)),v.exit(T)):k&&le(" POST MISSING CONTEXT "+_+" uid:"+y+" handle:"+Lo(x))},destroy(y){R=y,k&&le("DESTROY "+_+" uid:"+y+" context:"+b.inspect(v._contexts.get(R))+" active:"+b.inspect(v.active,!0)),v._contexts.delete(y)}}),process.namespaces[_]=v,v},destroyNamespace:vm,reset:function MN(){process.namespaces&&Object.keys(process.namespaces).forEach((function(_){vm(_)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:M},We.prototype.set=function(_,v){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return k&&le("    SETTING KEY:"+_+"="+v+" in ns:"+this.name+" uid:"+R+" active:"+b.inspect(this.active,!0)),this.active[_]=v,v},We.prototype.get=function(_){if(this.active)return k&&le("    GETTING KEY:"+_+"="+this.active[_]+" "+this.name+" uid:"+R+" active:"+b.inspect(this.active,!0)),this.active[_];k&&le("    GETTING KEY:"+_+"=undefined "+this.name+" uid:"+R+" active:"+b.inspect(this.active,!0))},We.prototype.createContext=function(){k&&le("   CREATING Context: "+this.name+" uid:"+R+" len:"+this._set.length+"  active:"+b.inspect(this.active,!0,2,!0));let _=Object.create(this.active?this.active:Object.prototype);return _._ns_name=this.name,_.id=R,k&&le("   CREATED Context: "+this.name+" uid:"+R+" len:"+this._set.length+"  context:"+b.inspect(_,!0,2,!0)),_},We.prototype.run=function(_){let v=this.createContext();this.enter(v);try{return k&&le(" BEFORE RUN: "+this.name+" uid:"+R+" len:"+this._set.length+" "+b.inspect(v)),_(v),v}catch(_){throw _&&(_[M]=v),_}finally{k&&le(" AFTER RUN: "+this.name+" uid:"+R+" len:"+this._set.length+" "+b.inspect(v)),this.exit(v)}},We.prototype.runAndReturn=function(_){var v;return this.run((function(y){v=_(y)})),v},We.prototype.runPromise=function(_){let v=this.createContext();this.enter(v);let y=_(v);if(!y||!y.then||!y.catch)throw new Error("fn must return a promise.");return k&&le(" BEFORE runPromise: "+this.name+" uid:"+R+" len:"+this._set.length+" "+b.inspect(v)),y.then(_=>(k&&le(" AFTER runPromise: "+this.name+" uid:"+R+" len:"+this._set.length+" "+b.inspect(v)),this.exit(v),_)).catch(_=>{throw _[M]=v,k&&le(" AFTER runPromise: "+this.name+" uid:"+R+" len:"+this._set.length+" "+b.inspect(v)),this.exit(v),_})},We.prototype.bind=function(_,v){v||(v=this.active?this.active:this.createContext());let y=this;return function(){y.enter(v);try{return _.apply(this,arguments)}catch(_){throw _&&(_[M]=v),_}finally{y.exit(v)}}},We.prototype.enter=function(_){x.ok(_,"context must be provided for entering"),k&&le("  ENTER "+this.name+" uid:"+R+" len:"+this._set.length+" context: "+b.inspect(_)),this._set.push(this.active),this.active=_},We.prototype.exit=function(_){if(x.ok(_,"context must be provided for exiting"),k&&le("  EXIT "+this.name+" uid:"+R+" len:"+this._set.length+" context: "+b.inspect(_)),this.active===_)return x.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let v=this._set.lastIndexOf(_);v<0?(k&&le("??ERROR?? context exiting but not entered - ignoring: "+b.inspect(_)),x.ok(v>=0,"context not currently entered; can't exit. \n"+b.inspect(this)+"\n"+b.inspect(_))):(x.ok(v,"can't remove top context"),this._set.splice(v,1))},We.prototype.bindEmitter=function(_){x.ok(_.on&&_.addListener&&_.emit,"can only bind real EEs");let v=this,y="context@"+this.name;T(_,(function i(_){!_||(_[S]||(_[S]=Object.create(null)),_[S][y]={namespace:v,context:v.active})}),(function a(_){if(!_||!_[S])return _;let v=_,y=_[S];return Object.keys(y).forEach((function(_){let b=y[_];v=b.namespace.bind(v,b.context)})),v}))},We.prototype.fromException=function(_){return _[M]},process.namespaces={},I._state&&!I._state.enabled&&I.enable(),k)for(O in(P=tn()).filter._modifiers)P.filter.deattach(O)}),on=l((_,v)=>{"use strict";var y=Gi();process&&y.gte(process.versions.node,"8.0.0")?v.exports=qi():v.exports=an()}),sn=l((_,v)=>{var y;_=v.exports=w,y="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var _=Array.prototype.slice.call(arguments,0);_.unshift("SEMVER"),console.log.apply(console,_)}:function(){},_.SEMVER_SPEC_VERSION="2.0.0";var b=Number.MAX_SAFE_INTEGER||9007199254740991,x=_.re=[],T=_.src=[],I=0,S=I++;T[S]="0|[1-9]\\d*";var M=I++;T[M]="[0-9]+";var A=I++;T[A]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var P=I++;T[P]="("+T[S]+")\\.("+T[S]+")\\.("+T[S]+")";var O=I++;T[O]="("+T[M]+")\\.("+T[M]+")\\.("+T[M]+")";var k=I++;T[k]="(?:"+T[S]+"|"+T[A]+")";var R=I++;T[R]="(?:"+T[M]+"|"+T[A]+")";var L=I++;T[L]="(?:-("+T[k]+"(?:\\."+T[k]+")*))";var B=I++;T[B]="(?:-?("+T[R]+"(?:\\."+T[R]+")*))";var j=I++;T[j]="[0-9A-Za-z-]+";var U=I++;T[U]="(?:\\+("+T[j]+"(?:\\."+T[j]+")*))";var z=I++,G="v?"+T[P]+T[L]+"?"+T[U]+"?";T[z]="^"+G+"$";var H="[v=\\s]*"+T[O]+T[B]+"?"+T[U]+"?",V=I++;T[V]="^"+H+"$";var $=I++;T[$]="((?:<|>)?=?)";var K=I++;T[K]=T[M]+"|x|X|\\*";var ee=I++;T[ee]=T[S]+"|x|X|\\*";var re=I++;T[re]="[v=\\s]*("+T[ee]+")(?:\\.("+T[ee]+")(?:\\.("+T[ee]+")(?:"+T[L]+")?"+T[U]+"?)?)?";var ie=I++;T[ie]="[v=\\s]*("+T[K]+")(?:\\.("+T[K]+")(?:\\.("+T[K]+")(?:"+T[B]+")?"+T[U]+"?)?)?";var ne=I++;T[ne]="^"+T[$]+"\\s*"+T[re]+"$";var ae=I++;T[ae]="^"+T[$]+"\\s*"+T[ie]+"$";var oe=I++;T[oe]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var se=I++;T[se]="(?:~>?)";var ce=I++;T[ce]="(\\s*)"+T[se]+"\\s+",x[ce]=new RegExp(T[ce],"g");var ue=I++;T[ue]="^"+T[se]+T[re]+"$";var pe=I++;T[pe]="^"+T[se]+T[ie]+"$";var he=I++;T[he]="(?:\\^)";var de=I++;T[de]="(\\s*)"+T[he]+"\\s+",x[de]=new RegExp(T[de],"g");var fe=I++;T[fe]="^"+T[he]+T[re]+"$";var me=I++;T[me]="^"+T[he]+T[ie]+"$";var ge=I++;T[ge]="^"+T[$]+"\\s*("+H+")$|^$";var _e=I++;T[_e]="^"+T[$]+"\\s*("+G+")$|^$";var ve=I++;T[ve]="(\\s*)"+T[$]+"\\s*("+H+"|"+T[re]+")",x[ve]=new RegExp(T[ve],"g");var ye=I++;T[ye]="^\\s*("+T[re]+")\\s+-\\s+("+T[re]+")\\s*$";var be=I++;T[be]="^\\s*("+T[ie]+")\\s+-\\s+("+T[ie]+")\\s*$";var Ee,xe=I++;for(T[xe]="(<|>)?=?\\s*\\*",Ee=0;Ee<35;Ee++)y(Ee,T[Ee]),x[Ee]||(x[Ee]=new RegExp(T[Ee]));function Kr(_,v){if((!v||"object"!=typeof v)&&(v={loose:!!v,includePrerelease:!1}),_ instanceof w)return _;if("string"!=typeof _||_.length>256)return null;if(!(v.loose?x[V]:x[z]).test(_))return null;try{return new w(_,v)}catch(_){return null}}function w(_,v){if((!v||"object"!=typeof v)&&(v={loose:!!v,includePrerelease:!1}),_ instanceof w){if(_.loose===v.loose)return _;_=_.version}else if("string"!=typeof _)throw new TypeError("Invalid Version: "+_);if(_.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof w))return new w(_,v);y("SemVer",_,v),this.options=v,this.loose=!!v.loose;var T=_.trim().match(v.loose?x[V]:x[z]);if(!T)throw new TypeError("Invalid Version: "+_);if(this.raw=_,this.major=+T[1],this.minor=+T[2],this.patch=+T[3],this.major>b||this.major<0)throw new TypeError("Invalid major version");if(this.minor>b||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>b||this.patch<0)throw new TypeError("Invalid patch version");T[4]?this.prerelease=T[4].split(".").map((function(_){if(/^[0-9]+$/.test(_)){var v=+_;if(v>=0&&v<b)return v}return _})):this.prerelease=[],this.build=T[5]?T[5].split("."):[],this.format()}_.parse=Kr,_.valid=function HN(_,v){var y=Kr(_,v);return y?y.version:null},_.clean=function UN(_,v){var y=Kr(_.trim().replace(/^[=v]+/,""),v);return y?y.version:null},_.SemVer=w,w.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},w.prototype.toString=function(){return this.version},w.prototype.compare=function(_){return y("SemVer.compare",this.version,this.options,_),_ instanceof w||(_=new w(_,this.options)),this.compareMain(_)||this.comparePre(_)},w.prototype.compareMain=function(_){return _ instanceof w||(_=new w(_,this.options)),Wn(this.major,_.major)||Wn(this.minor,_.minor)||Wn(this.patch,_.patch)},w.prototype.comparePre=function(_){if(_ instanceof w||(_=new w(_,this.options)),this.prerelease.length&&!_.prerelease.length)return-1;if(!this.prerelease.length&&_.prerelease.length)return 1;if(!this.prerelease.length&&!_.prerelease.length)return 0;var v=0;do{var b=this.prerelease[v],x=_.prerelease[v];if(y("prerelease compare",v,b,x),void 0===b&&void 0===x)return 0;if(void 0===x)return 1;if(void 0===b)return-1;if(b!==x)return Wn(b,x)}while(++v)},w.prototype.inc=function(_,v){switch(_){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",v);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",v);break;case"prepatch":this.prerelease.length=0,this.inc("patch",v),this.inc("pre",v);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",v),this.inc("pre",v);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var y=this.prerelease.length;--y>=0;)"number"==typeof this.prerelease[y]&&(this.prerelease[y]++,y=-2);-1===y&&this.prerelease.push(0)}v&&(this.prerelease[0]===v?isNaN(this.prerelease[1])&&(this.prerelease=[v,0]):this.prerelease=[v,0]);break;default:throw new Error("invalid increment argument: "+_)}return this.format(),this.raw=this.version,this},_.inc=function BN(_,v,y,b){"string"==typeof y&&(b=y,y=void 0);try{return new w(_,y).inc(v,b).version}catch(_){return null}},_.diff=function GN(_,v){if(_p(_,v))return null;var y=Kr(_),b=Kr(v),x="";if(y.prerelease.length||b.prerelease.length){x="pre";var T="prerelease"}for(var I in y)if(("major"===I||"minor"===I||"patch"===I)&&y[I]!==b[I])return x+I;return T},_.compareIdentifiers=Wn;var Te=/^[0-9]+$/;function Wn(_,v){var y=Te.test(_),b=Te.test(v);return y&&b&&(_=+_,v=+v),_===v?0:y&&!b?-1:b&&!y?1:_<v?-1:1}function qt(_,v,y){return new w(_,y).compare(new w(v,y))}function va(_,v,y){return qt(_,v,y)>0}function Fo(_,v,y){return qt(_,v,y)<0}function _p(_,v,y){return 0===qt(_,v,y)}function Lm(_,v,y){return 0!==qt(_,v,y)}function vp(_,v,y){return qt(_,v,y)>=0}function gp(_,v,y){return qt(_,v,y)<=0}function Vo(_,v,y,b){switch(v){case"===":return"object"==typeof _&&(_=_.version),"object"==typeof y&&(y=y.version),_===y;case"!==":return"object"==typeof _&&(_=_.version),"object"==typeof y&&(y=y.version),_!==y;case"":case"=":case"==":return _p(_,y,b);case"!=":return Lm(_,y,b);case">":return va(_,y,b);case">=":return vp(_,y,b);case"<":return Fo(_,y,b);case"<=":return gp(_,y,b);default:throw new TypeError("Invalid operator: "+v)}}function Ze(_,v){if((!v||"object"!=typeof v)&&(v={loose:!!v,includePrerelease:!1}),_ instanceof Ze){if(_.loose===!!v.loose)return _;_=_.value}if(!(this instanceof Ze))return new Ze(_,v);y("comparator",_,v),this.options=v,this.loose=!!v.loose,this.parse(_),this.semver===Ie?this.value="":this.value=this.operator+this.semver.version,y("comp",this)}_.rcompareIdentifiers=function FN(_,v){return Wn(v,_)},_.major=function VN(_,v){return new w(_,v).major},_.minor=function $N(_,v){return new w(_,v).minor},_.patch=function zN(_,v){return new w(_,v).patch},_.compare=qt,_.compareLoose=function KN(_,v){return qt(_,v,!0)},_.rcompare=function XN(_,v,y){return qt(v,_,y)},_.sort=function YN(v,y){return v.sort((function(v,b){return _.compare(v,b,y)}))},_.rsort=function QN(v,y){return v.sort((function(v,b){return _.rcompare(v,b,y)}))},_.gt=va,_.lt=Fo,_.eq=_p,_.neq=Lm,_.gte=vp,_.lte=gp,_.cmp=Vo,_.Comparator=Ze;var Ie={};function te(_,v){if((!v||"object"!=typeof v)&&(v={loose:!!v,includePrerelease:!1}),_ instanceof te)return _.loose===!!v.loose&&_.includePrerelease===!!v.includePrerelease?_:new te(_.raw,v);if(_ instanceof Ze)return new te(_.value,v);if(!(this instanceof te))return new te(_,v);if(this.options=v,this.loose=!!v.loose,this.includePrerelease=!!v.includePrerelease,this.raw=_,this.set=_.split(/\s*\|\|\s*/).map((function(_){return this.parseRange(_.trim())}),this).filter((function(_){return _.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+_);this.format()}function Me(_){return!_||"x"===_.toLowerCase()||"*"===_}function sD(_,v,y,b,x,T,I,S,M,A,P,O,k){return((v=Me(y)?"":Me(b)?">="+y+".0.0":Me(x)?">="+y+"."+b+".0":">="+v)+" "+(S=Me(M)?"":Me(A)?"<"+(+M+1)+".0.0":Me(P)?"<"+M+"."+(+A+1)+".0":O?"<="+M+"."+A+"."+P+"-"+O:"<="+S)).trim()}function oD(_,v,b){for(var x=0;x<_.length;x++)if(!_[x].test(v))return!1;if(v.prerelease.length&&!b.includePrerelease){for(x=0;x<_.length;x++)if(y(_[x].semver),_[x].semver!==Ie&&_[x].semver.prerelease.length>0){var T=_[x].semver;if(T.major===v.major&&T.minor===v.minor&&T.patch===v.patch)return!0}return!1}return!0}function $o(_,v,y){try{v=new te(v,y)}catch(_){return!1}return v.test(_)}function Ep(_,v,y,b){var x,T,I,S,M;switch(_=new w(_,b),v=new te(v,b),y){case">":x=va,T=gp,I=Fo,S=">",M=">=";break;case"<":x=Fo,T=vp,I=va,S="<",M="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if($o(_,v,b))return!1;for(var A=0;A<v.set.length;++A){var P=v.set[A],O=null,k=null;if(P.forEach((function(_){_.semver===Ie&&(_=new Ze(">=0.0.0")),O=O||_,k=k||_,x(_.semver,O.semver,b)?O=_:I(_.semver,k.semver,b)&&(k=_)})),O.operator===S||O.operator===M||(!k.operator||k.operator===S)&&T(_,k.semver))return!1;if(k.operator===M&&I(_,k.semver))return!1}return!0}Ze.prototype.parse=function(_){var v=this.options.loose?x[ge]:x[_e],y=_.match(v);if(!y)throw new TypeError("Invalid comparator: "+_);this.operator=y[1],"="===this.operator&&(this.operator=""),y[2]?this.semver=new w(y[2],this.options.loose):this.semver=Ie},Ze.prototype.toString=function(){return this.value},Ze.prototype.test=function(_){return y("Comparator.test",_,this.options.loose),this.semver===Ie||("string"==typeof _&&(_=new w(_,this.options)),Vo(_,this.operator,this.semver,this.options))},Ze.prototype.intersects=function(_,v){if(!(_ instanceof Ze))throw new TypeError("a Comparator is required");var y;if((!v||"object"!=typeof v)&&(v={loose:!!v,includePrerelease:!1}),""===this.operator)return y=new te(_.value,v),$o(this.value,y,v);if(""===_.operator)return y=new te(this.value,v),$o(_.semver,y,v);var b=!(">="!==this.operator&&">"!==this.operator||">="!==_.operator&&">"!==_.operator),x=!("<="!==this.operator&&"<"!==this.operator||"<="!==_.operator&&"<"!==_.operator),T=this.semver.version===_.semver.version,I=!(">="!==this.operator&&"<="!==this.operator||">="!==_.operator&&"<="!==_.operator),S=Vo(this.semver,"<",_.semver,v)&&(">="===this.operator||">"===this.operator)&&("<="===_.operator||"<"===_.operator),M=Vo(this.semver,">",_.semver,v)&&("<="===this.operator||"<"===this.operator)&&(">="===_.operator||">"===_.operator);return b||x||T&&I||S||M},_.Range=te,te.prototype.format=function(){return this.range=this.set.map((function(_){return _.join(" ").trim()})).join("||").trim(),this.range},te.prototype.toString=function(){return this.range},te.prototype.parseRange=function(_){var v=this.options.loose;_=_.trim();var b=v?x[be]:x[ye];_=_.replace(b,sD),y("hyphen replace",_),_=_.replace(x[ve],"$1$2$3"),y("comparator trim",_,x[ve]),_=(_=(_=_.replace(x[ce],"$1~")).replace(x[de],"$1^")).split(/\s+/).join(" ");var T=v?x[ge]:x[_e],I=_.split(" ").map((function(_){return function ZN(_,v){return y("comp",_,v),_=function tD(_,v){return _.trim().split(/\s+/).map((function(_){return function rD(_,v){y("caret",_,v);var b=v.loose?x[me]:x[fe];return _.replace(b,(function(v,b,x,T,I){var S;return y("caret",_,v,b,x,T,I),Me(b)?S="":Me(x)?S=">="+b+".0.0 <"+(+b+1)+".0.0":Me(T)?S="0"===b?">="+b+"."+x+".0 <"+b+"."+(+x+1)+".0":">="+b+"."+x+".0 <"+(+b+1)+".0.0":I?(y("replaceCaret pr",I),S="0"===b?"0"===x?">="+b+"."+x+"."+T+"-"+I+" <"+b+"."+x+"."+(+T+1):">="+b+"."+x+"."+T+"-"+I+" <"+b+"."+(+x+1)+".0":">="+b+"."+x+"."+T+"-"+I+" <"+(+b+1)+".0.0"):(y("no pr"),S="0"===b?"0"===x?">="+b+"."+x+"."+T+" <"+b+"."+x+"."+(+T+1):">="+b+"."+x+"."+T+" <"+b+"."+(+x+1)+".0":">="+b+"."+x+"."+T+" <"+(+b+1)+".0.0"),y("caret return",S),S}))}(_,v)})).join(" ")}(_,v),y("caret",_),_=function JN(_,v){return _.trim().split(/\s+/).map((function(_){return function eD(_,v){var b=v.loose?x[pe]:x[ue];return _.replace(b,(function(v,b,x,T,I){var S;return y("tilde",_,v,b,x,T,I),Me(b)?S="":Me(x)?S=">="+b+".0.0 <"+(+b+1)+".0.0":Me(T)?S=">="+b+"."+x+".0 <"+b+"."+(+x+1)+".0":I?(y("replaceTilde pr",I),S=">="+b+"."+x+"."+T+"-"+I+" <"+b+"."+(+x+1)+".0"):S=">="+b+"."+x+"."+T+" <"+b+"."+(+x+1)+".0",y("tilde return",S),S}))}(_,v)})).join(" ")}(_,v),y("tildes",_),_=function nD(_,v){return y("replaceXRanges",_,v),_.split(/\s+/).map((function(_){return function iD(_,v){_=_.trim();var b=v.loose?x[ae]:x[ne];return _.replace(b,(function(v,b,x,T,I,S){y("xRange",_,v,b,x,T,I,S);var M=Me(x),A=M||Me(T),P=A||Me(I);return"="===b&&P&&(b=""),M?v=">"===b||"<"===b?"<0.0.0":"*":b&&P?(A&&(T=0),I=0,">"===b?(b=">=",A?(x=+x+1,T=0,I=0):(T=+T+1,I=0)):"<="===b&&(b="<",A?x=+x+1:T=+T+1),v=b+x+"."+T+"."+I):A?v=">="+x+".0.0 <"+(+x+1)+".0.0":P&&(v=">="+x+"."+T+".0 <"+x+"."+(+T+1)+".0"),y("xRange return",v),v}))}(_,v)})).join(" ")}(_,v),y("xrange",_),_=function aD(_,v){return y("replaceStars",_,v),_.trim().replace(x[xe],"")}(_,v),y("stars",_),_}(_,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(I=I.filter((function(_){return!!_.match(T)}))),I=I.map((function(_){return new Ze(_,this.options)}),this)},te.prototype.intersects=function(_,v){if(!(_ instanceof te))throw new TypeError("a Range is required");return this.set.some((function(y){return y.every((function(y){return _.set.some((function(_){return _.every((function(_){return y.intersects(_,v)}))}))}))}))},_.toComparators=function WN(_,v){return new te(_,v).set.map((function(_){return _.map((function(_){return _.value})).join(" ").trim().split(" ")}))},te.prototype.test=function(_){if(!_)return!1;"string"==typeof _&&(_=new w(_,this.options));for(var v=0;v<this.set.length;v++)if(oD(this.set[v],_,this.options))return!0;return!1},_.satisfies=$o,_.maxSatisfying=function uD(_,v,y){var b=null,x=null;try{var T=new te(v,y)}catch(_){return null}return _.forEach((function(_){T.test(_)&&(!b||-1===x.compare(_))&&(x=new w(b=_,y))})),b},_.minSatisfying=function cD(_,v,y){var b=null,x=null;try{var T=new te(v,y)}catch(_){return null}return _.forEach((function(_){T.test(_)&&(!b||1===x.compare(_))&&(x=new w(b=_,y))})),b},_.minVersion=function lD(_,v){_=new te(_,v);var y=new w("0.0.0");if(_.test(y)||(y=new w("0.0.0-0"),_.test(y)))return y;y=null;for(var b=0;b<_.set.length;++b){_.set[b].forEach((function(_){var v=new w(_.semver.version);switch(_.operator){case">":0===v.prerelease.length?v.patch++:v.prerelease.push(0),v.raw=v.format();case"":case">=":(!y||va(y,v))&&(y=v);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+_.operator)}}))}return y&&_.test(y)?y:null},_.validRange=function pD(_,v){try{return new te(_,v).range||"*"}catch(_){return null}},_.ltr=function fD(_,v,y){return Ep(_,v,"<",y)},_.gtr=function dD(_,v,y){return Ep(_,v,">",y)},_.outside=Ep,_.prerelease=function hD(_,v){var y=Kr(_,v);return y&&y.prerelease.length?y.prerelease:null},_.intersects=function _D(_,v,y){return _=new te(_,y),v=new te(v,y),_.intersects(v)},_.coerce=function vD(_){if(_ instanceof w)return _;if("string"!=typeof _)return null;var v=_.match(x[oe]);return null==v?null:Kr(v[1]+"."+(v[2]||"0")+"."+(v[3]||"0"))}}),cn=l((_,v)=>{var y,b,x,T,I,S=Hi().wrap,M=[],A=0,P=!1,O=[];function Ap(_,v){var y=_.length,b=v.length,x=[];if(0===y&&0===b)return x;for(var T=0;T<y;T++)x[T]=_[T];if(0===b)return x;for(var I=0;I<b;I++){var S=!0;for(T=0;T<y;T++)if(_[T].uid===v[I].uid){S=!1;break}S&&x.push(v[I])}return x}function gt(_,v){"function"==typeof _.create&&(this.create=_.create,this.flags|=1),"function"==typeof _.before&&(this.before=_.before,this.flags|=2),"function"==typeof _.after&&(this.after=_.after,this.flags|=4),"function"==typeof _.error&&(this.error=_.error,this.flags|=8),this.uid=++A,this.data=void 0===v?null:v}function km(_,v){if("object"!=typeof _||!_)throw new TypeError("callbacks argument must be an object");return _ instanceof gt?_:new gt(_,v)}process._fatalException?(x=!1,y=function(_){var v=M.length;if(x||0===v)return!1;var y=!1;x=!0;for(var b=0;b<v;++b){var I=M[b];if(0!=(8&I.flags)){var S=T&&T[I.uid];y=I.error(S,_)||y}}return x=!1,O.length>0&&(M=O.pop()),T=void 0,y&&!P},b=function(_,v,y){var b=[];P=!0;for(var x=0;x<y;++x){var I=v[x];if(b[I.uid]=I.data,0!=(1&I.flags)){var S=I.create(I.data);void 0!==S&&(b[I.uid]=S)}}return P=!1,function(){T=b,O.push(M),M=Ap(v,M),P=!0;for(var x=0;x<y;++x)(2&v[x].flags)>0&&v[x].before(this,b[v[x].uid]);P=!1;var I=_.apply(this,arguments);for(P=!0,x=0;x<y;++x)(4&v[x].flags)>0&&v[x].after(this,b[v[x].uid]);return P=!1,M=O.pop(),T=void 0,I}},S(process,"_fatalException",(function(_){return function(v){return y(v)||_(v)}}))):(I=!1,y=function(_){if(I)throw _;for(var v=!1,y=M.length,b=0;b<y;++b){var x=M[b];0!=(8&x.flags)&&(v=x.error(null,_)||v)}if(!v&&P)throw _},b=function(_,v,b){var x=[];P=!0;for(var T=0;T<b;++T){var S=v[T];if(x[S.uid]=S.data,0!=(1&S.flags)){var A=S.create(S.data);void 0!==A&&(x[S.uid]=A)}}return P=!1,function(){var T,S=!1,A=!1;O.push(M),M=Ap(v,M),P=!0;for(var k=0;k<b;++k)(2&v[k].flags)>0&&v[k].before(this,x[v[k].uid]);P=!1;try{T=_.apply(this,arguments)}catch(_){S=!0;for(k=0;k<b;++k)if(0!=(8&M[k].flags))try{A=M[k].error(x[v[k].uid],_)||A}catch(_){throw I=!0,_}if(!A)throw process.removeListener("uncaughtException",y),process._originalNextTick((function(){process.addListener("uncaughtException",y)})),_}finally{if(!S||A){for(P=!0,k=0;k<b;++k)(4&v[k].flags)>0&&v[k].after(this,x[v[k].uid]);P=!1}M=O.pop()}return T}},process.addListener("uncaughtException",y)),gt.prototype.create=void 0,gt.prototype.before=void 0,gt.prototype.after=void 0,gt.prototype.error=void 0,gt.prototype.data=void 0,gt.prototype.uid=0,gt.prototype.flags=0,process.createAsyncListener=km,process.addAsyncListener=function TD(_,v){var y;y=_ instanceof gt?_:km(_,v);for(var b=!1,x=0;x<M.length;x++)if(y===M[x]){b=!0;break}return b||M.push(y),y},process.removeAsyncListener=function SD(_){for(var v=0;v<M.length;v++)if(_===M[v]){M.splice(v,1);break}},v.exports=function yD(_){var v=M.length;if(0===v)return _;for(var y=M.slice(),x=0;x<v;++x)if(y[x].flags>0)return b(_,y,v);return function mD(_,v,y){P=!0;for(var b=0;b<y;++b){var x=v[b];x.create&&x.create(x.data)}return P=!1,function(){O.push(M),M=Ap(v,M);var y=_.apply(this,arguments);return M=O.pop(),y}}(_,y,v)}}),un=l((_,v)=>{"use strict";v.exports=(_,v)=>class extends _{constructor(_){var y,b;super((function o(_,T){y=this,b=[function p(y){return v(x,!1),_(y)},function f(_){return v(x,!1),T(_)}]}));var x=this;try{_.apply(y,b)}catch(_){b[1](_)}return x}}}),pn=l(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var _=Hi(),v=sn(),b=_.wrap,x=_.massWrap,T=cn(),I=y(3837),S=v.gte(process.version,"6.0.0"),M=v.gte(process.version,"7.0.0"),A=v.gte(process.version,"8.0.0"),P=v.gte(process.version,"11.0.0"),O=y(1808);function Vm(_){return function(){this.on("connection",(function(_){_._handle&&(_._handle.onread=T(_._handle.onread))}));try{return _.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=T(this._handle.onconnection))}}}function $m(_){if(_&&_._handle){var v=_._handle;v._originalOnread||(v._originalOnread=v.onread),v.onread=T(v._originalOnread)}}M&&!O._normalizeArgs?O._normalizeArgs=function(_){if(0===_.length)return[{},null];var v=_[0],y={};"object"==typeof v&&null!==v?y=v:function DD(_){return"string"==typeof _&&!1===function ND(_){return(_=Number(_))>=0&&_}(_)}(v)?y.path=v:(y.port=v,_.length>1&&"string"==typeof _[1]&&(y.host=_[1]));var b=_[_.length-1];return"function"!=typeof b?[y,null]:[y,b]}:!M&&!O._normalizeConnectArgs&&(O._normalizeConnectArgs=function(_){var v={};"object"==typeof _[0]&&null!==_[0]?v=_[0]:"string"==typeof _[0]&&!1===function r(_){return(_=Number(_))>=0&&_}(_[0])?v.path=_[0]:(v.port=_[0],"string"==typeof _[1]&&(v.host=_[1]));var y=_[_.length-1];return"function"==typeof y?[v,y]:[v]}),"_setUpListenHandle"in O.Server.prototype?b(O.Server.prototype,"_setUpListenHandle",Vm):b(O.Server.prototype,"_listen2",Vm),b(O.Socket.prototype,"connect",(function(_){return function(){var v;(v=A&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?arguments[0]:M?O._normalizeArgs(arguments):O._normalizeConnectArgs(arguments))[1]&&(v[1]=T(v[1]));var y=_.apply(this,v);return $m(this),y}}));var k=y(3685);b(k.Agent.prototype,"addRequest",(function(_){return function(v){var y=v.onSocket;return v.onSocket=T((function(_){return $m(_),y.apply(this,arguments)})),_.apply(this,arguments)}}));var R=y(2081);function zm(_){Array.isArray(_.stdio)&&_.stdio.forEach((function(_){_&&_._handle&&(_._handle.onread=T(_._handle.onread),b(_._handle,"close",Qo))})),_._handle&&(_._handle.onexit=T(_._handle.onexit))}R.ChildProcess?b(R.ChildProcess.prototype,"spawn",(function(_){return function(){var v=_.apply(this,arguments);return zm(this),v}})):x(R,["execFile","fork","spawn"],(function(_){return function(){var v=_.apply(this,arguments);return zm(v),v}})),process._fatalException||(process._originalNextTick=process.nextTick);var L=[];process._nextDomainTick&&L.push("_nextDomainTick"),process._tickDomainCallback&&L.push("_tickDomainCallback"),x(process,L,mt),b(process,"nextTick",Qo);var B=["setTimeout","setInterval"];global.setImmediate&&B.push("setImmediate");var j=y(9512),U=global.setTimeout===j.setTimeout;x(j,B,Qo),U&&x(global,B,Qo);var z=y(9523);x(z,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],mt),z.resolveNaptr&&b(z,"resolveNaptr",mt);var G,H,V,$=y(7147);x($,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],mt),$.lchown&&b($,"lchown",mt),$.lchmod&&b($,"lchmod",mt),$.ftruncate&&b($,"ftruncate",mt);try{G=y(9796)}catch(_){}G&&G.Deflate&&G.Deflate.prototype&&((H=Object.getPrototypeOf(G.Deflate.prototype))._transform?b(H,"_transform",mt):H.write&&H.flush&&H.end&&x(H,["write","flush","end"],mt));try{V=y(6113)}catch(_){}V&&(K=["pbkdf2","randomBytes"],P||K.push("pseudoRandomBytes"),x(V,K,mt));var K,ee,re=!!global.Promise&&"function Promise() { [native code] }"===Promise.toString()&&"function toString() { [native code] }"===Promise.toString.toString();function mt(_){var t=function(){var v,y=arguments.length-1;if("function"==typeof arguments[y]){v=Array(arguments.length);for(var b=0;b<arguments.length-1;b++)v[b]=arguments[b];v[y]=T(arguments[y])}return _.apply(this,v||arguments)};switch(_.length){case 1:return function(v){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof v&&(v=T(v)),_.call(this,v))};case 2:return function(v,y){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof y&&(y=T(y)),_.call(this,v,y))};case 3:return function(v,y,b){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof b&&(b=T(b)),_.call(this,v,y,b))};case 4:return function(v,y,b,x){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof x&&(x=T(x)),_.call(this,v,y,b,x))};case 5:return function(v,y,b,x,I){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof I&&(I=T(I)),_.call(this,v,y,b,x,I))};case 6:return function(v,y,b,x,I,S){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof S&&(S=T(S)),_.call(this,v,y,b,x,I,S))};default:return t}}function Qo(_){var t=function(){var v;if("function"==typeof arguments[0]){(v=Array(arguments.length))[0]=T(arguments[0]);for(var y=1;y<arguments.length;y++)v[y]=arguments[y]}return _.apply(this,v||arguments)};switch(_.length){case 1:return function(v){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof v&&(v=T(v)),_.call(this,v))};case 2:return function(v,y){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof v&&(v=T(v)),_.call(this,v,y))};case 3:return function(v,y,b){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof v&&(v=T(v)),_.call(this,v,y,b))};case 4:return function(v,y,b,x){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof v&&(v=T(v)),_.call(this,v,y,b,x))};case 5:return function(v,y,b,x,I){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof v&&(v=T(v)),_.call(this,v,y,b,x,I))};case 6:return function(v,y,b,x,I,S){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof v&&(v=T(v)),_.call(this,v,y,b,x,I,S))};default:return t}}re&&(ee=process.addAsyncListener({create:function(){re=!1}}),global.Promise.resolve(!0).then((function(){re=!1})),process.removeAsyncListener(ee)),re&&function RD(){var _=global.Promise;function t(v){if(!(this instanceof t))return _(v);if("function"!=typeof v)return new _(v);var y,b,x=new _((function p(_,v){y=this,b=[function h(v){return n(x,!1),_(v)},function E(_){return n(x,!1),v(_)}]}));x.__proto__=t.prototype;try{v.apply(y,b)}catch(_){b[1](_)}return x}if(I.inherits(t,_),b(_.prototype,"then",a),_.prototype.chain&&b(_.prototype,"chain",a),S)global.Promise=un()(_,n);else{["all","race","reject","resolve","accept","defer"].forEach((function(v){"function"==typeof _[v]&&(t[v]=_[v])})),global.Promise=t}function n(_,v){(!_.__asl_wrapper||v)&&(_.__asl_wrapper=T(i))}function i(v,y,b,x){var T;try{return{returnVal:T=y.call(v,b),error:!1}}catch(_){return{errorVal:_,error:!0}}finally{T instanceof _?x.__asl_wrapper=function(){var _=T.__asl_wrapper||i;return _.apply(this,arguments)}:n(x,!0)}}function a(_){return function(){var v=this,y=_.apply(v,Array.prototype.map.call(arguments,p));return y.__asl_wrapper=function(_,b,x,T){return v.__asl_wrapper?(v.__asl_wrapper(_,(function(){}),null,y),y.__asl_wrapper(_,b,x,T)):i(_,b,x,T)},y;function p(_){return"function"!=typeof _?_:T((function(b){var x=(v.__asl_wrapper||i)(this,_,b,y);if(x.error)throw x.errorVal;return x.returnVal}))}}}}()}),hn=l((_,v)=>{"use strict";var b=y(9491),x=Xi(),T="cls@contexts",I="error@context";function ot(_){this.name=_,this.active=null,this._set=[],this.id=null}function Qm(_){return process.namespaces[_]}function Wm(_){var v=Qm(_);b.ok(v,"can't delete nonexistent namespace!"),b.ok(v.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(v.id),process.namespaces[_]=null}function Zm(){process.namespaces&&Object.keys(process.namespaces).forEach((function(_){Wm(_)})),process.namespaces=Object.create(null)}process.addAsyncListener||pn(),ot.prototype.set=function(_,v){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[_]=v,v},ot.prototype.get=function(_){if(this.active)return this.active[_]},ot.prototype.createContext=function(){return Object.create(this.active)},ot.prototype.run=function(_){var v=this.createContext();this.enter(v);try{return _(v),v}catch(_){throw _&&(_[I]=v),_}finally{this.exit(v)}},ot.prototype.runAndReturn=function(_){var v;return this.run((function(y){v=_(y)})),v},ot.prototype.bind=function(_,v){v||(v=this.active?this.active:this.createContext());var y=this;return function(){y.enter(v);try{return _.apply(this,arguments)}catch(_){throw _&&(_[I]=v),_}finally{y.exit(v)}}},ot.prototype.enter=function(_){b.ok(_,"context must be provided for entering"),this._set.push(this.active),this.active=_},ot.prototype.exit=function(_){if(b.ok(_,"context must be provided for exiting"),this.active===_)return b.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());var v=this._set.lastIndexOf(_);b.ok(v>=0,"context not currently entered; can't exit"),b.ok(v,"can't remove top context"),this._set.splice(v,1)},ot.prototype.bindEmitter=function(_){b.ok(_.on&&_.addListener&&_.emit,"can only bind real EEs");var v=this,y="context@"+this.name;x(_,(function n(_){!_||(_[T]||(_[T]=Object.create(null)),_[T][y]={namespace:v,context:v.active})}),(function i(_){if(!_||!_[T])return _;var v=_,y=_[T];return Object.keys(y).forEach((function(_){var b=y[_];v=b.namespace.bind(v,b.context)})),v}))},ot.prototype.fromException=function(_){return _[I]},process.namespaces||Zm(),v.exports={getNamespace:Qm,createNamespace:function xD(_){b.ok(_,"namespace must be given a name!");var v=new ot(_);return v.id=process.addAsyncListener({create:function(){return v.active},before:function(_,y){y&&v.enter(y)},after:function(_,y){y&&v.exit(y)},error:function(_){_&&v.exit(_)}}),process.namespaces[_]=v,v},destroyNamespace:Wm,reset:Zm}}),dn=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.CorrelationContextManager=void 0;var v=O(),y=Fr(),b=Hr(),x=Xr(),T=zi(),I=function(){function e(){}return e.getCurrentContext=function(){if(!e.enabled)return null;var _=e.session.get(e.CONTEXT_NAME);return void 0===_?null:_},e.generateContextObject=function(_,v,y,b,x,T){return v=v||_,this.enabled?{operation:{name:y,id:_,parentId:v,traceparent:x,tracestate:T},customProperties:new S(b)}:null},e.spanToContextObject=function(_,v,y){var x=new b;return x.traceId=_.traceId,x.spanId=_.spanId,x.traceFlag=b.formatOpenTelemetryTraceFlags(_.traceFlags)||b.DEFAULT_TRACE_FLAG,x.parentId=v,e.generateContextObject(x.traceId,x.parentId,y,null,x)},e.runWithContext=function(_,v){var y;return e.enabled?e.session.bind(v,((y={})[e.CONTEXT_NAME]=_,y))():v()},e.wrapEmitter=function(_){e.enabled&&e.session.bindEmitter(_)},e.wrapCallback=function(_,v){var y;return e.enabled?e.session.bind(_,v?((y={})[e.CONTEXT_NAME]=v,y):void 0):_},e.enable=function(_){if(!this.enabled){if(!this.isNodeVersionCompatible())return void(this.enabled=!1);e.hasEverEnabled||(this.forceClsHooked=_,this.hasEverEnabled=!0,void 0===this.cls&&(!0===e.forceClsHooked||void 0===e.forceClsHooked&&e.shouldUseClsHooked()?this.cls=on():this.cls=hn()),e.session=this.cls.createNamespace("AI-CLS-Session"),y.registerContextPreservation((function(_){return e.session.bind(_)}))),this.enabled=!0}},e.startOperation=function(_,y){var I=_&&_.traceContext||null,S=_&&_.traceId?_:null,M=_&&_.headers;if(S){var A=new b("00-"+S.traceId+"-"+S.spanId+"-01"),P=new x(S.traceState?S.traceState.serialize():null);return e.generateContextObject(S.traceId,"|"+S.traceId+"."+S.spanId+".","string"==typeof y?y:"",void 0,A,P)}if(I){A=new b(I.traceparent),P=new x(I.tracestate);var O="object"==typeof y?new T(y):null;return e.generateContextObject(A.traceId,A.parentId,"string"==typeof y?y:O.getOperationName({}),O&&O.getCorrelationContextHeader()||void 0,A,P)}if(M){A=new b(M.traceparent?M.traceparent.toString():null),P=new x(M.tracestate?M.tracestate.toString():null),O=new T(_);return e.generateContextObject(A.traceId,A.parentId,O.getOperationName({}),O.getCorrelationContextHeader(),A,P)}return v.warn("startOperation was called with invalid arguments",arguments),null},e.disable=function(){this.enabled=!1},e.reset=function(){e.hasEverEnabled&&(e.session=null,e.session=this.cls.createNamespace("AI-CLS-Session"))},e.isNodeVersionCompatible=function(){var _=process.versions.node.split(".");return parseInt(_[0])>3||parseInt(_[0])>2&&parseInt(_[1])>2},e.shouldUseClsHooked=function(){var _=process.versions.node.split(".");return parseInt(_[0])>8||parseInt(_[0])>=8&&parseInt(_[1])>=2},e.canUseClsHooked=function(){var _=process.versions.node.split("."),v=parseInt(_[0])>8||parseInt(_[0])>=8&&parseInt(_[1])>=0,y=parseInt(_[0])<8||parseInt(_[0])<=8&&parseInt(_[1])<2,b=parseInt(_[0])>4||parseInt(_[0])>=4&&parseInt(_[1])>=7;return!(v&&y)&&b},e.enabled=!1,e.hasEverEnabled=!1,e.forceClsHooked=void 0,e.CONTEXT_NAME="ApplicationInsights-Context",e}();_.CorrelationContextManager=I;var S=function(){function e(_){this.props=[],this.addHeaderData(_)}return e.prototype.addHeaderData=function(_){var v=_?_.split(", "):[];this.props=v.map((function(_){var v=_.split("=");return{key:v[0],value:v[1]}})).concat(this.props)},e.prototype.serializeToHeader=function(){return this.props.map((function(_){return _.key+"="+_.value})).join(", ")},e.prototype.getProperty=function(_){for(var v=0;v<this.props.length;++v){var y=this.props[v];if(y.key===_)return y.value}},e.prototype.setProperty=function(_,y){if(e.bannedCharacters.test(_)||e.bannedCharacters.test(y))v.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+_+" and value: "+y);else{for(var b=0;b<this.props.length;++b){var x=this.props[b];if(x.key===_)return void(x.value=y)}this.props.push({key:_,value:y})}},e.bannedCharacters=/[,=]/,e}()}),fn=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.dispose=_.enable=void 0;var v=Fi(),y=j(),b=[],Lp=function(_){var y=_.data.message;b.forEach((function(b){y instanceof Error?b.trackException({exception:y}):(y.lastIndexOf("\n")==y.length-1&&(y=y.substring(0,y.length-1)),b.trackTrace({message:y,severity:_.data.stderr?v.SeverityLevel.Warning:v.SeverityLevel.Information}))}))};_.enable=function jD(_,v){_?(0===b.length&&y.channel.subscribe("console",Lp),b.push(v)):0===(b=b.filter((function(_){return _!=v}))).length&&y.channel.unsubscribe("console",Lp)},_.dispose=function kD(){y.channel.unsubscribe("console",Lp),b=[]}}),mn=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.dispose=_.enable=void 0;var v=Fi(),y=j(),b=[],x={10:v.SeverityLevel.Verbose,20:v.SeverityLevel.Verbose,30:v.SeverityLevel.Information,40:v.SeverityLevel.Warning,50:v.SeverityLevel.Error,60:v.SeverityLevel.Critical},jp=function(_){var v=_.data.result;b.forEach((function(y){var b=x[_.data.level];v instanceof Error?y.trackException({exception:v}):y.trackTrace({message:v,severity:b})}))};_.enable=function UD(_,v){_?(0===b.length&&y.channel.subscribe("bunyan",jp),b.push(v)):0===(b=b.filter((function(_){return _!=v}))).length&&y.channel.unsubscribe("bunyan",jp)},_.dispose=function BD(){y.channel.unsubscribe("bunyan",jp),b=[]}}),gn=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.dispose=_.enable=void 0;var v=Fi(),y=j(),b=[],x={syslog:function(_){var y={emerg:v.SeverityLevel.Critical,alert:v.SeverityLevel.Critical,crit:v.SeverityLevel.Critical,error:v.SeverityLevel.Error,warning:v.SeverityLevel.Warning,notice:v.SeverityLevel.Information,info:v.SeverityLevel.Information,debug:v.SeverityLevel.Verbose};return void 0===y[_]?v.SeverityLevel.Information:y[_]},npm:function(_){var y={error:v.SeverityLevel.Error,warn:v.SeverityLevel.Warning,info:v.SeverityLevel.Information,verbose:v.SeverityLevel.Verbose,debug:v.SeverityLevel.Verbose,silly:v.SeverityLevel.Verbose};return void 0===y[_]?v.SeverityLevel.Information:y[_]},unknown:function(_){return v.SeverityLevel.Information}},Hp=function(_){var v=_.data.message;b.forEach((function(y){if(v instanceof Error)y.trackException({exception:v,properties:_.data.meta});else{var b=x[_.data.levelKind](_.data.level);y.trackTrace({message:v,severity:b,properties:_.data.meta})}}))};_.enable=function FD(_,v){_?(0===b.length&&y.channel.subscribe("winston",Hp),b.push(v)):0===(b=b.filter((function(_){return _!=v}))).length&&y.channel.unsubscribe("winston",Hp)},_.dispose=function VD(){y.channel.unsubscribe("winston",Hp),b=[]}}),_n=l((_,v)=>{"use strict";var y=Fr(),b=function(){function e(_){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=_,e.INSTANCE=this}return e.prototype.enable=function(_,v){y.IsInitialized&&(fn().enable(_&&v,this._client),mn().enable(_,this._client),gn().enable(_,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1,!1)},e._methodNames=["debug","info","log","warn","error"],e}();v.exports=b}),vn=l((_,v)=>{"use strict";var y=function(){function e(_){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=_;var v=process.versions.node.split(".");e._canUseUncaughtExceptionMonitor=parseInt(v[0])>13||13===parseInt(v[0])&&parseInt(v[1])>=7}return e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(_){var v=this;if(_){this._isInitialized=!0;if(!this._exceptionListenerHandle){var i=function(_,y,b){void 0===b&&(b=new Error(e._FALLBACK_ERROR_MESSAGE)),v._client.trackException({exception:b}),v._client.flush({isAppCrashing:!0}),_&&y&&1===process.listeners(y).length&&(console.error(b),process.exit(1))};e._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=i.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=i.bind(this,!0,e.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=i.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(e._canUseUncaughtExceptionMonitor?process.removeListener(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.INSTANCE=null,e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",e.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",e.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",e._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",e._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",e._canUseUncaughtExceptionMonitor=!1,e}();v.exports=y}),yn=l(_=>{"use strict";var v,y,b,x;Object.defineProperty(_,"__esModule",{value:!0}),_.HeartBeatMetricName=_.DependencyTypeName=_.SpanAttribute=_.TelemetryTypeStringToQuickPulseDocumentType=_.TelemetryTypeStringToQuickPulseType=_.QuickPulseType=_.QuickPulseDocumentType=_.PerformanceToQuickPulseCounter=_.MetricId=_.PerformanceCounter=_.QuickPulseCounter=_.DEFAULT_LIVEMETRICS_HOST=_.DEFAULT_LIVEMETRICS_ENDPOINT=_.DEFAULT_BREEZE_ENDPOINT=void 0,_.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",_.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",_.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com",(b=y=_.QuickPulseCounter||(_.QuickPulseCounter={})).COMMITTED_BYTES="\\Memory\\Committed Bytes",b.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",b.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",b.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",b.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",b.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",b.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",b.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",b.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec",function(_){_.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",_.AVAILABLE_BYTES="\\Memory\\Available Bytes",_.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",_.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",_.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",_.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"}(x=_.PerformanceCounter||(_.PerformanceCounter={})),function(_){_.REQUESTS_DURATION="requests/duration",_.DEPENDENCIES_DURATION="dependencies/duration",_.EXCEPTIONS_COUNT="exceptions/count",_.TRACES_COUNT="traces/count"}(_.MetricId||(_.MetricId={})),_.PerformanceToQuickPulseCounter=((v={})[x.PROCESSOR_TIME]=y.PROCESSOR_TIME,v[x.REQUEST_RATE]=y.REQUEST_RATE,v[x.REQUEST_DURATION]=y.REQUEST_DURATION,v[y.COMMITTED_BYTES]=y.COMMITTED_BYTES,v[y.REQUEST_FAILURE_RATE]=y.REQUEST_FAILURE_RATE,v[y.DEPENDENCY_RATE]=y.DEPENDENCY_RATE,v[y.DEPENDENCY_FAILURE_RATE]=y.DEPENDENCY_FAILURE_RATE,v[y.DEPENDENCY_DURATION]=y.DEPENDENCY_DURATION,v[y.EXCEPTION_RATE]=y.EXCEPTION_RATE,v),_.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},_.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},_.TelemetryTypeStringToQuickPulseType={EventData:_.QuickPulseType.Event,ExceptionData:_.QuickPulseType.Exception,MessageData:_.QuickPulseType.Trace,MetricData:_.QuickPulseType.Metric,RequestData:_.QuickPulseType.Request,RemoteDependencyData:_.QuickPulseType.Dependency,AvailabilityData:_.QuickPulseType.Availability,PageViewData:_.QuickPulseType.PageView},_.TelemetryTypeStringToQuickPulseDocumentType={EventData:_.QuickPulseDocumentType.Event,ExceptionData:_.QuickPulseDocumentType.Exception,MessageData:_.QuickPulseDocumentType.Trace,MetricData:_.QuickPulseDocumentType.Metric,RequestData:_.QuickPulseDocumentType.Request,RemoteDependencyData:_.QuickPulseDocumentType.Dependency,AvailabilityData:_.QuickPulseDocumentType.Availability,PageViewData:_.QuickPulseDocumentType.PageView},_.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},_.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},_.HeartBeatMetricName="HeartBeat"}),bn=l((_,v)=>{"use strict";var b=y(2037),x=yn(),T=function(){function e(_,v,y){void 0===v&&(v=6e4),void 0===y&&(y=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=_,this._collectionInterval=v,this._enableLiveMetricsCounters=y}return e.prototype.enable=function(_,v){var y=this;this._isEnabled=_,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),_?this._handle||(this._lastCpus=b.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:e._totalExceptionCount,time:+new Date},"function"==typeof process.cpuUsage&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=v||this._collectionInterval,this._handle=setInterval((function(){return y.trackPerformance()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countRequest=function(_,v){var y;if(e.isEnabled()){if("string"==typeof _)y=+new Date("1970-01-01T"+_+"Z");else{if("number"!=typeof _)return;y=_}e._intervalRequestExecutionTime+=y,!1===v&&e._totalFailedRequestCount++,e._totalRequestCount++}},e.countException=function(){e._totalExceptionCount++},e.countDependency=function(_,v){var y;if(e.isEnabled()){if("string"==typeof _)y=+new Date("1970-01-01T"+_+"Z");else{if("number"!=typeof _)return;y=_}e._intervalDependencyExecutionTime+=y,!1===v&&e._totalFailedDependencyCount++,e._totalDependencyCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},e.prototype._trackCpu=function(){var _=b.cpus();if(_&&_.length&&this._lastCpus&&_.length===this._lastCpus.length){for(var v=0,y=0,T=0,I=0,S=0,M=0;_&&M<_.length;M++){var A=_[M],P=this._lastCpus[M],O=(A.model,A.speed,A.times),k=P.times;v+=O.user-k.user||0,y+=O.sys-k.sys||0,T+=O.nice-k.nice||0,I+=O.idle-k.idle||0,S+=O.irq-k.irq||0}var R=void 0;if("function"==typeof process.cpuUsage){var L=process.cpuUsage(),B=process.hrtime(),j=L.user-this._lastAppCpuUsage.user+(L.system-this._lastAppCpuUsage.system)||0;if(void 0!==this._lastHrtime&&2===this._lastHrtime.length)R=100*j/((1e6*(B[0]-this._lastHrtime[0])+(B[1]-this._lastHrtime[1])/1e3||0)*_.length);this._lastAppCpuUsage=L,this._lastHrtime=B}var U=v+y+T+I+S||1;this._client.trackMetric({name:x.PerformanceCounter.PROCESSOR_TIME,value:(U-I)/U*100}),this._client.trackMetric({name:x.PerformanceCounter.PROCESS_TIME,value:R||v/U*100})}this._lastCpus=_},e.prototype._trackMemory=function(){var _=b.freemem(),v=process.memoryUsage().rss,y=b.totalmem()-_;this._client.trackMetric({name:x.PerformanceCounter.PRIVATE_BYTES,value:v}),this._client.trackMetric({name:x.PerformanceCounter.AVAILABLE_BYTES,value:_}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:x.QuickPulseCounter.COMMITTED_BYTES,value:y})},e.prototype._trackNetwork=function(){var _=this._lastRequests,v={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},y=v.totalRequestCount-_.totalRequestCount||0,b=v.totalFailedRequestCount-_.totalFailedRequestCount||0,T=v.time-_.time,I=T/1e3,S=(e._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/y||0;if(this._lastIntervalRequestExecutionTime=e._intervalRequestExecutionTime,T>0){var M=y/I,A=b/I;this._client.trackMetric({name:x.PerformanceCounter.REQUEST_RATE,value:M}),(!this._enableLiveMetricsCounters||y>0)&&this._client.trackMetric({name:x.PerformanceCounter.REQUEST_DURATION,value:S}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:x.QuickPulseCounter.REQUEST_FAILURE_RATE,value:A})}this._lastRequests=v},e.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var _=this._lastDependencies,v={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},y=v.totalDependencyCount-_.totalDependencyCount||0,b=v.totalFailedDependencyCount-_.totalFailedDependencyCount||0,T=v.time-_.time,I=T/1e3,S=(e._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/y||0;if(this._lastIntervalDependencyExecutionTime=e._intervalDependencyExecutionTime,T>0){var M=y/I,A=b/I;this._client.trackMetric({name:x.QuickPulseCounter.DEPENDENCY_RATE,value:M}),this._client.trackMetric({name:x.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:A}),(!this._enableLiveMetricsCounters||y>0)&&this._client.trackMetric({name:x.QuickPulseCounter.DEPENDENCY_DURATION,value:S})}this._lastDependencies=v}},e.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var _=this._lastExceptions,v={totalExceptionCount:e._totalExceptionCount,time:+new Date},y=v.totalExceptionCount-_.totalExceptionCount||0,b=v.time-_.time;if(b>0){var T=y/(b/1e3);this._client.trackMetric({name:x.QuickPulseCounter.EXCEPTION_RATE,value:T})}this._lastExceptions=v}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._totalDependencyCount=0,e._totalFailedDependencyCount=0,e._totalExceptionCount=0,e._intervalDependencyExecutionTime=0,e._intervalRequestExecutionTime=0,e}();v.exports=T}),wn=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.AggregatedMetricCounter=void 0;var v=function e(_){this.dimensions=_,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0};_.AggregatedMetricCounter=v}),En=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.PreaggregatedMetricPropertyNames=void 0,_.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),xn=l((_,v)=>{"use strict";var y=_&&_.__assign||function(){return(y=Object.assign||function(_){for(var v,y=1,b=arguments.length;y<b;y++)for(var x in v=arguments[y])Object.prototype.hasOwnProperty.call(v,x)&&(_[x]=v[x]);return _}).apply(this,arguments)},b=yn(),x=wn(),T=En(),I=function(){function e(_,v){void 0===v&&(v=6e4),e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,e._dependencyCountersCollection=[],e._requestCountersCollection=[],e._exceptionCountersCollection=[],e._traceCountersCollection=[],this._client=_,this._collectionInterval=v}return e.prototype.enable=function(_,v){var y=this;this._isEnabled=_,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),_?this._handle||(this._collectionInterval=v||this._collectionInterval,this._handle=setInterval((function(){return y.trackPreAggregatedMetrics()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countException=function(_){e.isEnabled()&&e._getAggregatedCounter(_,this._exceptionCountersCollection).totalCount++},e.countTrace=function(_){e.isEnabled()&&e._getAggregatedCounter(_,this._traceCountersCollection).totalCount++},e.countRequest=function(_,v){if(e.isEnabled()){var y,b=e._getAggregatedCounter(v,this._requestCountersCollection);if("string"==typeof _)y=+new Date("1970-01-01T"+_+"Z");else{if("number"!=typeof _)return;y=_}b.intervalExecutionTime+=y,b.totalCount++}},e.countDependency=function(_,v){if(e.isEnabled()){var y,b=e._getAggregatedCounter(v,this._dependencyCountersCollection);if("string"==typeof _)y=+new Date("1970-01-01T"+_+"Z");else{if("number"!=typeof _)return;y=_}b.intervalExecutionTime+=y,b.totalCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},e._getAggregatedCounter=function(_,v){for(var y=!1,b=0;b<v.length;b++){if(_===v[b].dimensions)return v[b];if(Object.keys(_).length===Object.keys(v[b].dimensions).length){for(var T in _)if(_[T]!=v[b].dimensions[T]){y=!0;break}if(!y)return v[b];y=!1}}var I=new x.AggregatedMetricCounter(_);return v.push(I),I},e.prototype._trackRequestMetrics=function(){for(var _=0;_<e._requestCountersCollection.length;_++){var v=e._requestCountersCollection[_];v.time=+new Date;var y=v.totalCount-v.lastTotalCount||0,x=v.time-v.lastTime,T=(v.intervalExecutionTime-v.lastIntervalExecutionTime)/y||0;v.lastIntervalExecutionTime=v.intervalExecutionTime,x>0&&y>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:v.dimensions,value:T,count:y,aggregationInterval:x,metricType:b.MetricId.REQUESTS_DURATION}),v.lastTotalCount=v.totalCount,v.lastTime=v.time}},e.prototype._trackDependencyMetrics=function(){for(var _=0;_<e._dependencyCountersCollection.length;_++){var v=e._dependencyCountersCollection[_];v.time=+new Date;var y=v.totalCount-v.lastTotalCount||0,x=v.time-v.lastTime,T=(v.intervalExecutionTime-v.lastIntervalExecutionTime)/y||0;v.lastIntervalExecutionTime=v.intervalExecutionTime,x>0&&y>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:v.dimensions,value:T,count:y,aggregationInterval:x,metricType:b.MetricId.DEPENDENCIES_DURATION}),v.lastTotalCount=v.totalCount,v.lastTime=v.time}},e.prototype._trackExceptionMetrics=function(){for(var _=0;_<e._exceptionCountersCollection.length;_++){var v=e._exceptionCountersCollection[_],y=v.totalCount-v.lastTotalCount||0,x=v.time-v.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:v.dimensions,value:y,count:y,aggregationInterval:x,metricType:b.MetricId.EXCEPTIONS_COUNT}),v.lastTotalCount=v.totalCount,v.lastTime=v.time}},e.prototype._trackTraceMetrics=function(){for(var _=0;_<e._traceCountersCollection.length;_++){var v=e._traceCountersCollection[_],y=v.totalCount-v.lastTotalCount||0,x=v.time-v.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:v.dimensions,value:y,count:y,aggregationInterval:x,metricType:b.MetricId.TRACES_COUNT}),v.lastTotalCount=v.totalCount,v.lastTime=v.time}},e.prototype._trackPreAggregatedMetric=function(_){var v={};for(var b in _.dimensions)v[T.PreaggregatedMetricPropertyNames[b]]=_.dimensions[b];v=y(y({},v),{"_MS.MetricId":_.metricType,"_MS.AggregationIntervalMs":String(_.aggregationInterval),"_MS.IsAutocollected":"True"});var x={name:_.name,value:_.value,count:_.count,properties:v,kind:"Aggregation"};this._client.trackMetric(x)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();v.exports=I}),Tn=l((_,v)=>{"use strict";var b=y(2037),x=y(7147),T=y(1017),I=Fi(),S=O(),M=function(){function e(_){this.keys=new I.ContextTagKeys,this.tags={},this._loadApplicationContext(_),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(_){if(_=_||T.resolve(__dirname,"../../../../package.json"),!e.appVersion[_]){e.appVersion[_]="unknown";try{var v=JSON.parse(x.readFileSync(_,"utf8"));v&&"string"==typeof v.version&&(e.appVersion[_]=v.version)}catch(_){S.info("unable to read app version: ",_)}}this.tags[this.keys.applicationVersion]=e.appVersion[_]},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=b&&b.hostname(),this.tags[this.keys.deviceOSVersion]=b&&b.type()+" "+b.release(),this.tags[this.keys.cloudRole]=e.DefaultRoleName,this.tags["ai.device.osArchitecture"]=b&&b.arch(),this.tags["ai.device.osPlatform"]=b&&b.platform()},e.prototype._loadInternalContext=function(){var _=T.resolve(__dirname,"../../package.json");if(!e.sdkVersion){e.sdkVersion="unknown";try{var v=JSON.parse(x.readFileSync(_,"utf8"));v&&"string"==typeof v.version&&(e.sdkVersion=v.version)}catch(_){S.info("unable to read app version: ",_)}}this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e}();v.exports=M}),In=l((_,v)=>{"use strict";var b,x=_&&_.__extends||(b=function(_,v){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,v){_.__proto__=v}||function(_,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(_[y]=v[y])})(_,v)},function(_,v){function n(){this.constructor=_}b(_,v),_.prototype=null===v?Object.create(v):(n.prototype=v.prototype,new n)}),T=y(7310),I=Fi(),S=zr(),M=Ur(),A=Ui(),P=Gr(),O=function(_){function t(v,y){var b=_.call(this)||this;return y&&y.method&&v&&(b.method=y.method,b.url=t._getUrlFromRequestOptions(v,y),b.startTime=+new Date),b}return x(t,_),t.prototype.onError=function(_){this._setStatus(void 0,_)},t.prototype.onResponse=function(_){this._setStatus(_.statusCode,void 0),this.correlationId=S.getCorrelationContextTarget(_,M.requestContextTargetKey)},t.prototype.getDependencyTelemetry=function(_,v){var y=T.parse(this.url);y.search=void 0,y.hash=void 0;var b=this.method.toUpperCase()+" "+y.pathname,x=I.RemoteDependencyDataConstants.TYPE_HTTP,S=y.hostname;y.port&&(S+=":"+y.port),this.correlationId?(x=I.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==P.correlationIdPrefix&&(S+=" | "+this.correlationId)):x=I.RemoteDependencyDataConstants.TYPE_HTTP;var M={id:v,name:b,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:x,target:S};if(_&&_.time?M.time=_.time:this.startTime&&(M.time=new Date(this.startTime)),_){for(var A in _)M[A]||(M[A]=_[A]);if(_.properties)for(var A in _.properties)M.properties[A]=_.properties[A]}return M},t._getUrlFromRequestOptions=function(_,v){if("string"==typeof _)if(0===_.indexOf("http://")||0===_.indexOf("https://"))_=T.parse(_);else{var y=T.parse(_);_="443"===y.host?T.parse("https://"+_):T.parse("http://"+_)}else{if(_&&"function"==typeof T.URL&&_ instanceof T.URL)return T.format(_);var b=_;_={},b&&Object.keys(b).forEach((function(v){_[v]=b[v]}))}if(_.path){var x=T.parse(_.path);_.pathname=x.pathname,_.search=x.search}_.host&&_.port&&(!T.parse("http://"+_.host).port&&_.port&&(_.hostname=_.host,delete _.host));return _.protocol=_.protocol||v.agent&&v.agent.protocol||v.protocol||void 0,_.hostname=_.hostname||"localhost",T.format(_)},t}(A);v.exports=O}),Sn=l(_=>{"use strict";var v=_&&_.__assign||function(){return(v=Object.assign||function(_){for(var v,y=1,b=arguments.length;y<b;y++)for(var x in v=arguments[y])Object.prototype.hasOwnProperty.call(v,x)&&(_[x]=v[x]);return _}).apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.spanToTelemetryContract=void 0;var y=Ve(),b=yn();function Vp(_){var y=v({},_);return Object.keys(b.SpanAttribute).forEach((function(_){delete y[_]})),y}_.spanToTelemetryContract=function cw(_){var x="|"+_.spanContext().traceId+"."+_.spanContext().spanId+".",T=Math.round(1e3*_._duration[0]+_._duration[1]/1e6),I=_.attributes["peer.address"]?_.attributes["peer.address"].toString():"",S=_.attributes.component?_.attributes.component.toString():"",M=S.toUpperCase()===b.DependencyTypeName.Http||!!_.attributes[b.SpanAttribute.HttpUrl],A=S.toLowerCase()===b.DependencyTypeName.Grpc;if(M){var P=_.attributes[b.SpanAttribute.HttpMethod]||"GET",O=new URL(_.attributes[b.SpanAttribute.HttpUrl].toString()),k=_.attributes[b.SpanAttribute.HttpHost]||O.host,R=_.attributes[b.SpanAttribute.HttpPort]||O.port||null,L=P+" "+(O.pathname||"/"),B=b.DependencyTypeName.Http,j=R?(k+":"+R).toString():k.toString(),U=O.toString(),z=_.attributes[b.SpanAttribute.HttpStatusCode]||_.status.code||0;return{id:x,name:L,dependencyTypeName:B,target:j,data:U,success:z<400,duration:T,url:U,resultCode:String(z),properties:Vp(_.attributes)}}if(A){P=_.attributes[b.SpanAttribute.GrpcMethod]||"rpc";var G=_.attributes[b.SpanAttribute.GrpcService],H=G?P+" "+G:_.name;return{id:x,duration:T,name:H,target:G.toString(),data:G.toString()||H,url:G.toString()||H,dependencyTypeName:b.DependencyTypeName.Grpc,resultCode:String(_.status.code||0),success:0===_.status.code,properties:Vp(_.attributes)}}var V=_.name,$=_.links&&_.links.map((function(_){return{operation_Id:_.context.traceId,id:_.context.spanId}}));return{id:x,duration:T,name:V,target:I,data:I||V,url:I||V,dependencyTypeName:_.kind===y.SpanKind.INTERNAL?b.DependencyTypeName.InProc:S||_.name,resultCode:String(_.status.code||0),success:0===_.status.code,properties:v(v({},Vp(_.attributes)),{"_MS.links":$||void 0})}}}),Mn=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.enable=_.subscriber=void 0;var v=Ve(),y=j(),b=Hr(),x=Sn(),T=k(),I=[];_.subscriber=function(_){var y=_.data,S=x.spanToTelemetryContract(y),M=y.spanContext(),A=new b;A.traceId=M.traceId,A.spanId=M.spanId,A.traceFlag=b.formatOpenTelemetryTraceFlags(M.traceFlags),A.parentId=y.parentSpanId?"|"+M.traceId+"."+y.parentSpanId+".":null,T.AsyncScopeManager.with(y,(function(){I.forEach((function(_){y.kind===v.SpanKind.SERVER?_.trackRequest(S):(y.kind===v.SpanKind.CLIENT||y.kind===v.SpanKind.INTERNAL)&&_.trackDependency(S)}))}))},_.enable=function dw(v,b){v?(0===I.length&&y.channel.subscribe("azure-coretracing",_.subscriber),I.push(b)):0===(I=I.filter((function(_){return _!=b}))).length&&y.channel.unsubscribe("azure-coretracing",_.subscriber)}}),An=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.enable=_.subscriber=void 0;var v=j(),y=[];_.subscriber=function(_){"ismaster"!==_.data.event.commandName&&y.forEach((function(v){var y=_.data.startedData&&_.data.startedData.databaseName||"Unknown database";v.trackDependency({target:y,data:_.data.event.commandName,name:_.data.event.commandName,duration:_.data.event.duration,success:_.data.succeeded,resultCode:_.data.succeeded?"0":"1",time:_.data.startedData.time,dependencyTypeName:"mongodb"})}))},_.enable=function _w(b,x){b?(0===y.length&&v.channel.subscribe("mongodb",_.subscriber),y.push(x)):0===(y=y.filter((function(_){return _!=x}))).length&&v.channel.unsubscribe("mongodb",_.subscriber)}}),Pn=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.enable=_.subscriber=void 0;var v=j(),y=[];_.subscriber=function(_){y.forEach((function(v){var y=_.data.query||{},b=y.sql||"Unknown query",x=!_.data.err,T=(y._connection||{}).config||{},I=T.socketPath?T.socketPath:(T.host||"localhost")+":"+T.port;v.trackDependency({target:I,data:b,name:b,duration:_.data.duration,success:x,resultCode:x?"0":"1",time:_.data.time,dependencyTypeName:"mysql"})}))},_.enable=function gw(b,x){b?(0===y.length&&v.channel.subscribe("mysql",_.subscriber),y.push(x)):0===(y=y.filter((function(_){return _!=x}))).length&&v.channel.unsubscribe("mysql",_.subscriber)}}),On=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.enable=_.subscriber=void 0;var v=j(),y=[];_.subscriber=function(_){y.forEach((function(v){"info"!==_.data.commandObj.command&&v.trackDependency({target:_.data.address,name:_.data.commandObj.command,data:_.data.commandObj.command,duration:_.data.duration,success:!_.data.err,resultCode:_.data.err?"1":"0",time:_.data.time,dependencyTypeName:"redis"})}))},_.enable=function mw(b,x){b?(0===y.length&&v.channel.subscribe("redis",_.subscriber),y.push(x)):0===(y=y.filter((function(_){return _!=x}))).length&&v.channel.unsubscribe("redis",_.subscriber)}}),Cn=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.enable=_.subscriber=void 0;var v=j(),y=[];_.subscriber=function(_){y.forEach((function(v){var y=_.data.query,b=y.preparable&&y.preparable.text||y.plan||y.text||"unknown query",x=!_.data.error,T=_.data.database.host+":"+_.data.database.port;v.trackDependency({target:T,data:b,name:b,duration:_.data.duration,success:x,resultCode:x?"0":"1",time:_.data.time,dependencyTypeName:"postgres"})}))},_.enable=function Tw(b,x){b?(0===y.length&&v.channel.subscribe("postgres",_.subscriber),y.push(x)):0===(y=y.filter((function(_){return _!=x}))).length&&v.channel.unsubscribe("postgres",_.subscriber)}}),kn=l((_,v)=>{"use strict";var b=_&&_.__spreadArrays||function(){for(var _=0,v=0,y=arguments.length;v<y;v++)_+=arguments[v].length;var b=Array(_),x=0;for(v=0;v<y;v++)for(var T=arguments[v],I=0,S=T.length;I<S;I++,x++)b[x]=T[I];return b},x=y(3685),T=y(5687),I=O(),S=zr(),M=Ur(),A=In(),P=dn(),k=Gr(),R=Hr(),L=Fr(),B=function(){function e(_){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=_}return e.prototype.enable=function(_){this._isEnabled=_,this._isEnabled&&!this._isInitialized&&this._initialize(),L.IsInitialized&&(Mn().enable(!0,this._client),An().enable(_,this._client),Pn().enable(_,this._client),On().enable(_,this._client),Cn().enable(_,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var _=this;this._isInitialized=!0;var v=x.request,y=T.request,i=function(v,y){var b=!y[e.disableCollectionRequestOption]&&!v[e.alreadyAutoCollectedFlag];y.headers&&y.headers["user-agent"]&&-1!==y.headers["user-agent"].toString().indexOf("azsdk-js")&&(b=!1),v[e.alreadyAutoCollectedFlag]=!0,v&&y&&b&&(P.CorrelationContextManager.wrapEmitter(v),e.trackRequest(_._client,{options:y,request:v}))};x.request=function(_){for(var y=[],T=1;T<arguments.length;T++)y[T-1]=arguments[T];var I=v.call.apply(v,b([x,_],y));return i(I,_),I},T.request=function(_){for(var v=[],x=1;x<arguments.length;x++)v[x-1]=arguments[x];var I=y.call.apply(y,b([T,_],v));return i(I,_),I},x.get=function(_){for(var v,y=[],T=1;T<arguments.length;T++)y[T-1]=arguments[T];var I=(v=x.request).call.apply(v,b([x,_],y));return I.end(),I},T.get=function(_){for(var v,y=[],x=1;x<arguments.length;x++)y[x-1]=arguments[x];var I=(v=T.request).call.apply(v,b([T,_],y));return I.end(),I}},e.trackRequest=function(_,v){if(v.options&&v.request&&_){var y,b,x=new A(v.options,v.request),T=P.CorrelationContextManager.getCurrentContext();if(T&&T.operation&&T.operation.traceparent&&R.isValidTraceId(T.operation.traceparent.traceId))T.operation.traceparent.updateSpanId(),y=T.operation.traceparent.getBackCompatRequestId();else if(k.w3cEnabled){b=(L=new R).toString(),y=L.getBackCompatRequestId()}else y=T&&T.operation&&T.operation.parentId+e.requestNumber+++".";if(S.canIncludeCorrelationHeader(_,x.getUrl())&&v.request.getHeader&&v.request.setHeader&&_.config&&_.config.correlationId){var O=v.request.getHeader(M.requestContextHeader);try{S.safeIncludeCorrelationHeader(_,v.request,O)}catch(_){I.warn("Request-Context header could not be set. Correlation of requests may be lost",_)}if(T&&T.operation)try{if(v.request.setHeader(M.requestIdHeader,y),_.config.ignoreLegacyHeaders||(v.request.setHeader(M.parentIdHeader,T.operation.id),v.request.setHeader(M.rootIdHeader,y)),b||T.operation.traceparent)v.request.setHeader(M.traceparentHeader,b||T.operation.traceparent.toString());else if(k.w3cEnabled){var L=(new R).toString();v.request.setHeader(M.traceparentHeader,L)}if(T.operation.tracestate){var B=T.operation.tracestate.toString();B&&v.request.setHeader(M.traceStateHeader,B)}var j=T.customProperties.serializeToHeader();j&&v.request.setHeader(M.correlationContextHeader,j)}catch(_){I.warn("Correlation headers could not be set. Correlation of requests may be lost.",_)}}v.request.on&&(v.request.on("response",(function(b){x.onResponse(b);var T=x.getDependencyTelemetry(v,y);T.contextObjects=T.contextObjects||{},T.contextObjects["http.RequestOptions"]=v.options,T.contextObjects["http.ClientRequest"]=v.request,T.contextObjects["http.ClientResponse"]=b,_.trackDependency(T)})),v.request.on("error",(function(b){x.onError(b);var T=x.getDependencyTelemetry(v,y);T.contextObjects=T.contextObjects||{},T.contextObjects["http.RequestOptions"]=v.options,T.contextObjects["http.ClientRequest"]=v.request,T.contextObjects.Error=b,_.trackDependency(T)})),v.request.on("abort",(function(){x.onError(new Error);var b=x.getDependencyTelemetry(v,y);b.contextObjects=b.contextObjects||{},b.contextObjects["http.RequestOptions"]=v.options,b.contextObjects["http.ClientRequest"]=v.request,_.trackDependency(b)})))}else I.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!v.options,!v.request,!_)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();v.exports=B}),Rn=l((_,v)=>{"use strict";var b=y(2037),x=yn(),T=zr(),I=Tn(),S=kn(),M=function(){function e(_){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=_}return e.prototype.enable=function(_,v){var y=this;this._isEnabled=_,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),_?this._handle||(this._handle=setInterval((function(){return y.trackHeartBeat(v,(function(){}))}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackHeartBeat=function(_,v){var y=this,T=!1,S={},M=I.sdkVersion;S.sdk=M,S.osType=b.type(),process.env.WEBSITE_SITE_NAME?(S.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",S.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",S.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?S.azfunction_appId=process.env.WEBSITE_HOSTNAME:_&&(void 0===this._isVM?(T=!0,this._getAzureComputeMetadata(_,(function(){y._isVM&&Object.keys(y._vmData).length>0&&(S.azInst_vmId=y._vmData.vmId||"",S.azInst_subscriptionId=y._vmData.subscriptionId||"",S.azInst_osType=y._vmData.osType||"",y._azInst_vmId=y._vmData.vmId||"",y._azInst_subscriptionId=y._vmData.subscriptionId||"",y._azInst_osType=y._vmData.osType||""),y._client.trackMetric({name:x.HeartBeatMetricName,value:0,properties:S}),v()}))):this._isVM&&(S.azInst_vmId=this._azInst_vmId,S.azInst_subscriptionId=this._azInst_subscriptionId,S.azInst_osType=this._azInst_osType)),T||(this._client.trackMetric({name:x.HeartBeatMetricName,value:0,properties:S}),v())},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.prototype._getAzureComputeMetadata=function(_,v){var y,b=this,x=((y={method:"GET"})[S.disableCollectionRequestOption]=!0,y.headers={Metadata:"True"},y),I=T.makeRequest(_,"http://169.254.169.254/metadata/instance/compute?api-version=2017-12-01&format=json",x,(function(_){if(200===_.statusCode){b._isVM=!0;var y="";_.on("data",(function(_){y+=_})),_.on("end",(function(){b._vmData=b._isJSON(y)?JSON.parse(y):{},v()}))}else v()}));I&&(I.on("error",(function(_){_&&_.message&&_.message.indexOf("ENETUNREACH")>-1&&(b._isVM=!1),v()})),I.end())},e.prototype._isJSON=function(_){try{return JSON.parse(_)&&!!_}catch(_){return!1}},e}();v.exports=M}),Ln=l((_,v)=>{"use strict";var b=y(3685),x=y(5687),T=O(),I=zr(),S=Ur(),M=zi(),A=dn(),P=bn(),k=function(){function e(_){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=_}return e.prototype.enable=function(_){this._isEnabled=_,(this._isAutoCorrelating||this._isEnabled||P.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},e.prototype.useAutoCorrelation=function(_,v){_&&!this._isAutoCorrelating?A.CorrelationContextManager.enable(v):!_&&this._isAutoCorrelating&&A.CorrelationContextManager.disable(),this._isAutoCorrelating=_},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},e.prototype._generateCorrelationContext=function(_){if(this._isAutoCorrelating)return A.CorrelationContextManager.generateContextObject(_.getOperationId(this._client.context.tags),_.getRequestId(),_.getOperationName(this._client.context.tags),_.getCorrelationContextHeader(),_.getTraceparent(),_.getTracestate())},e.prototype._initialize=function(){var _=this;this._isInitialized=!0;var r=function(v){if(v){if("function"!=typeof v)throw new Error("onRequest handler must be a function");return function(y,b){A.CorrelationContextManager.wrapEmitter(y),A.CorrelationContextManager.wrapEmitter(b);var x=y&&!y[e.alreadyAutoCollectedFlag];if(y&&x){var T=new M(y),I=_._generateCorrelationContext(T);A.CorrelationContextManager.runWithContext(I,(function(){_._isEnabled&&(y[e.alreadyAutoCollectedFlag]=!0,e.trackRequest(_._client,{request:y,response:b},T)),"function"==typeof v&&v(y,b)}))}else"function"==typeof v&&v(y,b)}}},n=function(_){var v=_.addListener.bind(_);_.addListener=function(_,y){switch(_){case"request":case"checkContinue":return v(_,r(y));default:return v(_,y)}},_.on=_.addListener},v=b.createServer;b.createServer=function(_,y){if(y&&"function"==typeof y){var b=v(_,r(y));return n(b),b}b=v(r(_));return n(b),b};var y=x.createServer;x.createServer=function(_,v){var b=y(_,r(v));return n(b),b}},e.trackRequestSync=function(_,v){if(v.request&&v.response&&_){e.addResponseCorrelationIdHeader(_,v.response);var y=A.CorrelationContextManager.getCurrentContext(),b=new M(v.request,y&&y.operation.parentId);y&&(y.operation.id=b.getOperationId(_.context.tags)||y.operation.id,y.operation.name=b.getOperationName(_.context.tags)||y.operation.name,y.operation.parentId=b.getRequestId()||y.operation.parentId,y.customProperties.addHeaderData(b.getCorrelationContextHeader())),e.endRequest(_,b,v,v.duration,v.error)}else T.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!v.request,!v.response,!_)},e.trackRequest=function(_,v,y){if(v.request&&v.response&&_){var b=A.CorrelationContextManager.getCurrentContext(),x=y||new M(v.request,b&&b.operation.parentId);I.canIncludeCorrelationHeader(_,x.getUrl())&&e.addResponseCorrelationIdHeader(_,v.response),b&&!y&&(b.operation.id=x.getOperationId(_.context.tags)||b.operation.id,b.operation.name=x.getOperationName(_.context.tags)||b.operation.name,b.operation.parentId=x.getOperationParentId(_.context.tags)||b.operation.parentId,b.customProperties.addHeaderData(x.getCorrelationContextHeader())),v.response.once&&v.response.once("finish",(function(){e.endRequest(_,x,v,null,null)})),v.request.on&&v.request.on("error",(function(y){e.endRequest(_,x,v,null,y)})),v.request.on&&v.request.on("aborted",(function(){e.endRequest(_,x,v,null,"The request has been aborted and the network socket has closed.")}))}else T.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!v.request,!v.response,!_)},e.addResponseCorrelationIdHeader=function(_,v){if(_.config&&_.config.correlationId&&v.getHeader&&v.setHeader&&!v.headersSent){var y=v.getHeader(S.requestContextHeader);I.safeIncludeCorrelationHeader(_,v,y)}},e.endRequest=function(_,v,y,b,x){x?v.onError(x,b):v.onResponse(y.response,b);var T=v.getRequestTelemetry(y);if(T.tagOverrides=v.getRequestTags(_.context.tags),y.tagOverrides)for(var I in y.tagOverrides)T.tagOverrides[I]=y.tagOverrides[I];var S=v.getLegacyRootId();S&&(T.properties.ai_legacyRootId=S),T.contextObjects=T.contextObjects||{},T.contextObjects["http.ServerRequest"]=y.request,T.contextObjects["http.ServerResponse"]=y.response,_.trackRequest(T)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1,A.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();v.exports=k}),Bn=l((_,v)=>{"use strict";var b=_&&_.__assign||function(){return(b=Object.assign||function(_){for(var v,y=1,b=arguments.length;y<b;y++)for(var x in v=arguments[y])Object.prototype.hasOwnProperty.call(v,x)&&(_[x]=v[x]);return _}).apply(this,arguments)},x=y(2037),T=Fi(),I=yn(),S=zr(),M=O(),A=S.w3cTraceId(),P=function(){function e(){}return e.createQuickPulseEnvelope=function(_,v,y,b){var T=x&&"function"==typeof x.hostname&&x.hostname()||"Unknown",I=b.tags&&b.keys&&b.keys.cloudRoleInstance&&b.tags[b.keys.cloudRoleInstance]||T,S=b.tags&&b.keys&&b.keys.cloudRole&&b.tags[b.keys.cloudRole]||null;return{Documents:v.length>0?v:null,InstrumentationKey:y.instrumentationKey||"",Metrics:_.length>0?_:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:b.tags[b.keys.internalSdkVersion],StreamId:A,MachineName:T,Instance:I,RoleName:S}},e.createQuickPulseMetric=function(_){return{Name:_.name,Value:_.value,Weight:_.count||1}},e.telemetryEnvelopeToQuickPulseDocument=function(_){switch(_.data.baseType){case T.TelemetryTypeString.Event:return e.createQuickPulseEventDocument(_);case T.TelemetryTypeString.Exception:return e.createQuickPulseExceptionDocument(_);case T.TelemetryTypeString.Trace:return e.createQuickPulseTraceDocument(_);case T.TelemetryTypeString.Dependency:return e.createQuickPulseDependencyDocument(_);case T.TelemetryTypeString.Request:return e.createQuickPulseRequestDocument(_)}return null},e.createQuickPulseEventDocument=function(_){var v=e.createQuickPulseDocument(_),y=_.data.baseData.name;return b(b({},v),{Name:y})},e.createQuickPulseTraceDocument=function(_){var v=e.createQuickPulseDocument(_),y=_.data.baseData.severityLevel||0;return b(b({},v),{Message:_.data.baseData.message,SeverityLevel:T.SeverityLevel[y]})},e.createQuickPulseExceptionDocument=function(_){var v=e.createQuickPulseDocument(_),y=_.data.baseData.exceptions,x="",T="",I="";return y&&y.length>0&&(y[0].parsedStack&&y[0].parsedStack.length>0?y[0].parsedStack.forEach((function(_){x+=_.assembly+"\n"})):y[0].stack&&y[0].stack.length>0&&(x=y[0].stack),T=y[0].message,I=y[0].typeName),b(b({},v),{Exception:x,ExceptionMessage:T,ExceptionType:I})},e.createQuickPulseRequestDocument=function(_){var v=e.createQuickPulseDocument(_),y=_.data.baseData;return b(b({},v),{Name:y.name,Success:y.success,Duration:y.duration,ResponseCode:y.responseCode,OperationName:y.name})},e.createQuickPulseDependencyDocument=function(_){var v=e.createQuickPulseDocument(_),y=_.data.baseData;return b(b({},v),{Name:y.name,Target:y.target,Success:y.success,Duration:y.duration,ResultCode:y.resultCode,CommandName:y.data,OperationName:v.OperationId,DependencyTypeName:y.type})},e.createQuickPulseDocument=function(_){var v,y;return _.data.baseType?(y=I.TelemetryTypeStringToQuickPulseType[_.data.baseType],v=I.TelemetryTypeStringToQuickPulseDocumentType[_.data.baseType]):M.warn("Document type invalid; not sending live metric document",_.data.baseType),{DocumentType:v,__type:y,OperationId:_.tags[e.keys.operationId],Version:"1.0",Properties:e.aggregateProperties(_)}},e.aggregateProperties=function(_){var v=[],y=_.data.baseData.measurements||{};for(var b in y)if(y.hasOwnProperty(b)){var x={key:b,value:y[b]};v.push(x)}var T=_.data.baseData.properties||{};for(var b in T)if(T.hasOwnProperty(b)){x={key:b,value:T[b]};v.push(x)}return v},e.keys=new T.ContextTagKeys,e}();v.exports=P}),jn=l((_,v)=>{"use strict";v.exports={getTransmissionTime:function(){return 1e4*(Date.now()+621355968e5)}}}),Fn=l((_,v)=>{"use strict";var b=_&&_.__awaiter||function(_,v,y,b){return new(y||(y=Promise))((function(x,T){function o(_){try{c(b.next(_))}catch(_){T(_)}}function u(_){try{c(b.throw(_))}catch(_){T(_)}}function c(_){_.done?x(_.value):function i(_){return _ instanceof y?_:new y((function(v){v(_)}))}(_.value).then(o,u)}c((b=b.apply(_,v||[])).next())}))},x=_&&_.__generator||function(_,v){var y,b,x,T,I={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return T={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function o(T){return function(S){return function u(T){if(y)throw new TypeError("Generator is already executing.");for(;I;)try{if(y=1,b&&(x=2&T[0]?b.return:T[0]?b.throw||((x=b.return)&&x.call(b),0):b.next)&&!(x=x.call(b,T[1])).done)return x;switch(b=0,x&&(T=[2&T[0],x.value]),T[0]){case 0:case 1:x=T;break;case 4:return I.label++,{value:T[1],done:!1};case 5:I.label++,b=T[1],T=[0];continue;case 7:T=I.ops.pop(),I.trys.pop();continue;default:if(!(x=(x=I.trys).length>0&&x[x.length-1])&&(6===T[0]||2===T[0])){I=0;continue}if(3===T[0]&&(!x||T[1]>x[0]&&T[1]<x[3])){I.label=T[1];break}if(6===T[0]&&I.label<x[1]){I.label=x[1],x=T;break}if(x&&I.label<x[2]){I.label=x[2],I.ops.push(T);break}x[2]&&I.ops.pop(),I.trys.pop();continue}T=v.call(_,I)}catch(_){T=[6,_],b=0}finally{y=x=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([T,S])}}},T=y(5687),I=kn(),S=O(),M=jn(),A=zr(),P="POST",k="x-ms-qps-transmission-time",R="x-ms-qps-service-polling-interval-hint",L="x-ms-qps-service-endpoint-redirect",B="x-ms-qps-instance-name",j="x-ms-qps-stream-id",U="x-ms-qps-machine-name",z="x-ms-qps-role-name",G="x-ms-qps-invariant-version",H="x-ms-qps-subscribed",V=function(){function e(_){this._config=_,this._consecutiveErrors=0}return e.prototype.ping=function(_,v,y){var b=[{name:j,value:_.StreamId},{name:U,value:_.MachineName},{name:z,value:_.RoleName},{name:B,value:_.Instance},{name:G,value:_.InvariantVersion.toString()}];this._submitData(_,v,y,"ping",b)},e.prototype.post=function(_,v,y){return b(this,void 0,void 0,(function(){return x(this,(function(b){switch(b.label){case 0:return[4,this._submitData([_],v,y,"post")];case 1:return b.sent(),[2]}}))}))},e.prototype._submitData=function(_,v,y,S,O){return b(this,void 0,void 0,(function(){var b,B,j,U,z,G=this;return x(this,(function(x){return b=JSON.stringify(_),(U={})[I.disableCollectionRequestOption]=!0,U.host=v&&v.length>0?v:this._config.quickPulseHost,U.method=P,U.path="/QuickPulseService.svc/"+S+"?ikey="+this._config.instrumentationKey,U.headers=((z={Expect:"100-continue"})[k]=M.getTransmissionTime(),z["Content-Type"]="application/json",z["Content-Length"]=Buffer.byteLength(b),z),B=U,O&&O.length>0&&O.forEach((function(_){return B.headers[_.name]=_.value})),this._config.httpsAgent?B.agent=this._config.httpsAgent:B.agent=A.tlsRestrictedAgent,(j=T.request(B,(function(_){if(200==_.statusCode){var v="true"===_.headers[H],b=_.headers[L]?_.headers[L].toString():null,x=_.headers[R]?parseInt(_.headers[R].toString()):null;G._consecutiveErrors=0,y(v,_,b,x)}else G._onError("StatusCode:"+_.statusCode+" StatusMessage:"+_.statusMessage),y()}))).on("error",(function(_){G._onError(_),y()})),j.write(b),j.end(),[2]}))}))},e.prototype._onError=function(_){this._consecutiveErrors++;var v="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%e.MAX_QPS_FAILURES_BEFORE_WARN==0?(v="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",S.warn(e.TAG,v,_)):S.info(e.TAG,v,_)},e.TAG="QuickPulseSender",e.MAX_QPS_FAILURES_BEFORE_WARN=25,e}();v.exports=V}),Un=l((_,v)=>{"use strict";var y=_&&_.__awaiter||function(_,v,y,b){return new(y||(y=Promise))((function(x,T){function o(_){try{c(b.next(_))}catch(_){T(_)}}function u(_){try{c(b.throw(_))}catch(_){T(_)}}function c(_){_.done?x(_.value):function i(_){return _ instanceof y?_:new y((function(v){v(_)}))}(_.value).then(o,u)}c((b=b.apply(_,v||[])).next())}))},b=_&&_.__generator||function(_,v){var y,b,x,T,I={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return T={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function o(T){return function(S){return function u(T){if(y)throw new TypeError("Generator is already executing.");for(;I;)try{if(y=1,b&&(x=2&T[0]?b.return:T[0]?b.throw||((x=b.return)&&x.call(b),0):b.next)&&!(x=x.call(b,T[1])).done)return x;switch(b=0,x&&(T=[2&T[0],x.value]),T[0]){case 0:case 1:x=T;break;case 4:return I.label++,{value:T[1],done:!1};case 5:I.label++,b=T[1],T=[0];continue;case 7:T=I.ops.pop(),I.trys.pop();continue;default:if(!(x=(x=I.trys).length>0&&x[x.length-1])&&(6===T[0]||2===T[0])){I=0;continue}if(3===T[0]&&(!x||T[1]>x[0]&&T[1]<x[3])){I.label=T[1];break}if(6===T[0]&&I.label<x[1]){I.label=x[1],x=T;break}if(x&&I.label<x[2]){I.label=x[2],I.ops.push(T);break}x[2]&&I.ops.pop(),I.trys.pop();continue}T=v.call(_,I)}catch(_){T=[6,_],b=0}finally{y=x=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([T,S])}}},x=O(),T=Bn(),I=Fn(),S=yn(),M=Tn(),A=function(){function e(_,v){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=_,this.context=v||new M,this._sender=new I(this.config),this._isEnabled=!1}return e.prototype.addCollector=function(_){this._collectors.push(_)},e.prototype.trackMetric=function(_){this._addMetric(_)},e.prototype.addDocument=function(_){var v=T.telemetryEnvelopeToQuickPulseDocument(_);v&&this._documents.push(v)},e.prototype.enable=function(_){_&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!_&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},e.prototype.enableCollectors=function(_){this._collectors.forEach((function(v){v.enable(_)}))},e.prototype._addMetric=function(_){var v=_.value,y=_.count||1,b=S.PerformanceToQuickPulseCounter[_.name];b&&(this._metrics[b]?(this._metrics[b].Value=(this._metrics[b].Value*this._metrics[b].Weight+v*y)/(this._metrics[b].Weight+y),this._metrics[b].Weight+=y):(this._metrics[b]=T.createQuickPulseMetric(_),this._metrics[b].Name=b,this._metrics[b].Weight=1))},e.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},e.prototype._goQuickPulse=function(){return y(this,void 0,void 0,(function(){var _,v,y,x,I=this;return b(this,(function(b){switch(b.label){case 0:return _=Object.keys(this._metrics).map((function(_){return I._metrics[_]})),v=T.createQuickPulseEnvelope(_,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(v)]:[3,2];case 1:return b.sent(),[3,3];case 2:this._ping(v),b.label=3;case 3:return y=this._pollingIntervalHint>0?this._pollingIntervalHint:e.PING_INTERVAL,x=this._isCollectingData?e.POST_INTERVAL:y,this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,x=e.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(x=e.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),x),this._handle.unref(),[2]}}))}))},e.prototype._ping=function(_){this._sender.ping(_,this._redirectedHost,this._quickPulseDone.bind(this))},e.prototype._post=function(_){return y(this,void 0,void 0,(function(){return b(this,(function(v){switch(v.label){case 0:return[4,this._sender.post(_,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return v.sent(),[2]}}))}))},e.prototype._quickPulseDone=function(_,v,y,b){null!=_?(this._isCollectingData!==_&&(x.info("Live Metrics sending data",_),this.enableCollectors(_)),this._isCollectingData=_,y&&y.length>0&&(this._redirectedHost=y,x.info("Redirecting endpoint to: ",y)),b&&b>0&&(this._pollingIntervalHint=b),v&&v.statusCode<300&&v.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},e.MAX_POST_WAIT_TIME=2e4,e.MAX_PING_WAIT_TIME=6e4,e.FALLBACK_INTERVAL=6e4,e.PING_INTERVAL=5e3,e.POST_INTERVAL=1e3,e}();v.exports=A}),zn=l((_,v)=>{"use strict";var y=yn(),b=function(){function e(){}return e.parse=function(_){if(!_)return{};var v=_.split(e._FIELDS_SEPARATOR).reduce((function(_,v){var y=v.split(e._FIELD_KEY_VALUE_SEPARATOR);if(2===y.length){var b=y[0].toLowerCase(),x=y[1];_[b]=x}return _}),{});if(Object.keys(v).length>0){if(v.endpointsuffix){var b=v.location?v.location+".":"";v.ingestionendpoint=v.ingestionendpoint||"https://"+b+"dc."+v.endpointsuffix,v.liveendpoint=v.liveendpoint||"https://"+b+"live."+v.endpointsuffix}v.ingestionendpoint=v.ingestionendpoint||y.DEFAULT_BREEZE_ENDPOINT,v.liveendpoint=v.liveendpoint||y.DEFAULT_LIVEMETRICS_ENDPOINT}return v},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}();v.exports=b}),Gn=l((_,v)=>{"use strict";var b=Gr(),x=zn(),T=(O(),yn()),I=y(7310),S=function(){function e(_){var v=this;this.endpointBase=T.DEFAULT_BREEZE_ENDPOINT;var y=process.env[e.ENV_connectionString],b=x.parse(_),S=x.parse(y),M=!b.instrumentationkey&&Object.keys(b).length>0?null:_;this.instrumentationKey=b.instrumentationkey||M||S.instrumentationkey||e._getInstrumentationKey(),e._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(b.ingestionendpoint||S.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=3e4,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(_){return v.correlationId=_},this.proxyHttpUrl=process.env[e.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[e.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=b.ingestionendpoint||S.ingestionendpoint||process.env[e.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=b.liveendpoint||S.liveendpoint||process.env[e.ENV_quickPulseHost]||T.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=I.parse(this._quickPulseHost).host)}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(_){b.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=_,this.correlationId=b.correlationIdPrefix,b.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(_){this._quickPulseHost=_},enumerable:!1,configurable:!0}),e._getInstrumentationKey=function(){var _=process.env[e.ENV_iKey]||process.env[e.ENV_azurePrefix+e.ENV_iKey]||process.env[e.legacy_ENV_iKey]||process.env[e.ENV_azurePrefix+e.legacy_ENV_iKey];if(!_||""==_)throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return _},e._validateInstrumentationKey=function(_){return new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(_)},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",e.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",e.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",e.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",e.ENV_http_proxy="http_proxy",e.ENV_https_proxy="https_proxy",e}();v.exports=S}),Hn=l(_=>{"use strict";var v=_&&_.__assign||function(){return(v=Object.assign||function(_){for(var v,y=1,b=arguments.length;y<b;y++)for(var x in v=arguments[y])Object.prototype.hasOwnProperty.call(v,x)&&(_[x]=v[x]);return _}).apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.AutoCollectNativePerformance=void 0;var b=Gn(),x=Tn(),T=O(),I=function(){function e(_){this._disabledMetrics={},e.INSTANCE&&e.INSTANCE.dispose(),e.INSTANCE=this,this._client=_}return e.isNodeVersionCompatible=function(){var _=process.versions.node.split(".");return parseInt(_[0])>=6},e.prototype.enable=function(_,v,b){var x=this;if(void 0===v&&(v={}),void 0===b&&(b=6e4),e.isNodeVersionCompatible()){if(null==e._metricsAvailable&&_&&!this._isInitialized)try{var I=y(Object(function webpackMissingModule(){var _=new Error("Cannot find module 'applicationinsights-native-metrics'");throw _.code="MODULE_NOT_FOUND",_}()));e._emitter=new I,e._metricsAvailable=!0,T.info("Native metrics module successfully loaded!")}catch(_){return void(e._metricsAvailable=!1)}this._isEnabled=_,this._disabledMetrics=v,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&e._emitter?(e._emitter.enable(!0,b),this._handle||(this._handle=setInterval((function(){return x._trackNativeMetrics()}),b),this._handle.unref())):e._emitter&&(e._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},e.prototype.dispose=function(){this.enable(!1)},e.parseEnabled=function(_){var y=process.env[b.ENV_nativeMetricsDisableAll],x=process.env[b.ENV_nativeMetricsDisablers];if(y)return{isEnabled:!1,disabledMetrics:{}};if(x){var T=x.split(","),I={};if(T.length>0)for(var S=0,M=T;S<M.length;S++){I[M[S]]=!0}return"object"==typeof _?{isEnabled:!0,disabledMetrics:v(v({},_),I)}:{isEnabled:_,disabledMetrics:I}}return"boolean"==typeof _?{isEnabled:_,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:_}},e.prototype._trackNativeMetrics=function(){var _=!0;"object"!=typeof this._isEnabled&&(_=this._isEnabled),_&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},e.prototype._trackGarbageCollection=function(){var _;if(!this._disabledMetrics.gc){var v=e._emitter.getGCData();for(var y in v){var b=v[y].metrics,T=y+" Garbage Collection Duration",I=Math.sqrt(b.sumSquares/b.count-Math.pow(b.total/b.count,2))||0;this._client.trackMetric({name:T,value:b.total,count:b.count,max:b.max,min:b.min,stdDev:I,tagOverrides:(_={},_[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+x.sdkVersion,_)})}}},e.prototype._trackEventLoop=function(){var _;if(!this._disabledMetrics.loop){var v=e._emitter.getLoopData().loopUsage;if(0!=v.count){var y=Math.sqrt(v.sumSquares/v.count-Math.pow(v.total/v.count,2))||0;this._client.trackMetric({name:"Event Loop CPU Time",value:v.total,count:v.count,min:v.min,max:v.max,stdDev:y,tagOverrides:(_={},_[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+x.sdkVersion,_)})}}},e.prototype._trackHeapUsage=function(){var _,v,y;if(!this._disabledMetrics.heap){var b=process.memoryUsage(),T=b.heapUsed,I=b.heapTotal,S=b.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:T,count:1,tagOverrides:(_={},_[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+x.sdkVersion,_)}),this._client.trackMetric({name:"Memory Total (Heap)",value:I,count:1,tagOverrides:(v={},v[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+x.sdkVersion,v)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:S-I,count:1,tagOverrides:(y={},y[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+x.sdkVersion,y)})}},e}();_.AutoCollectNativePerformance=I}),Xn=l((_,v)=>{"use strict";var y=O(),b=function(){function e(_,v,y,b){this._buffer=[],this._lastSend=0,this._isDisabled=_,this._getBatchSize=v,this._getBatchIntervalMs=y,this._sender=b}return e.prototype.setUseDiskRetryCaching=function(_,v,y){this._sender.setDiskRetryMode(_,v,y)},e.prototype.send=function(_){var v=this;if(!this._isDisabled()){if(!_)return void y.warn("Cannot send null/undefined telemetry");if(this._buffer.push(_),this._buffer.length>=this._getBatchSize())return void this.triggerSend(!1);!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout((function(){v._timeoutHandle=null,v.triggerSend(!1)}),this._getBatchIntervalMs()))}},e.prototype.triggerSend=function(_,v){var y=this._buffer.length<1;y||(_?(this._sender.saveOnCrash(this._buffer),"function"==typeof v&&v("data saved on crash")):this._sender.send(this._buffer,v)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,y&&"function"==typeof v&&v("no data to send")},e}();v.exports=b}),qn=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.azureRoleEnvironmentTelemetryProcessor=void 0,_.azureRoleEnvironmentTelemetryProcessor=function ix(_,v){process.env.WEBSITE_SITE_NAME&&(_.tags[v.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}}),$n=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.getSamplingHashCode=_.samplingTelemetryProcessor=void 0;var v=Fi();function ET(_){var v=2147483647,y=5381;if(!_)return 0;for(;_.length<8;)_+=_;for(var b=0;b<_.length;b++)y=((y<<5)+y|0)+_.charCodeAt(b)|0;return(y=y<=-2147483648?v:Math.abs(y))/v*100}_.samplingTelemetryProcessor=function ax(_,y){var b=_.sampleRate;return!!(null==b||b>=100||_.data&&v.TelemetryType.Metric===v.baseTypeToTelemetryType(_.data.baseType))||(y.correlationContext&&y.correlationContext.operation?ET(y.correlationContext.operation.id)<b:100*Math.random()<b)},_.getSamplingHashCode=ET}),Yn=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.performanceMetricsTelemetryProcessor=void 0;var v=bn(),y=Fi();_.performanceMetricsTelemetryProcessor=function sx(_,b){switch(b&&b.addDocument(_),_.data.baseType){case y.TelemetryTypeString.Exception:v.countException();break;case y.TelemetryTypeString.Request:var x=_.data.baseData;v.countRequest(x.duration,x.success);break;case y.TelemetryTypeString.Dependency:var T=_.data.baseData;v.countDependency(T.duration,T.success)}return!0}}),Qn=l(_=>{"use strict";var v=_&&_.__assign||function(){return(v=Object.assign||function(_){for(var v,y=1,b=arguments.length;y<b;y++)for(var x in v=arguments[y])Object.prototype.hasOwnProperty.call(v,x)&&(_[x]=v[x]);return _}).apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.preAggregatedMetricsTelemetryProcessor=void 0;var y=Fi(),b=xn(),x=Fi();_.preAggregatedMetricsTelemetryProcessor=function ux(_,T){if(b.isEnabled())switch(_.data.baseType){case x.TelemetryTypeString.Exception:var I=_.data.baseData;I.properties=v(v({},I.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var S={cloudRoleInstance:_.tags[T.keys.cloudRoleInstance],cloudRoleName:_.tags[T.keys.cloudRole]};b.countException(S);break;case x.TelemetryTypeString.Trace:var M=_.data.baseData;M.properties=v(v({},M.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var A={cloudRoleInstance:_.tags[T.keys.cloudRoleInstance],cloudRoleName:_.tags[T.keys.cloudRole],traceSeverityLevel:y.SeverityLevel[M.severity]};b.countTrace(A);break;case x.TelemetryTypeString.Request:var P=_.data.baseData;P.properties=v(v({},P.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var O={cloudRoleInstance:_.tags[T.keys.cloudRoleInstance],cloudRoleName:_.tags[T.keys.cloudRole],operationSynthetic:_.tags[T.keys.operationSyntheticSource],requestSuccess:P.success,requestResultCode:P.responseCode};b.countRequest(P.duration,O);break;case x.TelemetryTypeString.Dependency:var k=_.data.baseData;k.properties=v(v({},k.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var R={cloudRoleInstance:_.tags[T.keys.cloudRoleInstance],cloudRoleName:_.tags[T.keys.cloudRole],operationSynthetic:_.tags[T.keys.operationSyntheticSource],dependencySuccess:k.success,dependencyType:k.type,dependencyTarget:k.target,dependencyResultCode:k.resultCode};b.countDependency(k.duration,R)}return!0}}),Kn=l(_=>{"use strict";var v=_&&_.__createBinding||(Object.create?function(_,v,y,b){void 0===b&&(b=y),Object.defineProperty(_,b,{enumerable:!0,get:function(){return v[y]}})}:function(_,v,y,b){void 0===b&&(b=y),_[b]=v[y]}),y=_&&_.__exportStar||function(_,y){for(var b in _)"default"!==b&&!Object.prototype.hasOwnProperty.call(y,b)&&v(y,_,b)};Object.defineProperty(_,"__esModule",{value:!0}),y(qn(),_),y($n(),_),y(Yn(),_),y(Qn(),_)}),Zn=l((_,v)=>{"use strict";var b=_&&_.__awaiter||function(_,v,y,b){return new(y||(y=Promise))((function(x,T){function o(_){try{c(b.next(_))}catch(_){T(_)}}function u(_){try{c(b.throw(_))}catch(_){T(_)}}function c(_){_.done?x(_.value):function i(_){return _ instanceof y?_:new y((function(v){v(_)}))}(_.value).then(o,u)}c((b=b.apply(_,v||[])).next())}))},x=_&&_.__generator||function(_,v){var y,b,x,T,I={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return T={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function o(T){return function(S){return function u(T){if(y)throw new TypeError("Generator is already executing.");for(;I;)try{if(y=1,b&&(x=2&T[0]?b.return:T[0]?b.throw||((x=b.return)&&x.call(b),0):b.next)&&!(x=x.call(b,T[1])).done)return x;switch(b=0,x&&(T=[2&T[0],x.value]),T[0]){case 0:case 1:x=T;break;case 4:return I.label++,{value:T[1],done:!1};case 5:I.label++,b=T[1],T=[0];continue;case 7:T=I.ops.pop(),I.trys.pop();continue;default:if(!(x=(x=I.trys).length>0&&x[x.length-1])&&(6===T[0]||2===T[0])){I=0;continue}if(3===T[0]&&(!x||T[1]>x[0]&&T[1]<x[3])){I.label=T[1];break}if(6===T[0]&&I.label<x[1]){I.label=x[1],x=T;break}if(x&&I.label<x[2]){I.label=x[2],I.ops.push(T);break}x[2]&&I.ops.pop(),I.trys.pop();continue}T=v.call(_,I)}catch(_){T=[6,_],b=0}finally{y=x=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([T,S])}}},T=y(7147),I=y(2037),S=y(1017),M=y(9796),A=y(2081),P=O(),k=kn(),R=zr(),L=function(){function e(_,v,y){if(this._redirectedHost=null,this._config=_,this._onSuccess=v,this._onError=y,this._enableDiskRetryMode=!1,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=S.join(I.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey),!e.OS_PROVIDES_FILE_PROTECTION)if(e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=T.existsSync(e.ICACLS_PATH)}catch(_){}e.OS_PROVIDES_FILE_PROTECTION||P.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else e.OS_PROVIDES_FILE_PROTECTION=!0}return e.prototype.setDiskRetryMode=function(_,v,y){var b=this;this._enableDiskRetryMode=e.OS_PROVIDES_FILE_PROTECTION&&_,"number"==typeof v&&v>=0&&(this._resendInterval=Math.floor(v)),"number"==typeof y&&y>=0&&(this._maxBytesOnDisk=Math.floor(y)),_&&!e.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,P.warn(e.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout((function(){b._fileCleanupTask()}),e.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},e.prototype.send=function(_,v){return b(this,void 0,void 0,(function(){var y,b,T,I,S=this;return x(this,(function(x){return _&&(y=this._redirectedHost||this._config.endpointUrl,b={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},T="",_.forEach((function(_){var v=S._stringify(_);"string"==typeof v&&(T+=v+"\n")})),T.length>0&&(T=T.substring(0,T.length-1)),I=Buffer.from?Buffer.from(T):new Buffer(T),M.gzip(I,(function(x,T){var M=T;x?(P.warn(x),M=I,b.headers["Content-Length"]=I.length.toString()):(b.headers["Content-Encoding"]="gzip",b.headers["Content-Length"]=T.length.toString()),P.info(e.TAG,b),b[k.disableCollectionRequestOption]=!0;var A=R.makeRequest(S._config,y,b,(function(y){y.setEncoding("utf-8");var b="";y.on("data",(function(_){b+=_})),y.on("end",(function(){if(S._numConsecutiveFailures=0,S._enableDiskRetryMode)if(200===y.statusCode)S._resendTimer||(S._resendTimer=setTimeout((function(){S._resendTimer=null,S._sendFirstFileOnDisk()}),S._resendInterval),S._resendTimer.unref());else if(S._isRetriable(y.statusCode))try{var x=JSON.parse(b),T=[];x.errors.forEach((function(v){S._isRetriable(v.statusCode)&&T.push(_[v.index])})),T.length>0&&S._storeToDisk(T)}catch(v){S._storeToDisk(_)}if(307===y.statusCode||308===y.statusCode)if(S._numConsecutiveRedirects++,S._numConsecutiveRedirects<10){var I=y.headers.location?y.headers.location.toString():null;I&&(S._redirectedHost=I,S.send(_,v))}else"function"==typeof v&&v("Error sending telemetry because of circular redirects.");else S._numConsecutiveRedirects=0,"function"==typeof v&&v(b),P.info(e.TAG,b),"function"==typeof S._onSuccess&&S._onSuccess(b)}))}));A.on("error",(function(y){if(S._numConsecutiveFailures++,!S._enableDiskRetryMode||S._numConsecutiveFailures>0&&S._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var b="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";S._enableDiskRetryMode&&(b="Ingestion endpoint could not be reached "+S._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),P.warn(e.TAG,b,R.dumpObj(y))}else{b="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";P.info(e.TAG,b,R.dumpObj(y))}S._onErrorHelper(y),"function"==typeof v&&(y&&v(R.dumpObj(y)),v("Error sending telemetry")),S._enableDiskRetryMode&&S._storeToDisk(_)})),A.write(M),A.end()}))),[2]}))}))},e.prototype.saveOnCrash=function(_){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(_))},e.prototype._isRetriable=function(_){return 206===_||408===_||429===_||439===_||500===_||503===_},e.prototype._runICACLS=function(_,v){var y=A.spawn(e.ICACLS_PATH,_,{windowsHide:!0});y.on("error",(function(_){return v(_)})),y.on("close",(function(_,y){return v(0===_?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+_+")"))}))},e.prototype._runICACLSSync=function(_){if(!A.spawnSync)throw new Error("Could not synchronously call ICACLS under current version of Node.js");var v=A.spawnSync(e.ICACLS_PATH,_,{windowsHide:!0});if(v.error)throw v.error;if(0!==v.status)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+v.status+")")},e.prototype._getACLIdentity=function(_){if(e.ACL_IDENTITY)return _(null,e.ACL_IDENTITY);var v=A.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),y="";v.stdout.on("data",(function(_){return y+=_})),v.on("error",(function(v){return _(v,null)})),v.on("close",(function(v,b){return e.ACL_IDENTITY=y&&y.trim(),_(0===v?null:new Error("Getting ACL identity did not succeed (PS returned code "+v+")"),e.ACL_IDENTITY)}))},e.prototype._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(A.spawnSync){var _=A.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(_.error)throw _.error;if(0!==_.status)throw new Error("Getting ACL identity did not succeed (PS returned code "+_.status+")");return e.ACL_IDENTITY=_.stdout&&_.stdout.toString().trim(),e.ACL_IDENTITY}throw new Error("Could not synchronously get ACL identity under current version of Node.js")},e.prototype._getACLArguments=function(_,v){return[_,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",v+":(OI)(CI)F","/inheritance:r"]},e.prototype._applyACLRules=function(_,v){var y=this;return e.USE_ICACLS?void 0!==e.ACLED_DIRECTORIES[_]?v(e.ACLED_DIRECTORIES[_]?null:new Error("Setting ACL restrictions did not succeed (cached result)")):(e.ACLED_DIRECTORIES[_]=!1,void this._getACLIdentity((function(b,x){if(b)return e.ACLED_DIRECTORIES[_]=!1,v(b);y._runICACLS(y._getACLArguments(_,x),(function(y){return e.ACLED_DIRECTORIES[_]=!y,v(y)}))}))):v(null)},e.prototype._applyACLRulesSync=function(_){if(e.USE_ICACLS){if(void 0===e.ACLED_DIRECTORIES[_])return this._runICACLSSync(this._getACLArguments(_,this._getACLIdentitySync())),void(e.ACLED_DIRECTORIES[_]=!0);if(!e.ACLED_DIRECTORIES[_])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},e.prototype._confirmDirExists=function(_,v){var y=this;T.lstat(_,(function(b,x){b&&"ENOENT"===b.code?T.mkdir(_,(function(b){b&&"EEXIST"!==b.code?v(b):y._applyACLRules(_,v)})):!b&&x.isDirectory()?y._applyACLRules(_,v):v(b||new Error("Path existed but was not a directory"))}))},e.prototype._getShallowDirectorySize=function(_,v){T.readdir(_,(function(y,b){if(y)return v(y,-1);var x=null,I=0,M=0;if(0!==b.length)for(var A=0;A<b.length;A++)T.stat(S.join(_,b[A]),(function(_,y){M++,_?x=_:y.isFile()&&(I+=y.size),M===b.length&&v(x,x?-1:I)}));else v(null,0)}))},e.prototype._getShallowDirectorySizeSync=function(_){for(var v=T.readdirSync(_),y=0,b=0;b<v.length;b++)y+=T.statSync(S.join(_,v[b])).size;return y},e.prototype._storeToDisk=function(_){var v=this;P.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,(function(y){if(y)return P.warn(e.TAG,"Error while checking/creating directory: "+(y&&y.message)),void v._onErrorHelper(y);v._getShallowDirectorySize(v._tempDir,(function(y,b){if(y||b<0)return P.warn(e.TAG,"Error while checking directory size: "+(y&&y.message)),void v._onErrorHelper(y);if(b>v._maxBytesOnDisk)P.warn(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+b);else{var x=(new Date).getTime()+".ai.json",I=S.join(v._tempDir,x);P.info(e.TAG,"saving data to disk at: "+I),T.writeFile(I,v._stringify(_),{mode:384},(function(_){return v._onErrorHelper(_)}))}}))}))},e.prototype._storeToDiskSync=function(_){try{P.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),T.existsSync(this._tempDir)||T.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var v=this._getShallowDirectorySizeSync(this._tempDir);if(v>this._maxBytesOnDisk)return void P.info(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+v);var y=(new Date).getTime()+".ai.json",b=S.join(this._tempDir,y);P.info(e.TAG,"saving data before crash to disk at: "+b),T.writeFileSync(b,_,{mode:384})}catch(_){P.warn(e.TAG,"Error while saving data to disk: "+(_&&_.message)),this._onErrorHelper(_)}},e.prototype._sendFirstFileOnDisk=function(){var _=this;T.exists(this._tempDir,(function(v){v&&T.readdir(_._tempDir,(function(v,y){if(v)_._onErrorHelper(v);else if((y=y.filter((function(_){return S.basename(_).indexOf(".ai.json")>-1}))).length>0){var b=y[0],x=S.join(_._tempDir,b);T.readFile(x,(function(v,y){v?_._onErrorHelper(v):T.unlink(x,(function(v){if(v)_._onErrorHelper(v);else try{var b=JSON.parse(y.toString());_.send(b)}catch(_){P.warn("Failed to read persisted file",_)}}))}))}}))}))},e.prototype._onErrorHelper=function(_){"function"==typeof this._onError&&this._onError(_)},e.prototype._stringify=function(_){try{return JSON.stringify(_)}catch(v){P.warn("Failed to serialize payload",v,_)}},e.prototype._fileCleanupTask=function(){var _=this;T.exists(this._tempDir,(function(v){v&&T.readdir(_._tempDir,(function(v,y){v?_._onErrorHelper(v):(y=y.filter((function(_){return S.basename(_).indexOf(".ai.json")>-1}))).length>0&&y.forEach((function(v){var y=new Date(parseInt(v.split(".ai.json")[0]));if(new Date(+new Date-e.FILE_RETEMPTION_PERIOD)>y){var b=S.join(_._tempDir,v);T.unlink(b,(function(v){v&&_._onErrorHelper(v)}))}}))}))}))},e.TAG="Sender",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.WAIT_BETWEEN_RESEND=6e4,e.MAX_BYTES_ON_DISK=52428800,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.CLEANUP_TIMEOUT=36e5,e.FILE_RETEMPTION_PERIOD=6048e5,e.TEMPDIR_PREFIX="appInsights-node",e.OS_PROVIDES_FILE_PROTECTION=!1,e.USE_ICACLS="Windows_NT"===I.type(),e}();v.exports=L}),Jn=l((_,v)=>{"use strict";var y=Fi(),b=zr(),x=dn(),T=function(){function e(){}return e.createEnvelope=function(_,v,x,T,I){var S=null;switch(v){case y.TelemetryType.Trace:S=e.createTraceData(_);break;case y.TelemetryType.Dependency:S=e.createDependencyData(_);break;case y.TelemetryType.Event:S=e.createEventData(_);break;case y.TelemetryType.Exception:S=e.createExceptionData(_);break;case y.TelemetryType.Request:S=e.createRequestData(_);break;case y.TelemetryType.Metric:S=e.createMetricData(_);break;case y.TelemetryType.Availability:S=e.createAvailabilityData(_);break;case y.TelemetryType.PageView:S=e.createPageViewData(_)}if(x&&y.domainSupportsProperties(S.baseData)){if(S&&S.baseData)if(S.baseData.properties)for(var M in x)S.baseData.properties[M]||(S.baseData.properties[M]=x[M]);else S.baseData.properties=x;S.baseData.properties=b.validateStringMap(S.baseData.properties)}var A=I&&I.instrumentationKey||"",P=new y.Envelope;return P.data=S,P.iKey=A,P.name="Microsoft.ApplicationInsights."+A.replace(/-/g,"")+"."+S.baseType.substr(0,S.baseType.length-4),P.tags=this.getTags(T,_.tagOverrides),P.time=(new Date).toISOString(),P.ver=1,P.sampleRate=I?I.samplingPercentage:100,v===y.TelemetryType.Metric&&(P.sampleRate=100),P},e.createTraceData=function(_){var v=new y.MessageData;v.message=_.message,v.properties=_.properties,isNaN(_.severity)?v.severityLevel=y.SeverityLevel.Information:v.severityLevel=_.severity;var b=new y.Data;return b.baseType=y.telemetryTypeToBaseType(y.TelemetryType.Trace),b.baseData=v,b},e.createDependencyData=function(_){var v=new y.RemoteDependencyData;"string"==typeof _.name&&(v.name=_.name.length>1024?_.name.slice(0,1021)+"...":_.name),v.data=_.data,v.target=_.target,v.duration=b.msToTimeSpan(_.duration),v.success=_.success,v.type=_.dependencyTypeName,v.properties=_.properties,v.resultCode=_.resultCode?_.resultCode+"":"",_.id?v.id=_.id:v.id=b.w3cTraceId();var x=new y.Data;return x.baseType=y.telemetryTypeToBaseType(y.TelemetryType.Dependency),x.baseData=v,x},e.createEventData=function(_){var v=new y.EventData;v.name=_.name,v.properties=_.properties,v.measurements=_.measurements;var b=new y.Data;return b.baseType=y.telemetryTypeToBaseType(y.TelemetryType.Event),b.baseData=v,b},e.createExceptionData=function(_){var v=new y.ExceptionData;v.properties=_.properties,isNaN(_.severity)?v.severityLevel=y.SeverityLevel.Error:v.severityLevel=_.severity,v.measurements=_.measurements,v.exceptions=[];var x=_.exception.stack,T=new y.ExceptionDetails;T.message=_.exception.message,T.typeName=_.exception.name,T.parsedStack=this.parseStack(x),T.hasFullStack=b.isArray(T.parsedStack)&&T.parsedStack.length>0,v.exceptions.push(T);var I=new y.Data;return I.baseType=y.telemetryTypeToBaseType(y.TelemetryType.Exception),I.baseData=v,I},e.createRequestData=function(_){var v=new y.RequestData;_.id?v.id=_.id:v.id=b.w3cTraceId(),v.name=_.name,v.url=_.url,v.source=_.source,v.duration=b.msToTimeSpan(_.duration),v.responseCode=_.resultCode?_.resultCode+"":"",v.success=_.success,v.properties=_.properties;var x=new y.Data;return x.baseType=y.telemetryTypeToBaseType(y.TelemetryType.Request),x.baseData=v,x},e.createMetricData=function(_){var v=new y.MetricData;v.metrics=[];var b=new y.DataPoint;b.count=isNaN(_.count)?1:_.count,b.kind=y.DataPointType.Aggregation,b.max=isNaN(_.max)?_.value:_.max,b.min=isNaN(_.min)?_.value:_.min,b.name=_.name,b.stdDev=isNaN(_.stdDev)?0:_.stdDev,b.value=_.value,v.metrics.push(b),v.properties=_.properties;var x=new y.Data;return x.baseType=y.telemetryTypeToBaseType(y.TelemetryType.Metric),x.baseData=v,x},e.createAvailabilityData=function(_){var v=new y.AvailabilityData;_.id?v.id=_.id:v.id=b.w3cTraceId(),v.name=_.name,v.duration=b.msToTimeSpan(_.duration),v.success=_.success,v.runLocation=_.runLocation,v.message=_.message,v.measurements=_.measurements,v.properties=_.properties;var x=new y.Data;return x.baseType=y.telemetryTypeToBaseType(y.TelemetryType.Availability),x.baseData=v,x},e.createPageViewData=function(_){var v=new y.PageViewData;v.name=_.name,v.duration=b.msToTimeSpan(_.duration),v.url=_.url,v.measurements=_.measurements,v.properties=_.properties;var x=new y.Data;return x.baseType=y.telemetryTypeToBaseType(y.TelemetryType.PageView),x.baseData=v,x},e.getTags=function(_,v){var y=x.CorrelationContextManager.getCurrentContext(),b={};if(_&&_.tags)for(var T in _.tags)b[T]=_.tags[T];if(v)for(var T in v)b[T]=v[T];return y&&(b[_.keys.operationId]=b[_.keys.operationId]||y.operation.id,b[_.keys.operationName]=b[_.keys.operationName]||y.operation.name,b[_.keys.operationParentId]=b[_.keys.operationParentId]||y.operation.parentId),b},e.parseStack=function(_){var v=void 0;if("string"==typeof _){var y=_.split("\n");v=[];for(var b=0,x=0,T=0;T<=y.length;T++){var S=y[T];if(I.regex.test(S)){var M=new I(y[T],b++);x+=M.sizeInBytes,v.push(M)}}if(x>32768)for(var A=0,P=v.length-1,O=0,k=A,R=P;A<P;){if((O+=v[A].sizeInBytes+v[P].sizeInBytes)>32768){var L=R-k+1;v.splice(k,L);break}k=A,R=P,A++,P--}}return v},e}(),I=function(){function e(_,v){this.sizeInBytes=0,this.level=v,this.method="<no_method>",this.assembly=b.trim(_);var y=_.match(e.regex);y&&y.length>=5&&(this.method=b.trim(y[2])||this.method,this.fileName=b.trim(y[4])||"<no_filename>",this.line=parseInt(y[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,e.baseSize=58,e}();v.exports=T}),ea=l((_,v)=>{"use strict";var b=y(7310),x=Gn(),T=Tn(),I=Fi(),S=Xn(),M=Kn(),A=dn(),P=Zn(),k=zr(),R=O(),L=Jn(),B=function(){function e(_){this._telemetryProcessors=[],this._enableAzureProperties=!1;var v=new x(_);this.config=v,this.context=new T,this.commonProperties={};var y=new P(this.config);this.channel=new S((function(){return v.disableAppInsights}),(function(){return v.maxBatchSize}),(function(){return v.maxBatchIntervalMs}),y)}return e.prototype.trackAvailability=function(_){this.track(_,I.TelemetryType.Availability)},e.prototype.trackPageView=function(_){this.track(_,I.TelemetryType.PageView)},e.prototype.trackTrace=function(_){this.track(_,I.TelemetryType.Trace)},e.prototype.trackMetric=function(_){this.track(_,I.TelemetryType.Metric)},e.prototype.trackException=function(_){_&&_.exception&&!k.isError(_.exception)&&(_.exception=new Error(_.exception.toString())),this.track(_,I.TelemetryType.Exception)},e.prototype.trackEvent=function(_){this.track(_,I.TelemetryType.Event)},e.prototype.trackRequest=function(_){this.track(_,I.TelemetryType.Request)},e.prototype.trackDependency=function(_){_&&!_.target&&_.data&&(_.target=b.parse(_.data).host),this.track(_,I.TelemetryType.Dependency)},e.prototype.flush=function(_){this.channel.triggerSend(!!_&&!!_.isAppCrashing,_?_.callback:void 0)},e.prototype.track=function(_,v){if(_&&I.telemetryTypeToBaseType(v)){var y=L.createEnvelope(_,v,this.commonProperties,this.context,this.config);_.time&&(y.time=_.time.toISOString()),this._enableAzureProperties&&M.azureRoleEnvironmentTelemetryProcessor(y,this.context);var b=this.runTelemetryProcessors(y,_.contextObjects);b=b&&M.samplingTelemetryProcessor(y,{correlationContext:A.CorrelationContextManager.getCurrentContext()}),M.preAggregatedMetricsTelemetryProcessor(y,this.context),b&&(M.performanceMetricsTelemetryProcessor(y,this.quickPulseClient),this.channel.send(y))}else R.warn("track() requires telemetry object and telemetryType to be specified.")},e.prototype.setAutoPopulateAzureProperties=function(_){this._enableAzureProperties=_},e.prototype.addTelemetryProcessor=function(_){this._telemetryProcessors.push(_)},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},e.prototype.runTelemetryProcessors=function(_,v){var y=!0,b=this._telemetryProcessors.length;if(0===b)return y;(v=v||{}).correlationContext=A.CorrelationContextManager.getCurrentContext();for(var x=0;x<b;++x)try{var T=this._telemetryProcessors[x];if(T&&!1===T.apply(null,[_,v])){y=!1;break}}catch(v){y=!0,R.warn("One of telemetry processors failed, telemetry item will be sent.",v,_)}return y&&(_&&_.tags&&(_.tags=k.validateStringMap(_.tags)),_&&_.data&&_.data.baseData&&_.data.baseData.properties&&(_.data.baseData.properties=k.validateStringMap(_.data.baseData.properties))),y},e}();v.exports=B}),ra=l((_,v)=>{"use strict";var y,b=_&&_.__extends||(y=function(_,v){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,v){_.__proto__=v}||function(_,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(_[y]=v[y])})(_,v)},function(_,v){function n(){this.constructor=_}y(_,v),_.prototype=null===v?Object.create(v):(n.prototype=v.prototype,new n)}),x=ea(),T=Ln(),I=kn(),S=O(),M=function(_){function t(){return null!==_&&_.apply(this,arguments)||this}return b(t,_),t.prototype.trackNodeHttpRequestSync=function(_){_&&_.request&&_.response&&_.duration?T.trackRequestSync(this,_):S.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},t.prototype.trackNodeHttpRequest=function(_){(_.duration||_.error)&&S.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),_&&_.request&&_.response?T.trackRequest(this,_):S.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},t.prototype.trackNodeHttpDependency=function(_){_&&_.request?I.trackRequest(this,_):S.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},t}(x);v.exports=M}),aa=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0})}),oa=l(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.dispose=_.Configuration=_.wrapWithCorrelationContext=_.startOperation=_.getCorrelationContext=_.start=_.setup=_.liveMetricsClient=_.defaultClient=_.DistributedTracingModes=void 0;var v,y,b=dn(),x=_n(),T=vn(),I=bn(),S=xn(),M=Rn(),A=kn(),P=Ln(),k=Gr(),R=O(),L=Un(),B=Hn();_.TelemetryClient=ra(),_.Contracts=Fi(),_.azureFunctionsTypes=aa(),(y=v=_.DistributedTracingModes||(_.DistributedTracingModes={}))[y.AI=0]="AI",y[y.AI_AND_W3C=1]="AI_AND_W3C";var j,U,z,G,H,V,$,K,ee,re,ie,ne=!0,ae=!1,oe=!0,se=!0,ce=!0,ue=!1,pe=!0,he=!0,de=!0,fe=!0,me=!1,ge=!0,_e=void 0,ve=void 0,ye=!1;function nS(){return _.defaultClient?(ye=!0,z.enable(ne,ae),G.enable(oe),H.enable(se),V.enable(ce),$.enable(ue,_.defaultClient.config),K.enable(ge,U),ee.useAutoCorrelation(fe,j),ee.enable(pe),re.enable(he),_.liveMetricsClient&&me&&_.liveMetricsClient.enable(me)):R.warn("Start cannot be called before setup"),be}_.setup=function Lx(v){return _.defaultClient?R.info("The default client is already setup"):(_.defaultClient=new _.TelemetryClient(v),z=new x(_.defaultClient),G=new T(_.defaultClient),H=new I(_.defaultClient),V=new S(_.defaultClient),$=new M(_.defaultClient),ee=new P(_.defaultClient),re=new A(_.defaultClient),K||(K=new B.AutoCollectNativePerformance(_.defaultClient))),_.defaultClient&&_.defaultClient.channel&&_.defaultClient.channel.setUseDiskRetryCaching(de,_e,ve),be},_.start=nS,_.getCorrelationContext=function qx(){return fe?b.CorrelationContextManager.getCurrentContext():null},_.startOperation=function jx(_,v){return b.CorrelationContextManager.startOperation(_,v)},_.wrapWithCorrelationContext=function kx(_,v){return b.CorrelationContextManager.wrapCallback(_,v)};var be=function(){function e(){}return e.setDistributedTracingMode=function(_){return k.w3cEnabled=_===v.AI_AND_W3C,e},e.setAutoCollectConsole=function(_,v){return void 0===v&&(v=!1),ne=_,ae=v,ye&&z.enable(_,v),e},e.setAutoCollectExceptions=function(_){return oe=_,ye&&G.enable(_),e},e.setAutoCollectPerformance=function(_,v){void 0===v&&(v=!0),se=_;var y=B.AutoCollectNativePerformance.parseEnabled(v);return ge=y.isEnabled,U=y.disabledMetrics,ye&&(H.enable(_),K.enable(y.isEnabled,y.disabledMetrics)),e},e.setAutoCollectPreAggregatedMetrics=function(_){return ce=_,ye&&V.enable(_),e},e.setAutoCollectHeartbeat=function(v){return ue=v,ye&&$.enable(v,_.defaultClient.config),e},e.setAutoCollectRequests=function(_){return pe=_,ye&&ee.enable(_),e},e.setAutoCollectDependencies=function(_){return he=_,ye&&re.enable(_),e},e.setAutoDependencyCorrelation=function(_,v){return fe=_,j=v,ye&&ee.useAutoCorrelation(_,v),e},e.setUseDiskRetryCaching=function(v,y,b){return de=v,_e=y,ve=b,_.defaultClient&&_.defaultClient.channel&&_.defaultClient.channel.setUseDiskRetryCaching(v,y,b),e},e.setInternalLogging=function(_,v){return void 0===_&&(_=!1),void 0===v&&(v=!0),R.enableDebug=_,R.disableWarnings=!v,e},e.setSendLiveMetrics=function(v){return void 0===v&&(v=!1),_.defaultClient?(!_.liveMetricsClient&&v?(_.liveMetricsClient=new L(_.defaultClient.config,null),ie=new I(_.liveMetricsClient,1e3,!0),_.liveMetricsClient.addCollector(ie),_.defaultClient.quickPulseClient=_.liveMetricsClient):_.liveMetricsClient&&_.liveMetricsClient.enable(v),me=v,e):(R.warn("Live metrics client cannot be setup without the default client"),e)},e.start=nS,e}();_.Configuration=be,_.dispose=function Hx(){k.w3cEnabled=!0,_.defaultClient=null,ye=!1,z&&z.dispose(),G&&G.dispose(),H&&H.dispose(),V&&V.dispose(),$&&$.dispose(),K&&K.dispose(),ee&&ee.dispose(),re&&re.dispose(),_.liveMetricsClient&&(_.liveMetricsClient.enable(!1),me=!1,_.liveMetricsClient=void 0)}});((_,v)=>{for(var y in hf(_),v)x(_,y,{get:v[y],enumerable:!0})})(v,{default:()=>ga});var sa,ua,ha=Ai(y(2037)),da=Ai(y(9496)),fa=Ai(y(9496)),ma=Ai(y(9496));function nn(){return void 0!==ma.env.isTelemetryEnabled?ma.env.isTelemetryEnabled?sa.ON:sa.OFF:ma.workspace.getConfiguration("telemetry").get("enableTelemetry")?sa.ON:sa.OFF}(ua=sa||(sa={})).ON="on",ua.OFF="off";var Ux=async _=>{let v;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let y=await Promise.resolve().then(()=>Ai(oa()));y.defaultClient?(v=new y.TelemetryClient(_),v.channel.setUseDiskRetryCaching(!0)):(y.setup(_).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),v=y.defaultClient),da&&da.env&&(v.context.tags[v.context.keys.userId]=da.env.machineId,v.context.tags[v.context.keys.sessionId]=da.env.sessionId,v.context.tags[v.context.keys.cloudRole]=da.env.appName,v.context.tags[v.context.keys.cloudRoleInstance]=da.env.appName),_&&0===_.indexOf("AIF-")&&(v.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")}catch(_){return Promise.reject(_)}return{logEvent:(_,y)=>{null==v||v.trackEvent({name:_,properties:null==y?void 0:y.properties,measurements:null==y?void 0:y.measurements})},logException:(_,y)=>{null==v||v.trackException({exception:_,properties:null==y?void 0:y.properties,measurements:null==y?void 0:y.measurements})},flush:async()=>{null==v||v.flush()}}},ga=class extends class{constructor(_,v,y,b,x){this.extensionId=_,this.extensionVersion=v,this.telemetryAppender=y,this.osShim=b,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!x,this.updateUserOptStatus(),void 0!==fa.env.onDidChangeTelemetryEnabled?(this.disposables.push(fa.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(fa.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(fa.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let _=nn();this.userOptIn=_===sa.ON,this.errorOptIn=_===sa.ON,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(_){if(!_)return"none";let v="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(y=>{0===_.indexOf(y+"+")&&(v=y)}),v}get extension(){return void 0===this._extension&&(this._extension=fa.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(_,v){if(null===_||"object"!=typeof _||"function"!=typeof v)return _;let y={};for(let b in _)y[b]=v(b,_[b]);return y}shouldSendErrorTelemetry(){return!1!==this.errorOptIn&&(!this.firstParty||("other"!==this.cleanRemoteName(fa.env.remoteName)||!(void 0===this.extension||this.extension.extensionKind===fa.ExtensionKind.Workspace||fa.env.uiKind===fa.UIKind.Web)))}getCommonProperties(){let _=Object.create(null);if(_["common.os"]=this.osShim.platform,_["common.nodeArch"]=this.osShim.architecture,_["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),_["common.extname"]=this.extensionId,_["common.extversion"]=this.extensionVersion,fa&&fa.env){switch(_["common.vscodemachineid"]=fa.env.machineId,_["common.vscodesessionid"]=fa.env.sessionId,_["common.vscodeversion"]=fa.version,_["common.isnewappinstall"]=fa.env.isNewAppInstall?fa.env.isNewAppInstall.toString():"false",_["common.product"]=fa.env.appHost,fa.env.uiKind){case fa.UIKind.Web:_["common.uikind"]="web";break;case fa.UIKind.Desktop:_["common.uikind"]="desktop";break;default:_["common.uikind"]="unknown"}_["common.remotename"]=this.cleanRemoteName(fa.env.remoteName)}return _}anonymizeFilePaths(_,v){let y;if(null==_)return"";let b=[];""!==fa.env.appRoot&&b.push(new RegExp(fa.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&b.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let x=_;if(v){let v=[];for(let x of b)for(;(y=x.exec(_))&&y;)v.push([y.index,x.lastIndex]);let T=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,I=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,S=0;for(x="";(y=I.exec(_))&&y;)y[0]&&!T.test(y[0])&&v.every(([_,v])=>y.index<_||y.index>=v)&&(x+=_.substring(S,y.index)+"<REDACTED: user-file-path>",S=I.lastIndex);S<_.length&&(x+=_.substr(S))}for(let _ of b)x=x.replace(_,"");return x}removePropertiesWithPossibleUserInfo(_){if("object"!=typeof _)return;let v=Object.create(null);for(let y of Object.keys(_)){let b=_[y];if(!b)continue;let x=/@[a-zA-Z0-9-.]+/;/(key|token|sig|signature|password|passwd|pwd)[="':\s]/.test(b.toLowerCase())?v[y]="<REDACTED: secret>":x.test(b)?v[y]="<REDACTED: email>":v[y]=b}return v}sendTelemetryEvent(_,v,y){if(this.userOptIn&&""!==_){v=It(It({},v),this.getCommonProperties());let b=this.cloneAndChange(v,(_,v)=>this.anonymizeFilePaths(v,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${_}`,{properties:this.removePropertiesWithPossibleUserInfo(b),measurements:y})}}sendRawTelemetryEvent(_,v,y){this.userOptIn&&""!==_&&(v=It(It({},v),this.getCommonProperties()),this.telemetryAppender.logEvent(`${this.extensionId}/${_}`,{properties:v,measurements:y}))}sendTelemetryErrorEvent(_,v,y,b){if(this.errorOptIn&&""!==_){v=It(It({},v),this.getCommonProperties());let x=this.cloneAndChange(v,(_,v)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(v,this.firstParty):void 0===b||-1!==b.indexOf(_)?"REDACTED":this.anonymizeFilePaths(v,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${_}`,{properties:this.removePropertiesWithPossibleUserInfo(x),measurements:y})}}sendTelemetryException(_,v,y){if(this.shouldSendErrorTelemetry()&&this.errorOptIn&&_){v=It(It({},v),this.getCommonProperties());let b=this.cloneAndChange(v,(_,v)=>this.anonymizeFilePaths(v,this.firstParty));_.stack&&(_.stack=this.anonymizeFilePaths(_.stack,this.firstParty)),this.telemetryAppender.logException(_,{properties:this.removePropertiesWithPossibleUserInfo(b),measurements:y})}}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(_=>_.dispose()))}}{constructor(_,v,y,b){let x=new class{constructor(_,v){this._isInstantiated=!1,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=v,this._key=_,nn()!==sa.OFF&&this.instantiateAppender()}logEvent(_,v){this._telemetryClient?this._telemetryClient.logEvent(_,v):!this._isInstantiated&&nn()===sa.ON&&this._eventQueue.push({eventName:_,data:v})}logException(_,v){this._telemetryClient?this._telemetryClient.logException(_,v):!this._isInstantiated&&nn()!==sa.OFF&&this._exceptionQueue.push({exception:_,data:v})}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:_,data:v})=>this.logEvent(_,v)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:_,data:v})=>this.logException(_,v)),this._exceptionQueue=[]}instantiateAppender(){this._isInstantiated||this._clientFactory(this._key).then(_=>{this._telemetryClient=_,this._isInstantiated=!0,this._flushQueues()}).catch(_=>{console.error(_)})}}(y,Ux);y&&0===y.indexOf("AIF-")&&(b=!0),super(_,v,x,{release:ha.release(),platform:ha.platform(),architecture:ha.arch()},b)}}},3255:_=>{function webpackEmptyContext(_){var v=new Error("Cannot find module '"+_+"'");throw v.code="MODULE_NOT_FOUND",v}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id=3255,_.exports=webpackEmptyContext},9118:_=>{function webpackEmptyContext(_){var v=new Error("Cannot find module '"+_+"'");throw v.code="MODULE_NOT_FOUND",v}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id=9118,_.exports=webpackEmptyContext},306:function(_,v){(function(){"use strict";v.stripBOM=function(_){return"\ufeff"===_[0]?_.substring(1):_}}).call(this)},5396:function(_,v,y){(function(){"use strict";var _,b,x,T,I,S={}.hasOwnProperty;_=y(5532),b=y(8381).defaults,T=function(_){return"string"==typeof _&&(_.indexOf("&")>=0||_.indexOf(">")>=0||_.indexOf("<")>=0)},I=function(_){return"<![CDATA["+x(_)+"]]>"},x=function(_){return _.replace("]]>","]]]]><![CDATA[>")},v.Builder=function(){function Builder(_){var v,y,x;for(v in this.options={},y=b[.2])S.call(y,v)&&(x=y[v],this.options[v]=x);for(v in _)S.call(_,v)&&(x=_[v],this.options[v]=x)}return Builder.prototype.buildObject=function(v){var y,x,M,A,P,O;return y=this.options.attrkey,x=this.options.charkey,1===Object.keys(v).length&&this.options.rootName===b[.2].rootName?v=v[P=Object.keys(v)[0]]:P=this.options.rootName,O=this,M=function(_,v){var b,A,P,k,R,L;if("object"!=typeof v)O.options.cdata&&T(v)?_.raw(I(v)):_.txt(v);else if(Array.isArray(v)){for(k in v)if(S.call(v,k))for(R in A=v[k])P=A[R],_=M(_.ele(R),P).up()}else for(R in v)if(S.call(v,R))if(A=v[R],R===y){if("object"==typeof A)for(b in A)L=A[b],_=_.att(b,L)}else if(R===x)_=O.options.cdata&&T(A)?_.raw(I(A)):_.txt(A);else if(Array.isArray(A))for(k in A)S.call(A,k)&&(_="string"==typeof(P=A[k])?O.options.cdata&&T(P)?_.ele(R).raw(I(P)).up():_.ele(R,P).up():M(_.ele(R),P).up());else"object"==typeof A?_=M(_.ele(R),A).up():"string"==typeof A&&O.options.cdata&&T(A)?_=_.ele(R).raw(I(A)).up():(null==A&&(A=""),_=_.ele(R,A.toString()).up());return _},A=_.create(P,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),M(A,v).end(this.options.renderOpts)},Builder}()}).call(this)},8381:function(_,v){(function(){v.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},9082:function(_,v,y){(function(){"use strict";var _,b,x,T,I,S,M,A,bind=function(_,v){return function(){return _.apply(v,arguments)}},P={}.hasOwnProperty;M=y(6099),x=y(2361),_=y(306),S=y(7526),A=y(9512).setImmediate,b=y(8381).defaults,T=function(_){return"object"==typeof _&&null!=_&&0===Object.keys(_).length},I=function(_,v,y){var b,x;for(b=0,x=_.length;b<x;b++)v=(0,_[b])(v,y);return v},v.Parser=function(y){function Parser(_){var y,x,T;if(this.parseStringPromise=bind(this.parseStringPromise,this),this.parseString=bind(this.parseString,this),this.reset=bind(this.reset,this),this.assignOrPush=bind(this.assignOrPush,this),this.processAsync=bind(this.processAsync,this),!(this instanceof v.Parser))return new v.Parser(_);for(y in this.options={},x=b[.2])P.call(x,y)&&(T=x[y],this.options[y]=T);for(y in _)P.call(_,y)&&(T=_[y],this.options[y]=T);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(S.normalize)),this.reset()}return function(_,v){for(var y in v)P.call(v,y)&&(_[y]=v[y]);function ctor(){this.constructor=_}ctor.prototype=v.prototype,_.prototype=new ctor,_.__super__=v.prototype}(Parser,y),Parser.prototype.processAsync=function(){var _,v;try{return this.remaining.length<=this.options.chunkSize?(_=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(_),this.saxParser.close()):(_=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(_),A(this.processAsync))}catch(_){if(v=_,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(v)}},Parser.prototype.assignOrPush=function(_,v,y){return v in _?(_[v]instanceof Array||(_[v]=[_[v]]),_[v].push(y)):this.options.explicitArray?_[v]=[y]:_[v]=y},Parser.prototype.reset=function(){var _,v,y,b,x;return this.removeAllListeners(),this.saxParser=M.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(x=this,function(_){if(x.saxParser.resume(),!x.saxParser.errThrown)return x.saxParser.errThrown=!0,x.emit("error",_)}),this.saxParser.onend=function(_){return function(){if(!_.saxParser.ended)return _.saxParser.ended=!0,_.emit("end",_.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,b=[],_=this.options.attrkey,v=this.options.charkey,this.saxParser.onopentag=function(y){return function(x){var T,S,M,A,O;if((M={})[v]="",!y.options.ignoreAttrs)for(T in O=x.attributes)P.call(O,T)&&(_ in M||y.options.mergeAttrs||(M[_]={}),S=y.options.attrValueProcessors?I(y.options.attrValueProcessors,x.attributes[T],T):x.attributes[T],A=y.options.attrNameProcessors?I(y.options.attrNameProcessors,T):T,y.options.mergeAttrs?y.assignOrPush(M,A,S):M[_][A]=S);return M["#name"]=y.options.tagNameProcessors?I(y.options.tagNameProcessors,x.name):x.name,y.options.xmlns&&(M[y.options.xmlnskey]={uri:x.uri,local:x.local}),b.push(M)}}(this),this.saxParser.onclosetag=function(_){return function(){var y,x,S,M,A,O,k,R,L,B;if(O=b.pop(),A=O["#name"],_.options.explicitChildren&&_.options.preserveChildrenOrder||delete O["#name"],!0===O.cdata&&(y=O.cdata,delete O.cdata),L=b[b.length-1],O[v].match(/^\s*$/)&&!y?(x=O[v],delete O[v]):(_.options.trim&&(O[v]=O[v].trim()),_.options.normalize&&(O[v]=O[v].replace(/\s{2,}/g," ").trim()),O[v]=_.options.valueProcessors?I(_.options.valueProcessors,O[v],A):O[v],1===Object.keys(O).length&&v in O&&!_.EXPLICIT_CHARKEY&&(O=O[v])),T(O)&&(O=""!==_.options.emptyTag?_.options.emptyTag:x),null!=_.options.validator&&(B="/"+function(){var _,v,y;for(y=[],_=0,v=b.length;_<v;_++)M=b[_],y.push(M["#name"]);return y}().concat(A).join("/"),function(){var v;try{O=_.options.validator(B,L&&L[A],O)}catch(y){return v=y,_.emit("error",v)}}()),_.options.explicitChildren&&!_.options.mergeAttrs&&"object"==typeof O)if(_.options.preserveChildrenOrder){if(L){for(S in L[_.options.childkey]=L[_.options.childkey]||[],k={},O)P.call(O,S)&&(k[S]=O[S]);L[_.options.childkey].push(k),delete O["#name"],1===Object.keys(O).length&&v in O&&!_.EXPLICIT_CHARKEY&&(O=O[v])}}else M={},_.options.attrkey in O&&(M[_.options.attrkey]=O[_.options.attrkey],delete O[_.options.attrkey]),!_.options.charsAsChildren&&_.options.charkey in O&&(M[_.options.charkey]=O[_.options.charkey],delete O[_.options.charkey]),Object.getOwnPropertyNames(O).length>0&&(M[_.options.childkey]=O),O=M;return b.length>0?_.assignOrPush(L,A,O):(_.options.explicitRoot&&(R=O,(O={})[A]=R),_.resultObject=O,_.saxParser.ended=!0,_.emit("end",_.resultObject))}}(this),y=function(_){return function(y){var x,T;if(T=b[b.length-1])return T[v]+=y,_.options.explicitChildren&&_.options.preserveChildrenOrder&&_.options.charsAsChildren&&(_.options.includeWhiteChars||""!==y.replace(/\\n/g,"").trim())&&(T[_.options.childkey]=T[_.options.childkey]||[],(x={"#name":"__text__"})[v]=y,_.options.normalize&&(x[v]=x[v].replace(/\s{2,}/g," ").trim()),T[_.options.childkey].push(x)),T}}(this),this.saxParser.ontext=y,this.saxParser.oncdata=function(_){var v;if(v=y(_))return v.cdata=!0}},Parser.prototype.parseString=function(v,y){var b;null!=y&&"function"==typeof y&&(this.on("end",(function(_){return this.reset(),y(null,_)})),this.on("error",(function(_){return this.reset(),y(_)})));try{return""===(v=v.toString()).trim()?(this.emit("end",null),!0):(v=_.stripBOM(v),this.options.async?(this.remaining=v,A(this.processAsync),this.saxParser):this.saxParser.write(v).close())}catch(_){if(b=_,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",b),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw b}},Parser.prototype.parseStringPromise=function(_){return new Promise((v=this,function(y,b){return v.parseString(_,(function(_,v){return _?b(_):y(v)}))}));var v},Parser}(x),v.parseString=function(_,y,b){var x,T;return null!=b?("function"==typeof b&&(x=b),"object"==typeof y&&(T=y)):("function"==typeof y&&(x=y),T={}),new v.Parser(T).parseString(_,x)},v.parseStringPromise=function(_,y){var b;return"object"==typeof y&&(b=y),new v.Parser(b).parseStringPromise(_)}}).call(this)},7526:function(_,v){(function(){"use strict";var _;_=new RegExp(/(?!xmlns)^.*:/),v.normalize=function(_){return _.toLowerCase()},v.firstCharLowerCase=function(_){return _.charAt(0).toLowerCase()+_.slice(1)},v.stripPrefix=function(v){return v.replace(_,"")},v.parseNumbers=function(_){return isNaN(_)||(_=_%1==0?parseInt(_,10):parseFloat(_)),_},v.parseBooleans=function(_){return/^(?:true|false)$/i.test(_)&&(_="true"===_.toLowerCase()),_}}).call(this)},5055:function(_,v,y){(function(){"use strict";var _,b,x,T,I={}.hasOwnProperty;b=y(8381),_=y(5396),x=y(9082),T=y(7526),v.defaults=b.defaults,v.processors=T,v.ValidationError=function(_){function ValidationError(_){this.message=_}return function(_,v){for(var y in v)I.call(v,y)&&(_[y]=v[y]);function ctor(){this.constructor=_}ctor.prototype=v.prototype,_.prototype=new ctor,_.__super__=v.prototype}(ValidationError,Error),ValidationError}(),v.Builder=_.Builder,v.Parser=x.Parser,v.parseString=x.parseString,v.parseStringPromise=x.parseStringPromise}).call(this)},7557:function(_){(function(){_.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},9335:function(_){(function(){_.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},8369:function(_){(function(){var v,y,b,x,T,I,S,M=[].slice,A={}.hasOwnProperty;v=function(){var _,v,y,b,x,I;if(I=arguments[0],x=2<=arguments.length?M.call(arguments,1):[],T(Object.assign))Object.assign.apply(null,arguments);else for(_=0,y=x.length;_<y;_++)if(null!=(b=x[_]))for(v in b)A.call(b,v)&&(I[v]=b[v]);return I},T=function(_){return!!_&&"[object Function]"===Object.prototype.toString.call(_)},I=function(_){var v;return!!_&&("function"==(v=typeof _)||"object"===v)},b=function(_){return T(Array.isArray)?Array.isArray(_):"[object Array]"===Object.prototype.toString.call(_)},x=function(_){var v;if(b(_))return!_.length;for(v in _)if(A.call(_,v))return!1;return!0},S=function(_){var v,y;return I(_)&&(y=Object.getPrototypeOf(_))&&(v=y.constructor)&&"function"==typeof v&&v instanceof v&&Function.prototype.toString.call(v)===Function.prototype.toString.call(Object)},y=function(_){return T(_.valueOf)?_.valueOf():_},_.exports.assign=v,_.exports.isFunction=T,_.exports.isObject=I,_.exports.isArray=b,_.exports.isEmpty=x,_.exports.isPlainObject=S,_.exports.getValue=y}).call(this)},594:function(_){(function(){_.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},2750:function(_,v,y){(function(){var v;v=y(9335),y(2026),_.exports=function(){function XMLAttribute(_,y,b){if(this.parent=_,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==y)throw new Error("Missing attribute name. "+this.debugInfo(y));this.name=this.stringify.name(y),this.value=this.stringify.attValue(b),this.type=v.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(XMLAttribute.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(XMLAttribute.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(XMLAttribute.prototype,"textContent",{get:function(){return this.value},set:function(_){return this.value=_||""}}),Object.defineProperty(XMLAttribute.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(XMLAttribute.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(XMLAttribute.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(XMLAttribute.prototype,"specified",{get:function(){return!0}}),XMLAttribute.prototype.clone=function(){return Object.create(this)},XMLAttribute.prototype.toString=function(_){return this.options.writer.attribute(this,this.options.writer.filterOptions(_))},XMLAttribute.prototype.debugInfo=function(_){return null==(_=_||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+_+"}, parent: <"+this.parent.name+">"},XMLAttribute.prototype.isEqualNode=function(_){return _.namespaceURI===this.namespaceURI&&(_.prefix===this.prefix&&(_.localName===this.localName&&_.value===this.value))},XMLAttribute}()}).call(this)},6170:function(_,v,y){(function(){var v,b,x={}.hasOwnProperty;v=y(9335),b=y(6488),_.exports=function(_){function XMLCData(_,y){if(XMLCData.__super__.constructor.call(this,_),null==y)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=v.CData,this.value=this.stringify.cdata(y)}return function(_,v){for(var y in v)x.call(v,y)&&(_[y]=v[y]);function ctor(){this.constructor=_}ctor.prototype=v.prototype,_.prototype=new ctor,_.__super__=v.prototype}(XMLCData,_),XMLCData.prototype.clone=function(){return Object.create(this)},XMLCData.prototype.toString=function(_){return this.options.writer.cdata(this,this.options.writer.filterOptions(_))},XMLCData}(b)}).call(this)},6488:function(_,v,y){(function(){var v,b={}.hasOwnProperty;v=y(2026),_.exports=function(_){function XMLCharacterData(_){XMLCharacterData.__super__.constructor.call(this,_),this.value=""}return function(_,v){for(var y in v)b.call(v,y)&&(_[y]=v[y]);function ctor(){this.constructor=_}ctor.prototype=v.prototype,_.prototype=new ctor,_.__super__=v.prototype}(XMLCharacterData,_),Object.defineProperty(XMLCharacterData.prototype,"data",{get:function(){return this.value},set:function(_){return this.value=_||""}}),Object.defineProperty(XMLCharacterData.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(XMLCharacterData.prototype,"textContent",{get:function(){return this.value},set:function(_){return this.value=_||""}}),XMLCharacterData.prototype.clone=function(){return Object.create(this)},XMLCharacterData.prototype.substringData=function(_,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLCharacterData.prototype.appendData=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLCharacterData.prototype.insertData=function(_,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLCharacterData.prototype.deleteData=function(_,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLCharacterData.prototype.replaceData=function(_,v,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLCharacterData.prototype.isEqualNode=function(_){return!!XMLCharacterData.__super__.isEqualNode.apply(this,arguments).isEqualNode(_)&&_.data===this.data},XMLCharacterData}(v)}).call(this)},2096:function(_,v,y){(function(){var v,b,x={}.hasOwnProperty;v=y(9335),b=y(6488),_.exports=function(_){function XMLComment(_,y){if(XMLComment.__super__.constructor.call(this,_),null==y)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=v.Comment,this.value=this.stringify.comment(y)}return function(_,v){for(var y in v)x.call(v,y)&&(_[y]=v[y]);function ctor(){this.constructor=_}ctor.prototype=v.prototype,_.prototype=new ctor,_.__super__=v.prototype}(XMLComment,_),XMLComment.prototype.clone=function(){return Object.create(this)},XMLComment.prototype.toString=function(_){return this.options.writer.comment(this,this.options.writer.filterOptions(_))},XMLComment}(b)}).call(this)},383:function(_,v,y){(function(){var v,b;v=y(3933),b=y(6210),_.exports=function(){function XMLDOMConfiguration(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new v,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(XMLDOMConfiguration.prototype,"parameterNames",{get:function(){return new b(Object.keys(this.defaultParams))}}),XMLDOMConfiguration.prototype.getParameter=function(_){return this.params.hasOwnProperty(_)?this.params[_]:null},XMLDOMConfiguration.prototype.canSetParameter=function(_,v){return!0},XMLDOMConfiguration.prototype.setParameter=function(_,v){return null!=v?this.params[_]=v:delete this.params[_]},XMLDOMConfiguration}()}).call(this)},3933:function(_){(function(){_.exports=function(){function XMLDOMErrorHandler(){}return XMLDOMErrorHandler.prototype.handleError=function(_){throw new Error(_)},XMLDOMErrorHandler}()}).call(this)},1770:function(_){(function(){_.exports=function(){function XMLDOMImplementation(){}return XMLDOMImplementation.prototype.hasFeature=function(_,v){return!0},XMLDOMImplementation.prototype.createDocumentType=function(_,v,y){throw new Error("This DOM method is not implemented.")},XMLDOMImplementation.prototype.createDocument=function(_,v,y){throw new Error("This DOM method is not implemented.")},XMLDOMImplementation.prototype.createHTMLDocument=function(_){throw new Error("This DOM method is not implemented.")},XMLDOMImplementation.prototype.getFeature=function(_,v){throw new Error("This DOM method is not implemented.")},XMLDOMImplementation}()}).call(this)},6210:function(_){(function(){_.exports=function(){function XMLDOMStringList(_){this.arr=_||[]}return Object.defineProperty(XMLDOMStringList.prototype,"length",{get:function(){return this.arr.length}}),XMLDOMStringList.prototype.item=function(_){return this.arr[_]||null},XMLDOMStringList.prototype.contains=function(_){return-1!==this.arr.indexOf(_)},XMLDOMStringList}()}).call(this)},1179:function(_,v,y){(function(){var v,b,x={}.hasOwnProperty;b=y(2026),v=y(9335),_.exports=function(_){function XMLDTDAttList(_,y,b,x,T,I){if(XMLDTDAttList.__super__.constructor.call(this,_),null==y)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==b)throw new Error("Missing DTD attribute name. "+this.debugInfo(y));if(!x)throw new Error("Missing DTD attribute type. "+this.debugInfo(y));if(!T)throw new Error("Missing DTD attribute default. "+this.debugInfo(y));if(0!==T.indexOf("#")&&(T="#"+T),!T.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(y));if(I&&!T.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(y));this.elementName=this.stringify.name(y),this.type=v.AttributeDeclaration,this.attributeName=this.stringify.name(b),this.attributeType=this.stringify.dtdAttType(x),I&&(this.defaultValue=this.stringify.dtdAttDefault(I)),this.defaultValueType=T}return function(_,v){for(var y in v)x.call(v,y)&&(_[y]=v[y]);function ctor(){this.constructor=_}ctor.prototype=v.prototype,_.prototype=new ctor,_.__super__=v.prototype}(XMLDTDAttList,_),XMLDTDAttList.prototype.toString=function(_){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(_))},XMLDTDAttList}(b)}).call(this)},6347:function(_,v,y){(function(){var v,b,x={}.hasOwnProperty;b=y(2026),v=y(9335),_.exports=function(_){function XMLDTDElement(_,y,b){if(XMLDTDElement.__super__.constructor.call(this,_),null==y)throw new Error("Missing DTD element name. "+this.debugInfo());b||(b="(#PCDATA)"),Array.isArray(b)&&(b="("+b.join(",")+")"),this.name=this.stringify.name(y),this.type=v.ElementDeclaration,this.value=this.stringify.dtdElementValue(b)}return function(_,v){for(var y in v)x.call(v,y)&&(_[y]=v[y]);function ctor(){this.constructor=_}ctor.prototype=v.prototype,_.prototype=new ctor,_.__super__=v.prototype}(XMLDTDElement,_),XMLDTDElement.prototype.toString=function(_){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(_))},XMLDTDElement}(b)}).call(this)},9078:function(_,v,y){(function(){var v,b,x,T={}.hasOwnProperty;x=y(8369).isObject,b=y(2026),v=y(9335),_.exports=function(_){function XMLDTDEntity(_,y,b,T){if(XMLDTDEntity.__super__.constructor.call(this,_),null==b)throw new Error("Missing DTD entity name. "+this.debugInfo(b));if(null==T)throw new Error("Missing DTD entity value. "+this.debugInfo(b));if(this.pe=!!y,this.name=this.stringify.name(b),this.type=v.EntityDeclaration,x(T)){if(!T.pubID&&!T.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(b));if(T.pubID&&!T.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(b));if(this.internal=!1,null!=T.pubID&&(this.pubID=this.stringify.dtdPubID(T.pubID)),null!=T.sysID&&(this.sysID=this.stringify.dtdSysID(T.sysID)),null!=T.nData&&(this.nData=this.stringify.dtdNData(T.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(b))}else this.value=this.stringify.dtdEntityValue(T),this.internal=!0}return function(_,v){for(var y in v)T.call(v,y)&&(_[y]=v[y]);function ctor(){this.constructor=_}ctor.prototype=v.prototype,_.prototype=new ctor,_.__super__=v.prototype}(XMLDTDEntity,_),Object.defineProperty(XMLDTDEntity.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(XMLDTDEntity.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(XMLDTDEntity.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(XMLDTDEntity.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(XMLDTDEntity.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(XMLDTDEntity.prototype,"xmlVersion",{get:function(){return null}}),XMLDTDEntity.prototype.toString=function(_){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(_))},XMLDTDEntity}(b)}).call(this)},4777:function(_,v,y){(function(){var v,b,x={}.hasOwnProperty;b=y(2026),v=y(9335),_.exports=function(_){function XMLDTDNotation(_,y,b){if(XMLDTDNotation.__super__.constructor.call(this,_),null==y)throw new Error("Missing DTD notation name. "+this.debugInfo(y));if(!b.pubID&&!b.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(y));this.name=this.stringify.name(y),this.type=v.NotationDeclaration,null!=b.pubID&&(this.pubID=this.stringify.dtdPubID(b.pubID)),null!=b.sysID&&(this.sysID=this.stringify.dtdSysID(b.sysID))}return function(_,v){for(var y in v)x.call(v,y)&&(_[y]=v[y]);function ctor(){this.constructor=_}ctor.prototype=v.prototype,_.prototype=new ctor,_.__super__=v.prototype}(XMLDTDNotation,_),Object.defineProperty(XMLDTDNotation.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(XMLDTDNotation.prototype,"systemId",{get:function(){return this.sysID}}),XMLDTDNotation.prototype.toString=function(_){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(_))},XMLDTDNotation}(b)}).call(this)},9077:function(_,v,y){(function(){var v,b,x,T={}.hasOwnProperty;x=y(8369).isObject,b=y(2026),v=y(9335),_.exports=function(_){function XMLDeclaration(_,y,b,T){var I;XMLDeclaration.__super__.constructor.call(this,_),x(y)&&(y=(I=y).version,b=I.encoding,T=I.standalone),y||(y="1.0"),this.type=v.Declaration,this.version=this.stringify.xmlVersion(y),null!=b&&(this.encoding=this.stringify.xmlEncoding(b)),null!=T&&(this.standalone=this.stringify.xmlStandalone(T))}return function(_,v){for(var y in v)T.call(v,y)&&(_[y]=v[y]);function ctor(){this.constructor=_}ctor.prototype=v.prototype,_.prototype=new ctor,_.__super__=v.prototype}(XMLDeclaration,_),XMLDeclaration.prototype.toString=function(_){return this.options.writer.declaration(this,this.options.writer.filterOptions(_))},XMLDeclaration}(b)}).call(this)},8225:function(_,v,y){(function(){var v,b,x,T,I,S,M,A,P={}.hasOwnProperty;A=y(8369).isObject,M=y(2026),v=y(9335),b=y(1179),T=y(9078),x=y(6347),I=y(4777),S=y(663),_.exports=function(_){function XMLDocType(_,y,b){var x,T,I,S,M,P;if(XMLDocType.__super__.constructor.call(this,_),this.type=v.DocType,_.children)for(T=0,I=(S=_.children).length;T<I;T++)if((x=S[T]).type===v.Element){this.name=x.name;break}this.documentObject=_,A(y)&&(y=(M=y).pubID,b=M.sysID),null==b&&(b=(P=[y,b])[0],y=P[1]),null!=y&&(this.pubID=this.stringify.dtdPubID(y)),null!=b&&(this.sysID=this.stringify.dtdSysID(b))}return function(_,v){for(var y in v)P.call(v,y)&&(_[y]=v[y]);function ctor(){this.constructor=_}ctor.prototype=v.prototype,_.prototype=new ctor,_.__super__=v.prototype}(XMLDocType,_),Object.defineProperty(XMLDocType.prototype,"entities",{get:function(){var _,y,b,x,T;for(x={},y=0,b=(T=this.children).length;y<b;y++)(_=T[y]).type!==v.EntityDeclaration||_.pe||(x[_.name]=_);return new S(x)}}),Object.defineProperty(XMLDocType.prototype,"notations",{get:function(){var _,y,b,x,T;for(x={},y=0,b=(T=this.children).length;y<b;y++)(_=T[y]).type===v.NotationDeclaration&&(x[_.name]=_);return new S(x)}}),Object.defineProperty(XMLDocType.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(XMLDocType.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(XMLDocType.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),XMLDocType.prototype.element=function(_,v){var y;return y=new x(this,_,v),this.children.push(y),this},XMLDocType.prototype.attList=function(_,v,y,x,T){var I;return I=new b(this,_,v,y,x,T),this.children.push(I),this},XMLDocType.prototype.entity=function(_,v){var y;return y=new T(this,!1,_,v),this.children.push(y),this},XMLDocType.prototype.pEntity=function(_,v){var y;return y=new T(this,!0,_,v),this.children.push(y),this},XMLDocType.prototype.notation=function(_,v){var y;return y=new I(this,_,v),this.children.push(y),this},XMLDocType.prototype.toString=function(_){return this.options.writer.docType(this,this.options.writer.filterOptions(_))},XMLDocType.prototype.ele=function(_,v){return this.element(_,v)},XMLDocType.prototype.att=function(_,v,y,b,x){return this.attList(_,v,y,b,x)},XMLDocType.prototype.ent=function(_,v){return this.entity(_,v)},XMLDocType.prototype.pent=function(_,v){return this.pEntity(_,v)},XMLDocType.prototype.not=function(_,v){return this.notation(_,v)},XMLDocType.prototype.up=function(){return this.root()||this.documentObject},XMLDocType.prototype.isEqualNode=function(_){return!!XMLDocType.__super__.isEqualNode.apply(this,arguments).isEqualNode(_)&&(_.name===this.name&&(_.publicId===this.publicId&&_.systemId===this.systemId))},XMLDocType}(M)}).call(this)},6934:function(_,v,y){(function(){var v,b,x,T,I,S,M,A={}.hasOwnProperty;M=y(8369).isPlainObject,x=y(1770),b=y(383),T=y(2026),v=y(9335),S=y(5549),I=y(6434),_.exports=function(_){function XMLDocument(_){XMLDocument.__super__.constructor.call(this,null),this.name="#document",this.type=v.Document,this.documentURI=null,this.domConfig=new b,_||(_={}),_.writer||(_.writer=new I),this.options=_,this.stringify=new S(_)}return function(_,v){for(var y in v)A.call(v,y)&&(_[y]=v[y]);function ctor(){this.constructor=_}ctor.prototype=v.prototype,_.prototype=new ctor,_.__super__=v.prototype}(XMLDocument,_),Object.defineProperty(XMLDocument.prototype,"implementation",{value:new x}),Object.defineProperty(XMLDocument.prototype,"doctype",{get:function(){var _,y,b,x;for(y=0,b=(x=this.children).length;y<b;y++)if((_=x[y]).type===v.DocType)return _;return null}}),Object.defineProperty(XMLDocument.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(XMLDocument.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(XMLDocument.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(XMLDocument.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===v.Declaration?this.children[0].encoding:null}}),Object.defineProperty(XMLDocument.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===v.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(XMLDocument.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===v.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(XMLDocument.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(XMLDocument.prototype,"origin",{get:function(){return null}}),Object.defineProperty(XMLDocument.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(XMLDocument.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(XMLDocument.prototype,"contentType",{get:function(){return null}}),XMLDocument.prototype.end=function(_){var v;return v={},_?M(_)&&(v=_,_=this.options.writer):_=this.options.writer,_.document(this,_.filterOptions(v))},XMLDocument.prototype.toString=function(_){return this.options.writer.document(this,this.options.writer.filterOptions(_))},XMLDocument.prototype.createElement=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createTextNode=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createComment=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createCDATASection=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createProcessingInstruction=function(_,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createAttribute=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createEntityReference=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.getElementsByTagName=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.importNode=function(_,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createElementNS=function(_,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createAttributeNS=function(_,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.getElementsByTagNameNS=function(_,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.getElementById=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.adoptNode=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.renameNode=function(_,v,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.getElementsByClassName=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createEvent=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createNodeIterator=function(_,v,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createTreeWalker=function(_,v,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument}(T)}).call(this)},9227:function(_,v,y){(function(){var v,b,x,T,I,S,M,A,P,O,k,R,L,B,j,U,z,G,H,V,$,K,ee,re={}.hasOwnProperty;ee=y(8369),$=ee.isObject,V=ee.isFunction,K=ee.isPlainObject,H=ee.getValue,v=y(9335),R=y(6934),L=y(2161),T=y(6170),I=y(2096),j=y(9406),G=y(3595),B=y(9181),O=y(9077),k=y(8225),S=y(1179),A=y(9078),M=y(6347),P=y(4777),x=y(2750),z=y(5549),U=y(6434),b=y(594),_.exports=function(){function XMLDocumentCB(_,y,b){var x;this.name="?xml",this.type=v.Document,_||(_={}),x={},_.writer?K(_.writer)&&(x=_.writer,_.writer=new U):_.writer=new U,this.options=_,this.writer=_.writer,this.writerOptions=this.writer.filterOptions(x),this.stringify=new z(_),this.onDataCallback=y||function(){},this.onEndCallback=b||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return XMLDocumentCB.prototype.createChildNode=function(_){var y,b,x,T,I,S,M,A;switch(_.type){case v.CData:this.cdata(_.value);break;case v.Comment:this.comment(_.value);break;case v.Element:for(b in x={},M=_.attribs)re.call(M,b)&&(y=M[b],x[b]=y.value);this.node(_.name,x);break;case v.Dummy:this.dummy();break;case v.Raw:this.raw(_.value);break;case v.Text:this.text(_.value);break;case v.ProcessingInstruction:this.instruction(_.target,_.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+_.constructor.name)}for(I=0,S=(A=_.children).length;I<S;I++)T=A[I],this.createChildNode(T),T.type===v.Element&&this.up();return this},XMLDocumentCB.prototype.dummy=function(){return this},XMLDocumentCB.prototype.node=function(_,v,y){var b;if(null==_)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(_));return this.openCurrent(),_=H(_),null==v&&(v={}),v=H(v),$(v)||(y=(b=[v,y])[0],v=b[1]),this.currentNode=new L(this,_,v),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=y&&this.text(y),this},XMLDocumentCB.prototype.element=function(_,y,b){var x,T,I,S,M,A;if(this.currentNode&&this.currentNode.type===v.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(_)||$(_)||V(_))for(S=this.options.noValidation,this.options.noValidation=!0,(A=new R(this.options).element("TEMP_ROOT")).element(_),this.options.noValidation=S,T=0,I=(M=A.children).length;T<I;T++)x=M[T],this.createChildNode(x),x.type===v.Element&&this.up();else this.node(_,y,b);return this},XMLDocumentCB.prototype.attribute=function(_,v){var y,b;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(_));if(null!=_&&(_=H(_)),$(_))for(y in _)re.call(_,y)&&(b=_[y],this.attribute(y,b));else V(v)&&(v=v.apply()),this.options.keepNullAttributes&&null==v?this.currentNode.attribs[_]=new x(this,_,""):null!=v&&(this.currentNode.attribs[_]=new x(this,_,v));return this},XMLDocumentCB.prototype.text=function(_){var v;return this.openCurrent(),v=new G(this,_),this.onData(this.writer.text(v,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.cdata=function(_){var v;return this.openCurrent(),v=new T(this,_),this.onData(this.writer.cdata(v,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.comment=function(_){var v;return this.openCurrent(),v=new I(this,_),this.onData(this.writer.comment(v,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.raw=function(_){var v;return this.openCurrent(),v=new j(this,_),this.onData(this.writer.raw(v,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.instruction=function(_,v){var y,b,x,T,I;if(this.openCurrent(),null!=_&&(_=H(_)),null!=v&&(v=H(v)),Array.isArray(_))for(y=0,T=_.length;y<T;y++)b=_[y],this.instruction(b);else if($(_))for(b in _)re.call(_,b)&&(x=_[b],this.instruction(b,x));else V(v)&&(v=v.apply()),I=new B(this,_,v),this.onData(this.writer.processingInstruction(I,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},XMLDocumentCB.prototype.declaration=function(_,v,y){var b;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return b=new O(this,_,v,y),this.onData(this.writer.declaration(b,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.doctype=function(_,v,y){if(this.openCurrent(),null==_)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new k(this,v,y),this.currentNode.rootNodeName=_,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},XMLDocumentCB.prototype.dtdElement=function(_,v){var y;return this.openCurrent(),y=new M(this,_,v),this.onData(this.writer.dtdElement(y,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.attList=function(_,v,y,b,x){var T;return this.openCurrent(),T=new S(this,_,v,y,b,x),this.onData(this.writer.dtdAttList(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.entity=function(_,v){var y;return this.openCurrent(),y=new A(this,!1,_,v),this.onData(this.writer.dtdEntity(y,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.pEntity=function(_,v){var y;return this.openCurrent(),y=new A(this,!0,_,v),this.onData(this.writer.dtdEntity(y,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.notation=function(_,v){var y;return this.openCurrent(),y=new P(this,_,v),this.onData(this.writer.dtdNotation(y,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},XMLDocumentCB.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},XMLDocumentCB.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},XMLDocumentCB.prototype.openNode=function(_){var y,x,T,I;if(!_.isOpen){if(this.root||0!==this.currentLevel||_.type!==v.Element||(this.root=_),x="",_.type===v.Element){for(T in this.writerOptions.state=b.OpenTag,x=this.writer.indent(_,this.writerOptions,this.currentLevel)+"<"+_.name,I=_.attribs)re.call(I,T)&&(y=I[T],x+=this.writer.attribute(y,this.writerOptions,this.currentLevel));x+=(_.children?">":"/>")+this.writer.endline(_,this.writerOptions,this.currentLevel),this.writerOptions.state=b.InsideTag}else this.writerOptions.state=b.OpenTag,x=this.writer.indent(_,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+_.rootNodeName,_.pubID&&_.sysID?x+=' PUBLIC "'+_.pubID+'" "'+_.sysID+'"':_.sysID&&(x+=' SYSTEM "'+_.sysID+'"'),_.children?(x+=" [",this.writerOptions.state=b.InsideTag):(this.writerOptions.state=b.CloseTag,x+=">"),x+=this.writer.endline(_,this.writerOptions,this.currentLevel);return this.onData(x,this.currentLevel),_.isOpen=!0}},XMLDocumentCB.prototype.closeNode=function(_){var y;if(!_.isClosed)return y="",this.writerOptions.state=b.CloseTag,y=_.type===v.Element?this.writer.indent(_,this.writerOptions,this.currentLevel)+"</"+_.name+">"+this.writer.endline(_,this.writerOptions,this.currentLevel):this.writer.indent(_,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(_,this.writerOptions,this.currentLevel),this.writerOptions.state=b.None,this.onData(y,this.currentLevel),_.isClosed=!0},XMLDocumentCB.prototype.onData=function(_,v){return this.documentStarted=!0,this.onDataCallback(_,v+1)},XMLDocumentCB.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},XMLDocumentCB.prototype.debugInfo=function(_){return null==_?"":"node: <"+_+">"},XMLDocumentCB.prototype.ele=function(){return this.element.apply(this,arguments)},XMLDocumentCB.prototype.nod=function(_,v,y){return this.node(_,v,y)},XMLDocumentCB.prototype.txt=function(_){return this.text(_)},XMLDocumentCB.prototype.dat=function(_){return this.cdata(_)},XMLDocumentCB.prototype.com=function(_){return this.comment(_)},XMLDocumentCB.prototype.ins=function(_,v){return this.instruction(_,v)},XMLDocumentCB.prototype.dec=function(_,v,y){return this.declaration(_,v,y)},XMLDocumentCB.prototype.dtd=function(_,v,y){return this.doctype(_,v,y)},XMLDocumentCB.prototype.e=function(_,v,y){return this.element(_,v,y)},XMLDocumentCB.prototype.n=function(_,v,y){return this.node(_,v,y)},XMLDocumentCB.prototype.t=function(_){return this.text(_)},XMLDocumentCB.prototype.d=function(_){return this.cdata(_)},XMLDocumentCB.prototype.c=function(_){return this.comment(_)},XMLDocumentCB.prototype.r=function(_){return this.raw(_)},XMLDocumentCB.prototype.i=function(_,v){return this.instruction(_,v)},XMLDocumentCB.prototype.att=function(){return this.currentNode&&this.currentNode.type===v.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},XMLDocumentCB.prototype.a=function(){return this.currentNode&&this.currentNode.type===v.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},XMLDocumentCB.prototype.ent=function(_,v){return this.entity(_,v)},XMLDocumentCB.prototype.pent=function(_,v){return this.pEntity(_,v)},XMLDocumentCB.prototype.not=function(_,v){return this.notation(_,v)},XMLDocumentCB}()}).call(this)},8833:function(_,v,y){(function(){var v,b,x={}.hasOwnProperty;b=y(2026),v=y(9335),_.exports=function(_){function XMLDummy(_){XMLDummy.__super__.constructor.call(this,_),this.type=v.Dummy}return function(_,v){for(var y in v)x.call(v,y)&&(_[y]=v[y]);function ctor(){this.constructor=_}ctor.prototype=v.prototype,_.prototype=new ctor,_.__super__=v.prototype}(XMLDummy,_),XMLDummy.prototype.clone=function(){return Object.create(this)},XMLDummy.prototype.toString=function(_){return""},XMLDummy}(b)}).call(this)},2161:function(_,v,y){(function(){var v,b,x,T,I,S,M,A,P={}.hasOwnProperty;A=y(8369),M=A.isObject,S=A.isFunction,I=A.getValue,T=y(2026),v=y(9335),b=y(2750),x=y(663),_.exports=function(_){function XMLElement(_,y,b){var x,T,I,S;if(XMLElement.__super__.constructor.call(this,_),null==y)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(y),this.type=v.Element,this.attribs={},this.schemaTypeInfo=null,null!=b&&this.attribute(b),_.type===v.Document&&(this.isRoot=!0,this.documentObject=_,_.rootObject=this,_.children))for(T=0,I=(S=_.children).length;T<I;T++)if((x=S[T]).type===v.DocType){x.name=this.name;break}}return function(_,v){for(var y in v)P.call(v,y)&&(_[y]=v[y]);function ctor(){this.constructor=_}ctor.prototype=v.prototype,_.prototype=new ctor,_.__super__=v.prototype}(XMLElement,_),Object.defineProperty(XMLElement.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(XMLElement.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(XMLElement.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(XMLElement.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(XMLElement.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(XMLElement.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(XMLElement.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(XMLElement.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new x(this.attribs)),this.attributeMap}}),XMLElement.prototype.clone=function(){var _,v,y,b;for(v in(y=Object.create(this)).isRoot&&(y.documentObject=null),y.attribs={},b=this.attribs)P.call(b,v)&&(_=b[v],y.attribs[v]=_.clone());return y.children=[],this.children.forEach((function(_){var v;return(v=_.clone()).parent=y,y.children.push(v)})),y},XMLElement.prototype.attribute=function(_,v){var y,x;if(null!=_&&(_=I(_)),M(_))for(y in _)P.call(_,y)&&(x=_[y],this.attribute(y,x));else S(v)&&(v=v.apply()),this.options.keepNullAttributes&&null==v?this.attribs[_]=new b(this,_,""):null!=v&&(this.attribs[_]=new b(this,_,v));return this},XMLElement.prototype.removeAttribute=function(_){var v,y,b;if(null==_)throw new Error("Missing attribute name. "+this.debugInfo());if(_=I(_),Array.isArray(_))for(y=0,b=_.length;y<b;y++)v=_[y],delete this.attribs[v];else delete this.attribs[_];return this},XMLElement.prototype.toString=function(_){return this.options.writer.element(this,this.options.writer.filterOptions(_))},XMLElement.prototype.att=function(_,v){return this.attribute(_,v)},XMLElement.prototype.a=function(_,v){return this.attribute(_,v)},XMLElement.prototype.getAttribute=function(_){return this.attribs.hasOwnProperty(_)?this.attribs[_].value:null},XMLElement.prototype.setAttribute=function(_,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getAttributeNode=function(_){return this.attribs.hasOwnProperty(_)?this.attribs[_]:null},XMLElement.prototype.setAttributeNode=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.removeAttributeNode=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getElementsByTagName=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getAttributeNS=function(_,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.setAttributeNS=function(_,v,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.removeAttributeNS=function(_,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getAttributeNodeNS=function(_,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.setAttributeNodeNS=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getElementsByTagNameNS=function(_,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.hasAttribute=function(_){return this.attribs.hasOwnProperty(_)},XMLElement.prototype.hasAttributeNS=function(_,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.setIdAttribute=function(_,v){return this.attribs.hasOwnProperty(_)?this.attribs[_].isId:v},XMLElement.prototype.setIdAttributeNS=function(_,v,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.setIdAttributeNode=function(_,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getElementsByTagName=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getElementsByTagNameNS=function(_,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getElementsByClassName=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.isEqualNode=function(_){var v,y,b;if(!XMLElement.__super__.isEqualNode.apply(this,arguments).isEqualNode(_))return!1;if(_.namespaceURI!==this.namespaceURI)return!1;if(_.prefix!==this.prefix)return!1;if(_.localName!==this.localName)return!1;if(_.attribs.length!==this.attribs.length)return!1;for(v=y=0,b=this.attribs.length-1;0<=b?y<=b:y>=b;v=0<=b?++y:--y)if(!this.attribs[v].isEqualNode(_.attribs[v]))return!1;return!0},XMLElement}(T)}).call(this)},663:function(_){(function(){_.exports=function(){function XMLNamedNodeMap(_){this.nodes=_}return Object.defineProperty(XMLNamedNodeMap.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),XMLNamedNodeMap.prototype.clone=function(){return this.nodes=null},XMLNamedNodeMap.prototype.getNamedItem=function(_){return this.nodes[_]},XMLNamedNodeMap.prototype.setNamedItem=function(_){var v;return v=this.nodes[_.nodeName],this.nodes[_.nodeName]=_,v||null},XMLNamedNodeMap.prototype.removeNamedItem=function(_){var v;return v=this.nodes[_],delete this.nodes[_],v||null},XMLNamedNodeMap.prototype.item=function(_){return this.nodes[Object.keys(this.nodes)[_]]||null},XMLNamedNodeMap.prototype.getNamedItemNS=function(_,v){throw new Error("This DOM method is not implemented.")},XMLNamedNodeMap.prototype.setNamedItemNS=function(_){throw new Error("This DOM method is not implemented.")},XMLNamedNodeMap.prototype.removeNamedItemNS=function(_,v){throw new Error("This DOM method is not implemented.")},XMLNamedNodeMap}()}).call(this)},2026:function(_,v,y){(function(){var v,b,x,T,I,S,M,A,P,O,k,R,L,B,j,U,z,G={}.hasOwnProperty;z=y(8369),U=z.isObject,j=z.isFunction,B=z.isEmpty,L=z.getValue,A=null,x=null,T=null,I=null,S=null,k=null,R=null,O=null,M=null,b=null,P=null,v=null,_.exports=function(){function XMLNode(_){this.parent=_,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,A||(A=y(2161),x=y(6170),T=y(2096),I=y(9077),S=y(8225),k=y(9406),R=y(3595),O=y(9181),M=y(8833),b=y(9335),P=y(2390),y(663),v=y(7557))}return Object.defineProperty(XMLNode.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(XMLNode.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(XMLNode.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(XMLNode.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(XMLNode.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new P(this.children)),this.childNodeList}}),Object.defineProperty(XMLNode.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(XMLNode.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(XMLNode.prototype,"previousSibling",{get:function(){var _;return _=this.parent.children.indexOf(this),this.parent.children[_-1]||null}}),Object.defineProperty(XMLNode.prototype,"nextSibling",{get:function(){var _;return _=this.parent.children.indexOf(this),this.parent.children[_+1]||null}}),Object.defineProperty(XMLNode.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(XMLNode.prototype,"textContent",{get:function(){var _,v,y,x,T;if(this.nodeType===b.Element||this.nodeType===b.DocumentFragment){for(T="",v=0,y=(x=this.children).length;v<y;v++)(_=x[v]).textContent&&(T+=_.textContent);return T}return null},set:function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),XMLNode.prototype.setParent=function(_){var v,y,b,x,T;for(this.parent=_,_&&(this.options=_.options,this.stringify=_.stringify),T=[],y=0,b=(x=this.children).length;y<b;y++)v=x[y],T.push(v.setParent(this));return T},XMLNode.prototype.element=function(_,v,y){var b,x,T,I,S,M,A,P,O,k,R;if(M=null,null===v&&null==y&&(v=(O=[{},null])[0],y=O[1]),null==v&&(v={}),v=L(v),U(v)||(y=(k=[v,y])[0],v=k[1]),null!=_&&(_=L(_)),Array.isArray(_))for(T=0,A=_.length;T<A;T++)x=_[T],M=this.element(x);else if(j(_))M=this.element(_.apply());else if(U(_)){for(S in _)if(G.call(_,S))if(R=_[S],j(R)&&(R=R.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===S.indexOf(this.stringify.convertAttKey))M=this.attribute(S.substr(this.stringify.convertAttKey.length),R);else if(!this.options.separateArrayItems&&Array.isArray(R)&&B(R))M=this.dummy();else if(U(R)&&B(R))M=this.element(S);else if(this.options.keepNullNodes||null!=R)if(!this.options.separateArrayItems&&Array.isArray(R))for(I=0,P=R.length;I<P;I++)x=R[I],(b={})[S]=x,M=this.element(b);else U(R)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===S.indexOf(this.stringify.convertTextKey)?M=this.element(R):(M=this.element(S)).element(R):M=this.element(S,R);else M=this.dummy()}else M=this.options.keepNullNodes||null!==y?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===_.indexOf(this.stringify.convertTextKey)?this.text(y):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===_.indexOf(this.stringify.convertCDataKey)?this.cdata(y):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===_.indexOf(this.stringify.convertCommentKey)?this.comment(y):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===_.indexOf(this.stringify.convertRawKey)?this.raw(y):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===_.indexOf(this.stringify.convertPIKey)?this.instruction(_.substr(this.stringify.convertPIKey.length),y):this.node(_,v,y):this.dummy();if(null==M)throw new Error("Could not create any elements with: "+_+". "+this.debugInfo());return M},XMLNode.prototype.insertBefore=function(_,v,y){var b,x,T,I,S;if(null!=_?_.type:void 0)return I=v,(T=_).setParent(this),I?(x=children.indexOf(I),S=children.splice(x),children.push(T),Array.prototype.push.apply(children,S)):children.push(T),T;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(_));return x=this.parent.children.indexOf(this),S=this.parent.children.splice(x),b=this.parent.element(_,v,y),Array.prototype.push.apply(this.parent.children,S),b},XMLNode.prototype.insertAfter=function(_,v,y){var b,x,T;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(_));return x=this.parent.children.indexOf(this),T=this.parent.children.splice(x+1),b=this.parent.element(_,v,y),Array.prototype.push.apply(this.parent.children,T),b},XMLNode.prototype.remove=function(){var _;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return _=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[_,_-_+1].concat([])),this.parent},XMLNode.prototype.node=function(_,v,y){var b,x;return null!=_&&(_=L(_)),v||(v={}),v=L(v),U(v)||(y=(x=[v,y])[0],v=x[1]),b=new A(this,_,v),null!=y&&b.text(y),this.children.push(b),b},XMLNode.prototype.text=function(_){var v;return U(_)&&this.element(_),v=new R(this,_),this.children.push(v),this},XMLNode.prototype.cdata=function(_){var v;return v=new x(this,_),this.children.push(v),this},XMLNode.prototype.comment=function(_){var v;return v=new T(this,_),this.children.push(v),this},XMLNode.prototype.commentBefore=function(_){var v,y;return v=this.parent.children.indexOf(this),y=this.parent.children.splice(v),this.parent.comment(_),Array.prototype.push.apply(this.parent.children,y),this},XMLNode.prototype.commentAfter=function(_){var v,y;return v=this.parent.children.indexOf(this),y=this.parent.children.splice(v+1),this.parent.comment(_),Array.prototype.push.apply(this.parent.children,y),this},XMLNode.prototype.raw=function(_){var v;return v=new k(this,_),this.children.push(v),this},XMLNode.prototype.dummy=function(){return new M(this)},XMLNode.prototype.instruction=function(_,v){var y,b,x,T,I;if(null!=_&&(_=L(_)),null!=v&&(v=L(v)),Array.isArray(_))for(T=0,I=_.length;T<I;T++)y=_[T],this.instruction(y);else if(U(_))for(y in _)G.call(_,y)&&(b=_[y],this.instruction(y,b));else j(v)&&(v=v.apply()),x=new O(this,_,v),this.children.push(x);return this},XMLNode.prototype.instructionBefore=function(_,v){var y,b;return y=this.parent.children.indexOf(this),b=this.parent.children.splice(y),this.parent.instruction(_,v),Array.prototype.push.apply(this.parent.children,b),this},XMLNode.prototype.instructionAfter=function(_,v){var y,b;return y=this.parent.children.indexOf(this),b=this.parent.children.splice(y+1),this.parent.instruction(_,v),Array.prototype.push.apply(this.parent.children,b),this},XMLNode.prototype.declaration=function(_,v,y){var x,T;return x=this.document(),T=new I(x,_,v,y),0===x.children.length?x.children.unshift(T):x.children[0].type===b.Declaration?x.children[0]=T:x.children.unshift(T),x.root()||x},XMLNode.prototype.dtd=function(_,v){var y,x,T,I,M,A,P,O,k;for(y=this.document(),x=new S(y,_,v),T=I=0,A=(O=y.children).length;I<A;T=++I)if(O[T].type===b.DocType)return y.children[T]=x,x;for(T=M=0,P=(k=y.children).length;M<P;T=++M)if(k[T].isRoot)return y.children.splice(T,0,x),x;return y.children.push(x),x},XMLNode.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},XMLNode.prototype.root=function(){var _;for(_=this;_;){if(_.type===b.Document)return _.rootObject;if(_.isRoot)return _;_=_.parent}},XMLNode.prototype.document=function(){var _;for(_=this;_;){if(_.type===b.Document)return _;_=_.parent}},XMLNode.prototype.end=function(_){return this.document().end(_)},XMLNode.prototype.prev=function(){var _;if((_=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[_-1]},XMLNode.prototype.next=function(){var _;if(-1===(_=this.parent.children.indexOf(this))||_===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[_+1]},XMLNode.prototype.importDocument=function(_){var v;return(v=_.root().clone()).parent=this,v.isRoot=!1,this.children.push(v),this},XMLNode.prototype.debugInfo=function(_){var v,y;return null!=(_=_||this.name)||(null!=(v=this.parent)?v.name:void 0)?null==_?"parent: <"+this.parent.name+">":(null!=(y=this.parent)?y.name:void 0)?"node: <"+_+">, parent: <"+this.parent.name+">":"node: <"+_+">":""},XMLNode.prototype.ele=function(_,v,y){return this.element(_,v,y)},XMLNode.prototype.nod=function(_,v,y){return this.node(_,v,y)},XMLNode.prototype.txt=function(_){return this.text(_)},XMLNode.prototype.dat=function(_){return this.cdata(_)},XMLNode.prototype.com=function(_){return this.comment(_)},XMLNode.prototype.ins=function(_,v){return this.instruction(_,v)},XMLNode.prototype.doc=function(){return this.document()},XMLNode.prototype.dec=function(_,v,y){return this.declaration(_,v,y)},XMLNode.prototype.e=function(_,v,y){return this.element(_,v,y)},XMLNode.prototype.n=function(_,v,y){return this.node(_,v,y)},XMLNode.prototype.t=function(_){return this.text(_)},XMLNode.prototype.d=function(_){return this.cdata(_)},XMLNode.prototype.c=function(_){return this.comment(_)},XMLNode.prototype.r=function(_){return this.raw(_)},XMLNode.prototype.i=function(_,v){return this.instruction(_,v)},XMLNode.prototype.u=function(){return this.up()},XMLNode.prototype.importXMLBuilder=function(_){return this.importDocument(_)},XMLNode.prototype.replaceChild=function(_,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.removeChild=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.appendChild=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.hasChildNodes=function(){return 0!==this.children.length},XMLNode.prototype.cloneNode=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.isSupported=function(_,v){return!0},XMLNode.prototype.hasAttributes=function(){return 0!==this.attribs.length},XMLNode.prototype.compareDocumentPosition=function(_){var y;return this,this===_?0:this.document()!==_.document()?(y=v.Disconnected|v.ImplementationSpecific,Math.random()<.5?y|=v.Preceding:y|=v.Following,y):this.isAncestor(_)?v.Contains|v.Preceding:this.isDescendant(_)?v.Contains|v.Following:this.isPreceding(_)?v.Preceding:v.Following},XMLNode.prototype.isSameNode=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.lookupPrefix=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.isDefaultNamespace=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.lookupNamespaceURI=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.isEqualNode=function(_){var v,y,b;if(_.nodeType!==this.nodeType)return!1;if(_.children.length!==this.children.length)return!1;for(v=y=0,b=this.children.length-1;0<=b?y<=b:y>=b;v=0<=b?++y:--y)if(!this.children[v].isEqualNode(_.children[v]))return!1;return!0},XMLNode.prototype.getFeature=function(_,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.setUserData=function(_,v,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.getUserData=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.contains=function(_){return!!_&&(_===this||this.isDescendant(_))},XMLNode.prototype.isDescendant=function(_){var v,y,b,x;for(y=0,b=(x=this.children).length;y<b;y++){if(_===(v=x[y]))return!0;if(v.isDescendant(_))return!0}return!1},XMLNode.prototype.isAncestor=function(_){return _.isDescendant(this)},XMLNode.prototype.isPreceding=function(_){var v,y;return v=this.treePosition(_),y=this.treePosition(this),-1!==v&&-1!==y&&v<y},XMLNode.prototype.isFollowing=function(_){var v,y;return v=this.treePosition(_),y=this.treePosition(this),-1!==v&&-1!==y&&v>y},XMLNode.prototype.treePosition=function(_){var v,y;return y=0,v=!1,this.foreachTreeNode(this.document(),(function(b){if(y++,!v&&b===_)return v=!0})),v?y:-1},XMLNode.prototype.foreachTreeNode=function(_,v){var y,b,x,T,I;for(_||(_=this.document()),b=0,x=(T=_.children).length;b<x;b++){if(I=v(y=T[b]))return I;if(I=this.foreachTreeNode(y,v))return I}},XMLNode}()}).call(this)},2390:function(_){(function(){_.exports=function(){function XMLNodeList(_){this.nodes=_}return Object.defineProperty(XMLNodeList.prototype,"length",{get:function(){return this.nodes.length||0}}),XMLNodeList.prototype.clone=function(){return this.nodes=null},XMLNodeList.prototype.item=function(_){return this.nodes[_]||null},XMLNodeList}()}).call(this)},9181:function(_,v,y){(function(){var v,b,x={}.hasOwnProperty;v=y(9335),b=y(6488),_.exports=function(_){function XMLProcessingInstruction(_,y,b){if(XMLProcessingInstruction.__super__.constructor.call(this,_),null==y)throw new Error("Missing instruction target. "+this.debugInfo());this.type=v.ProcessingInstruction,this.target=this.stringify.insTarget(y),this.name=this.target,b&&(this.value=this.stringify.insValue(b))}return function(_,v){for(var y in v)x.call(v,y)&&(_[y]=v[y]);function ctor(){this.constructor=_}ctor.prototype=v.prototype,_.prototype=new ctor,_.__super__=v.prototype}(XMLProcessingInstruction,_),XMLProcessingInstruction.prototype.clone=function(){return Object.create(this)},XMLProcessingInstruction.prototype.toString=function(_){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(_))},XMLProcessingInstruction.prototype.isEqualNode=function(_){return!!XMLProcessingInstruction.__super__.isEqualNode.apply(this,arguments).isEqualNode(_)&&_.target===this.target},XMLProcessingInstruction}(b)}).call(this)},9406:function(_,v,y){(function(){var v,b,x={}.hasOwnProperty;v=y(9335),b=y(2026),_.exports=function(_){function XMLRaw(_,y){if(XMLRaw.__super__.constructor.call(this,_),null==y)throw new Error("Missing raw text. "+this.debugInfo());this.type=v.Raw,this.value=this.stringify.raw(y)}return function(_,v){for(var y in v)x.call(v,y)&&(_[y]=v[y]);function ctor(){this.constructor=_}ctor.prototype=v.prototype,_.prototype=new ctor,_.__super__=v.prototype}(XMLRaw,_),XMLRaw.prototype.clone=function(){return Object.create(this)},XMLRaw.prototype.toString=function(_){return this.options.writer.raw(this,this.options.writer.filterOptions(_))},XMLRaw}(b)}).call(this)},1996:function(_,v,y){(function(){var v,b,x,T={}.hasOwnProperty;v=y(9335),x=y(751),b=y(594),_.exports=function(_){function XMLStreamWriter(_,v){this.stream=_,XMLStreamWriter.__super__.constructor.call(this,v)}return function(_,v){for(var y in v)T.call(v,y)&&(_[y]=v[y]);function ctor(){this.constructor=_}ctor.prototype=v.prototype,_.prototype=new ctor,_.__super__=v.prototype}(XMLStreamWriter,_),XMLStreamWriter.prototype.endline=function(_,v,y){return _.isLastRootNode&&v.state===b.CloseTag?"":XMLStreamWriter.__super__.endline.call(this,_,v,y)},XMLStreamWriter.prototype.document=function(_,v){var y,b,x,T,I,S,M,A,P;for(b=x=0,I=(M=_.children).length;x<I;b=++x)(y=M[b]).isLastRootNode=b===_.children.length-1;for(v=this.filterOptions(v),P=[],T=0,S=(A=_.children).length;T<S;T++)y=A[T],P.push(this.writeChildNode(y,v,0));return P},XMLStreamWriter.prototype.attribute=function(_,v,y){return this.stream.write(XMLStreamWriter.__super__.attribute.call(this,_,v,y))},XMLStreamWriter.prototype.cdata=function(_,v,y){return this.stream.write(XMLStreamWriter.__super__.cdata.call(this,_,v,y))},XMLStreamWriter.prototype.comment=function(_,v,y){return this.stream.write(XMLStreamWriter.__super__.comment.call(this,_,v,y))},XMLStreamWriter.prototype.declaration=function(_,v,y){return this.stream.write(XMLStreamWriter.__super__.declaration.call(this,_,v,y))},XMLStreamWriter.prototype.docType=function(_,v,y){var x,T,I,S;if(y||(y=0),this.openNode(_,v,y),v.state=b.OpenTag,this.stream.write(this.indent(_,v,y)),this.stream.write("<!DOCTYPE "+_.root().name),_.pubID&&_.sysID?this.stream.write(' PUBLIC "'+_.pubID+'" "'+_.sysID+'"'):_.sysID&&this.stream.write(' SYSTEM "'+_.sysID+'"'),_.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(_,v,y)),v.state=b.InsideTag,T=0,I=(S=_.children).length;T<I;T++)x=S[T],this.writeChildNode(x,v,y+1);v.state=b.CloseTag,this.stream.write("]")}return v.state=b.CloseTag,this.stream.write(v.spaceBeforeSlash+">"),this.stream.write(this.endline(_,v,y)),v.state=b.None,this.closeNode(_,v,y)},XMLStreamWriter.prototype.element=function(_,y,x){var I,S,M,A,P,O,k,R,L;for(k in x||(x=0),this.openNode(_,y,x),y.state=b.OpenTag,this.stream.write(this.indent(_,y,x)+"<"+_.name),R=_.attribs)T.call(R,k)&&(I=R[k],this.attribute(I,y,x));if(A=0===(M=_.children.length)?null:_.children[0],0===M||_.children.every((function(_){return(_.type===v.Text||_.type===v.Raw)&&""===_.value})))y.allowEmpty?(this.stream.write(">"),y.state=b.CloseTag,this.stream.write("</"+_.name+">")):(y.state=b.CloseTag,this.stream.write(y.spaceBeforeSlash+"/>"));else if(!y.pretty||1!==M||A.type!==v.Text&&A.type!==v.Raw||null==A.value){for(this.stream.write(">"+this.endline(_,y,x)),y.state=b.InsideTag,P=0,O=(L=_.children).length;P<O;P++)S=L[P],this.writeChildNode(S,y,x+1);y.state=b.CloseTag,this.stream.write(this.indent(_,y,x)+"</"+_.name+">")}else this.stream.write(">"),y.state=b.InsideTag,y.suppressPrettyCount++,!0,this.writeChildNode(A,y,x+1),y.suppressPrettyCount--,!1,y.state=b.CloseTag,this.stream.write("</"+_.name+">");return this.stream.write(this.endline(_,y,x)),y.state=b.None,this.closeNode(_,y,x)},XMLStreamWriter.prototype.processingInstruction=function(_,v,y){return this.stream.write(XMLStreamWriter.__super__.processingInstruction.call(this,_,v,y))},XMLStreamWriter.prototype.raw=function(_,v,y){return this.stream.write(XMLStreamWriter.__super__.raw.call(this,_,v,y))},XMLStreamWriter.prototype.text=function(_,v,y){return this.stream.write(XMLStreamWriter.__super__.text.call(this,_,v,y))},XMLStreamWriter.prototype.dtdAttList=function(_,v,y){return this.stream.write(XMLStreamWriter.__super__.dtdAttList.call(this,_,v,y))},XMLStreamWriter.prototype.dtdElement=function(_,v,y){return this.stream.write(XMLStreamWriter.__super__.dtdElement.call(this,_,v,y))},XMLStreamWriter.prototype.dtdEntity=function(_,v,y){return this.stream.write(XMLStreamWriter.__super__.dtdEntity.call(this,_,v,y))},XMLStreamWriter.prototype.dtdNotation=function(_,v,y){return this.stream.write(XMLStreamWriter.__super__.dtdNotation.call(this,_,v,y))},XMLStreamWriter}(x)}).call(this)},6434:function(_,v,y){(function(){var v,b={}.hasOwnProperty;v=y(751),_.exports=function(_){function XMLStringWriter(_){XMLStringWriter.__super__.constructor.call(this,_)}return function(_,v){for(var y in v)b.call(v,y)&&(_[y]=v[y]);function ctor(){this.constructor=_}ctor.prototype=v.prototype,_.prototype=new ctor,_.__super__=v.prototype}(XMLStringWriter,_),XMLStringWriter.prototype.document=function(_,v){var y,b,x,T,I;for(v=this.filterOptions(v),T="",b=0,x=(I=_.children).length;b<x;b++)y=I[b],T+=this.writeChildNode(y,v,0);return v.pretty&&T.slice(-v.newline.length)===v.newline&&(T=T.slice(0,-v.newline.length)),T},XMLStringWriter}(v)}).call(this)},5549:function(_){(function(){var bind=function(_,v){return function(){return _.apply(v,arguments)}},v={}.hasOwnProperty;_.exports=function(){function XMLStringifier(_){var y,b,x;for(y in this.assertLegalName=bind(this.assertLegalName,this),this.assertLegalChar=bind(this.assertLegalChar,this),_||(_={}),this.options=_,this.options.version||(this.options.version="1.0"),b=_.stringify||{})v.call(b,y)&&(x=b[y],this[y]=x)}return XMLStringifier.prototype.name=function(_){return this.options.noValidation?_:this.assertLegalName(""+_||"")},XMLStringifier.prototype.text=function(_){return this.options.noValidation?_:this.assertLegalChar(this.textEscape(""+_||""))},XMLStringifier.prototype.cdata=function(_){return this.options.noValidation?_:(_=(_=""+_||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(_))},XMLStringifier.prototype.comment=function(_){if(this.options.noValidation)return _;if((_=""+_||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+_);return this.assertLegalChar(_)},XMLStringifier.prototype.raw=function(_){return this.options.noValidation?_:""+_||""},XMLStringifier.prototype.attValue=function(_){return this.options.noValidation?_:this.assertLegalChar(this.attEscape(_=""+_||""))},XMLStringifier.prototype.insTarget=function(_){return this.options.noValidation?_:this.assertLegalChar(""+_||"")},XMLStringifier.prototype.insValue=function(_){if(this.options.noValidation)return _;if((_=""+_||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+_);return this.assertLegalChar(_)},XMLStringifier.prototype.xmlVersion=function(_){if(this.options.noValidation)return _;if(!(_=""+_||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+_);return _},XMLStringifier.prototype.xmlEncoding=function(_){if(this.options.noValidation)return _;if(!(_=""+_||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+_);return this.assertLegalChar(_)},XMLStringifier.prototype.xmlStandalone=function(_){return this.options.noValidation?_:_?"yes":"no"},XMLStringifier.prototype.dtdPubID=function(_){return this.options.noValidation?_:this.assertLegalChar(""+_||"")},XMLStringifier.prototype.dtdSysID=function(_){return this.options.noValidation?_:this.assertLegalChar(""+_||"")},XMLStringifier.prototype.dtdElementValue=function(_){return this.options.noValidation?_:this.assertLegalChar(""+_||"")},XMLStringifier.prototype.dtdAttType=function(_){return this.options.noValidation?_:this.assertLegalChar(""+_||"")},XMLStringifier.prototype.dtdAttDefault=function(_){return this.options.noValidation?_:this.assertLegalChar(""+_||"")},XMLStringifier.prototype.dtdEntityValue=function(_){return this.options.noValidation?_:this.assertLegalChar(""+_||"")},XMLStringifier.prototype.dtdNData=function(_){return this.options.noValidation?_:this.assertLegalChar(""+_||"")},XMLStringifier.prototype.convertAttKey="@",XMLStringifier.prototype.convertPIKey="?",XMLStringifier.prototype.convertTextKey="#text",XMLStringifier.prototype.convertCDataKey="#cdata",XMLStringifier.prototype.convertCommentKey="#comment",XMLStringifier.prototype.convertRawKey="#raw",XMLStringifier.prototype.assertLegalChar=function(_){var v,y;if(this.options.noValidation)return _;if(v="","1.0"===this.options.version){if(v=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,y=_.match(v))throw new Error("Invalid character in string: "+_+" at index "+y.index)}else if("1.1"===this.options.version&&(v=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,y=_.match(v)))throw new Error("Invalid character in string: "+_+" at index "+y.index);return _},XMLStringifier.prototype.assertLegalName=function(_){var v;if(this.options.noValidation)return _;if(this.assertLegalChar(_),v=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!_.match(v))throw new Error("Invalid character in name");return _},XMLStringifier.prototype.textEscape=function(_){var v;return this.options.noValidation?_:(v=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,_.replace(v,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},XMLStringifier.prototype.attEscape=function(_){var v;return this.options.noValidation?_:(v=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,_.replace(v,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},XMLStringifier}()}).call(this)},3595:function(_,v,y){(function(){var v,b,x={}.hasOwnProperty;v=y(9335),b=y(6488),_.exports=function(_){function XMLText(_,y){if(XMLText.__super__.constructor.call(this,_),null==y)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=v.Text,this.value=this.stringify.text(y)}return function(_,v){for(var y in v)x.call(v,y)&&(_[y]=v[y]);function ctor(){this.constructor=_}ctor.prototype=v.prototype,_.prototype=new ctor,_.__super__=v.prototype}(XMLText,_),Object.defineProperty(XMLText.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(XMLText.prototype,"wholeText",{get:function(){var _,v,y;for(y="",v=this.previousSibling;v;)y=v.data+y,v=v.previousSibling;for(y+=this.data,_=this.nextSibling;_;)y+=_.data,_=_.nextSibling;return y}}),XMLText.prototype.clone=function(){return Object.create(this)},XMLText.prototype.toString=function(_){return this.options.writer.text(this,this.options.writer.filterOptions(_))},XMLText.prototype.splitText=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLText.prototype.replaceWholeText=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLText}(b)}).call(this)},751:function(_,v,y){(function(){var v,b,x,T={}.hasOwnProperty;x=y(8369).assign,v=y(9335),y(9077),y(8225),y(6170),y(2096),y(2161),y(9406),y(3595),y(9181),y(8833),y(1179),y(6347),y(9078),y(4777),b=y(594),_.exports=function(){function XMLWriterBase(_){var v,y,b;for(v in _||(_={}),this.options=_,y=_.writer||{})T.call(y,v)&&(b=y[v],this["_"+v]=this[v],this[v]=b)}return XMLWriterBase.prototype.filterOptions=function(_){var v,y,T,I,S,M,A,P;return _||(_={}),_=x({},this.options,_),(v={writer:this}).pretty=_.pretty||!1,v.allowEmpty=_.allowEmpty||!1,v.indent=null!=(y=_.indent)?y:"  ",v.newline=null!=(T=_.newline)?T:"\n",v.offset=null!=(I=_.offset)?I:0,v.dontPrettyTextNodes=null!=(S=null!=(M=_.dontPrettyTextNodes)?M:_.dontprettytextnodes)?S:0,v.spaceBeforeSlash=null!=(A=null!=(P=_.spaceBeforeSlash)?P:_.spacebeforeslash)?A:"",!0===v.spaceBeforeSlash&&(v.spaceBeforeSlash=" "),v.suppressPrettyCount=0,v.user={},v.state=b.None,v},XMLWriterBase.prototype.indent=function(_,v,y){var b;return!v.pretty||v.suppressPrettyCount?"":v.pretty&&(b=(y||0)+v.offset+1)>0?new Array(b).join(v.indent):""},XMLWriterBase.prototype.endline=function(_,v,y){return!v.pretty||v.suppressPrettyCount?"":v.newline},XMLWriterBase.prototype.attribute=function(_,v,y){var b;return this.openAttribute(_,v,y),b=" "+_.name+'="'+_.value+'"',this.closeAttribute(_,v,y),b},XMLWriterBase.prototype.cdata=function(_,v,y){var x;return this.openNode(_,v,y),v.state=b.OpenTag,x=this.indent(_,v,y)+"<![CDATA[",v.state=b.InsideTag,x+=_.value,v.state=b.CloseTag,x+="]]>"+this.endline(_,v,y),v.state=b.None,this.closeNode(_,v,y),x},XMLWriterBase.prototype.comment=function(_,v,y){var x;return this.openNode(_,v,y),v.state=b.OpenTag,x=this.indent(_,v,y)+"\x3c!-- ",v.state=b.InsideTag,x+=_.value,v.state=b.CloseTag,x+=" --\x3e"+this.endline(_,v,y),v.state=b.None,this.closeNode(_,v,y),x},XMLWriterBase.prototype.declaration=function(_,v,y){var x;return this.openNode(_,v,y),v.state=b.OpenTag,x=this.indent(_,v,y)+"<?xml",v.state=b.InsideTag,x+=' version="'+_.version+'"',null!=_.encoding&&(x+=' encoding="'+_.encoding+'"'),null!=_.standalone&&(x+=' standalone="'+_.standalone+'"'),v.state=b.CloseTag,x+=v.spaceBeforeSlash+"?>",x+=this.endline(_,v,y),v.state=b.None,this.closeNode(_,v,y),x},XMLWriterBase.prototype.docType=function(_,v,y){var x,T,I,S,M;if(y||(y=0),this.openNode(_,v,y),v.state=b.OpenTag,S=this.indent(_,v,y),S+="<!DOCTYPE "+_.root().name,_.pubID&&_.sysID?S+=' PUBLIC "'+_.pubID+'" "'+_.sysID+'"':_.sysID&&(S+=' SYSTEM "'+_.sysID+'"'),_.children.length>0){for(S+=" [",S+=this.endline(_,v,y),v.state=b.InsideTag,T=0,I=(M=_.children).length;T<I;T++)x=M[T],S+=this.writeChildNode(x,v,y+1);v.state=b.CloseTag,S+="]"}return v.state=b.CloseTag,S+=v.spaceBeforeSlash+">",S+=this.endline(_,v,y),v.state=b.None,this.closeNode(_,v,y),S},XMLWriterBase.prototype.element=function(_,y,x){var I,S,M,A,P,O,k,R,L,B,j,U,z,G;for(L in x||(x=0),B=!1,j="",this.openNode(_,y,x),y.state=b.OpenTag,j+=this.indent(_,y,x)+"<"+_.name,U=_.attribs)T.call(U,L)&&(I=U[L],j+=this.attribute(I,y,x));if(A=0===(M=_.children.length)?null:_.children[0],0===M||_.children.every((function(_){return(_.type===v.Text||_.type===v.Raw)&&""===_.value})))y.allowEmpty?(j+=">",y.state=b.CloseTag,j+="</"+_.name+">"+this.endline(_,y,x)):(y.state=b.CloseTag,j+=y.spaceBeforeSlash+"/>"+this.endline(_,y,x));else if(!y.pretty||1!==M||A.type!==v.Text&&A.type!==v.Raw||null==A.value){if(y.dontPrettyTextNodes)for(P=0,k=(z=_.children).length;P<k;P++)if(((S=z[P]).type===v.Text||S.type===v.Raw)&&null!=S.value){y.suppressPrettyCount++,B=!0;break}for(j+=">"+this.endline(_,y,x),y.state=b.InsideTag,O=0,R=(G=_.children).length;O<R;O++)S=G[O],j+=this.writeChildNode(S,y,x+1);y.state=b.CloseTag,j+=this.indent(_,y,x)+"</"+_.name+">",B&&y.suppressPrettyCount--,j+=this.endline(_,y,x),y.state=b.None}else j+=">",y.state=b.InsideTag,y.suppressPrettyCount++,B=!0,j+=this.writeChildNode(A,y,x+1),y.suppressPrettyCount--,B=!1,y.state=b.CloseTag,j+="</"+_.name+">"+this.endline(_,y,x);return this.closeNode(_,y,x),j},XMLWriterBase.prototype.writeChildNode=function(_,y,b){switch(_.type){case v.CData:return this.cdata(_,y,b);case v.Comment:return this.comment(_,y,b);case v.Element:return this.element(_,y,b);case v.Raw:return this.raw(_,y,b);case v.Text:return this.text(_,y,b);case v.ProcessingInstruction:return this.processingInstruction(_,y,b);case v.Dummy:return"";case v.Declaration:return this.declaration(_,y,b);case v.DocType:return this.docType(_,y,b);case v.AttributeDeclaration:return this.dtdAttList(_,y,b);case v.ElementDeclaration:return this.dtdElement(_,y,b);case v.EntityDeclaration:return this.dtdEntity(_,y,b);case v.NotationDeclaration:return this.dtdNotation(_,y,b);default:throw new Error("Unknown XML node type: "+_.constructor.name)}},XMLWriterBase.prototype.processingInstruction=function(_,v,y){var x;return this.openNode(_,v,y),v.state=b.OpenTag,x=this.indent(_,v,y)+"<?",v.state=b.InsideTag,x+=_.target,_.value&&(x+=" "+_.value),v.state=b.CloseTag,x+=v.spaceBeforeSlash+"?>",x+=this.endline(_,v,y),v.state=b.None,this.closeNode(_,v,y),x},XMLWriterBase.prototype.raw=function(_,v,y){var x;return this.openNode(_,v,y),v.state=b.OpenTag,x=this.indent(_,v,y),v.state=b.InsideTag,x+=_.value,v.state=b.CloseTag,x+=this.endline(_,v,y),v.state=b.None,this.closeNode(_,v,y),x},XMLWriterBase.prototype.text=function(_,v,y){var x;return this.openNode(_,v,y),v.state=b.OpenTag,x=this.indent(_,v,y),v.state=b.InsideTag,x+=_.value,v.state=b.CloseTag,x+=this.endline(_,v,y),v.state=b.None,this.closeNode(_,v,y),x},XMLWriterBase.prototype.dtdAttList=function(_,v,y){var x;return this.openNode(_,v,y),v.state=b.OpenTag,x=this.indent(_,v,y)+"<!ATTLIST",v.state=b.InsideTag,x+=" "+_.elementName+" "+_.attributeName+" "+_.attributeType,"#DEFAULT"!==_.defaultValueType&&(x+=" "+_.defaultValueType),_.defaultValue&&(x+=' "'+_.defaultValue+'"'),v.state=b.CloseTag,x+=v.spaceBeforeSlash+">"+this.endline(_,v,y),v.state=b.None,this.closeNode(_,v,y),x},XMLWriterBase.prototype.dtdElement=function(_,v,y){var x;return this.openNode(_,v,y),v.state=b.OpenTag,x=this.indent(_,v,y)+"<!ELEMENT",v.state=b.InsideTag,x+=" "+_.name+" "+_.value,v.state=b.CloseTag,x+=v.spaceBeforeSlash+">"+this.endline(_,v,y),v.state=b.None,this.closeNode(_,v,y),x},XMLWriterBase.prototype.dtdEntity=function(_,v,y){var x;return this.openNode(_,v,y),v.state=b.OpenTag,x=this.indent(_,v,y)+"<!ENTITY",v.state=b.InsideTag,_.pe&&(x+=" %"),x+=" "+_.name,_.value?x+=' "'+_.value+'"':(_.pubID&&_.sysID?x+=' PUBLIC "'+_.pubID+'" "'+_.sysID+'"':_.sysID&&(x+=' SYSTEM "'+_.sysID+'"'),_.nData&&(x+=" NDATA "+_.nData)),v.state=b.CloseTag,x+=v.spaceBeforeSlash+">"+this.endline(_,v,y),v.state=b.None,this.closeNode(_,v,y),x},XMLWriterBase.prototype.dtdNotation=function(_,v,y){var x;return this.openNode(_,v,y),v.state=b.OpenTag,x=this.indent(_,v,y)+"<!NOTATION",v.state=b.InsideTag,x+=" "+_.name,_.pubID&&_.sysID?x+=' PUBLIC "'+_.pubID+'" "'+_.sysID+'"':_.pubID?x+=' PUBLIC "'+_.pubID+'"':_.sysID&&(x+=' SYSTEM "'+_.sysID+'"'),v.state=b.CloseTag,x+=v.spaceBeforeSlash+">"+this.endline(_,v,y),v.state=b.None,this.closeNode(_,v,y),x},XMLWriterBase.prototype.openNode=function(_,v,y){},XMLWriterBase.prototype.closeNode=function(_,v,y){},XMLWriterBase.prototype.openAttribute=function(_,v,y){},XMLWriterBase.prototype.closeAttribute=function(_,v,y){},XMLWriterBase}()}).call(this)},5532:function(_,v,y){(function(){var v,b,x,T,I,S,M,A,P,O;O=y(8369),A=O.assign,P=O.isFunction,x=y(1770),T=y(6934),I=y(9227),M=y(6434),S=y(1996),v=y(9335),b=y(594),_.exports.create=function(_,v,y,b){var x,I;if(null==_)throw new Error("Root element needs a name.");return b=A({},v,y,b),I=(x=new T(b)).element(_),b.headless||(x.declaration(b),null==b.pubID&&null==b.sysID||x.dtd(b)),I},_.exports.begin=function(_,v,y){var b;return P(_)&&(v=(b=[_,v])[0],y=b[1],_={}),v?new I(_,v,y):new T(_)},_.exports.stringWriter=function(_){return new M(_)},_.exports.streamWriter=function(_,v){return new S(_,v)},_.exports.implementation=new x,_.exports.nodeType=v,_.exports.writerState=b}).call(this)},6656:_=>{"use strict";_.exports=require("imagemin")},4735:_=>{"use strict";_.exports=require("imagemin-gifsicle")},4459:_=>{"use strict";_.exports=require("imagemin-jpegtran")},6132:_=>{"use strict";_.exports=require("imagemin-optipng")},8139:_=>{"use strict";_.exports=require("imagemin-svgo")},4709:_=>{"use strict";_.exports=require("imagemin-webp")},9496:_=>{"use strict";_.exports=require("vscode")},9491:_=>{"use strict";_.exports=require("assert")},852:_=>{"use strict";_.exports=require("async_hooks")},4300:_=>{"use strict";_.exports=require("buffer")},2081:_=>{"use strict";_.exports=require("child_process")},6206:_=>{"use strict";_.exports=require("console")},2057:_=>{"use strict";_.exports=require("constants")},6113:_=>{"use strict";_.exports=require("crypto")},9523:_=>{"use strict";_.exports=require("dns")},2361:_=>{"use strict";_.exports=require("events")},7147:_=>{"use strict";_.exports=require("fs")},3685:_=>{"use strict";_.exports=require("http")},5687:_=>{"use strict";_.exports=require("https")},8188:_=>{"use strict";_.exports=require("module")},1808:_=>{"use strict";_.exports=require("net")},2037:_=>{"use strict";_.exports=require("os")},1017:_=>{"use strict";_.exports=require("path")},4074:_=>{"use strict";_.exports=require("perf_hooks")},3477:_=>{"use strict";_.exports=require("querystring")},2781:_=>{"use strict";_.exports=require("stream")},1576:_=>{"use strict";_.exports=require("string_decoder")},9512:_=>{"use strict";_.exports=require("timers")},7310:_=>{"use strict";_.exports=require("url")},3837:_=>{"use strict";_.exports=require("util")},9796:_=>{"use strict";_.exports=require("zlib")},3897:_=>{_.exports=function _arrayLikeToArray(_,v){(null==v||v>_.length)&&(v=_.length);for(var y=0,b=new Array(v);y<v;y++)b[y]=_[y];return b},_.exports.__esModule=!0,_.exports.default=_.exports},5372:_=>{_.exports=function _arrayWithHoles(_){if(Array.isArray(_))return _},_.exports.__esModule=!0,_.exports.default=_.exports},3405:(_,v,y)=>{var b=y(3897);_.exports=function _arrayWithoutHoles(_){if(Array.isArray(_))return b(_)},_.exports.__esModule=!0,_.exports.default=_.exports},6115:_=>{_.exports=function _assertThisInitialized(_){if(void 0===_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _},_.exports.__esModule=!0,_.exports.default=_.exports},6690:_=>{_.exports=function _classCallCheck(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")},_.exports.__esModule=!0,_.exports.default=_.exports},3515:(_,v,y)=>{var b=y(6015),x=y(9617);function _construct(v,y,T){return x()?(_.exports=_construct=Reflect.construct.bind(),_.exports.__esModule=!0,_.exports.default=_.exports):(_.exports=_construct=function _construct(_,v,y){var x=[null];x.push.apply(x,v);var T=new(Function.bind.apply(_,x));return y&&b(T,y.prototype),T},_.exports.__esModule=!0,_.exports.default=_.exports),_construct.apply(null,arguments)}_.exports=_construct,_.exports.__esModule=!0,_.exports.default=_.exports},9728:(_,v,y)=>{var b=y(4062);function _defineProperties(_,v){for(var y=0;y<v.length;y++){var x=v[y];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(_,b(x.key),x)}}_.exports=function _createClass(_,v,y){return v&&_defineProperties(_.prototype,v),y&&_defineProperties(_,y),Object.defineProperty(_,"prototype",{writable:!1}),_},_.exports.__esModule=!0,_.exports.default=_.exports},8416:(_,v,y)=>{var b=y(4062);_.exports=function _defineProperty(_,v,y){return(v=b(v))in _?Object.defineProperty(_,v,{value:y,enumerable:!0,configurable:!0,writable:!0}):_[v]=y,_},_.exports.__esModule=!0,_.exports.default=_.exports},434:_=>{function _extends(){return _.exports=_extends=Object.assign?Object.assign.bind():function(_){for(var v=1;v<arguments.length;v++){var y=arguments[v];for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(_[b]=y[b])}return _},_.exports.__esModule=!0,_.exports.default=_.exports,_extends.apply(this,arguments)}_.exports=_extends,_.exports.__esModule=!0,_.exports.default=_.exports},3808:_=>{function _getPrototypeOf(v){return _.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(_){return _.__proto__||Object.getPrototypeOf(_)},_.exports.__esModule=!0,_.exports.default=_.exports,_getPrototypeOf(v)}_.exports=_getPrototypeOf,_.exports.__esModule=!0,_.exports.default=_.exports},1655:(_,v,y)=>{var b=y(6015);_.exports=function _inherits(_,v){if("function"!=typeof v&&null!==v)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),v&&b(_,v)},_.exports.__esModule=!0,_.exports.default=_.exports},4836:_=>{_.exports=function _interopRequireDefault(_){return _&&_.__esModule?_:{default:_}},_.exports.__esModule=!0,_.exports.default=_.exports},5263:(_,v,y)=>{var b=y(8698).default;function _getRequireWildcardCache(_){if("function"!=typeof WeakMap)return null;var v=new WeakMap,y=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(_){return _?y:v})(_)}_.exports=function _interopRequireWildcard(_,v){if(!v&&_&&_.__esModule)return _;if(null===_||"object"!==b(_)&&"function"!=typeof _)return{default:_};var y=_getRequireWildcardCache(v);if(y&&y.has(_))return y.get(_);var x={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in _)if("default"!==I&&Object.prototype.hasOwnProperty.call(_,I)){var S=T?Object.getOwnPropertyDescriptor(_,I):null;S&&(S.get||S.set)?Object.defineProperty(x,I,S):x[I]=_[I]}return x.default=_,y&&y.set(_,x),x},_.exports.__esModule=!0,_.exports.default=_.exports},9617:_=>{_.exports=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(_){return!1}},_.exports.__esModule=!0,_.exports.default=_.exports},9498:_=>{_.exports=function _iterableToArray(_){if("undefined"!=typeof Symbol&&null!=_[Symbol.iterator]||null!=_["@@iterator"])return Array.from(_)},_.exports.__esModule=!0,_.exports.default=_.exports},8872:_=>{_.exports=function _iterableToArrayLimit(_,v){var y=null==_?null:"undefined"!=typeof Symbol&&_[Symbol.iterator]||_["@@iterator"];if(null!=y){var b,x,T,I,S=[],M=!0,A=!1;try{if(T=(y=y.call(_)).next,0===v){if(Object(y)!==y)return;M=!1}else for(;!(M=(b=T.call(y)).done)&&(S.push(b.value),S.length!==v);M=!0);}catch(_){A=!0,x=_}finally{try{if(!M&&null!=y.return&&(I=y.return(),Object(I)!==I))return}finally{if(A)throw x}}return S}},_.exports.__esModule=!0,_.exports.default=_.exports},2218:_=>{_.exports=function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},_.exports.__esModule=!0,_.exports.default=_.exports},2281:_=>{_.exports=function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},_.exports.__esModule=!0,_.exports.default=_.exports},4993:(_,v,y)=>{var b=y(8698).default,x=y(6115);_.exports=function _possibleConstructorReturn(_,v){if(v&&("object"===b(v)||"function"==typeof v))return v;if(void 0!==v)throw new TypeError("Derived constructors may only return object or undefined");return x(_)},_.exports.__esModule=!0,_.exports.default=_.exports},7061:(_,v,y)=>{var b=y(8698).default;function _regeneratorRuntime(){"use strict";_.exports=_regeneratorRuntime=function _regeneratorRuntime(){return v},_.exports.__esModule=!0,_.exports.default=_.exports;var v={},y=Object.prototype,x=y.hasOwnProperty,T=Object.defineProperty||function(_,v,y){_[v]=y.value},I="function"==typeof Symbol?Symbol:{},S=I.iterator||"@@iterator",M=I.asyncIterator||"@@asyncIterator",A=I.toStringTag||"@@toStringTag";function define(_,v,y){return Object.defineProperty(_,v,{value:y,enumerable:!0,configurable:!0,writable:!0}),_[v]}try{define({},"")}catch(_){define=function define(_,v,y){return _[v]=y}}function wrap(_,v,y,b){var x=v&&v.prototype instanceof Generator?v:Generator,I=Object.create(x.prototype),S=new Context(b||[]);return T(I,"_invoke",{value:makeInvokeMethod(_,y,S)}),I}function tryCatch(_,v,y){try{return{type:"normal",arg:_.call(v,y)}}catch(_){return{type:"throw",arg:_}}}v.wrap=wrap;var P={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var O={};define(O,S,(function(){return this}));var k=Object.getPrototypeOf,R=k&&k(k(values([])));R&&R!==y&&x.call(R,S)&&(O=R);var L=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(O);function defineIteratorMethods(_){["next","throw","return"].forEach((function(v){define(_,v,(function(_){return this._invoke(v,_)}))}))}function AsyncIterator(_,v){var y;T(this,"_invoke",{value:function value(T,I){function callInvokeWithMethodAndArg(){return new v((function(y,S){!function invoke(y,T,I,S){var M=tryCatch(_[y],_,T);if("throw"!==M.type){var A=M.arg,P=A.value;return P&&"object"==b(P)&&x.call(P,"__await")?v.resolve(P.__await).then((function(_){invoke("next",_,I,S)}),(function(_){invoke("throw",_,I,S)})):v.resolve(P).then((function(_){A.value=_,I(A)}),(function(_){return invoke("throw",_,I,S)}))}S(M.arg)}(T,I,y,S)}))}return y=y?y.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(_,v,y){var b="suspendedStart";return function(x,T){if("executing"===b)throw new Error("Generator is already running");if("completed"===b){if("throw"===x)throw T;return doneResult()}for(y.method=x,y.arg=T;;){var I=y.delegate;if(I){var S=maybeInvokeDelegate(I,y);if(S){if(S===P)continue;return S}}if("next"===y.method)y.sent=y._sent=y.arg;else if("throw"===y.method){if("suspendedStart"===b)throw b="completed",y.arg;y.dispatchException(y.arg)}else"return"===y.method&&y.abrupt("return",y.arg);b="executing";var M=tryCatch(_,v,y);if("normal"===M.type){if(b=y.done?"completed":"suspendedYield",M.arg===P)continue;return{value:M.arg,done:y.done}}"throw"===M.type&&(b="completed",y.method="throw",y.arg=M.arg)}}}function maybeInvokeDelegate(_,v){var y=v.method,b=_.iterator[y];if(void 0===b)return v.delegate=null,"throw"===y&&_.iterator.return&&(v.method="return",v.arg=void 0,maybeInvokeDelegate(_,v),"throw"===v.method)||"return"!==y&&(v.method="throw",v.arg=new TypeError("The iterator does not provide a '"+y+"' method")),P;var x=tryCatch(b,_.iterator,v.arg);if("throw"===x.type)return v.method="throw",v.arg=x.arg,v.delegate=null,P;var T=x.arg;return T?T.done?(v[_.resultName]=T.value,v.next=_.nextLoc,"return"!==v.method&&(v.method="next",v.arg=void 0),v.delegate=null,P):T:(v.method="throw",v.arg=new TypeError("iterator result is not an object"),v.delegate=null,P)}function pushTryEntry(_){var v={tryLoc:_[0]};1 in _&&(v.catchLoc=_[1]),2 in _&&(v.finallyLoc=_[2],v.afterLoc=_[3]),this.tryEntries.push(v)}function resetTryEntry(_){var v=_.completion||{};v.type="normal",delete v.arg,_.completion=v}function Context(_){this.tryEntries=[{tryLoc:"root"}],_.forEach(pushTryEntry,this),this.reset(!0)}function values(_){if(_){var v=_[S];if(v)return v.call(_);if("function"==typeof _.next)return _;if(!isNaN(_.length)){var y=-1,b=function next(){for(;++y<_.length;)if(x.call(_,y))return next.value=_[y],next.done=!1,next;return next.value=void 0,next.done=!0,next};return b.next=b}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,T(L,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),T(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,A,"GeneratorFunction"),v.isGeneratorFunction=function(_){var v="function"==typeof _&&_.constructor;return!!v&&(v===GeneratorFunction||"GeneratorFunction"===(v.displayName||v.name))},v.mark=function(_){return Object.setPrototypeOf?Object.setPrototypeOf(_,GeneratorFunctionPrototype):(_.__proto__=GeneratorFunctionPrototype,define(_,A,"GeneratorFunction")),_.prototype=Object.create(L),_},v.awrap=function(_){return{__await:_}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,M,(function(){return this})),v.AsyncIterator=AsyncIterator,v.async=function(_,y,b,x,T){void 0===T&&(T=Promise);var I=new AsyncIterator(wrap(_,y,b,x),T);return v.isGeneratorFunction(y)?I:I.next().then((function(_){return _.done?_.value:I.next()}))},defineIteratorMethods(L),define(L,A,"Generator"),define(L,S,(function(){return this})),define(L,"toString",(function(){return"[object Generator]"})),v.keys=function(_){var v=Object(_),y=[];for(var b in v)y.push(b);return y.reverse(),function next(){for(;y.length;){var _=y.pop();if(_ in v)return next.value=_,next.done=!1,next}return next.done=!0,next}},v.values=values,Context.prototype={constructor:Context,reset:function reset(_){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!_)for(var v in this)"t"===v.charAt(0)&&x.call(this,v)&&!isNaN(+v.slice(1))&&(this[v]=void 0)},stop:function stop(){this.done=!0;var _=this.tryEntries[0].completion;if("throw"===_.type)throw _.arg;return this.rval},dispatchException:function dispatchException(_){if(this.done)throw _;var v=this;function handle(y,b){return T.type="throw",T.arg=_,v.next=y,b&&(v.method="next",v.arg=void 0),!!b}for(var y=this.tryEntries.length-1;y>=0;--y){var b=this.tryEntries[y],T=b.completion;if("root"===b.tryLoc)return handle("end");if(b.tryLoc<=this.prev){var I=x.call(b,"catchLoc"),S=x.call(b,"finallyLoc");if(I&&S){if(this.prev<b.catchLoc)return handle(b.catchLoc,!0);if(this.prev<b.finallyLoc)return handle(b.finallyLoc)}else if(I){if(this.prev<b.catchLoc)return handle(b.catchLoc,!0)}else{if(!S)throw new Error("try statement without catch or finally");if(this.prev<b.finallyLoc)return handle(b.finallyLoc)}}}},abrupt:function abrupt(_,v){for(var y=this.tryEntries.length-1;y>=0;--y){var b=this.tryEntries[y];if(b.tryLoc<=this.prev&&x.call(b,"finallyLoc")&&this.prev<b.finallyLoc){var T=b;break}}T&&("break"===_||"continue"===_)&&T.tryLoc<=v&&v<=T.finallyLoc&&(T=null);var I=T?T.completion:{};return I.type=_,I.arg=v,T?(this.method="next",this.next=T.finallyLoc,P):this.complete(I)},complete:function complete(_,v){if("throw"===_.type)throw _.arg;return"break"===_.type||"continue"===_.type?this.next=_.arg:"return"===_.type?(this.rval=this.arg=_.arg,this.method="return",this.next="end"):"normal"===_.type&&v&&(this.next=v),P},finish:function finish(_){for(var v=this.tryEntries.length-1;v>=0;--v){var y=this.tryEntries[v];if(y.finallyLoc===_)return this.complete(y.completion,y.afterLoc),resetTryEntry(y),P}},catch:function _catch(_){for(var v=this.tryEntries.length-1;v>=0;--v){var y=this.tryEntries[v];if(y.tryLoc===_){var b=y.completion;if("throw"===b.type){var x=b.arg;resetTryEntry(y)}return x}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(_,v,y){return this.delegate={iterator:values(_),resultName:v,nextLoc:y},"next"===this.method&&(this.arg=void 0),P}},v}_.exports=_regeneratorRuntime,_.exports.__esModule=!0,_.exports.default=_.exports},6015:_=>{function _setPrototypeOf(v,y){return _.exports=_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(_,v){return _.__proto__=v,_},_.exports.__esModule=!0,_.exports.default=_.exports,_setPrototypeOf(v,y)}_.exports=_setPrototypeOf,_.exports.__esModule=!0,_.exports.default=_.exports},7424:(_,v,y)=>{var b=y(5372),x=y(8872),T=y(6116),I=y(2218);_.exports=function _slicedToArray(_,v){return b(_)||x(_,v)||T(_,v)||I()},_.exports.__esModule=!0,_.exports.default=_.exports},861:(_,v,y)=>{var b=y(3405),x=y(9498),T=y(6116),I=y(2281);_.exports=function _toConsumableArray(_){return b(_)||x(_)||T(_)||I()},_.exports.__esModule=!0,_.exports.default=_.exports},5036:(_,v,y)=>{var b=y(8698).default;_.exports=function _toPrimitive(_,v){if("object"!==b(_)||null===_)return _;var y=_[Symbol.toPrimitive];if(void 0!==y){var x=y.call(_,v||"default");if("object"!==b(x))return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===v?String:Number)(_)},_.exports.__esModule=!0,_.exports.default=_.exports},4062:(_,v,y)=>{var b=y(8698).default,x=y(5036);_.exports=function _toPropertyKey(_){var v=x(_,"string");return"symbol"===b(v)?v:String(v)},_.exports.__esModule=!0,_.exports.default=_.exports},8698:_=>{function _typeof(v){return _.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_.exports.__esModule=!0,_.exports.default=_.exports,_typeof(v)}_.exports=_typeof,_.exports.__esModule=!0,_.exports.default=_.exports},6116:(_,v,y)=>{var b=y(3897);_.exports=function _unsupportedIterableToArray(_,v){if(_){if("string"==typeof _)return b(_,v);var y=Object.prototype.toString.call(_).slice(8,-1);return"Object"===y&&_.constructor&&(y=_.constructor.name),"Map"===y||"Set"===y?Array.from(_):"Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?b(_,v):void 0}},_.exports.__esModule=!0,_.exports.default=_.exports},4687:(_,v,y)=>{var b=y(7061)();_.exports=b;try{regeneratorRuntime=b}catch(_){"object"==typeof globalThis?globalThis.regeneratorRuntime=b:Function("r","regeneratorRuntime = r")(b)}},9160:_=>{var v=Object.defineProperty,y=Object.getOwnPropertyDescriptor,b=Object.getOwnPropertyNames,x=Object.prototype.hasOwnProperty,__export=(_,y)=>{for(var b in y)v(_,b,{get:y[b],enumerable:!0})},T=(_=>(T,I)=>_&&_.get(T)||(I=((_,T,I,S)=>{if(T&&"object"==typeof T||"function"==typeof T)for(let M of b(T))x.call(_,M)||!I&&"default"===M||v(_,M,{get:()=>T[M],enumerable:!(S=y(T,M))||S.enumerable});return _})(v({},"__esModule",{value:!0}),T,1),_&&_.set(T,I),I))("undefined"!=typeof WeakMap?new WeakMap:0),__publicField=(_,y,b)=>(((_,y,b)=>{y in _?v(_,y,{enumerable:!0,configurable:!0,writable:!0,value:b}):_[y]=b})(_,"symbol"!=typeof y?y+"":y,b),b),I={};__export(I,{applyPalette:()=>applyPalette,applyPaletteSync:()=>applyPaletteSync,buildPalette:()=>buildPalette,buildPaletteSync:()=>buildPaletteSync,constants:()=>S,conversion:()=>k,distance:()=>L,image:()=>ke,palette:()=>ce,quality:()=>ze,utils:()=>fe});var S={};__export(S,{bt709:()=>M});var M={};__export(M,{Y:()=>A,x:()=>P,y:()=>O});var A=(_=>(_[_.RED=.2126]="RED",_[_.GREEN=.7152]="GREEN",_[_.BLUE=.0722]="BLUE",_[_.WHITE=1]="WHITE",_))(A||{}),P=(_=>(_[_.RED=.64]="RED",_[_.GREEN=.3]="GREEN",_[_.BLUE=.15]="BLUE",_[_.WHITE=.3127]="WHITE",_))(P||{}),O=(_=>(_[_.RED=.33]="RED",_[_.GREEN=.6]="GREEN",_[_.BLUE=.06]="BLUE",_[_.WHITE=.329]="WHITE",_))(O||{}),k={};function correctGamma(_){return _>.04045?((_+.055)/1.055)**2.4:_/12.92}function rgb2xyz(_,v,y){return{x:.4124*(_=correctGamma(_/255))+.3576*(v=correctGamma(v/255))+.1805*(y=correctGamma(y/255)),y:.2126*_+.7152*v+.0722*y,z:.0193*_+.1192*v+.9505*y}}__export(k,{lab2rgb:()=>lab2rgb,lab2xyz:()=>lab2xyz,rgb2hsl:()=>rgb2hsl,rgb2lab:()=>rgb2lab,rgb2xyz:()=>rgb2xyz,xyz2lab:()=>xyz2lab,xyz2rgb:()=>xyz2rgb});var R={};function degrees2radians(_){return _*(Math.PI/180)}function max3(_,v,y){let b=_;return b<v&&(b=v),b<y&&(b=y),b}function min3(_,v,y){let b=_;return b>v&&(b=v),b>y&&(b=y),b}function intInRange(_,v,y){return _>y&&(_=y),_<v&&(_=v),0|_}function inRange0to255Rounded(_){return(_=Math.round(_))>255?_=255:_<0&&(_=0),_}function inRange0to255(_){return _>255?_=255:_<0&&(_=0),_}function stableSort(_,v){const y=typeof _[0];let b;if("number"===y||"string"===y){const y=Object.create(null);for(let v=0,b=_.length;v<b;v++){const b=_[v];y[b]||0===y[b]||(y[b]=v)}b=_.sort((_,b)=>v(_,b)||y[_]-y[b])}else{const y=_.slice(0);b=_.sort((_,b)=>v(_,b)||y.indexOf(_)-y.indexOf(b))}return b}function rgb2hsl(_,v,y){const b=min3(_,v,y),x=max3(_,v,y),T=x-b,I=(b+x)/510;let S=0;I>0&&I<1&&(S=T/(I<.5?x+b:510-x-b));let M=0;return T>0&&(M=x===_?(v-y)/T:x===v?2+(y-_)/T:4+(_-v)/T,M*=60,M<0&&(M+=360)),{h:M,s:S,l:I}}__export(R,{degrees2radians:()=>degrees2radians,inRange0to255:()=>inRange0to255,inRange0to255Rounded:()=>inRange0to255Rounded,intInRange:()=>intInRange,max3:()=>max3,min3:()=>min3,stableSort:()=>stableSort});function pivot(_){return _>.008856?_**(1/3):7.787*_+16/116}function xyz2lab(_,v,y){if(_=pivot(_/.95047),v=pivot(v/1),y=pivot(y/1.08883),116*v-16<0)throw new Error("xxx");return{L:Math.max(0,116*v-16),a:500*(_-v),b:200*(v-y)}}function rgb2lab(_,v,y){const b=rgb2xyz(_,v,y);return xyz2lab(b.x,b.y,b.z)}function pivot2(_){return _>.206893034?_**3:(_-16/116)/7.787}function lab2xyz(_,v,y){const b=(_+16)/116,x=b-y/200;return{x:.95047*pivot2(v/500+b),y:1*pivot2(b),z:1.08883*pivot2(x)}}function correctGamma2(_){return _>.0031308?1.055*_**(1/2.4)-.055:12.92*_}function xyz2rgb(_,v,y){const b=correctGamma2(3.2406*_+-1.5372*v+-.4986*y),x=correctGamma2(-.9689*_+1.8758*v+.0415*y),T=correctGamma2(.0557*_+-.204*v+1.057*y);return{r:inRange0to255Rounded(255*b),g:inRange0to255Rounded(255*x),b:inRange0to255Rounded(255*T)}}function lab2rgb(_,v,y){const b=lab2xyz(_,v,y);return xyz2rgb(b.x,b.y,b.z)}var L={};__export(L,{AbstractDistanceCalculator:()=>B,AbstractEuclidean:()=>$,AbstractManhattan:()=>ie,CIE94GraphicArts:()=>z,CIE94Textiles:()=>U,CIEDE2000:()=>H,CMetric:()=>V,Euclidean:()=>K,EuclideanBT709:()=>ee,EuclideanBT709NoAlpha:()=>re,Manhattan:()=>ne,ManhattanBT709:()=>oe,ManhattanNommyde:()=>ae,PNGQuant:()=>se});var B=class{constructor(){__publicField(this,"_maxDistance"),__publicField(this,"_whitePoint"),this._setDefaults(),this.setWhitePoint(255,255,255,255)}setWhitePoint(_,v,y,b){this._whitePoint={r:_>0?255/_:0,g:v>0?255/v:0,b:y>0?255/y:0,a:b>0?255/b:0},this._maxDistance=this.calculateRaw(_,v,y,b,0,0,0,0)}calculateNormalized(_,v){return this.calculateRaw(_.r,_.g,_.b,_.a,v.r,v.g,v.b,v.a)/this._maxDistance}},j=class extends B{calculateRaw(_,v,y,b,x,T,I,S){const M=rgb2lab(inRange0to255(_*this._whitePoint.r),inRange0to255(v*this._whitePoint.g),inRange0to255(y*this._whitePoint.b)),A=rgb2lab(inRange0to255(x*this._whitePoint.r),inRange0to255(T*this._whitePoint.g),inRange0to255(I*this._whitePoint.b)),P=M.L-A.L,O=M.a-A.a,k=M.b-A.b,R=Math.sqrt(M.a*M.a+M.b*M.b),L=R-Math.sqrt(A.a*A.a+A.b*A.b);let B=O*O+k*k-L*L;B=B<0?0:Math.sqrt(B);const j=(S-b)*this._whitePoint.a*this._kA;return Math.sqrt((P/this._Kl)**2+(L/(1+this._K1*R))**2+(B/(1+this._K2*R))**2+j**2)}},U=class extends j{_setDefaults(){this._Kl=2,this._K1=.048,this._K2=.014,this._kA=12.5/255}},z=class extends j{_setDefaults(){this._Kl=1,this._K1=.045,this._K2=.015,this._kA=25/255}},G=class extends B{_setDefaults(){}static _calculatehp(_,v){const y=Math.atan2(_,v);return y>=0?y:y+G._deg360InRad}static _calculateRT(_,v){const y=v**7,b=2*Math.sqrt(y/(y+G._pow25to7)),x=G._deg30InRad*Math.exp(-(((_-G._deg275InRad)/G._deg25InRad)**2));return-Math.sin(2*x)*b}static _calculateT(_){return 1-.17*Math.cos(_-G._deg30InRad)+.24*Math.cos(2*_)+.32*Math.cos(3*_+G._deg6InRad)-.2*Math.cos(4*_-G._deg63InRad)}static _calculate_ahp(_,v,y,b){const x=y+b;return 0===_?x:v<=G._deg180InRad?x/2:x<G._deg360InRad?(x+G._deg360InRad)/2:(x-G._deg360InRad)/2}static _calculate_dHp(_,v,y,b){let x;return x=0===_?0:v<=G._deg180InRad?y-b:y<=b?y-b+G._deg360InRad:y-b-G._deg360InRad,2*Math.sqrt(_)*Math.sin(x/2)}calculateRaw(_,v,y,b,x,T,I,S){const M=rgb2lab(inRange0to255(_*this._whitePoint.r),inRange0to255(v*this._whitePoint.g),inRange0to255(y*this._whitePoint.b)),A=rgb2lab(inRange0to255(x*this._whitePoint.r),inRange0to255(T*this._whitePoint.g),inRange0to255(I*this._whitePoint.b)),P=(S-b)*this._whitePoint.a*G._kA,O=this.calculateRawInLab(M,A);return Math.sqrt(O+P*P)}calculateRawInLab(_,v){const y=_.L,b=_.a,x=_.b,T=v.L,I=v.a,S=v.b,M=((Math.sqrt(b*b+x*x)+Math.sqrt(I*I+S*S))/2)**7,A=.5*(1-Math.sqrt(M/(M+G._pow25to7))),P=(1+A)*b,O=(1+A)*I,k=Math.sqrt(P*P+x*x),R=Math.sqrt(O*O+S*S),L=k*R,B=G._calculatehp(x,P),j=G._calculatehp(S,O),U=Math.abs(B-j),z=T-y,H=R-k,V=G._calculate_dHp(L,U,j,B),$=G._calculate_ahp(L,U,B,j),K=(k+R)/2,ee=((y+T)/2-50)**2,re=H/(1+.045*K),ie=V/(1+.015*G._calculateT($)*K);return(z/(1+.015*ee/Math.sqrt(20+ee)))**2+re**2+ie**2+G._calculateRT($,K)*re*ie}},H=G;__publicField(H,"_kA",25/255),__publicField(H,"_pow25to7",25**7),__publicField(H,"_deg360InRad",degrees2radians(360)),__publicField(H,"_deg180InRad",degrees2radians(180)),__publicField(H,"_deg30InRad",degrees2radians(30)),__publicField(H,"_deg6InRad",degrees2radians(6)),__publicField(H,"_deg63InRad",degrees2radians(63)),__publicField(H,"_deg275InRad",degrees2radians(275)),__publicField(H,"_deg25InRad",degrees2radians(25));var V=class extends B{calculateRaw(_,v,y,b,x,T,I,S){const M=(_+x)/2*this._whitePoint.r,A=(_-x)*this._whitePoint.r,P=(v-T)*this._whitePoint.g,O=(y-I)*this._whitePoint.b,k=((512+M)*A*A>>8)+4*P*P+((767-M)*O*O>>8),R=(S-b)*this._whitePoint.a;return Math.sqrt(k+R*R)}_setDefaults(){}},$=class extends B{calculateRaw(_,v,y,b,x,T,I,S){const M=x-_,A=T-v,P=I-y,O=S-b;return Math.sqrt(this._kR*M*M+this._kG*A*A+this._kB*P*P+this._kA*O*O)}},K=class extends ${_setDefaults(){this._kR=1,this._kG=1,this._kB=1,this._kA=1}},ee=class extends ${_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=1}},re=class extends ${_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=0}},ie=class extends B{calculateRaw(_,v,y,b,x,T,I,S){let M=x-_,A=T-v,P=I-y,O=S-b;return M<0&&(M=0-M),A<0&&(A=0-A),P<0&&(P=0-P),O<0&&(O=0-O),this._kR*M+this._kG*A+this._kB*P+this._kA*O}},ne=class extends ie{_setDefaults(){this._kR=1,this._kG=1,this._kB=1,this._kA=1}},ae=class extends ie{_setDefaults(){this._kR=.4984,this._kG=.8625,this._kB=.2979,this._kA=1}},oe=class extends ie{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=1}},se=class extends B{calculateRaw(_,v,y,b,x,T,I,S){const M=(S-b)*this._whitePoint.a;return this._colordifferenceCh(_*this._whitePoint.r,x*this._whitePoint.r,M)+this._colordifferenceCh(v*this._whitePoint.g,T*this._whitePoint.g,M)+this._colordifferenceCh(y*this._whitePoint.b,I*this._whitePoint.b,M)}_colordifferenceCh(_,v,y){const b=_-v,x=b+y;return b*b+x*x}_setDefaults(){}},ce={};__export(ce,{AbstractPaletteQuantizer:()=>ue,ColorHistogram:()=>Ae,NeuQuant:()=>Ee,NeuQuantFloat:()=>Ie,RGBQuant:()=>Oe,WuColorCube:()=>Ce,WuQuant:()=>Ne});var ue=class{quantizeSync(){for(const _ of this.quantize())if(_.palette)return _.palette;throw new Error("unreachable")}},pe=class{constructor(){__publicField(this,"r"),__publicField(this,"g"),__publicField(this,"b"),__publicField(this,"a"),__publicField(this,"uint32"),__publicField(this,"rgba"),this.uint32=-1>>>0,this.r=this.g=this.b=this.a=0,this.rgba=new Array(4),this.rgba[0]=0,this.rgba[1]=0,this.rgba[2]=0,this.rgba[3]=0}static createByQuadruplet(_){const v=new pe;return v.r=0|_[0],v.g=0|_[1],v.b=0|_[2],v.a=0|_[3],v._loadUINT32(),v._loadQuadruplet(),v}static createByRGBA(_,v,y,b){const x=new pe;return x.r=0|_,x.g=0|v,x.b=0|y,x.a=0|b,x._loadUINT32(),x._loadQuadruplet(),x}static createByUint32(_){const v=new pe;return v.uint32=_>>>0,v._loadRGBA(),v._loadQuadruplet(),v}from(_){this.r=_.r,this.g=_.g,this.b=_.b,this.a=_.a,this.uint32=_.uint32,this.rgba[0]=_.r,this.rgba[1]=_.g,this.rgba[2]=_.b,this.rgba[3]=_.a}getLuminosity(_){let v=this.r,y=this.g,b=this.b;return _&&(v=Math.min(255,255-this.a+this.a*v/255),y=Math.min(255,255-this.a+this.a*y/255),b=Math.min(255,255-this.a+this.a*b/255)),.2126*v+.7152*y+.0722*b}_loadUINT32(){this.uint32=(this.a<<24|this.b<<16|this.g<<8|this.r)>>>0}_loadRGBA(){this.r=255&this.uint32,this.g=this.uint32>>>8&255,this.b=this.uint32>>>16&255,this.a=this.uint32>>>24&255}_loadQuadruplet(){this.rgba[0]=this.r,this.rgba[1]=this.g,this.rgba[2]=this.b,this.rgba[3]=this.a}},he=class{constructor(){__publicField(this,"_pointArray"),__publicField(this,"_width"),__publicField(this,"_height"),this._width=0,this._height=0,this._pointArray=[]}getWidth(){return this._width}getHeight(){return this._height}setWidth(_){this._width=_}setHeight(_){this._height=_}getPointArray(){return this._pointArray}clone(){const _=new he;_._width=this._width,_._height=this._height;for(let v=0,y=this._pointArray.length;v<y;v++)_._pointArray[v]=pe.createByUint32(0|this._pointArray[v].uint32);return _}toUint32Array(){const _=this._pointArray.length,v=new Uint32Array(_);for(let y=0;y<_;y++)v[y]=this._pointArray[y].uint32;return v}toUint8Array(){return new Uint8Array(this.toUint32Array().buffer)}static fromHTMLImageElement(_){const v=_.naturalWidth,y=_.naturalHeight,b=document.createElement("canvas");b.width=v,b.height=y;return b.getContext("2d").drawImage(_,0,0,v,y,0,0,v,y),he.fromHTMLCanvasElement(b)}static fromHTMLCanvasElement(_){const v=_.width,y=_.height,b=_.getContext("2d").getImageData(0,0,v,y);return he.fromImageData(b)}static fromImageData(_){const v=_.width,y=_.height;return he.fromUint8Array(_.data,v,y)}static fromUint8Array(_,v,y){switch(Object.prototype.toString.call(_)){case"[object Uint8ClampedArray]":case"[object Uint8Array]":break;default:_=new Uint8Array(_)}const b=new Uint32Array(_.buffer);return he.fromUint32Array(b,v,y)}static fromUint32Array(_,v,y){const b=new he;b._width=v,b._height=y;for(let v=0,y=_.length;v<y;v++)b._pointArray[v]=pe.createByUint32(0|_[v]);return b}static fromBuffer(_,v,y){const b=new Uint32Array(_.buffer,_.byteOffset,_.byteLength/Uint32Array.BYTES_PER_ELEMENT);return he.fromUint32Array(b,v,y)}};function hueGroup(_,v){const y=360/v;for(let b=1,x=y-y/2;b<v;b++,x+=y)if(_>=x&&_<x+y)return b;return 0}var de=class{constructor(){__publicField(this,"_pointContainer"),__publicField(this,"_pointArray",[]),__publicField(this,"_i32idx",{}),this._pointContainer=new he,this._pointContainer.setHeight(1),this._pointArray=this._pointContainer.getPointArray()}add(_){this._pointArray.push(_),this._pointContainer.setWidth(this._pointArray.length)}has(_){for(let v=this._pointArray.length-1;v>=0;v--)if(_.uint32===this._pointArray[v].uint32)return!0;return!1}getNearestColor(_,v){return this._pointArray[0|this._getNearestIndex(_,v)]}getPointContainer(){return this._pointContainer}_nearestPointFromCache(_){return"number"==typeof this._i32idx[_]?this._i32idx[_]:-1}_getNearestIndex(_,v){let y=this._nearestPointFromCache(""+v.uint32);if(y>=0)return y;let b=Number.MAX_VALUE;y=0;for(let x=0,T=this._pointArray.length;x<T;x++){const T=this._pointArray[x],I=_.calculateRaw(v.r,v.g,v.b,v.a,T.r,T.g,T.b,T.a);I<b&&(b=I,y=x)}return this._i32idx[v.uint32]=y,y}sort(){this._i32idx={},this._pointArray.sort((_,v)=>{const y=rgb2hsl(_.r,_.g,_.b),b=rgb2hsl(v.r,v.g,v.b),x=_.r===_.g&&_.g===_.b?0:1+hueGroup(y.h,10),T=(v.r===v.g&&v.g===v.b?0:1+hueGroup(b.h,10))-x;if(T)return-T;const I=_.getLuminosity(!0),S=v.getLuminosity(!0);if(S-I!=0)return S-I;const M=(100*b.s|0)-(100*y.s|0);return M?-M:0})}},fe={};__export(fe,{HueStatistics:()=>ge,Palette:()=>de,Point:()=>pe,PointContainer:()=>he,ProgressTracker:()=>ve,arithmetic:()=>R});var me=class{constructor(){__publicField(this,"num",0),__publicField(this,"cols",[])}},ge=class{constructor(_,v){__publicField(this,"_numGroups"),__publicField(this,"_minCols"),__publicField(this,"_stats"),__publicField(this,"_groupsFull"),this._numGroups=_,this._minCols=v,this._stats=[];for(let v=0;v<=_;v++)this._stats[v]=new me;this._groupsFull=0}check(_){this._groupsFull===this._numGroups+1&&(this.check=()=>{});const v=255&_,y=_>>>8&255,b=_>>>16&255,x=v===y&&y===b?0:1+hueGroup(rgb2hsl(v,y,b).h,this._numGroups),T=this._stats[x],I=this._minCols;T.num++,T.num>I||(T.num===I&&this._groupsFull++,T.num<=I&&this._stats[x].cols.push(_))}injectIntoDictionary(_){for(let v=0;v<=this._numGroups;v++)this._stats[v].num<=this._minCols&&this._stats[v].cols.forEach(v=>{_[v]?_[v]++:_[v]=1})}injectIntoArray(_){for(let v=0;v<=this._numGroups;v++)this._stats[v].num<=this._minCols&&this._stats[v].cols.forEach(v=>{-1===_.indexOf(v)&&_.push(v)})}},_e=class{constructor(_,v){__publicField(this,"progress"),__publicField(this,"_step"),__publicField(this,"_range"),__publicField(this,"_last"),__publicField(this,"_progressRange"),this._range=_,this._progressRange=v,this._step=Math.max(1,this._range/(_e.steps+1)|0),this._last=-this._step,this.progress=0}shouldNotify(_){return _-this._last>=this._step&&(this._last=_,this.progress=Math.min(this._progressRange*this._last/this._range,this._progressRange),!0)}},ve=_e;__publicField(ve,"steps",100);var ye=class{constructor(_){__publicField(this,"r"),__publicField(this,"g"),__publicField(this,"b"),__publicField(this,"a"),this.r=this.g=this.b=this.a=_}toPoint(){return pe.createByRGBA(this.r>>3,this.g>>3,this.b>>3,this.a>>3)}subtract(_,v,y,b){this.r-=0|_,this.g-=0|v,this.b-=0|y,this.a-=0|b}},be=class extends ue{constructor(_,v=256){super(),__publicField(this,"_pointArray"),__publicField(this,"_networkSize"),__publicField(this,"_network"),__publicField(this,"_sampleFactor"),__publicField(this,"_radPower"),__publicField(this,"_freq"),__publicField(this,"_bias"),__publicField(this,"_distance"),this._distance=_,this._pointArray=[],this._sampleFactor=1,this._networkSize=v,this._distance.setWhitePoint(2040,2040,2040,2040)}sample(_){this._pointArray=this._pointArray.concat(_.getPointArray())}*quantize(){this._init(),yield*this._learn(),yield{palette:this._buildPalette(),progress:100}}_init(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(let _=0;_<this._networkSize;_++)this._network[_]=new ye((_<<11)/this._networkSize|0),this._freq[_]=be._initialBias/this._networkSize|0,this._bias[_]=0}*_learn(){let _=this._sampleFactor;const v=this._pointArray.length;v<be._minpicturebytes&&(_=1);const y=30+(_-1)/3|0,b=v/_|0;let x,T=b/be._nCycles|0,I=be._initAlpha,S=(this._networkSize>>3)*be._radiusBias,M=S>>be._radiusBiasShift;M<=1&&(M=0);for(let _=0;_<M;_++)this._radPower[_]=I*((M*M-_*_)*be._radBias/(M*M))>>>0;x=v<be._minpicturebytes?1:v%be._prime1!=0?be._prime1:v%be._prime2!=0?be._prime2:v%be._prime3!=0?be._prime3:be._prime4;const A=new ve(b,99);for(let _=0,P=0;_<b;){A.shouldNotify(_)&&(yield{progress:A.progress});const b=this._pointArray[P],O=b.b<<3,k=b.g<<3,R=b.r<<3,L=b.a<<3,B=this._contest(O,k,R,L);if(this._alterSingle(I,B,O,k,R,L),0!==M&&this._alterNeighbour(M,B,O,k,R,L),P+=x,P>=v&&(P-=v),_++,0===T&&(T=1),_%T==0){I-=I/y|0,S-=S/be._radiusDecrease|0,M=S>>be._radiusBiasShift,M<=1&&(M=0);for(let _=0;_<M;_++)this._radPower[_]=I*((M*M-_*_)*be._radBias/(M*M))>>>0}}}_buildPalette(){const _=new de;return this._network.forEach(v=>{_.add(v.toPoint())}),_.sort(),_}_alterNeighbour(_,v,y,b,x,T){let I=v-_;I<-1&&(I=-1);let S=v+_;S>this._networkSize&&(S=this._networkSize);let M=v+1,A=v-1,P=1;for(;M<S||A>I;){const _=this._radPower[P++]/be._alphaRadBias;if(M<S){const v=this._network[M++];v.subtract(_*(v.r-x),_*(v.g-b),_*(v.b-y),_*(v.a-T))}if(A>I){const v=this._network[A--];v.subtract(_*(v.r-x),_*(v.g-b),_*(v.b-y),_*(v.a-T))}}}_alterSingle(_,v,y,b,x,T){_/=be._initAlpha;const I=this._network[v];I.subtract(_*(I.r-x),_*(I.g-b),_*(I.b-y),_*(I.a-T))}_contest(_,v,y,b){let x=~(1<<31),T=x,I=-1,S=I;for(let M=0;M<this._networkSize;M++){const A=this._network[M],P=8160*this._distance.calculateNormalized(A,{r:y,g:v,b:_,a:b})|0;P<x&&(x=P,I=M);const O=P-(this._bias[M]>>be._initialBiasShift-3);O<T&&(T=O,S=M);const k=this._freq[M]>>be._betaShift;this._freq[M]-=k,this._bias[M]+=k<<be._gammaShift}return this._freq[I]+=be._beta,this._bias[I]-=be._betaGamma,S}},Ee=be;__publicField(Ee,"_prime1",499),__publicField(Ee,"_prime2",491),__publicField(Ee,"_prime3",487),__publicField(Ee,"_prime4",503),__publicField(Ee,"_minpicturebytes",be._prime4),__publicField(Ee,"_nCycles",100),__publicField(Ee,"_initialBiasShift",16),__publicField(Ee,"_initialBias",1<<be._initialBiasShift),__publicField(Ee,"_gammaShift",10),__publicField(Ee,"_betaShift",10),__publicField(Ee,"_beta",be._initialBias>>be._betaShift),__publicField(Ee,"_betaGamma",be._initialBias<<be._gammaShift-be._betaShift),__publicField(Ee,"_radiusBiasShift",6),__publicField(Ee,"_radiusBias",1<<be._radiusBiasShift),__publicField(Ee,"_radiusDecrease",30),__publicField(Ee,"_alphaBiasShift",10),__publicField(Ee,"_initAlpha",1<<be._alphaBiasShift),__publicField(Ee,"_radBiasShift",8),__publicField(Ee,"_radBias",1<<be._radBiasShift),__publicField(Ee,"_alphaRadBiasShift",be._alphaBiasShift+be._radBiasShift),__publicField(Ee,"_alphaRadBias",1<<be._alphaRadBiasShift);var xe=class{constructor(_){__publicField(this,"r"),__publicField(this,"g"),__publicField(this,"b"),__publicField(this,"a"),this.r=this.g=this.b=this.a=_}toPoint(){return pe.createByRGBA(this.r>>3,this.g>>3,this.b>>3,this.a>>3)}subtract(_,v,y,b){this.r-=_,this.g-=v,this.b-=y,this.a-=b}},Te=class extends ue{constructor(_,v=256){super(),__publicField(this,"_pointArray"),__publicField(this,"_networkSize"),__publicField(this,"_network"),__publicField(this,"_sampleFactor"),__publicField(this,"_radPower"),__publicField(this,"_freq"),__publicField(this,"_bias"),__publicField(this,"_distance"),this._distance=_,this._pointArray=[],this._sampleFactor=1,this._networkSize=v,this._distance.setWhitePoint(2040,2040,2040,2040)}sample(_){this._pointArray=this._pointArray.concat(_.getPointArray())}*quantize(){this._init(),yield*this._learn(),yield{palette:this._buildPalette(),progress:100}}_init(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(let _=0;_<this._networkSize;_++)this._network[_]=new xe((_<<11)/this._networkSize),this._freq[_]=Te._initialBias/this._networkSize,this._bias[_]=0}*_learn(){let _=this._sampleFactor;const v=this._pointArray.length;v<Te._minpicturebytes&&(_=1);const y=30+(_-1)/3,b=v/_;let x,T=b/Te._nCycles|0,I=Te._initAlpha,S=(this._networkSize>>3)*Te._radiusBias,M=S>>Te._radiusBiasShift;M<=1&&(M=0);for(let _=0;_<M;_++)this._radPower[_]=I*((M*M-_*_)*Te._radBias/(M*M));x=v<Te._minpicturebytes?1:v%Te._prime1!=0?Te._prime1:v%Te._prime2!=0?Te._prime2:v%Te._prime3!=0?Te._prime3:Te._prime4;const A=new ve(b,99);for(let _=0,P=0;_<b;){A.shouldNotify(_)&&(yield{progress:A.progress});const b=this._pointArray[P],O=b.b<<3,k=b.g<<3,R=b.r<<3,L=b.a<<3,B=this._contest(O,k,R,L);if(this._alterSingle(I,B,O,k,R,L),0!==M&&this._alterNeighbour(M,B,O,k,R,L),P+=x,P>=v&&(P-=v),_++,0===T&&(T=1),_%T==0){I-=I/y,S-=S/Te._radiusDecrease,M=S>>Te._radiusBiasShift,M<=1&&(M=0);for(let _=0;_<M;_++)this._radPower[_]=I*((M*M-_*_)*Te._radBias/(M*M))}}}_buildPalette(){const _=new de;return this._network.forEach(v=>{_.add(v.toPoint())}),_.sort(),_}_alterNeighbour(_,v,y,b,x,T){let I=v-_;I<-1&&(I=-1);let S=v+_;S>this._networkSize&&(S=this._networkSize);let M=v+1,A=v-1,P=1;for(;M<S||A>I;){const _=this._radPower[P++]/Te._alphaRadBias;if(M<S){const v=this._network[M++];v.subtract(_*(v.r-x),_*(v.g-b),_*(v.b-y),_*(v.a-T))}if(A>I){const v=this._network[A--];v.subtract(_*(v.r-x),_*(v.g-b),_*(v.b-y),_*(v.a-T))}}}_alterSingle(_,v,y,b,x,T){_/=Te._initAlpha;const I=this._network[v];I.subtract(_*(I.r-x),_*(I.g-b),_*(I.b-y),_*(I.a-T))}_contest(_,v,y,b){let x=~(1<<31),T=x,I=-1,S=I;for(let M=0;M<this._networkSize;M++){const A=this._network[M],P=8160*this._distance.calculateNormalized(A,{r:y,g:v,b:_,a:b});P<x&&(x=P,I=M);const O=P-(this._bias[M]>>Te._initialBiasShift-3);O<T&&(T=O,S=M);const k=this._freq[M]>>Te._betaShift;this._freq[M]-=k,this._bias[M]+=k<<Te._gammaShift}return this._freq[I]+=Te._beta,this._bias[I]-=Te._betaGamma,S}},Ie=Te;__publicField(Ie,"_prime1",499),__publicField(Ie,"_prime2",491),__publicField(Ie,"_prime3",487),__publicField(Ie,"_prime4",503),__publicField(Ie,"_minpicturebytes",Te._prime4),__publicField(Ie,"_nCycles",100),__publicField(Ie,"_initialBiasShift",16),__publicField(Ie,"_initialBias",1<<Te._initialBiasShift),__publicField(Ie,"_gammaShift",10),__publicField(Ie,"_betaShift",10),__publicField(Ie,"_beta",Te._initialBias>>Te._betaShift),__publicField(Ie,"_betaGamma",Te._initialBias<<Te._gammaShift-Te._betaShift),__publicField(Ie,"_radiusBiasShift",6),__publicField(Ie,"_radiusBias",1<<Te._radiusBiasShift),__publicField(Ie,"_radiusDecrease",30),__publicField(Ie,"_alphaBiasShift",10),__publicField(Ie,"_initAlpha",1<<Te._alphaBiasShift),__publicField(Ie,"_radBiasShift",8),__publicField(Ie,"_radBias",1<<Te._radBiasShift),__publicField(Ie,"_alphaRadBiasShift",Te._alphaBiasShift+Te._radBiasShift),__publicField(Ie,"_alphaRadBias",1<<Te._alphaRadBiasShift);var Se=class{constructor(_,v){__publicField(this,"_method"),__publicField(this,"_hueStats"),__publicField(this,"_histogram"),__publicField(this,"_initColors"),__publicField(this,"_minHueCols"),this._method=_,this._minHueCols=v<<2,this._initColors=v<<2,this._hueStats=new ge(Se._hueGroups,this._minHueCols),this._histogram=Object.create(null)}sample(_){switch(this._method){case 1:this._colorStats1D(_);break;case 2:this._colorStats2D(_)}}getImportanceSortedColorsIDXI32(){const _=stableSort(Object.keys(this._histogram),(_,v)=>this._histogram[v]-this._histogram[_]);if(0===_.length)return[];let v;switch(this._method){case 1:const y=Math.min(_.length,this._initColors),b=_[y-1],x=this._histogram[b];v=_.slice(0,y);let T=y;const I=_.length;for(;T<I&&this._histogram[_[T]]===x;)v.push(_[T++]);this._hueStats.injectIntoArray(v);break;case 2:v=_;break;default:throw new Error("Incorrect method")}return v.map(_=>+_)}_colorStats1D(_){const v=this._histogram,y=_.getPointArray(),b=y.length;for(let _=0;_<b;_++){const b=y[_].uint32;this._hueStats.check(b),b in v?v[b]++:v[b]=1}}_colorStats2D(_){const v=_.getWidth(),y=_.getHeight(),b=_.getPointArray(),x=Se._boxSize[0],T=Se._boxSize[1],I=x*T,S=this._makeBoxes(v,y,x,T),M=this._histogram;S.forEach(_=>{let y=Math.round(_.w*_.h/I)*Se._boxPixels;y<2&&(y=2);const x={};this._iterateBox(_,v,_=>{const v=b[_].uint32;this._hueStats.check(v),v in M?M[v]++:v in x?++x[v]>=y&&(M[v]=x[v]):x[v]=1})}),this._hueStats.injectIntoDictionary(M)}_iterateBox(_,v,y){const b=_,x=b.y*v+b.x,T=(b.y+b.h-1)*v+(b.x+b.w-1),I=v-b.w+1;let S=0,M=x;do{y.call(this,M),M+=++S%b.w==0?I:1}while(M<=T)}_makeBoxes(_,v,y,b){const x=_%y,T=v%b,I=_-x,S=v-T,M=[];for(let A=0;A<v;A+=b)for(let v=0;v<_;v+=y)M.push({x:v,y:A,w:v===I?x:y,h:A===S?T:b});return M}},Ae=Se;__publicField(Ae,"_boxSize",[64,64]),__publicField(Ae,"_boxPixels",2),__publicField(Ae,"_hueGroups",10);var Pe=class{constructor(_,v,y){__publicField(this,"index"),__publicField(this,"color"),__publicField(this,"distance"),this.index=_,this.color=v,this.distance=y}},Oe=class extends ue{constructor(_,v=256,y=2){super(),__publicField(this,"_colors"),__publicField(this,"_initialDistance"),__publicField(this,"_distanceIncrement"),__publicField(this,"_histogram"),__publicField(this,"_distance"),this._distance=_,this._colors=v,this._histogram=new Ae(y,v),this._initialDistance=.01,this._distanceIncrement=.005}sample(_){this._histogram.sample(_)}*quantize(){const _=this._histogram.getImportanceSortedColorsIDXI32();if(0===_.length)throw new Error("No colors in image");yield*this._buildPalette(_)}*_buildPalette(_){const v=new de,y=v.getPointContainer().getPointArray(),b=new Array(_.length);for(let v=0;v<_.length;v++)y.push(pe.createByUint32(_[v])),b[v]=1;const x=y.length,T=[];let I=x,S=this._initialDistance;const M=new ve(I-this._colors,99);for(;I>this._colors;){T.length=0;for(let _=0;_<x;_++){if(M.shouldNotify(x-I)&&(yield{progress:M.progress}),0===b[_])continue;const v=y[_];for(let M=_+1;M<x;M++){if(0===b[M])continue;const _=y[M],x=this._distance.calculateNormalized(v,_);x<S&&(T.push(new Pe(M,_,x)),b[M]=0,I--)}}S+=I>3*this._colors?this._initialDistance:this._distanceIncrement}if(I<this._colors){stableSort(T,(_,v)=>v.distance-_.distance);let _=0;for(;I<this._colors&&_<T.length;){b[T[_].index]=1,I++,_++}}let A=y.length;for(let _=A-1;_>=0;_--)0===b[_]&&(_!==A-1&&(y[_]=y[A-1]),--A);y.length=A,v.sort(),yield{palette:v,progress:100}}};function createArray1D(_){const v=[];for(let y=0;y<_;y++)v[y]=0;return v}function createArray4D(_,v,y,b){const x=new Array(_);for(let T=0;T<_;T++){x[T]=new Array(v);for(let _=0;_<v;_++){x[T][_]=new Array(y);for(let v=0;v<y;v++){x[T][_][v]=new Array(b);for(let y=0;y<b;y++)x[T][_][v][y]=0}}}return x}function createArray3D(_,v,y){const b=new Array(_);for(let x=0;x<_;x++){b[x]=new Array(v);for(let _=0;_<v;_++){b[x][_]=new Array(y);for(let v=0;v<y;v++)b[x][_][v]=0}}return b}function fillArray3D(_,v,y,b,x){for(let T=0;T<v;T++){_[T]=[];for(let v=0;v<y;v++){_[T][v]=[];for(let y=0;y<b;y++)_[T][v][y]=x}}}function fillArray1D(_,v,y){for(let b=0;b<v;b++)_[b]=y}var Ce=class{constructor(){__publicField(this,"redMinimum"),__publicField(this,"redMaximum"),__publicField(this,"greenMinimum"),__publicField(this,"greenMaximum"),__publicField(this,"blueMinimum"),__publicField(this,"blueMaximum"),__publicField(this,"volume"),__publicField(this,"alphaMinimum"),__publicField(this,"alphaMaximum")}},De=class extends ue{constructor(_,v=256,y=5){super(),__publicField(this,"_reds"),__publicField(this,"_greens"),__publicField(this,"_blues"),__publicField(this,"_alphas"),__publicField(this,"_sums"),__publicField(this,"_weights"),__publicField(this,"_momentsRed"),__publicField(this,"_momentsGreen"),__publicField(this,"_momentsBlue"),__publicField(this,"_momentsAlpha"),__publicField(this,"_moments"),__publicField(this,"_table"),__publicField(this,"_pixels"),__publicField(this,"_cubes"),__publicField(this,"_colors"),__publicField(this,"_significantBitsPerChannel"),__publicField(this,"_maxSideIndex"),__publicField(this,"_alphaMaxSideIndex"),__publicField(this,"_sideSize"),__publicField(this,"_alphaSideSize"),__publicField(this,"_distance"),this._distance=_,this._setQuality(y),this._initialize(v)}sample(_){const v=_.getPointArray();for(let _=0,y=v.length;_<y;_++)this._addColor(v[_]);this._pixels=this._pixels.concat(v)}*quantize(){yield*this._preparePalette();const _=new de;for(let v=0;v<this._colors;v++)if(this._sums[v]>0){const y=this._sums[v],b=this._reds[v]/y,x=this._greens[v]/y,T=this._blues[v]/y,I=this._alphas[v]/y,S=pe.createByRGBA(0|b,0|x,0|T,0|I);_.add(S)}_.sort(),yield{palette:_,progress:100}}*_preparePalette(){yield*this._calculateMoments();let _=0;const v=createArray1D(this._colors);for(let y=1;y<this._colors;++y){this._cut(this._cubes[_],this._cubes[y])?(v[_]=this._cubes[_].volume>1?this._calculateVariance(this._cubes[_]):0,v[y]=this._cubes[y].volume>1?this._calculateVariance(this._cubes[y]):0):(v[_]=0,y--),_=0;let b=v[0];for(let x=1;x<=y;++x)v[x]>b&&(b=v[x],_=x);if(b<=0){this._colors=y+1;break}}const y=[],b=[],x=[],T=[];for(let _=0;_<this._colors;++_){const v=De._volume(this._cubes[_],this._weights);v>0?(y[_]=De._volume(this._cubes[_],this._momentsRed)/v|0,b[_]=De._volume(this._cubes[_],this._momentsGreen)/v|0,x[_]=De._volume(this._cubes[_],this._momentsBlue)/v|0,T[_]=De._volume(this._cubes[_],this._momentsAlpha)/v|0):(y[_]=0,b[_]=0,x[_]=0,T[_]=0)}this._reds=createArray1D(this._colors+1),this._greens=createArray1D(this._colors+1),this._blues=createArray1D(this._colors+1),this._alphas=createArray1D(this._colors+1),this._sums=createArray1D(this._colors+1);for(let _=0,v=this._pixels.length;_<v;_++){const v=this._pixels[_];let I=-1,S=Number.MAX_VALUE;for(let _=0;_<this._colors;_++){const M=y[_],A=b[_],P=x[_],O=T[_],k=this._distance.calculateRaw(M,A,P,O,v.r,v.g,v.b,v.a);k<S&&(S=k,I=_)}this._reds[I]+=v.r,this._greens[I]+=v.g,this._blues[I]+=v.b,this._alphas[I]+=v.a,this._sums[I]++}}_addColor(_){const v=8-this._significantBitsPerChannel,y=1+(_.r>>v),b=1+(_.g>>v),x=1+(_.b>>v),T=1+(_.a>>v);this._weights[T][y][b][x]++,this._momentsRed[T][y][b][x]+=_.r,this._momentsGreen[T][y][b][x]+=_.g,this._momentsBlue[T][y][b][x]+=_.b,this._momentsAlpha[T][y][b][x]+=_.a,this._moments[T][y][b][x]+=this._table[_.r]+this._table[_.g]+this._table[_.b]+this._table[_.a]}*_calculateMoments(){const _=[],v=[],y=[],b=[],x=[],T=[],I=createArray3D(this._sideSize,this._sideSize,this._sideSize),S=createArray3D(this._sideSize,this._sideSize,this._sideSize),M=createArray3D(this._sideSize,this._sideSize,this._sideSize),A=createArray3D(this._sideSize,this._sideSize,this._sideSize),P=createArray3D(this._sideSize,this._sideSize,this._sideSize),O=createArray3D(this._sideSize,this._sideSize,this._sideSize);let k=0;const R=new ve(this._alphaMaxSideIndex*this._maxSideIndex,99);for(let L=1;L<=this._alphaMaxSideIndex;++L){fillArray3D(I,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(S,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(M,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(A,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(P,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(O,this._sideSize,this._sideSize,this._sideSize,0);for(let B=1;B<=this._maxSideIndex;++B,++k){R.shouldNotify(k)&&(yield{progress:R.progress}),fillArray1D(_,this._sideSize,0),fillArray1D(v,this._sideSize,0),fillArray1D(y,this._sideSize,0),fillArray1D(b,this._sideSize,0),fillArray1D(x,this._sideSize,0),fillArray1D(T,this._sideSize,0);for(let k=1;k<=this._maxSideIndex;++k){let R=0,j=0,U=0,z=0,G=0,H=0;for(let V=1;V<=this._maxSideIndex;++V)R+=this._weights[L][B][k][V],j+=this._momentsRed[L][B][k][V],U+=this._momentsGreen[L][B][k][V],z+=this._momentsBlue[L][B][k][V],G+=this._momentsAlpha[L][B][k][V],H+=this._moments[L][B][k][V],_[V]+=R,v[V]+=j,y[V]+=U,b[V]+=z,x[V]+=G,T[V]+=H,I[B][k][V]=I[B-1][k][V]+_[V],S[B][k][V]=S[B-1][k][V]+v[V],M[B][k][V]=M[B-1][k][V]+y[V],A[B][k][V]=A[B-1][k][V]+b[V],P[B][k][V]=P[B-1][k][V]+x[V],O[B][k][V]=O[B-1][k][V]+T[V],this._weights[L][B][k][V]=this._weights[L-1][B][k][V]+I[B][k][V],this._momentsRed[L][B][k][V]=this._momentsRed[L-1][B][k][V]+S[B][k][V],this._momentsGreen[L][B][k][V]=this._momentsGreen[L-1][B][k][V]+M[B][k][V],this._momentsBlue[L][B][k][V]=this._momentsBlue[L-1][B][k][V]+A[B][k][V],this._momentsAlpha[L][B][k][V]=this._momentsAlpha[L-1][B][k][V]+P[B][k][V],this._moments[L][B][k][V]=this._moments[L-1][B][k][V]+O[B][k][V]}}}}static _volumeFloat(_,v){return v[_.alphaMaximum][_.redMaximum][_.greenMaximum][_.blueMaximum]-v[_.alphaMaximum][_.redMaximum][_.greenMinimum][_.blueMaximum]-v[_.alphaMaximum][_.redMinimum][_.greenMaximum][_.blueMaximum]+v[_.alphaMaximum][_.redMinimum][_.greenMinimum][_.blueMaximum]-v[_.alphaMinimum][_.redMaximum][_.greenMaximum][_.blueMaximum]+v[_.alphaMinimum][_.redMaximum][_.greenMinimum][_.blueMaximum]+v[_.alphaMinimum][_.redMinimum][_.greenMaximum][_.blueMaximum]-v[_.alphaMinimum][_.redMinimum][_.greenMinimum][_.blueMaximum]-(v[_.alphaMaximum][_.redMaximum][_.greenMaximum][_.blueMinimum]-v[_.alphaMinimum][_.redMaximum][_.greenMaximum][_.blueMinimum]-v[_.alphaMaximum][_.redMaximum][_.greenMinimum][_.blueMinimum]+v[_.alphaMinimum][_.redMaximum][_.greenMinimum][_.blueMinimum]-v[_.alphaMaximum][_.redMinimum][_.greenMaximum][_.blueMinimum]+v[_.alphaMinimum][_.redMinimum][_.greenMaximum][_.blueMinimum]+v[_.alphaMaximum][_.redMinimum][_.greenMinimum][_.blueMinimum]-v[_.alphaMinimum][_.redMinimum][_.greenMinimum][_.blueMinimum])}static _volume(_,v){return 0|De._volumeFloat(_,v)}static _top(_,v,y,b){let x;switch(v){case De._alpha:x=b[y][_.redMaximum][_.greenMaximum][_.blueMaximum]-b[y][_.redMaximum][_.greenMinimum][_.blueMaximum]-b[y][_.redMinimum][_.greenMaximum][_.blueMaximum]+b[y][_.redMinimum][_.greenMinimum][_.blueMaximum]-(b[y][_.redMaximum][_.greenMaximum][_.blueMinimum]-b[y][_.redMaximum][_.greenMinimum][_.blueMinimum]-b[y][_.redMinimum][_.greenMaximum][_.blueMinimum]+b[y][_.redMinimum][_.greenMinimum][_.blueMinimum]);break;case De._red:x=b[_.alphaMaximum][y][_.greenMaximum][_.blueMaximum]-b[_.alphaMaximum][y][_.greenMinimum][_.blueMaximum]-b[_.alphaMinimum][y][_.greenMaximum][_.blueMaximum]+b[_.alphaMinimum][y][_.greenMinimum][_.blueMaximum]-(b[_.alphaMaximum][y][_.greenMaximum][_.blueMinimum]-b[_.alphaMaximum][y][_.greenMinimum][_.blueMinimum]-b[_.alphaMinimum][y][_.greenMaximum][_.blueMinimum]+b[_.alphaMinimum][y][_.greenMinimum][_.blueMinimum]);break;case De._green:x=b[_.alphaMaximum][_.redMaximum][y][_.blueMaximum]-b[_.alphaMaximum][_.redMinimum][y][_.blueMaximum]-b[_.alphaMinimum][_.redMaximum][y][_.blueMaximum]+b[_.alphaMinimum][_.redMinimum][y][_.blueMaximum]-(b[_.alphaMaximum][_.redMaximum][y][_.blueMinimum]-b[_.alphaMaximum][_.redMinimum][y][_.blueMinimum]-b[_.alphaMinimum][_.redMaximum][y][_.blueMinimum]+b[_.alphaMinimum][_.redMinimum][y][_.blueMinimum]);break;case De._blue:x=b[_.alphaMaximum][_.redMaximum][_.greenMaximum][y]-b[_.alphaMaximum][_.redMaximum][_.greenMinimum][y]-b[_.alphaMaximum][_.redMinimum][_.greenMaximum][y]+b[_.alphaMaximum][_.redMinimum][_.greenMinimum][y]-(b[_.alphaMinimum][_.redMaximum][_.greenMaximum][y]-b[_.alphaMinimum][_.redMaximum][_.greenMinimum][y]-b[_.alphaMinimum][_.redMinimum][_.greenMaximum][y]+b[_.alphaMinimum][_.redMinimum][_.greenMinimum][y]);break;default:throw new Error("impossible")}return 0|x}static _bottom(_,v,y){switch(v){case De._alpha:return-y[_.alphaMinimum][_.redMaximum][_.greenMaximum][_.blueMaximum]+y[_.alphaMinimum][_.redMaximum][_.greenMinimum][_.blueMaximum]+y[_.alphaMinimum][_.redMinimum][_.greenMaximum][_.blueMaximum]-y[_.alphaMinimum][_.redMinimum][_.greenMinimum][_.blueMaximum]-(-y[_.alphaMinimum][_.redMaximum][_.greenMaximum][_.blueMinimum]+y[_.alphaMinimum][_.redMaximum][_.greenMinimum][_.blueMinimum]+y[_.alphaMinimum][_.redMinimum][_.greenMaximum][_.blueMinimum]-y[_.alphaMinimum][_.redMinimum][_.greenMinimum][_.blueMinimum]);case De._red:return-y[_.alphaMaximum][_.redMinimum][_.greenMaximum][_.blueMaximum]+y[_.alphaMaximum][_.redMinimum][_.greenMinimum][_.blueMaximum]+y[_.alphaMinimum][_.redMinimum][_.greenMaximum][_.blueMaximum]-y[_.alphaMinimum][_.redMinimum][_.greenMinimum][_.blueMaximum]-(-y[_.alphaMaximum][_.redMinimum][_.greenMaximum][_.blueMinimum]+y[_.alphaMaximum][_.redMinimum][_.greenMinimum][_.blueMinimum]+y[_.alphaMinimum][_.redMinimum][_.greenMaximum][_.blueMinimum]-y[_.alphaMinimum][_.redMinimum][_.greenMinimum][_.blueMinimum]);case De._green:return-y[_.alphaMaximum][_.redMaximum][_.greenMinimum][_.blueMaximum]+y[_.alphaMaximum][_.redMinimum][_.greenMinimum][_.blueMaximum]+y[_.alphaMinimum][_.redMaximum][_.greenMinimum][_.blueMaximum]-y[_.alphaMinimum][_.redMinimum][_.greenMinimum][_.blueMaximum]-(-y[_.alphaMaximum][_.redMaximum][_.greenMinimum][_.blueMinimum]+y[_.alphaMaximum][_.redMinimum][_.greenMinimum][_.blueMinimum]+y[_.alphaMinimum][_.redMaximum][_.greenMinimum][_.blueMinimum]-y[_.alphaMinimum][_.redMinimum][_.greenMinimum][_.blueMinimum]);case De._blue:return-y[_.alphaMaximum][_.redMaximum][_.greenMaximum][_.blueMinimum]+y[_.alphaMaximum][_.redMaximum][_.greenMinimum][_.blueMinimum]+y[_.alphaMaximum][_.redMinimum][_.greenMaximum][_.blueMinimum]-y[_.alphaMaximum][_.redMinimum][_.greenMinimum][_.blueMinimum]-(-y[_.alphaMinimum][_.redMaximum][_.greenMaximum][_.blueMinimum]+y[_.alphaMinimum][_.redMaximum][_.greenMinimum][_.blueMinimum]+y[_.alphaMinimum][_.redMinimum][_.greenMaximum][_.blueMinimum]-y[_.alphaMinimum][_.redMinimum][_.greenMinimum][_.blueMinimum]);default:return 0}}_calculateVariance(_){const v=De._volume(_,this._momentsRed),y=De._volume(_,this._momentsGreen),b=De._volume(_,this._momentsBlue),x=De._volume(_,this._momentsAlpha);return De._volumeFloat(_,this._moments)-(v*v+y*y+b*b+x*x)/De._volume(_,this._weights)}_maximize(_,v,y,b,x,T,I,S,M){const A=0|De._bottom(_,v,this._momentsRed),P=0|De._bottom(_,v,this._momentsGreen),O=0|De._bottom(_,v,this._momentsBlue),k=0|De._bottom(_,v,this._momentsAlpha),R=0|De._bottom(_,v,this._weights);let L=0,B=-1;for(let j=y;j<b;++j){let y=A+De._top(_,v,j,this._momentsRed),b=P+De._top(_,v,j,this._momentsGreen),U=O+De._top(_,v,j,this._momentsBlue),z=k+De._top(_,v,j,this._momentsAlpha),G=R+De._top(_,v,j,this._weights);if(0!==G){let _=y*y+b*b+U*U+z*z,v=_/G;y=x-y,b=T-b,U=I-U,z=S-z,G=M-G,0!==G&&(_=y*y+b*b+U*U+z*z,v+=_/G,v>L&&(L=v,B=j))}}return{max:L,position:B}}_cut(_,v){let y;const b=De._volume(_,this._momentsRed),x=De._volume(_,this._momentsGreen),T=De._volume(_,this._momentsBlue),I=De._volume(_,this._momentsAlpha),S=De._volume(_,this._weights),M=this._maximize(_,De._red,_.redMinimum+1,_.redMaximum,b,x,T,I,S),A=this._maximize(_,De._green,_.greenMinimum+1,_.greenMaximum,b,x,T,I,S),P=this._maximize(_,De._blue,_.blueMinimum+1,_.blueMaximum,b,x,T,I,S),O=this._maximize(_,De._alpha,_.alphaMinimum+1,_.alphaMaximum,b,x,T,I,S);if(O.max>=M.max&&O.max>=A.max&&O.max>=P.max){if(y=De._alpha,O.position<0)return!1}else y=M.max>=O.max&&M.max>=A.max&&M.max>=P.max?De._red:A.max>=O.max&&A.max>=M.max&&A.max>=P.max?De._green:De._blue;switch(v.redMaximum=_.redMaximum,v.greenMaximum=_.greenMaximum,v.blueMaximum=_.blueMaximum,v.alphaMaximum=_.alphaMaximum,y){case De._red:v.redMinimum=_.redMaximum=M.position,v.greenMinimum=_.greenMinimum,v.blueMinimum=_.blueMinimum,v.alphaMinimum=_.alphaMinimum;break;case De._green:v.greenMinimum=_.greenMaximum=A.position,v.redMinimum=_.redMinimum,v.blueMinimum=_.blueMinimum,v.alphaMinimum=_.alphaMinimum;break;case De._blue:v.blueMinimum=_.blueMaximum=P.position,v.redMinimum=_.redMinimum,v.greenMinimum=_.greenMinimum,v.alphaMinimum=_.alphaMinimum;break;case De._alpha:v.alphaMinimum=_.alphaMaximum=O.position,v.blueMinimum=_.blueMinimum,v.redMinimum=_.redMinimum,v.greenMinimum=_.greenMinimum}return _.volume=(_.redMaximum-_.redMinimum)*(_.greenMaximum-_.greenMinimum)*(_.blueMaximum-_.blueMinimum)*(_.alphaMaximum-_.alphaMinimum),v.volume=(v.redMaximum-v.redMinimum)*(v.greenMaximum-v.greenMinimum)*(v.blueMaximum-v.blueMinimum)*(v.alphaMaximum-v.alphaMinimum),!0}_initialize(_){this._colors=_,this._cubes=[];for(let v=0;v<_;v++)this._cubes[v]=new Ce;this._cubes[0].redMinimum=0,this._cubes[0].greenMinimum=0,this._cubes[0].blueMinimum=0,this._cubes[0].alphaMinimum=0,this._cubes[0].redMaximum=this._maxSideIndex,this._cubes[0].greenMaximum=this._maxSideIndex,this._cubes[0].blueMaximum=this._maxSideIndex,this._cubes[0].alphaMaximum=this._alphaMaxSideIndex,this._weights=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsRed=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsGreen=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsBlue=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsAlpha=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._moments=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._table=[];for(let _=0;_<256;++_)this._table[_]=_*_;this._pixels=[]}_setQuality(_=5){this._significantBitsPerChannel=_,this._maxSideIndex=1<<this._significantBitsPerChannel,this._alphaMaxSideIndex=this._maxSideIndex,this._sideSize=this._maxSideIndex+1,this._alphaSideSize=this._alphaMaxSideIndex+1}},Ne=De;__publicField(Ne,"_alpha",3),__publicField(Ne,"_red",2),__publicField(Ne,"_green",1),__publicField(Ne,"_blue",0);var ke={};__export(ke,{AbstractImageQuantizer:()=>Le,ErrorDiffusionArray:()=>Fe,ErrorDiffusionArrayKernel:()=>je,ErrorDiffusionRiemersma:()=>Ue,NearestColor:()=>Be});var Le=class{quantizeSync(_,v){for(const y of this.quantize(_,v))if(y.pointContainer)return y.pointContainer;throw new Error("unreachable")}},Be=class extends Le{constructor(_){super(),__publicField(this,"_distance"),this._distance=_}*quantize(_,v){const y=_.getPointArray(),b=_.getWidth(),x=_.getHeight(),T=new ve(x,99);for(let _=0;_<x;_++){T.shouldNotify(_)&&(yield{progress:T.progress});for(let x=0,T=_*b;x<b;x++,T++){const _=y[T];_.from(v.getNearestColor(this._distance,_))}}yield{pointContainer:_,progress:100}}},je=(_=>(_[_.FloydSteinberg=0]="FloydSteinberg",_[_.FalseFloydSteinberg=1]="FalseFloydSteinberg",_[_.Stucki=2]="Stucki",_[_.Atkinson=3]="Atkinson",_[_.Jarvis=4]="Jarvis",_[_.Burkes=5]="Burkes",_[_.Sierra=6]="Sierra",_[_.TwoSierra=7]="TwoSierra",_[_.SierraLite=8]="SierraLite",_))(je||{}),Fe=class extends Le{constructor(_,v,y=!0,b=0,x=!1){super(),__publicField(this,"_minColorDistance"),__publicField(this,"_serpentine"),__publicField(this,"_kernel"),__publicField(this,"_calculateErrorLikeGIMP"),__publicField(this,"_distance"),this._setKernel(v),this._distance=_,this._minColorDistance=b,this._serpentine=y,this._calculateErrorLikeGIMP=x}*quantize(_,v){const y=_.getPointArray(),b=new pe,x=_.getWidth(),T=_.getHeight(),I=[];let S=1,M=1;for(const _ of this._kernel){const v=_[2]+1;M<v&&(M=v)}for(let _=0;_<M;_++)this._fillErrorLine(I[_]=[],x);const A=new ve(T,99);for(let _=0;_<T;_++){A.shouldNotify(_)&&(yield{progress:A.progress}),this._serpentine&&(S*=-1);const M=_*x,P=1===S?0:x-1,O=1===S?x:-1;this._fillErrorLine(I[0],x),I.push(I.shift());const k=I[0];for(let A=P,R=M+P;A!==O;A+=S,R+=S){const M=y[R],P=k[A];b.from(M);const O=pe.createByRGBA(inRange0to255Rounded(M.r+P[0]),inRange0to255Rounded(M.g+P[1]),inRange0to255Rounded(M.b+P[2]),inRange0to255Rounded(M.a+P[3])),L=v.getNearestColor(this._distance,O);if(M.from(L),this._minColorDistance){if(this._distance.calculateNormalized(b,L)<this._minColorDistance)continue}let B,j,U,z;this._calculateErrorLikeGIMP?(B=O.r-L.r,j=O.g-L.g,U=O.b-L.b,z=O.a-L.a):(B=b.r-L.r,j=b.g-L.g,U=b.b-L.b,z=b.a-L.a);const G=1===S?0:this._kernel.length-1,H=1===S?this._kernel.length:-1;for(let v=G;v!==H;v+=S){const y=this._kernel[v][1]*S,b=this._kernel[v][2];if(y+A>=0&&y+A<x&&b+_>=0&&b+_<T){const _=this._kernel[v][0],x=I[b][y+A];x[0]+=B*_,x[1]+=j*_,x[2]+=U*_,x[3]+=z*_}}}}yield{pointContainer:_,progress:100}}_fillErrorLine(_,v){_.length>v&&(_.length=v);const y=_.length;for(let v=0;v<y;v++){const y=_[v];y[0]=y[1]=y[2]=y[3]=0}for(let b=y;b<v;b++)_[b]=[0,0,0,0]}_setKernel(_){switch(_){case 0:this._kernel=[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]];break;case 1:this._kernel=[[3/8,1,0],[3/8,0,1],[2/8,1,1]];break;case 2:this._kernel=[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]];break;case 3:this._kernel=[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]];break;case 4:this._kernel=[[7/48,1,0],[5/48,2,0],[3/48,-2,1],[5/48,-1,1],[7/48,0,1],[5/48,1,1],[3/48,2,1],[1/48,-2,2],[3/48,-1,2],[5/48,0,2],[3/48,1,2],[1/48,2,2]];break;case 5:this._kernel=[[.25,1,0],[4/32,2,0],[2/32,-2,1],[4/32,-1,1],[.25,0,1],[4/32,1,1],[2/32,2,1]];break;case 6:this._kernel=[[5/32,1,0],[3/32,2,0],[2/32,-2,1],[4/32,-1,1],[5/32,0,1],[4/32,1,1],[2/32,2,1],[2/32,-1,2],[3/32,0,2],[2/32,1,2]];break;case 7:this._kernel=[[.25,1,0],[3/16,2,0],[1/16,-2,1],[2/16,-1,1],[3/16,0,1],[2/16,1,1],[1/16,2,1]];break;case 8:this._kernel=[[.5,1,0],[1/4,-1,1],[1/4,0,1]];break;default:throw new Error("ErrorDiffusionArray: unknown kernel = "+_)}}};function*hilbertCurve(_,v,y){const b=Math.max(_,v),x={width:_,height:v,level:Math.floor(Math.log(b)/Math.log(2)+1),callback:y,tracker:new ve(_*v,99),index:0,x:0,y:0};yield*function*walkHilbert(_,v){if(_.level<1)return;_.tracker.shouldNotify(_.index)&&(yield{progress:_.tracker.progress});switch(_.level--,v){case 2:yield*walkHilbert(_,1),visit(_,3),yield*walkHilbert(_,2),visit(_,4),yield*walkHilbert(_,2),visit(_,2),yield*walkHilbert(_,4);break;case 3:yield*walkHilbert(_,4),visit(_,2),yield*walkHilbert(_,3),visit(_,1),yield*walkHilbert(_,3),visit(_,3),yield*walkHilbert(_,1);break;case 1:yield*walkHilbert(_,2),visit(_,4),yield*walkHilbert(_,1),visit(_,3),yield*walkHilbert(_,1),visit(_,1),yield*walkHilbert(_,3);break;case 4:yield*walkHilbert(_,3),visit(_,1),yield*walkHilbert(_,4),visit(_,2),yield*walkHilbert(_,4),visit(_,4),yield*walkHilbert(_,2)}_.level++}(x,1),visit(x,0)}function visit(_,v){switch(_.x>=0&&_.x<_.width&&_.y>=0&&_.y<_.height&&(_.callback(_.x,_.y),_.index++),v){case 2:_.x--;break;case 3:_.x++;break;case 1:_.y--;break;case 4:_.y++}}var Ue=class extends Le{constructor(_,v=16,y=1){super(),__publicField(this,"_distance"),__publicField(this,"_weights"),__publicField(this,"_errorQueueSize"),this._distance=_,this._errorQueueSize=v,this._weights=Ue._createWeights(y,v)}*quantize(_,v){const y=_.getPointArray(),b=_.getWidth(),x=_.getHeight(),T=[];let I=0;for(let _=0;_<this._errorQueueSize;_++)T[_]={r:0,g:0,b:0,a:0};yield*hilbertCurve(b,x,(_,x)=>{const S=y[_+x*b];let{r:M,g:A,b:P,a:O}=S;for(let _=0;_<this._errorQueueSize;_++){const v=this._weights[_],y=T[(_+I)%this._errorQueueSize];M+=y.r*v,A+=y.g*v,P+=y.b*v,O+=y.a*v}const k=pe.createByRGBA(inRange0to255Rounded(M),inRange0to255Rounded(A),inRange0to255Rounded(P),inRange0to255Rounded(O)),R=v.getNearestColor(this._distance,k);I=(I+1)%this._errorQueueSize;const L=(I+this._errorQueueSize-1)%this._errorQueueSize;T[L].r=S.r-R.r,T[L].g=S.g-R.g,T[L].b=S.b-R.b,T[L].a=S.a-R.a,S.from(R)}),yield{pointContainer:_,progress:100}}static _createWeights(_,v){const y=[],b=Math.exp(Math.log(v)/(v-1));for(let x=0,T=1;x<v;x++)y[x]=(T+.5|0)/v*_,T*=b;return y}},ze={};__export(ze,{ssim:()=>ssim});function ssim(_,v){if(_.getHeight()!==v.getHeight()||_.getWidth()!==v.getWidth())throw new Error("Images have different sizes!");const y=(.01*255)**2,b=(.03*255)**2;let x=0,T=0;return function iterate(_,v,y){const b=_.getWidth(),x=_.getHeight();for(let T=0;T<x;T+=8)for(let I=0;I<b;I+=8){const S=Math.min(8,b-I),M=Math.min(8,x-T),A=calculateLumaValuesForWindow(_,I,T,S,M),P=calculateLumaValuesForWindow(v,I,T,S,M),O=calculateAverageLuma(A),k=calculateAverageLuma(P);y(A,P,O,k)}}(_,v,(_,v,I,S)=>{let M=0,A=0,P=0;for(let y=0;y<_.length;y++)A+=(_[y]-I)**2,P+=(v[y]-S)**2,M+=(_[y]-I)*(v[y]-S);const O=_.length-1;A/=O,P/=O,M/=O;T+=(2*I*S+y)*(2*M+b)/((I**2+S**2+y)*(A+P+b)),x++}),T/x}function calculateLumaValuesForWindow(_,v,y,b,x){const T=_.getPointArray(),I=[];let S=0;for(let M=y;M<y+x;M++){const y=M*_.getWidth();for(let _=v;_<v+b;_++){const v=T[y+_];I[S]=.2126*v.r+.7152*v.g+.0722*v.b,S++}}return I}function calculateAverageLuma(_){let v=0;for(const y of _)v+=y;return v/_.length}var Ge="function"==typeof setImmediate?setImmediate:"undefined"!=typeof process&&"function"==typeof(null==process?void 0:process.nextTick)?_=>process.nextTick(_):_=>setTimeout(_,0);function buildPaletteSync(_,{colorDistanceFormula:v,paletteQuantization:y,colors:b}={}){const x=paletteQuantizationToPaletteQuantizer(colorDistanceFormulaToColorDistance(v),y,b);return _.forEach(_=>x.sample(_)),x.quantizeSync()}async function buildPalette(_,{colorDistanceFormula:v,paletteQuantization:y,colors:b,onProgress:x}={}){return new Promise((T,I)=>{const S=paletteQuantizationToPaletteQuantizer(colorDistanceFormulaToColorDistance(v),y,b);let M;_.forEach(_=>S.sample(_));const A=S.quantize(),next=()=>{try{const _=A.next();_.done?T(M):(_.value.palette&&(M=_.value.palette),x&&x(_.value.progress),Ge(next))}catch(_){I(_)}};Ge(next)})}function applyPaletteSync(_,v,{colorDistanceFormula:y,imageQuantization:b}={}){return imageQuantizationToImageQuantizer(colorDistanceFormulaToColorDistance(y),b).quantizeSync(_,v)}async function applyPalette(_,v,{colorDistanceFormula:y,imageQuantization:b,onProgress:x}={}){return new Promise((T,I)=>{let S;const M=imageQuantizationToImageQuantizer(colorDistanceFormulaToColorDistance(y),b).quantize(_,v),next=()=>{try{const _=M.next();_.done?T(S):(_.value.pointContainer&&(S=_.value.pointContainer),x&&x(_.value.progress),Ge(next))}catch(_){I(_)}};Ge(next)})}function colorDistanceFormulaToColorDistance(_="euclidean-bt709"){switch(_){case"cie94-graphic-arts":return new z;case"cie94-textiles":return new U;case"ciede2000":return new H;case"color-metric":return new V;case"euclidean":return new K;case"euclidean-bt709":return new ee;case"euclidean-bt709-noalpha":return new re;case"manhattan":return new ne;case"manhattan-bt709":return new oe;case"manhattan-nommyde":return new ae;case"pngquant":return new se;default:throw new Error("Unknown colorDistanceFormula "+_)}}function imageQuantizationToImageQuantizer(_,v="floyd-steinberg"){switch(v){case"nearest":return new Be(_);case"riemersma":return new Ue(_);case"floyd-steinberg":return new Fe(_,0);case"false-floyd-steinberg":return new Fe(_,1);case"stucki":return new Fe(_,2);case"atkinson":return new Fe(_,3);case"jarvis":return new Fe(_,4);case"burkes":return new Fe(_,5);case"sierra":return new Fe(_,6);case"two-sierra":return new Fe(_,7);case"sierra-lite":return new Fe(_,8);default:throw new Error("Unknown imageQuantization "+v)}}function paletteQuantizationToPaletteQuantizer(_,v="wuquant",y=256){switch(v){case"neuquant":return new Ee(_,y);case"rgbquant":return new Oe(_,y);case"wuquant":return new Ne(_,y);case"neuquant-float":return new Ie(_,y);default:throw new Error("Unknown paletteQuantization "+v)}}_.exports=T(I)},8207:function(_){_.exports=function(){"use strict";function _typeof(_){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(_)}var _=/^\s+/,v=/\s+$/;function tinycolor(b,x){if(x=x||{},(b=b||"")instanceof tinycolor)return b;if(!(this instanceof tinycolor))return new tinycolor(b,x);var T=function inputToRGB(b){var x={r:0,g:0,b:0},T=1,I=null,M=null,A=null,P=!1,O=!1;return"string"==typeof b&&(b=function stringInputToObject(b){b=b.replace(_,"").replace(v,"").toLowerCase();var x,T=!1;if(y[b])b=y[b],T=!0;else if("transparent"==b)return{r:0,g:0,b:0,a:0,format:"name"};return(x=S.rgb.exec(b))?{r:x[1],g:x[2],b:x[3]}:(x=S.rgba.exec(b))?{r:x[1],g:x[2],b:x[3],a:x[4]}:(x=S.hsl.exec(b))?{h:x[1],s:x[2],l:x[3]}:(x=S.hsla.exec(b))?{h:x[1],s:x[2],l:x[3],a:x[4]}:(x=S.hsv.exec(b))?{h:x[1],s:x[2],v:x[3]}:(x=S.hsva.exec(b))?{h:x[1],s:x[2],v:x[3],a:x[4]}:(x=S.hex8.exec(b))?{r:parseIntFromHex(x[1]),g:parseIntFromHex(x[2]),b:parseIntFromHex(x[3]),a:convertHexToDecimal(x[4]),format:T?"name":"hex8"}:(x=S.hex6.exec(b))?{r:parseIntFromHex(x[1]),g:parseIntFromHex(x[2]),b:parseIntFromHex(x[3]),format:T?"name":"hex"}:(x=S.hex4.exec(b))?{r:parseIntFromHex(x[1]+""+x[1]),g:parseIntFromHex(x[2]+""+x[2]),b:parseIntFromHex(x[3]+""+x[3]),a:convertHexToDecimal(x[4]+""+x[4]),format:T?"name":"hex8"}:!!(x=S.hex3.exec(b))&&{r:parseIntFromHex(x[1]+""+x[1]),g:parseIntFromHex(x[2]+""+x[2]),b:parseIntFromHex(x[3]+""+x[3]),format:T?"name":"hex"}}(b)),"object"==_typeof(b)&&(isValidCSSUnit(b.r)&&isValidCSSUnit(b.g)&&isValidCSSUnit(b.b)?(x=function rgbToRgb(_,v,y){return{r:255*bound01(_,255),g:255*bound01(v,255),b:255*bound01(y,255)}}(b.r,b.g,b.b),P=!0,O="%"===String(b.r).substr(-1)?"prgb":"rgb"):isValidCSSUnit(b.h)&&isValidCSSUnit(b.s)&&isValidCSSUnit(b.v)?(I=convertToPercentage(b.s),M=convertToPercentage(b.v),x=function hsvToRgb(_,v,y){_=6*bound01(_,360),v=bound01(v,100),y=bound01(y,100);var b=Math.floor(_),x=_-b,T=y*(1-v),I=y*(1-x*v),S=y*(1-(1-x)*v),M=b%6;return{r:255*[y,I,T,T,S,y][M],g:255*[S,y,y,I,T,T][M],b:255*[T,T,S,y,y,I][M]}}(b.h,I,M),P=!0,O="hsv"):isValidCSSUnit(b.h)&&isValidCSSUnit(b.s)&&isValidCSSUnit(b.l)&&(I=convertToPercentage(b.s),A=convertToPercentage(b.l),x=function hslToRgb(_,v,y){var b,x,T;function hue2rgb(_,v,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?_+6*(v-_)*y:y<.5?v:y<2/3?_+(v-_)*(2/3-y)*6:_}if(_=bound01(_,360),v=bound01(v,100),y=bound01(y,100),0===v)b=x=T=y;else{var I=y<.5?y*(1+v):y+v-y*v,S=2*y-I;b=hue2rgb(S,I,_+1/3),x=hue2rgb(S,I,_),T=hue2rgb(S,I,_-1/3)}return{r:255*b,g:255*x,b:255*T}}(b.h,I,A),P=!0,O="hsl"),b.hasOwnProperty("a")&&(T=b.a)),T=boundAlpha(T),{ok:P,format:b.format||O,r:Math.min(255,Math.max(x.r,0)),g:Math.min(255,Math.max(x.g,0)),b:Math.min(255,Math.max(x.b,0)),a:T}}(b);this._originalInput=b,this._r=T.r,this._g=T.g,this._b=T.b,this._a=T.a,this._roundA=Math.round(100*this._a)/100,this._format=x.format||T.format,this._gradientType=x.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=T.ok}function rgbToHsl(_,v,y){_=bound01(_,255),v=bound01(v,255),y=bound01(y,255);var b,x,T=Math.max(_,v,y),I=Math.min(_,v,y),S=(T+I)/2;if(T==I)b=x=0;else{var M=T-I;switch(x=S>.5?M/(2-T-I):M/(T+I),T){case _:b=(v-y)/M+(v<y?6:0);break;case v:b=(y-_)/M+2;break;case y:b=(_-v)/M+4}b/=6}return{h:b,s:x,l:S}}function rgbToHsv(_,v,y){_=bound01(_,255),v=bound01(v,255),y=bound01(y,255);var b,x,T=Math.max(_,v,y),I=Math.min(_,v,y),S=T,M=T-I;if(x=0===T?0:M/T,T==I)b=0;else{switch(T){case _:b=(v-y)/M+(v<y?6:0);break;case v:b=(y-_)/M+2;break;case y:b=(_-v)/M+4}b/=6}return{h:b,s:x,v:S}}function rgbToHex(_,v,y,b){var x=[pad2(Math.round(_).toString(16)),pad2(Math.round(v).toString(16)),pad2(Math.round(y).toString(16))];return b&&x[0].charAt(0)==x[0].charAt(1)&&x[1].charAt(0)==x[1].charAt(1)&&x[2].charAt(0)==x[2].charAt(1)?x[0].charAt(0)+x[1].charAt(0)+x[2].charAt(0):x.join("")}function rgbaToArgbHex(_,v,y,b){return[pad2(convertDecimalToHex(b)),pad2(Math.round(_).toString(16)),pad2(Math.round(v).toString(16)),pad2(Math.round(y).toString(16))].join("")}function _desaturate(_,v){v=0===v?0:v||10;var y=tinycolor(_).toHsl();return y.s-=v/100,y.s=clamp01(y.s),tinycolor(y)}function _saturate(_,v){v=0===v?0:v||10;var y=tinycolor(_).toHsl();return y.s+=v/100,y.s=clamp01(y.s),tinycolor(y)}function _greyscale(_){return tinycolor(_).desaturate(100)}function _lighten(_,v){v=0===v?0:v||10;var y=tinycolor(_).toHsl();return y.l+=v/100,y.l=clamp01(y.l),tinycolor(y)}function _brighten(_,v){v=0===v?0:v||10;var y=tinycolor(_).toRgb();return y.r=Math.max(0,Math.min(255,y.r-Math.round(-v/100*255))),y.g=Math.max(0,Math.min(255,y.g-Math.round(-v/100*255))),y.b=Math.max(0,Math.min(255,y.b-Math.round(-v/100*255))),tinycolor(y)}function _darken(_,v){v=0===v?0:v||10;var y=tinycolor(_).toHsl();return y.l-=v/100,y.l=clamp01(y.l),tinycolor(y)}function _spin(_,v){var y=tinycolor(_).toHsl(),b=(y.h+v)%360;return y.h=b<0?360+b:b,tinycolor(y)}function _complement(_){var v=tinycolor(_).toHsl();return v.h=(v.h+180)%360,tinycolor(v)}function polyad(_,v){if(isNaN(v)||v<=0)throw new Error("Argument to polyad must be a positive number");for(var y=tinycolor(_).toHsl(),b=[tinycolor(_)],x=360/v,T=1;T<v;T++)b.push(tinycolor({h:(y.h+T*x)%360,s:y.s,l:y.l}));return b}function _splitcomplement(_){var v=tinycolor(_).toHsl(),y=v.h;return[tinycolor(_),tinycolor({h:(y+72)%360,s:v.s,l:v.l}),tinycolor({h:(y+216)%360,s:v.s,l:v.l})]}function _analogous(_,v,y){v=v||6,y=y||30;var b=tinycolor(_).toHsl(),x=360/y,T=[tinycolor(_)];for(b.h=(b.h-(x*v>>1)+720)%360;--v;)b.h=(b.h+x)%360,T.push(tinycolor(b));return T}function _monochromatic(_,v){v=v||6;for(var y=tinycolor(_).toHsv(),b=y.h,x=y.s,T=y.v,I=[],S=1/v;v--;)I.push(tinycolor({h:b,s:x,v:T})),T=(T+S)%1;return I}tinycolor.prototype={isDark:function isDark(){return this.getBrightness()<128},isLight:function isLight(){return!this.isDark()},isValid:function isValid(){return this._ok},getOriginalInput:function getOriginalInput(){return this._originalInput},getFormat:function getFormat(){return this._format},getAlpha:function getAlpha(){return this._a},getBrightness:function getBrightness(){var _=this.toRgb();return(299*_.r+587*_.g+114*_.b)/1e3},getLuminance:function getLuminance(){var _,v,y,b=this.toRgb();return _=b.r/255,v=b.g/255,y=b.b/255,.2126*(_<=.03928?_/12.92:Math.pow((_+.055)/1.055,2.4))+.7152*(v<=.03928?v/12.92:Math.pow((v+.055)/1.055,2.4))+.0722*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))},setAlpha:function setAlpha(_){return this._a=boundAlpha(_),this._roundA=Math.round(100*this._a)/100,this},toHsv:function toHsv(){var _=rgbToHsv(this._r,this._g,this._b);return{h:360*_.h,s:_.s,v:_.v,a:this._a}},toHsvString:function toHsvString(){var _=rgbToHsv(this._r,this._g,this._b),v=Math.round(360*_.h),y=Math.round(100*_.s),b=Math.round(100*_.v);return 1==this._a?"hsv("+v+", "+y+"%, "+b+"%)":"hsva("+v+", "+y+"%, "+b+"%, "+this._roundA+")"},toHsl:function toHsl(){var _=rgbToHsl(this._r,this._g,this._b);return{h:360*_.h,s:_.s,l:_.l,a:this._a}},toHslString:function toHslString(){var _=rgbToHsl(this._r,this._g,this._b),v=Math.round(360*_.h),y=Math.round(100*_.s),b=Math.round(100*_.l);return 1==this._a?"hsl("+v+", "+y+"%, "+b+"%)":"hsla("+v+", "+y+"%, "+b+"%, "+this._roundA+")"},toHex:function toHex(_){return rgbToHex(this._r,this._g,this._b,_)},toHexString:function toHexString(_){return"#"+this.toHex(_)},toHex8:function toHex8(_){return function rgbaToHex(_,v,y,b,x){var T=[pad2(Math.round(_).toString(16)),pad2(Math.round(v).toString(16)),pad2(Math.round(y).toString(16)),pad2(convertDecimalToHex(b))];return x&&T[0].charAt(0)==T[0].charAt(1)&&T[1].charAt(0)==T[1].charAt(1)&&T[2].charAt(0)==T[2].charAt(1)&&T[3].charAt(0)==T[3].charAt(1)?T[0].charAt(0)+T[1].charAt(0)+T[2].charAt(0)+T[3].charAt(0):T.join("")}(this._r,this._g,this._b,this._a,_)},toHex8String:function toHex8String(_){return"#"+this.toHex8(_)},toRgb:function toRgb(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function toRgbString(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function toPercentageRgb(){return{r:Math.round(100*bound01(this._r,255))+"%",g:Math.round(100*bound01(this._g,255))+"%",b:Math.round(100*bound01(this._b,255))+"%",a:this._a}},toPercentageRgbString:function toPercentageRgbString(){return 1==this._a?"rgb("+Math.round(100*bound01(this._r,255))+"%, "+Math.round(100*bound01(this._g,255))+"%, "+Math.round(100*bound01(this._b,255))+"%)":"rgba("+Math.round(100*bound01(this._r,255))+"%, "+Math.round(100*bound01(this._g,255))+"%, "+Math.round(100*bound01(this._b,255))+"%, "+this._roundA+")"},toName:function toName(){return 0===this._a?"transparent":!(this._a<1)&&(b[rgbToHex(this._r,this._g,this._b,!0)]||!1)},toFilter:function toFilter(_){var v="#"+rgbaToArgbHex(this._r,this._g,this._b,this._a),y=v,b=this._gradientType?"GradientType = 1, ":"";if(_){var x=tinycolor(_);y="#"+rgbaToArgbHex(x._r,x._g,x._b,x._a)}return"progid:DXImageTransform.Microsoft.gradient("+b+"startColorstr="+v+",endColorstr="+y+")"},toString:function toString(_){var v=!!_;_=_||this._format;var y=!1,b=this._a<1&&this._a>=0;return v||!b||"hex"!==_&&"hex6"!==_&&"hex3"!==_&&"hex4"!==_&&"hex8"!==_&&"name"!==_?("rgb"===_&&(y=this.toRgbString()),"prgb"===_&&(y=this.toPercentageRgbString()),"hex"!==_&&"hex6"!==_||(y=this.toHexString()),"hex3"===_&&(y=this.toHexString(!0)),"hex4"===_&&(y=this.toHex8String(!0)),"hex8"===_&&(y=this.toHex8String()),"name"===_&&(y=this.toName()),"hsl"===_&&(y=this.toHslString()),"hsv"===_&&(y=this.toHsvString()),y||this.toHexString()):"name"===_&&0===this._a?this.toName():this.toRgbString()},clone:function clone(){return tinycolor(this.toString())},_applyModification:function _applyModification(_,v){var y=_.apply(null,[this].concat([].slice.call(v)));return this._r=y._r,this._g=y._g,this._b=y._b,this.setAlpha(y._a),this},lighten:function lighten(){return this._applyModification(_lighten,arguments)},brighten:function brighten(){return this._applyModification(_brighten,arguments)},darken:function darken(){return this._applyModification(_darken,arguments)},desaturate:function desaturate(){return this._applyModification(_desaturate,arguments)},saturate:function saturate(){return this._applyModification(_saturate,arguments)},greyscale:function greyscale(){return this._applyModification(_greyscale,arguments)},spin:function spin(){return this._applyModification(_spin,arguments)},_applyCombination:function _applyCombination(_,v){return _.apply(null,[this].concat([].slice.call(v)))},analogous:function analogous(){return this._applyCombination(_analogous,arguments)},complement:function complement(){return this._applyCombination(_complement,arguments)},monochromatic:function monochromatic(){return this._applyCombination(_monochromatic,arguments)},splitcomplement:function splitcomplement(){return this._applyCombination(_splitcomplement,arguments)},triad:function triad(){return this._applyCombination(polyad,[3])},tetrad:function tetrad(){return this._applyCombination(polyad,[4])}},tinycolor.fromRatio=function(_,v){if("object"==_typeof(_)){var y={};for(var b in _)_.hasOwnProperty(b)&&(y[b]="a"===b?_[b]:convertToPercentage(_[b]));_=y}return tinycolor(_,v)},tinycolor.equals=function(_,v){return!(!_||!v)&&tinycolor(_).toRgbString()==tinycolor(v).toRgbString()},tinycolor.random=function(){return tinycolor.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},tinycolor.mix=function(_,v,y){y=0===y?0:y||50;var b=tinycolor(_).toRgb(),x=tinycolor(v).toRgb(),T=y/100;return tinycolor({r:(x.r-b.r)*T+b.r,g:(x.g-b.g)*T+b.g,b:(x.b-b.b)*T+b.b,a:(x.a-b.a)*T+b.a})},tinycolor.readability=function(_,v){var y=tinycolor(_),b=tinycolor(v);return(Math.max(y.getLuminance(),b.getLuminance())+.05)/(Math.min(y.getLuminance(),b.getLuminance())+.05)},tinycolor.isReadable=function(_,v,y){var b,x,T=tinycolor.readability(_,v);switch(x=!1,(b=function validateWCAG2Parms(_){var v,y;return v=((_=_||{level:"AA",size:"small"}).level||"AA").toUpperCase(),y=(_.size||"small").toLowerCase(),"AA"!==v&&"AAA"!==v&&(v="AA"),"small"!==y&&"large"!==y&&(y="small"),{level:v,size:y}}(y)).level+b.size){case"AAsmall":case"AAAlarge":x=T>=4.5;break;case"AAlarge":x=T>=3;break;case"AAAsmall":x=T>=7}return x},tinycolor.mostReadable=function(_,v,y){var b,x,T,I,S=null,M=0;x=(y=y||{}).includeFallbackColors,T=y.level,I=y.size;for(var A=0;A<v.length;A++)(b=tinycolor.readability(_,v[A]))>M&&(M=b,S=tinycolor(v[A]));return tinycolor.isReadable(_,S,{level:T,size:I})||!x?S:(y.includeFallbackColors=!1,tinycolor.mostReadable(_,["#fff","#000"],y))};var y=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},b=tinycolor.hexNames=function flip(_){var v={};for(var y in _)_.hasOwnProperty(y)&&(v[_[y]]=y);return v}(y);function boundAlpha(_){return _=parseFloat(_),(isNaN(_)||_<0||_>1)&&(_=1),_}function bound01(_,v){(function isOnePointZero(_){return"string"==typeof _&&-1!=_.indexOf(".")&&1===parseFloat(_)})(_)&&(_="100%");var y=function isPercentage(_){return"string"==typeof _&&-1!=_.indexOf("%")}(_);return _=Math.min(v,Math.max(0,parseFloat(_))),y&&(_=parseInt(_*v,10)/100),Math.abs(_-v)<1e-6?1:_%v/parseFloat(v)}function clamp01(_){return Math.min(1,Math.max(0,_))}function parseIntFromHex(_){return parseInt(_,16)}function pad2(_){return 1==_.length?"0"+_:""+_}function convertToPercentage(_){return _<=1&&(_=100*_+"%"),_}function convertDecimalToHex(_){return Math.round(255*parseFloat(_)).toString(16)}function convertHexToDecimal(_){return parseIntFromHex(_)/255}var x,T,I,S=(T="[\\s|\\(]+("+(x="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+x+")[,|\\s]+("+x+")\\s*\\)?",I="[\\s|\\(]+("+x+")[,|\\s]+("+x+")[,|\\s]+("+x+")[,|\\s]+("+x+")\\s*\\)?",{CSS_UNIT:new RegExp(x),rgb:new RegExp("rgb"+T),rgba:new RegExp("rgba"+I),hsl:new RegExp("hsl"+T),hsla:new RegExp("hsla"+I),hsv:new RegExp("hsv"+T),hsva:new RegExp("hsva"+I),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function isValidCSSUnit(_){return!!S.CSS_UNIT.exec(_)}return tinycolor}()},5799:_=>{"use strict";_.exports=JSON.parse('{"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomsvc+xml":["atomsvc"],"application/bdoc":["bdoc"],"application/ccxml+xml":["ccxml"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/font-tdpfr":["pfr"],"application/font-woff":[],"application/font-woff2":[],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/prs.cww":["cww"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":[],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":[],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":[],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":[],"application/x-msdownload":["com","bat"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["wmf","emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":[],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"application/xaml+xml":["xaml"],"application/xcap-diff+xml":["xdf"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":[],"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mp3":[],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/wav":["wav"],"audio/wave":[],"audio/webm":["weba"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":[],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":[],"audio/x-wav":[],"audio/xm":["xm"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/apng":["apng"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/g3fax":["g3"],"image/gif":["gif"],"image/ief":["ief"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/ktx":["ktx"],"image/png":["png"],"image/prs.btif":["btif"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/tiff":["tiff","tif"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":[],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/webp":["webp"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":[],"image/x-pcx":["pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/rfc822":["eml","mime"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.vtu":["vtu"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["x3db","x3dbz"],"model/x3d+vrml":["x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/hjson":["hjson"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/prs.lines.tag":["dsc"],"text/richtext":["rtx"],"text/rtf":[],"text/sgml":["sgml","sgm"],"text/slim":["slim","slm"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/vtt":["vtt"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":[],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"text/xml":[],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/webm":["webm"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}')}},__webpack_module_cache__={};function __webpack_require__(_){var v=__webpack_module_cache__[_];if(void 0!==v)return v.exports;var y=__webpack_module_cache__[_]={exports:{}};return __webpack_modules__[_].call(y.exports,y,y.exports,__webpack_require__),y.exports}__webpack_require__.o=(_,v)=>Object.prototype.hasOwnProperty.call(_,v);var __webpack_exports__=__webpack_require__(112);module.exports=__webpack_exports__})();
//# sourceMappingURL=extension.js.map